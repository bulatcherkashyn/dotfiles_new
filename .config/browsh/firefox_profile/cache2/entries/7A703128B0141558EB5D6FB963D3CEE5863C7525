"use strict";function phi4z(a,b,c,d,e,f,g,h,i){var j,k,l,m,n,o,p,q,r,s;for(i=f,s=1;s<=15;s++)if(j=Math.sin(i),l=Math.tan(i),h=l*Math.sqrt(1-a*j*j),k=Math.sin(2*i),m=b*i-c*k+d*Math.sin(4*i)-e*Math.sin(6*i),n=b-2*c*Math.cos(2*i)+4*d*Math.cos(4*i)-6*e*Math.cos(6*i),o=2*m+h*(m*m+g)-2*f*(h*m+1),p=a*k*(m*m+g-2*f*m)/(2*h),q=2*(f-m)*(h*n-2/k)-2*n,r=o/(p+q),i+=r,Math.abs(r)<=1e-10)return i;return Proj4js.reportError("phi4z: No convergence"),null}function e4fn(a){var b,c;return b=1+a,c=1-a,Math.sqrt(Math.pow(b,b)*Math.pow(c,c))}var ytApp=angular.module("ytApp",["ui.router","ngAnimate","ngCookies","ngMessages","ngResource","angularSpinner","ui.bootstrap","focus-if","ngtweet","ngTagsInput","markdownProsemirror","ngFileUpload","ngSanitize","markdown","ezfb"]).constant("_",window._).run(["$rootScope",function(a){a._=window._}]);ytApp.config(["$stateProvider","ezfbProvider",function(a,b){var c="/api/fragments?name=";a.state("widgets-box1-state1",{views:{"widgets-box1":{templateUrl:c+"widgets/box1/_state1"}}}),a.state("widgets-box1-state2",{views:{"widgets-box1":{templateUrl:c+"widgets/box1/_state2"}}}),a.state("widgets-box2-state1",{views:{"widgets-box2":{templateUrl:c+"widgets/box2/_state1"}}}),a.state("widgets-box2-state2",{views:{"widgets-box2":{templateUrl:c+"widgets/box2/_state2"}}}),b.setInitParams({appId:"1154070341396655"})}]);var Proj4js={defaultDatum:"WGS84",transform:function(a,b,c){if(!a.readyToUse)return this.reportError("Proj4js initialization for:"+a.srsCode+" not yet complete"),c;if(!b.readyToUse)return this.reportError("Proj4js initialization for:"+b.srsCode+" not yet complete"),c;if(a.datum&&b.datum&&((a.datum.datum_type==Proj4js.common.PJD_3PARAM||a.datum.datum_type==Proj4js.common.PJD_7PARAM)&&"WGS84"!=b.datumCode||(b.datum.datum_type==Proj4js.common.PJD_3PARAM||b.datum.datum_type==Proj4js.common.PJD_7PARAM)&&"WGS84"!=a.datumCode)){var d=Proj4js.WGS84;this.transform(a,d,c),a=d}return"enu"!=a.axis&&this.adjust_axis(a,!1,c),"longlat"==a.projName?(c.x*=Proj4js.common.D2R,c.y*=Proj4js.common.D2R):(a.to_meter&&(c.x*=a.to_meter,c.y*=a.to_meter),a.inverse(c)),a.from_greenwich&&(c.x+=a.from_greenwich),c=this.datum_transform(a.datum,b.datum,c),b.from_greenwich&&(c.x-=b.from_greenwich),"longlat"==b.projName?(c.x*=Proj4js.common.R2D,c.y*=Proj4js.common.R2D):(b.forward(c),b.to_meter&&(c.x/=b.to_meter,c.y/=b.to_meter)),"enu"!=b.axis&&this.adjust_axis(b,!0,c),c},datum_transform:function(a,b,c){return a.compare_datums(b)?c:a.datum_type==Proj4js.common.PJD_NODATUM||b.datum_type==Proj4js.common.PJD_NODATUM?c:(a.es==b.es&&a.a==b.a&&a.datum_type!=Proj4js.common.PJD_3PARAM&&a.datum_type!=Proj4js.common.PJD_7PARAM&&b.datum_type!=Proj4js.common.PJD_3PARAM&&b.datum_type!=Proj4js.common.PJD_7PARAM||(a.geodetic_to_geocentric(c),a.datum_type!=Proj4js.common.PJD_3PARAM&&a.datum_type!=Proj4js.common.PJD_7PARAM||a.geocentric_to_wgs84(c),b.datum_type!=Proj4js.common.PJD_3PARAM&&b.datum_type!=Proj4js.common.PJD_7PARAM||b.geocentric_from_wgs84(c),b.geocentric_to_geodetic(c)),c)},adjust_axis:function(a,b,c){for(var d,e,f=c.x,g=c.y,h=c.z||0,i=0;i<3;i++)if(!b||2!=i||void 0!==c.z)switch(0==i?(d=f,e="x"):1==i?(d=g,e="y"):(d=h,e="z"),a.axis[i]){case"e":c[e]=d;break;case"w":c[e]=-d;break;case"n":c[e]=d;break;case"s":c[e]=-d;break;case"u":void 0!==c[e]&&(c.z=d);break;case"d":void 0!==c[e]&&(c.z=-d);break;default:return alert("ERROR: unknow axis ("+a.axis[i]+") - check definition of "+a.projName),null}return c},reportError:function(a){},extend:function(a,b){if(a=a||{},b)for(var c in b){var d=b[c];void 0!==d&&(a[c]=d)}return a},Class:function(){for(var a,b=function(){this.initialize.apply(this,arguments)},c={},d=0;d<arguments.length;++d)a="function"==typeof arguments[d]?arguments[d].prototype:arguments[d],Proj4js.extend(c,a);return b.prototype=c,b},bind:function(a,b){var c=Array.prototype.slice.apply(arguments,[2]);return function(){var d=c.concat(Array.prototype.slice.apply(arguments,[0]));return a.apply(b,d)}},scriptName:"proj4js-combined.js",defsLookupService:"http://spatialreference.org/ref",libPath:null,getScriptLocation:function(){if(this.libPath)return this.libPath;for(var a=this.scriptName,b=a.length,c=document.getElementsByTagName("script"),d=0;d<c.length;d++){var e=c[d].getAttribute("src");if(e){var f=e.lastIndexOf(a);if(f>-1&&f+b==e.length){this.libPath=e.slice(0,-b);break}}}return this.libPath||""},loadScript:function(a,b,c,d){var e=document.createElement("script");e.defer=!1,e.type="text/javascript",e.id=a,e.src=a,e.onload=b,e.onerror=c,e.loadCheck=d,/MSIE/.test(navigator.userAgent)&&(e.onreadystatechange=this.checkReadyState),document.getElementsByTagName("head")[0].appendChild(e)},checkReadyState:function(){"loaded"==this.readyState&&(this.loadCheck()?this.onload():this.onerror())}};Proj4js.Proj=Proj4js.Class({readyToUse:!1,title:null,projName:null,units:null,datum:null,x0:0,y0:0,localCS:!1,queue:null,initialize:function(a,b){if(this.srsCodeInput=a,this.queue=[],b&&this.queue.push(b),a.indexOf("GEOGCS")>=0||a.indexOf("GEOCCS")>=0||a.indexOf("PROJCS")>=0||a.indexOf("LOCAL_CS")>=0)return this.parseWKT(a),this.deriveConstants(),void this.loadProjCode(this.projName);if(0==a.indexOf("urn:")){var c=a.split(":");"ogc"!=c[1]&&"x-ogc"!=c[1]||"def"!=c[2]||"crs"!=c[3]||(a=c[4]+":"+c[c.length-1])}else if(0==a.indexOf("http://")){var d=a.split("#");d[0].match(/epsg.org/)?a="EPSG:"+d[1]:d[0].match(/RIG.xml/)&&(a="IGNF:"+d[1])}this.srsCode=a.toUpperCase(),0==this.srsCode.indexOf("EPSG")?(this.srsCode=this.srsCode,this.srsAuth="epsg",this.srsProjNumber=this.srsCode.substring(5)):0==this.srsCode.indexOf("IGNF")?(this.srsCode=this.srsCode,this.srsAuth="IGNF",this.srsProjNumber=this.srsCode.substring(5)):0==this.srsCode.indexOf("CRS")?(this.srsCode=this.srsCode,this.srsAuth="CRS",this.srsProjNumber=this.srsCode.substring(4)):(this.srsAuth="",this.srsProjNumber=this.srsCode),this.loadProjDefinition()},loadProjDefinition:function(){if(Proj4js.defs[this.srsCode])return void this.defsLoaded();var a=Proj4js.getScriptLocation()+"defs/"+this.srsAuth.toUpperCase()+this.srsProjNumber+".js";Proj4js.loadScript(a,Proj4js.bind(this.defsLoaded,this),Proj4js.bind(this.loadFromService,this),Proj4js.bind(this.checkDefsLoaded,this))},loadFromService:function(){var a=Proj4js.defsLookupService+"/"+this.srsAuth+"/"+this.srsProjNumber+"/proj4js/";Proj4js.loadScript(a,Proj4js.bind(this.defsLoaded,this),Proj4js.bind(this.defsFailed,this),Proj4js.bind(this.checkDefsLoaded,this))},defsLoaded:function(){this.parseDefs(),this.loadProjCode(this.projName)},checkDefsLoaded:function(){return!!Proj4js.defs[this.srsCode]},defsFailed:function(){Proj4js.reportError("failed to load projection definition for: "+this.srsCode),Proj4js.defs[this.srsCode]=Proj4js.defs.WGS84,this.defsLoaded()},loadProjCode:function(a){if(Proj4js.Proj[a])return void this.initTransforms();var b=Proj4js.getScriptLocation()+"projCode/"+a+".js";Proj4js.loadScript(b,Proj4js.bind(this.loadProjCodeSuccess,this,a),Proj4js.bind(this.loadProjCodeFailure,this,a),Proj4js.bind(this.checkCodeLoaded,this,a))},loadProjCodeSuccess:function(a){Proj4js.Proj[a].dependsOn?this.loadProjCode(Proj4js.Proj[a].dependsOn):this.initTransforms()},loadProjCodeFailure:function(a){Proj4js.reportError("failed to find projection file for: "+a)},checkCodeLoaded:function(a){return!!Proj4js.Proj[a]},initTransforms:function(){if(Proj4js.extend(this,Proj4js.Proj[this.projName]),this.init(),this.readyToUse=!0,this.queue)for(var a;a=this.queue.shift();)a.call(this,this)},wktRE:/^(\w+)\[(.*)\]$/,parseWKT:function(a){var b=a.match(this.wktRE);if(b){var c,d=b[1],e=b[2],f=e.split(",");c="TOWGS84"==d.toUpperCase()?d:f.shift(),c=c.replace(/^\"/,""),c=c.replace(/\"$/,"");for(var g=new Array,h=0,i="",j=0;j<f.length;++j){for(var k=f[j],l=0;l<k.length;++l)"["==k.charAt(l)&&++h,"]"==k.charAt(l)&&--h;i+=k,0===h?(g.push(i),i=""):i+=","}switch(d){case"LOCAL_CS":this.projName="identity",this.localCS=!0,this.srsCode=c;break;case"GEOGCS":this.projName="longlat",this.geocsCode=c,this.srsCode||(this.srsCode=c);break;case"PROJCS":this.srsCode=c;break;case"GEOCCS":break;case"PROJECTION":this.projName=Proj4js.wktProjections[c];break;case"DATUM":this.datumName=c;break;case"LOCAL_DATUM":this.datumCode="none";break;case"SPHEROID":this.ellps=c,this.a=parseFloat(g.shift()),this.rf=parseFloat(g.shift());break;case"PRIMEM":this.from_greenwich=parseFloat(g.shift());break;case"UNIT":this.units=c,this.unitsPerMeter=parseFloat(g.shift());break;case"PARAMETER":var m=c.toLowerCase(),n=parseFloat(g.shift());switch(m){case"false_easting":this.x0=n;break;case"false_northing":this.y0=n;break;case"scale_factor":this.k0=n;break;case"central_meridian":this.long0=n*Proj4js.common.D2R;break;case"latitude_of_origin":this.lat0=n*Proj4js.common.D2R}break;case"TOWGS84":this.datum_params=g;break;case"AXIS":var m=c.toLowerCase(),n=g.shift();switch(n){case"EAST":n="e";break;case"WEST":n="w";break;case"NORTH":n="n";break;case"SOUTH":n="s";break;case"UP":n="u";break;case"DOWN":n="d";break;case"OTHER":default:n=" "}switch(this.axis||(this.axis="enu"),m){case"x":this.axis=n+this.axis.substr(1,2);break;case"y":this.axis=this.axis.substr(0,1)+n+this.axis.substr(2,1);break;case"z":this.axis=this.axis.substr(0,2)+n}}for(var j=0;j<g.length;++j)this.parseWKT(g[j])}},parseDefs:function(){this.defData=Proj4js.defs[this.srsCode];var a,b;if(this.defData){for(var c=this.defData.split("+"),d=0;d<c.length;d++){var e=c[d].split("=");switch(a=e[0].toLowerCase(),b=e[1],a.replace(/\s/gi,"")){case"":break;case"title":this.title=b;break;case"proj":this.projName=b.replace(/\s/gi,"");break;case"units":this.units=b.replace(/\s/gi,"");break;case"datum":this.datumCode=b.replace(/\s/gi,"");break;case"nadgrids":this.nagrids=b.replace(/\s/gi,"");break;case"ellps":this.ellps=b.replace(/\s/gi,"");break;case"a":this.a=parseFloat(b);break;case"b":this.b=parseFloat(b);break;case"rf":this.rf=parseFloat(b);break;case"lat_0":this.lat0=b*Proj4js.common.D2R;break;case"lat_1":this.lat1=b*Proj4js.common.D2R;break;case"lat_2":this.lat2=b*Proj4js.common.D2R;break;case"lat_ts":this.lat_ts=b*Proj4js.common.D2R;break;case"lon_0":this.long0=b*Proj4js.common.D2R;break;case"alpha":this.alpha=parseFloat(b)*Proj4js.common.D2R;break;case"lonc":this.longc=b*Proj4js.common.D2R;break;case"x_0":this.x0=parseFloat(b);break;case"y_0":this.y0=parseFloat(b);break;case"k_0":case"k":this.k0=parseFloat(b);break;case"r_a":this.R_A=!0;break;case"zone":this.zone=parseInt(b,10);break;case"south":this.utmSouth=!0;break;case"towgs84":this.datum_params=b.split(",");break;case"to_meter":this.to_meter=parseFloat(b);break;case"from_greenwich":this.from_greenwich=b*Proj4js.common.D2R;break;case"pm":b=b.replace(/\s/gi,""),this.from_greenwich=Proj4js.PrimeMeridian[b]?Proj4js.PrimeMeridian[b]:parseFloat(b),this.from_greenwich*=Proj4js.common.D2R;break;case"axis":b=b.replace(/\s/gi,"");var f="ewnsud";3==b.length&&-1!=f.indexOf(b.substr(0,1))&&-1!=f.indexOf(b.substr(1,1))&&-1!=f.indexOf(b.substr(2,1))&&(this.axis=b)}}this.deriveConstants()}},deriveConstants:function(){if("@null"==this.nagrids&&(this.datumCode="none"),this.datumCode&&"none"!=this.datumCode){var a=Proj4js.Datum[this.datumCode];a&&(this.datum_params=a.towgs84?a.towgs84.split(","):null,this.ellps=a.ellipse,this.datumName=a.datumName?a.datumName:this.datumCode)}if(!this.a){var b=Proj4js.Ellipsoid[this.ellps]?Proj4js.Ellipsoid[this.ellps]:Proj4js.Ellipsoid.WGS84;Proj4js.extend(this,b)}this.rf&&!this.b&&(this.b=(1-1/this.rf)*this.a),(0===this.rf||Math.abs(this.a-this.b)<Proj4js.common.EPSLN)&&(this.sphere=!0,this.b=this.a),this.a2=this.a*this.a,this.b2=this.b*this.b,this.es=(this.a2-this.b2)/this.a2,this.e=Math.sqrt(this.es),this.R_A&&(this.a*=1-this.es*(Proj4js.common.SIXTH+this.es*(Proj4js.common.RA4+this.es*Proj4js.common.RA6)),this.a2=this.a*this.a,this.b2=this.b*this.b,this.es=0),this.ep2=(this.a2-this.b2)/this.b2,this.k0||(this.k0=1),this.axis||(this.axis="enu"),this.datum=new Proj4js.datum(this)}}),Proj4js.Proj.longlat={init:function(){},forward:function(a){return a},inverse:function(a){return a}},Proj4js.Proj.identity=Proj4js.Proj.longlat,Proj4js.defs={WGS84:"+title=long/lat:WGS84 +proj=longlat +ellps=WGS84 +datum=WGS84 +units=degrees","EPSG:4326":"+title=long/lat:WGS84 +proj=longlat +a=6378137.0 +b=6356752.31424518 +ellps=WGS84 +datum=WGS84 +units=degrees","EPSG:4269":"+title=long/lat:NAD83 +proj=longlat +a=6378137.0 +b=6356752.31414036 +ellps=GRS80 +datum=NAD83 +units=degrees","EPSG:3875":"+title= Google Mercator +proj=merc +a=6378137 +b=6378137 +lat_ts=0.0 +lon_0=0.0 +x_0=0.0 +y_0=0 +k=1.0 +units=m +nadgrids=@null +no_defs"},Proj4js.defs["EPSG:3785"]=Proj4js.defs["EPSG:3875"],Proj4js.defs.GOOGLE=Proj4js.defs["EPSG:3875"],Proj4js.defs["EPSG:900913"]=Proj4js.defs["EPSG:3875"],Proj4js.defs["EPSG:102113"]=Proj4js.defs["EPSG:3875"],Proj4js.common={PI:3.141592653589793,HALF_PI:1.5707963267948966,TWO_PI:6.283185307179586,FORTPI:.7853981633974483,R2D:57.29577951308232,D2R:.017453292519943295,SEC_TO_RAD:484813681109536e-20,EPSLN:1e-10,MAX_ITER:20,COS_67P5:.3826834323650898,AD_C:1.0026,PJD_UNKNOWN:0,PJD_3PARAM:1,PJD_7PARAM:2,PJD_GRIDSHIFT:3,PJD_WGS84:4,PJD_NODATUM:5,SRS_WGS84_SEMIMAJOR:6378137,SIXTH:.16666666666666666,RA4:.04722222222222222,RA6:.022156084656084655,RV4:.06944444444444445,RV6:.04243827160493827,msfnz:function(a,b,c){var d=a*b;return c/Math.sqrt(1-d*d)},tsfnz:function(a,b,c){var d=a*c,e=.5*a;return d=Math.pow((1-d)/(1+d),e),Math.tan(.5*(this.HALF_PI-b))/d},phi2z:function(a,b){for(var c,d,e=.5*a,f=this.HALF_PI-2*Math.atan(b),g=0;g<=15;g++)if(c=a*Math.sin(f),d=this.HALF_PI-2*Math.atan(b*Math.pow((1-c)/(1+c),e))-f,f+=d,Math.abs(d)<=1e-10)return f;return alert("phi2z has NoConvergence"),-9999},qsfnz:function(a,b){var c;return a>1e-7?(c=a*b,(1-a*a)*(b/(1-c*c)-.5/a*Math.log((1-c)/(1+c)))):2*b},asinz:function(a){return Math.abs(a)>1&&(a=a>1?1:-1),Math.asin(a)},e0fn:function(a){return 1-.25*a*(1+a/16*(3+1.25*a))},e1fn:function(a){return.375*a*(1+.25*a*(1+.46875*a))},e2fn:function(a){return.05859375*a*a*(1+.75*a)},e3fn:function(a){return a*a*a*(35/3072)},mlfn:function(a,b,c,d,e){return a*e-b*Math.sin(2*e)+c*Math.sin(4*e)-d*Math.sin(6*e)},srat:function(a,b){return Math.pow((1-a)/(1+a),b)},sign:function(a){return a<0?-1:1},adjust_lon:function(a){return a=Math.abs(a)<this.PI?a:a-this.sign(a)*this.TWO_PI},adjust_lat:function(a){return a=Math.abs(a)<this.HALF_PI?a:a-this.sign(a)*this.PI},latiso:function(a,b,c){if(Math.abs(b)>this.HALF_PI)return+Number.NaN;if(b==this.HALF_PI)return Number.POSITIVE_INFINITY;if(b==-1*this.HALF_PI)return-1*Number.POSITIVE_INFINITY;var d=a*c;return Math.log(Math.tan((this.HALF_PI+b)/2))+a*Math.log((1-d)/(1+d))/2},fL:function(a,b){return 2*Math.atan(a*Math.exp(b))-this.HALF_PI},invlatiso:function(a,b){var c=this.fL(1,b),d=0,e=0;do{d=c,e=a*Math.sin(d),c=this.fL(Math.exp(a*Math.log((1+e)/(1-e))/2),b)}while(Math.abs(c-d)>1e-12);return c},sinh:function(a){var b=Math.exp(a);return b=(b-1/b)/2},cosh:function(a){var b=Math.exp(a);return b=(b+1/b)/2},tanh:function(a){var b=Math.exp(a);return b=(b-1/b)/(b+1/b)},asinh:function(a){return(a>=0?1:-1)*Math.log(Math.abs(a)+Math.sqrt(a*a+1))},acosh:function(a){return 2*Math.log(Math.sqrt((a+1)/2)+Math.sqrt((a-1)/2))},atanh:function(a){return Math.log((a-1)/(a+1))/2},gN:function(a,b,c){var d=b*c;return a/Math.sqrt(1-d*d)},pj_enfn:function(a){var b=new Array;b[0]=this.C00-a*(this.C02+a*(this.C04+a*(this.C06+a*this.C08))),b[1]=a*(this.C22-a*(this.C04+a*(this.C06+a*this.C08)));var c=a*a;return b[2]=c*(this.C44-a*(this.C46+a*this.C48)),c*=a,b[3]=c*(this.C66-a*this.C68),b[4]=c*a*this.C88,b},pj_mlfn:function(a,b,c,d){return c*=b,b*=b,d[0]*a-c*(d[1]+b*(d[2]+b*(d[3]+b*d[4])))},pj_inv_mlfn:function(a,b,c){for(var d=1/(1-b),e=a,f=Proj4js.common.MAX_ITER;f;--f){var g=Math.sin(e),h=1-b*g*g;if(h=(this.pj_mlfn(e,g,Math.cos(e),c)-a)*(h*Math.sqrt(h))*d,e-=h,Math.abs(h)<Proj4js.common.EPSLN)return e}return Proj4js.reportError("cass:pj_inv_mlfn: Convergence error"),e},C00:1,C02:.25,C04:.046875,C06:.01953125,C08:.01068115234375,C22:.75,C44:.46875,C46:.013020833333333334,C48:.007120768229166667,C66:.3645833333333333,C68:.005696614583333333,C88:.3076171875},Proj4js.datum=Proj4js.Class({initialize:function(a){if(this.datum_type=Proj4js.common.PJD_WGS84,a.datumCode&&"none"==a.datumCode&&(this.datum_type=Proj4js.common.PJD_NODATUM),a&&a.datum_params){for(var b=0;b<a.datum_params.length;b++)a.datum_params[b]=parseFloat(a.datum_params[b]);0==a.datum_params[0]&&0==a.datum_params[1]&&0==a.datum_params[2]||(this.datum_type=Proj4js.common.PJD_3PARAM),a.datum_params.length>3&&(0==a.datum_params[3]&&0==a.datum_params[4]&&0==a.datum_params[5]&&0==a.datum_params[6]||(this.datum_type=Proj4js.common.PJD_7PARAM,a.datum_params[3]*=Proj4js.common.SEC_TO_RAD,a.datum_params[4]*=Proj4js.common.SEC_TO_RAD,a.datum_params[5]*=Proj4js.common.SEC_TO_RAD,a.datum_params[6]=a.datum_params[6]/1e6+1))}a&&(this.a=a.a,this.b=a.b,this.es=a.es,this.ep2=a.ep2,this.datum_params=a.datum_params)},compare_datums:function(a){return this.datum_type==a.datum_type&&(!(this.a!=a.a||Math.abs(this.es-a.es)>5e-11)&&(this.datum_type==Proj4js.common.PJD_3PARAM?this.datum_params[0]==a.datum_params[0]&&this.datum_params[1]==a.datum_params[1]&&this.datum_params[2]==a.datum_params[2]:this.datum_type==Proj4js.common.PJD_7PARAM?this.datum_params[0]==a.datum_params[0]&&this.datum_params[1]==a.datum_params[1]&&this.datum_params[2]==a.datum_params[2]&&this.datum_params[3]==a.datum_params[3]&&this.datum_params[4]==a.datum_params[4]&&this.datum_params[5]==a.datum_params[5]&&this.datum_params[6]==a.datum_params[6]:this.datum_type!=Proj4js.common.PJD_GRIDSHIFT&&a.datum_type!=Proj4js.common.PJD_GRIDSHIFT||(alert("ERROR: Grid shift transformations are not implemented."),!1)))},geodetic_to_geocentric:function(a){var b,c,d,e,f,g,h,i=a.x,j=a.y,k=a.z?a.z:0,l=0;if(j<-Proj4js.common.HALF_PI&&j>-1.001*Proj4js.common.HALF_PI)j=-Proj4js.common.HALF_PI;else if(j>Proj4js.common.HALF_PI&&j<1.001*Proj4js.common.HALF_PI)j=Proj4js.common.HALF_PI;else if(j<-Proj4js.common.HALF_PI||j>Proj4js.common.HALF_PI)return Proj4js.reportError("geocent:lat out of range:"+j),null;return i>Proj4js.common.PI&&(i-=2*Proj4js.common.PI),f=Math.sin(j),h=Math.cos(j),g=f*f,e=this.a/Math.sqrt(1-this.es*g),b=(e+k)*h*Math.cos(i),c=(e+k)*h*Math.sin(i),d=(e*(1-this.es)+k)*f,a.x=b,a.y=c,a.z=d,l},geocentric_to_geodetic:function(a){var b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r=1e-12,s=r*r,t=30,u=a.x,v=a.y,w=a.z?a.z:0;if(!1,b=Math.sqrt(u*u+v*v),c=Math.sqrt(u*u+v*v+w*w),b/this.a<r){if(!0,o=0,c/this.a<r)return p=Proj4js.common.HALF_PI,void(q=-this.b)}else o=Math.atan2(v,u);d=w/c,e=b/c,f=1/Math.sqrt(1-this.es*(2-this.es)*e*e),i=e*(1-this.es)*f,j=d*f,n=0;do{n++,h=this.a/Math.sqrt(1-this.es*j*j),q=b*i+w*j-h*(1-this.es*j*j),g=this.es*h/(h+q),f=1/Math.sqrt(1-g*(2-g)*e*e),k=e*(1-g)*f,l=d*f,m=l*i-k*j,i=k,j=l}while(m*m>s&&n<t);return p=Math.atan(l/Math.abs(k)),a.x=o,a.y=p,a.z=q,a},geocentric_to_geodetic_noniter:function(a){var b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s=a.x,t=a.y,u=a.z?a.z:0;if(s=parseFloat(s),t=parseFloat(t),u=parseFloat(u),r=!1,0!=s)b=Math.atan2(t,s);else if(t>0)b=Proj4js.common.HALF_PI;else if(t<0)b=-Proj4js.common.HALF_PI;else if(r=!0,b=0,u>0)c=Proj4js.common.HALF_PI;else{if(!(u<0))return c=Proj4js.common.HALF_PI,void(d=-this.b);c=-Proj4js.common.HALF_PI}return f=s*s+t*t,e=Math.sqrt(f),g=u*Proj4js.common.AD_C,i=Math.sqrt(g*g+f),k=g/i,m=e/i,l=k*k*k,h=u+this.b*this.ep2*l,q=e-this.a*this.es*m*m*m,j=Math.sqrt(h*h+q*q),n=h/j,o=q/j,p=this.a/Math.sqrt(1-this.es*n*n),d=o>=Proj4js.common.COS_67P5?e/o-p:o<=-Proj4js.common.COS_67P5?e/-o-p:u/n+p*(this.es-1),0==r&&(c=Math.atan(n/o)),a.x=b,a.y=c,a.z=d,a},geocentric_to_wgs84:function(a){if(this.datum_type==Proj4js.common.PJD_3PARAM)a.x+=this.datum_params[0],a.y+=this.datum_params[1],a.z+=this.datum_params[2];else if(this.datum_type==Proj4js.common.PJD_7PARAM){var b=this.datum_params[0],c=this.datum_params[1],d=this.datum_params[2],e=this.datum_params[3],f=this.datum_params[4],g=this.datum_params[5],h=this.datum_params[6],i=h*(a.x-g*a.y+f*a.z)+b,j=h*(g*a.x+a.y-e*a.z)+c,k=h*(-f*a.x+e*a.y+a.z)+d;a.x=i,a.y=j,a.z=k}},geocentric_from_wgs84:function(a){if(this.datum_type==Proj4js.common.PJD_3PARAM)a.x-=this.datum_params[0],a.y-=this.datum_params[1],a.z-=this.datum_params[2];else if(this.datum_type==Proj4js.common.PJD_7PARAM){var b=this.datum_params[0],c=this.datum_params[1],d=this.datum_params[2],e=this.datum_params[3],f=this.datum_params[4],g=this.datum_params[5],h=this.datum_params[6],i=(a.x-b)/h,j=(a.y-c)/h,k=(a.z-d)/h;a.x=i+g*j-f*k,a.y=-g*i+j+e*k,a.z=f*i-e*j+k}}}),Proj4js.Point=Proj4js.Class({initialize:function(a,b,c){if("object"==typeof a)this.x=a[0],this.y=a[1],this.z=a[2]||0;else if("string"==typeof a&&void 0===b){var d=a.split(",");this.x=parseFloat(d[0]),this.y=parseFloat(d[1]),this.z=parseFloat(d[2])||0}else this.x=a,this.y=b,this.z=c||0},clone:function(){return new Proj4js.Point(this.x,this.y,this.z)},toString:function(){return"x="+this.x+",y="+this.y},toShortString:function(){return this.x+", "+this.y}}),Proj4js.PrimeMeridian={greenwich:0,lisbon:-9.131906111111,paris:2.337229166667,bogota:-74.080916666667,madrid:-3.687938888889,rome:12.452333333333,bern:7.439583333333,jakarta:106.807719444444,ferro:-17.666666666667,brussels:4.367975,stockholm:18.058277777778,athens:23.7163375,oslo:10.722916666667},Proj4js.Ellipsoid={MERIT:{a:6378137,rf:298.257,ellipseName:"MERIT 1983"},SGS85:{a:6378136,rf:298.257,ellipseName:"Soviet Geodetic System 85"},GRS80:{a:6378137,rf:298.257222101,ellipseName:"GRS 1980(IUGG, 1980)"},IAU76:{a:6378140,rf:298.257,ellipseName:"IAU 1976"},airy:{a:6377563.396,b:6356256.91,ellipseName:"Airy 1830"},"APL4.":{a:6378137,rf:298.25,ellipseName:"Appl. Physics. 1965"},NWL9D:{a:6378145,rf:298.25,ellipseName:"Naval Weapons Lab., 1965"},mod_airy:{a:6377340.189,b:6356034.446,ellipseName:"Modified Airy"},andrae:{a:6377104.43,rf:300,ellipseName:"Andrae 1876 (Den., Iclnd.)"},aust_SA:{a:6378160,rf:298.25,ellipseName:"Australian Natl & S. Amer. 1969"},GRS67:{a:6378160,rf:298.247167427,ellipseName:"GRS 67(IUGG 1967)"},bessel:{a:6377397.155,rf:299.1528128,ellipseName:"Bessel 1841"},bess_nam:{a:6377483.865,rf:299.1528128,ellipseName:"Bessel 1841 (Namibia)"},clrk66:{a:6378206.4,b:6356583.8,ellipseName:"Clarke 1866"},clrk80:{a:6378249.145,rf:293.4663,ellipseName:"Clarke 1880 mod."},CPM:{a:6375738.7,rf:334.29,ellipseName:"Comm. des Poids et Mesures 1799"},delmbr:{a:6376428,rf:311.5,ellipseName:"Delambre 1810 (Belgium)"},engelis:{a:6378136.05,rf:298.2566,ellipseName:"Engelis 1985"},evrst30:{a:6377276.345,rf:300.8017,ellipseName:"Everest 1830"},evrst48:{a:6377304.063,rf:300.8017,ellipseName:"Everest 1948"},evrst56:{a:6377301.243,rf:300.8017,ellipseName:"Everest 1956"},evrst69:{a:6377295.664,rf:300.8017,ellipseName:"Everest 1969"},evrstSS:{a:6377298.556,rf:300.8017,ellipseName:"Everest (Sabah & Sarawak)"},fschr60:{a:6378166,rf:298.3,ellipseName:"Fischer (Mercury Datum) 1960"},fschr60m:{a:6378155,rf:298.3,ellipseName:"Fischer 1960"},fschr68:{a:6378150,rf:298.3,ellipseName:"Fischer 1968"},helmert:{a:6378200,rf:298.3,ellipseName:"Helmert 1906"},hough:{a:6378270,rf:297,ellipseName:"Hough"},intl:{a:6378388,rf:297,ellipseName:"International 1909 (Hayford)"},kaula:{a:6378163,rf:298.24,ellipseName:"Kaula 1961"},lerch:{a:6378139,rf:298.257,ellipseName:"Lerch 1979"},mprts:{a:6397300,rf:191,ellipseName:"Maupertius 1738"},new_intl:{a:6378157.5,b:6356772.2,ellipseName:"New International 1967"},plessis:{a:6376523,rf:6355863,ellipseName:"Plessis 1817 (France)"},krass:{a:6378245,rf:298.3,ellipseName:"Krassovsky, 1942"},SEasia:{a:6378155,b:6356773.3205,ellipseName:"Southeast Asia"},walbeck:{a:6376896,b:6355834.8467,ellipseName:"Walbeck"},WGS60:{a:6378165,rf:298.3,ellipseName:"WGS 60"},WGS66:{a:6378145,rf:298.25,ellipseName:"WGS 66"},WGS72:{a:6378135,rf:298.26,ellipseName:"WGS 72"},WGS84:{a:6378137,rf:298.257223563,ellipseName:"WGS 84"},sphere:{a:6370997,b:6370997,ellipseName:"Normal Sphere (r=6370997)"}},Proj4js.Datum={WGS84:{towgs84:"0,0,0",ellipse:"WGS84",datumName:"WGS84"},GGRS87:{towgs84:"-199.87,74.79,246.62",ellipse:"GRS80",datumName:"Greek_Geodetic_Reference_System_1987"},NAD83:{towgs84:"0,0,0",ellipse:"GRS80",datumName:"North_American_Datum_1983"},NAD27:{nadgrids:"@conus,@alaska,@ntv2_0.gsb,@ntv1_can.dat",ellipse:"clrk66",datumName:"North_American_Datum_1927"},potsdam:{towgs84:"606.0,23.0,413.0",ellipse:"bessel",datumName:"Potsdam Rauenberg 1950 DHDN"},carthage:{towgs84:"-263.0,6.0,431.0",ellipse:"clark80",datumName:"Carthage 1934 Tunisia"},hermannskogel:{towgs84:"653.0,-212.0,449.0",ellipse:"bessel",datumName:"Hermannskogel"},ire65:{towgs84:"482.530,-130.596,564.557,-1.042,-0.214,-0.631,8.15",ellipse:"mod_airy",datumName:"Ireland 1965"},nzgd49:{towgs84:"59.47,-5.04,187.44,0.47,-0.1,1.024,-4.5993",ellipse:"intl",datumName:"New Zealand Geodetic Datum 1949"},OSGB36:{towgs84:"446.448,-125.157,542.060,0.1502,0.2470,0.8421,-20.4894",ellipse:"airy",datumName:"Airy 1830"}},Proj4js.WGS84=new Proj4js.Proj("WGS84"),Proj4js.Datum.OSB36=Proj4js.Datum.OSGB36,Proj4js.wktProjections={"Lambert Tangential Conformal Conic Projection":"lcc",Mercator:"merc","Popular Visualisation Pseudo Mercator":"merc",Mercator_1SP:"merc",Transverse_Mercator:"tmerc","Transverse Mercator":"tmerc","Lambert Azimuthal Equal Area":"laea","Universal Transverse Mercator System":"utm"},Proj4js.Proj.aea={init:function(){if(Math.abs(this.lat1+this.lat2)<Proj4js.common.EPSLN)return void Proj4js.reportError("aeaInitEqualLatitudes");this.temp=this.b/this.a,this.es=1-Math.pow(this.temp,2),this.e3=Math.sqrt(this.es),this.sin_po=Math.sin(this.lat1),this.cos_po=Math.cos(this.lat1),this.t1=this.sin_po,this.con=this.sin_po,this.ms1=Proj4js.common.msfnz(this.e3,this.sin_po,this.cos_po),this.qs1=Proj4js.common.qsfnz(this.e3,this.sin_po,this.cos_po),this.sin_po=Math.sin(this.lat2),this.cos_po=Math.cos(this.lat2),this.t2=this.sin_po,this.ms2=Proj4js.common.msfnz(this.e3,this.sin_po,this.cos_po),this.qs2=Proj4js.common.qsfnz(this.e3,this.sin_po,this.cos_po),this.sin_po=Math.sin(this.lat0),this.cos_po=Math.cos(this.lat0),this.t3=this.sin_po,this.qs0=Proj4js.common.qsfnz(this.e3,this.sin_po,this.cos_po),Math.abs(this.lat1-this.lat2)>Proj4js.common.EPSLN?this.ns0=(this.ms1*this.ms1-this.ms2*this.ms2)/(this.qs2-this.qs1):this.ns0=this.con,this.c=this.ms1*this.ms1+this.ns0*this.qs1,this.rh=this.a*Math.sqrt(this.c-this.ns0*this.qs0)/this.ns0},forward:function(a){var b=a.x,c=a.y;this.sin_phi=Math.sin(c),this.cos_phi=Math.cos(c);var d=Proj4js.common.qsfnz(this.e3,this.sin_phi,this.cos_phi),e=this.a*Math.sqrt(this.c-this.ns0*d)/this.ns0,f=this.ns0*Proj4js.common.adjust_lon(b-this.long0),g=e*Math.sin(f)+this.x0,h=this.rh-e*Math.cos(f)+this.y0;return a.x=g,a.y=h,a},inverse:function(a){var b,c,d,e,f,g;return a.x-=this.x0,a.y=this.rh-a.y+this.y0,this.ns0>=0?(b=Math.sqrt(a.x*a.x+a.y*a.y),d=1):(b=-Math.sqrt(a.x*a.x+a.y*a.y),d=-1),e=0,0!=b&&(e=Math.atan2(d*a.x,d*a.y)),d=b*this.ns0/this.a,c=(this.c-d*d)/this.ns0,this.e3>=1e-10?(d=1-.5*(1-this.es)*Math.log((1-this.e3)/(1+this.e3))/this.e3,g=Math.abs(Math.abs(d)-Math.abs(c))>1e-10?this.phi1z(this.e3,c):c>=0?.5*Proj4js.common.PI:-.5*Proj4js.common.PI):g=this.phi1z(this.e3,c),f=Proj4js.common.adjust_lon(e/this.ns0+this.long0),a.x=f,a.y=g,a},phi1z:function(a,b){var c,d,e,f,g,h=Proj4js.common.asinz(.5*b);if(a<Proj4js.common.EPSLN)return h;for(var i=a*a,j=1;j<=25;j++)if(c=Math.sin(h),d=Math.cos(h),e=a*c,f=1-e*e,g=.5*f*f/d*(b/(1-i)-c/f+.5/a*Math.log((1-e)/(1+e))),h+=g,Math.abs(g)<=1e-7)return h;return Proj4js.reportError("aea:phi1z:Convergence error"),null}},Proj4js.Proj.sterea={dependsOn:"gauss",init:function(){if(Proj4js.Proj.gauss.init.apply(this),!this.rc)return void Proj4js.reportError("sterea:init:E_ERROR_0");this.sinc0=Math.sin(this.phic0),this.cosc0=Math.cos(this.phic0),this.R2=2*this.rc,this.title||(this.title="Oblique Stereographic Alternative")},forward:function(a){var b,c,d,e;return a.x=Proj4js.common.adjust_lon(a.x-this.long0),Proj4js.Proj.gauss.forward.apply(this,[a]),b=Math.sin(a.y),c=Math.cos(a.y),d=Math.cos(a.x),e=this.k0*this.R2/(1+this.sinc0*b+this.cosc0*c*d),a.x=e*c*Math.sin(a.x),a.y=e*(this.cosc0*b-this.sinc0*c*d),a.x=this.a*a.x+this.x0,a.y=this.a*a.y+this.y0,a},inverse:function(a){var b,c,d,e,f;if(a.x=(a.x-this.x0)/this.a,a.y=(a.y-this.y0)/this.a,a.x/=this.k0,a.y/=this.k0,f=Math.sqrt(a.x*a.x+a.y*a.y)){var g=2*Math.atan2(f,this.R2);b=Math.sin(g),c=Math.cos(g),e=Math.asin(c*this.sinc0+a.y*b*this.cosc0/f),d=Math.atan2(a.x*b,f*this.cosc0*c-a.y*this.sinc0*b)}else e=this.phic0,d=0;return a.x=d,a.y=e,Proj4js.Proj.gauss.inverse.apply(this,[a]),a.x=Proj4js.common.adjust_lon(a.x+this.long0),a}},Proj4js.Proj.poly={init:function(){0==this.lat0&&(this.lat0=90),this.temp=this.b/this.a,this.es=1-Math.pow(this.temp,2),this.e=Math.sqrt(this.es),this.e0=Proj4js.common.e0fn(this.es),this.e1=Proj4js.common.e1fn(this.es),this.e2=Proj4js.common.e2fn(this.es),this.e3=Proj4js.common.e3fn(this.es),this.ml0=Proj4js.common.mlfn(this.e0,this.e1,this.e2,this.e3,this.lat0)},forward:function(a){var b,c,d,e,f,g,h,i=a.x,j=a.y;return d=Proj4js.common.adjust_lon(i-this.long0),Math.abs(j)<=1e-7?(g=this.x0+this.a*d,h=this.y0-this.a*this.ml0):(b=Math.sin(j),c=Math.cos(j),e=Proj4js.common.mlfn(this.e0,this.e1,this.e2,this.e3,j),f=Proj4js.common.msfnz(this.e,b,c),d=b,g=this.x0+this.a*f*Math.sin(d)/b,h=this.y0+this.a*(e-this.ml0+f*(1-Math.cos(d))/b)),a.x=g,a.y=h,a},inverse:function(a){var b,c,d,e,f,g;if(a.x-=this.x0,a.y-=this.y0,b=this.ml0+a.y/this.a,e=0,Math.abs(b)<=1e-7)f=a.x/this.a+this.long0,g=0;else{if(c=b*b+a.x/this.a*(a.x/this.a),1!=(e=phi4z(this.es,this.e0,this.e1,this.e2,this.e3,this.al,c,d,g)))return e;f=Proj4js.common.adjust_lon(Proj4js.common.asinz(a.x*d/this.a)/Math.sin(g)+this.long0)}return a.x=f,a.y=g,a}},Proj4js.Proj.equi={init:function(){this.x0||(this.x0=0),this.y0||(this.y0=0),this.lat0||(this.lat0=0),this.long0||(this.long0=0)},forward:function(a){var b=a.x,c=a.y,d=Proj4js.common.adjust_lon(b-this.long0),e=this.x0+this.a*d*Math.cos(this.lat0),f=this.y0+this.a*c;return this.t1=e,this.t2=Math.cos(this.lat0),a.x=e,a.y=f,a},inverse:function(a){a.x-=this.x0,a.y-=this.y0;var b=a.y/this.a;Math.abs(b)>Proj4js.common.HALF_PI&&Proj4js.reportError("equi:Inv:DataError");var c=Proj4js.common.adjust_lon(this.long0+a.x/(this.a*Math.cos(this.lat0)));a.x=c,a.y=b}},Proj4js.Proj.merc={init:function(){this.lat_ts&&(this.sphere?this.k0=Math.cos(this.lat_ts):this.k0=Proj4js.common.msfnz(this.es,Math.sin(this.lat_ts),Math.cos(this.lat_ts)))},forward:function(a){var b=a.x,c=a.y;if(c*Proj4js.common.R2D>90&&c*Proj4js.common.R2D<-90&&b*Proj4js.common.R2D>180&&b*Proj4js.common.R2D<-180)return Proj4js.reportError("merc:forward: llInputOutOfRange: "+b+" : "+c),null;var d,e;if(Math.abs(Math.abs(c)-Proj4js.common.HALF_PI)<=Proj4js.common.EPSLN)return Proj4js.reportError("merc:forward: ll2mAtPoles"),null;if(this.sphere)d=this.x0+this.a*this.k0*Proj4js.common.adjust_lon(b-this.long0),e=this.y0+this.a*this.k0*Math.log(Math.tan(Proj4js.common.FORTPI+.5*c));else{var f=Math.sin(c),g=Proj4js.common.tsfnz(this.e,c,f);d=this.x0+this.a*this.k0*Proj4js.common.adjust_lon(b-this.long0),e=this.y0-this.a*this.k0*Math.log(g)}return a.x=d,a.y=e,a},inverse:function(a){var b,c,d=a.x-this.x0,e=a.y-this.y0;if(this.sphere)c=Proj4js.common.HALF_PI-2*Math.atan(Math.exp(-e/this.a*this.k0));else{var f=Math.exp(-e/(this.a*this.k0));if(-9999==(c=Proj4js.common.phi2z(this.e,f)))return Proj4js.reportError("merc:inverse: lat = -9999"),null}return b=Proj4js.common.adjust_lon(this.long0+d/(this.a*this.k0)),a.x=b,a.y=c,a}},Proj4js.Proj.utm={dependsOn:"tmerc",init:function(){if(!this.zone)return void Proj4js.reportError("utm:init: zone must be specified for UTM");this.lat0=0,this.long0=(6*Math.abs(this.zone)-183)*Proj4js.common.D2R,this.x0=5e5,this.y0=this.utmSouth?1e7:0,this.k0=.9996,Proj4js.Proj.tmerc.init.apply(this),this.forward=Proj4js.Proj.tmerc.forward,this.inverse=Proj4js.Proj.tmerc.inverse}},Proj4js.Proj.eqdc={init:function(){this.mode||(this.mode=0),this.temp=this.b/this.a,this.es=1-Math.pow(this.temp,2),
this.e=Math.sqrt(this.es),this.e0=Proj4js.common.e0fn(this.es),this.e1=Proj4js.common.e1fn(this.es),this.e2=Proj4js.common.e2fn(this.es),this.e3=Proj4js.common.e3fn(this.es),this.sinphi=Math.sin(this.lat1),this.cosphi=Math.cos(this.lat1),this.ms1=Proj4js.common.msfnz(this.e,this.sinphi,this.cosphi),this.ml1=Proj4js.common.mlfn(this.e0,this.e1,this.e2,this.e3,this.lat1),0!=this.mode?(Math.abs(this.lat1+this.lat2)<Proj4js.common.EPSLN&&Proj4js.reportError("eqdc:Init:EqualLatitudes"),this.sinphi=Math.sin(this.lat2),this.cosphi=Math.cos(this.lat2),this.ms2=Proj4js.common.msfnz(this.e,this.sinphi,this.cosphi),this.ml2=Proj4js.common.mlfn(this.e0,this.e1,this.e2,this.e3,this.lat2),Math.abs(this.lat1-this.lat2)>=Proj4js.common.EPSLN?this.ns=(this.ms1-this.ms2)/(this.ml2-this.ml1):this.ns=this.sinphi):this.ns=this.sinphi,this.g=this.ml1+this.ms1/this.ns,this.ml0=Proj4js.common.mlfn(this.e0,this.e1,this.e2,this.e3,this.lat0),this.rh=this.a*(this.g-this.ml0)},forward:function(a){var b=a.x,c=a.y,d=Proj4js.common.mlfn(this.e0,this.e1,this.e2,this.e3,c),e=this.a*(this.g-d),f=this.ns*Proj4js.common.adjust_lon(b-this.long0),g=this.x0+e*Math.sin(f),h=this.y0+this.rh-e*Math.cos(f);return a.x=g,a.y=h,a},inverse:function(a){a.x-=this.x0,a.y=this.rh-a.y+this.y0;var b,c;this.ns>=0?(c=Math.sqrt(a.x*a.x+a.y*a.y),b=1):(c=-Math.sqrt(a.x*a.x+a.y*a.y),b=-1);var d=0;0!=c&&(d=Math.atan2(b*a.x,b*a.y));var e=this.g-c/this.a,f=this.phi3z(e,this.e0,this.e1,this.e2,this.e3),g=Proj4js.common.adjust_lon(this.long0+d/this.ns);return a.x=g,a.y=f,a},phi3z:function(a,b,c,d,e){var f,g;f=a;for(var h=0;h<15;h++)if(g=(a+c*Math.sin(2*f)-d*Math.sin(4*f)+e*Math.sin(6*f))/b-f,f+=g,Math.abs(g)<=1e-10)return f;return Proj4js.reportError("PHI3Z-CONV:Latitude failed to converge after 15 iterations"),null}},Proj4js.Proj.tmerc={init:function(){this.e0=Proj4js.common.e0fn(this.es),this.e1=Proj4js.common.e1fn(this.es),this.e2=Proj4js.common.e2fn(this.es),this.e3=Proj4js.common.e3fn(this.es),this.ml0=this.a*Proj4js.common.mlfn(this.e0,this.e1,this.e2,this.e3,this.lat0)},forward:function(a){var b,c,d,e=a.x,f=a.y,g=Proj4js.common.adjust_lon(e-this.long0),h=Math.sin(f),i=Math.cos(f);if(this.sphere){var j=i*Math.sin(g);if(Math.abs(Math.abs(j)-1)<1e-10)return Proj4js.reportError("tmerc:forward: Point projects into infinity"),93;c=.5*this.a*this.k0*Math.log((1+j)/(1-j)),b=Math.acos(i*Math.cos(g)/Math.sqrt(1-j*j)),f<0&&(b=-b),d=this.a*this.k0*(b-this.lat0)}else{var k=i*g,l=Math.pow(k,2),m=this.ep2*Math.pow(i,2),n=Math.tan(f),o=Math.pow(n,2);b=1-this.es*Math.pow(h,2);var p=this.a/Math.sqrt(b),q=this.a*Proj4js.common.mlfn(this.e0,this.e1,this.e2,this.e3,f);c=this.k0*p*k*(1+l/6*(1-o+m+l/20*(5-18*o+Math.pow(o,2)+72*m-58*this.ep2)))+this.x0,d=this.k0*(q-this.ml0+p*n*(l*(.5+l/24*(5-o+9*m+4*Math.pow(m,2)+l/30*(61-58*o+Math.pow(o,2)+600*m-330*this.ep2)))))+this.y0}return a.x=c,a.y=d,a},inverse:function(a){var b,c,d,e,f,g,h=6;if(this.sphere){var i=Math.exp(a.x/(this.a*this.k0)),j=.5*(i-1/i),k=this.lat0+a.y/(this.a*this.k0),l=Math.cos(k);b=Math.sqrt((1-l*l)/(1+j*j)),f=Proj4js.common.asinz(b),k<0&&(f=-f),g=0==j&&0==l?this.long0:Proj4js.common.adjust_lon(Math.atan2(j,l)+this.long0)}else{var m=a.x-this.x0,n=a.y-this.y0;for(b=(this.ml0+n/this.k0)/this.a,c=b,e=0;!0&&(d=(b+this.e1*Math.sin(2*c)-this.e2*Math.sin(4*c)+this.e3*Math.sin(6*c))/this.e0-c,c+=d,!(Math.abs(d)<=Proj4js.common.EPSLN));e++)if(e>=h)return Proj4js.reportError("tmerc:inverse: Latitude failed to converge"),95;if(Math.abs(c)<Proj4js.common.HALF_PI){var o=Math.sin(c),p=Math.cos(c),q=Math.tan(c),r=this.ep2*Math.pow(p,2),s=Math.pow(r,2),t=Math.pow(q,2),u=Math.pow(t,2);b=1-this.es*Math.pow(o,2);var v=this.a/Math.sqrt(b),w=v*(1-this.es)/b,x=m/(v*this.k0),y=Math.pow(x,2);f=c-v*q*y/w*(.5-y/24*(5+3*t+10*r-4*s-9*this.ep2-y/30*(61+90*t+298*r+45*u-252*this.ep2-3*s))),g=Proj4js.common.adjust_lon(this.long0+x*(1-y/6*(1+2*t+r-y/20*(5-2*r+28*t-3*s+8*this.ep2+24*u)))/p)}else f=Proj4js.common.HALF_PI*Proj4js.common.sign(n),g=this.long0}return a.x=g,a.y=f,a}},Proj4js.defs.GOOGLE="+proj=merc +a=6378137 +b=6378137 +lat_ts=0.0 +lon_0=0.0 +x_0=0.0 +y_0=0 +k=1.0 +units=m +nadgrids=@null +no_defs",Proj4js.defs["EPSG:900913"]=Proj4js.defs.GOOGLE,Proj4js.Proj.gstmerc={init:function(){var a=this.b/this.a;this.e=Math.sqrt(1-a*a),this.lc=this.long0,this.rs=Math.sqrt(1+this.e*this.e*Math.pow(Math.cos(this.lat0),4)/(1-this.e*this.e));var b=Math.sin(this.lat0),c=Math.asin(b/this.rs),d=Math.sin(c);this.cp=Proj4js.common.latiso(0,c,d)-this.rs*Proj4js.common.latiso(this.e,this.lat0,b),this.n2=this.k0*this.a*Math.sqrt(1-this.e*this.e)/(1-this.e*this.e*b*b),this.xs=this.x0,this.ys=this.y0-this.n2*c,this.title||(this.title="Gauss Schreiber transverse mercator")},forward:function(a){var b=a.x,c=a.y,d=this.rs*(b-this.lc),e=this.cp+this.rs*Proj4js.common.latiso(this.e,c,Math.sin(c)),f=Math.asin(Math.sin(d)/Proj4js.common.cosh(e)),g=Proj4js.common.latiso(0,f,Math.sin(f));return a.x=this.xs+this.n2*g,a.y=this.ys+this.n2*Math.atan(Proj4js.common.sinh(e)/Math.cos(d)),a},inverse:function(a){var b=a.x,c=a.y,d=Math.atan(Proj4js.common.sinh((b-this.xs)/this.n2)/Math.cos((c-this.ys)/this.n2)),e=Math.asin(Math.sin((c-this.ys)/this.n2)/Proj4js.common.cosh((b-this.xs)/this.n2)),f=Proj4js.common.latiso(0,e,Math.sin(e));return a.x=this.lc+d/this.rs,a.y=Proj4js.common.invlatiso(this.e,(f-this.cp)/this.rs),a}},Proj4js.Proj.ortho={init:function(a){this.sin_p14=Math.sin(this.lat0),this.cos_p14=Math.cos(this.lat0)},forward:function(a){var b,c,d,e,f,g,h=a.x,i=a.y;if(d=Proj4js.common.adjust_lon(h-this.long0),b=Math.sin(i),c=Math.cos(i),e=Math.cos(d),g=this.sin_p14*b+this.cos_p14*c*e,f=1,g>0||Math.abs(g)<=Proj4js.common.EPSLN)var j=this.a*f*c*Math.sin(d),k=this.y0+this.a*f*(this.cos_p14*b-this.sin_p14*c*e);else Proj4js.reportError("orthoFwdPointError");return a.x=j,a.y=k,a},inverse:function(a){var b,c,d,e,f,g,h;return a.x-=this.x0,a.y-=this.y0,b=Math.sqrt(a.x*a.x+a.y*a.y),b>this.a+1e-7&&Proj4js.reportError("orthoInvDataError"),c=Proj4js.common.asinz(b/this.a),d=Math.sin(c),e=Math.cos(c),g=this.long0,Math.abs(b)<=Proj4js.common.EPSLN&&(h=this.lat0),h=Proj4js.common.asinz(e*this.sin_p14+a.y*d*this.cos_p14/b),f=Math.abs(this.lat0)-Proj4js.common.HALF_PI,Math.abs(f)<=Proj4js.common.EPSLN&&(g=this.lat0>=0?Proj4js.common.adjust_lon(this.long0+Math.atan2(a.x,-a.y)):Proj4js.common.adjust_lon(this.long0-Math.atan2(-a.x,a.y))),f=e-this.sin_p14*Math.sin(h),a.x=g,a.y=h,a}},Proj4js.Proj.krovak={init:function(){this.a=6377397.155,this.es=.006674372230614,this.e=Math.sqrt(this.es),this.lat0||(this.lat0=.863937979737193),this.long0||(this.long0=.4334234309119251),this.k0||(this.k0=.9999),this.s45=.785398163397448,this.s90=2*this.s45,this.fi0=this.lat0,this.e2=this.es,this.e=Math.sqrt(this.e2),this.alfa=Math.sqrt(1+this.e2*Math.pow(Math.cos(this.fi0),4)/(1-this.e2)),this.uq=1.04216856380474,this.u0=Math.asin(Math.sin(this.fi0)/this.alfa),this.g=Math.pow((1+this.e*Math.sin(this.fi0))/(1-this.e*Math.sin(this.fi0)),this.alfa*this.e/2),this.k=Math.tan(this.u0/2+this.s45)/Math.pow(Math.tan(this.fi0/2+this.s45),this.alfa)*this.g,this.k1=this.k0,this.n0=this.a*Math.sqrt(1-this.e2)/(1-this.e2*Math.pow(Math.sin(this.fi0),2)),this.s0=1.37008346281555,this.n=Math.sin(this.s0),this.ro0=this.k1*this.n0/Math.tan(this.s0),this.ad=this.s90-this.uq},forward:function(a){var b,c,d,e,f,g,h,i=a.x,j=a.y,k=Proj4js.common.adjust_lon(i-this.long0);return b=Math.pow((1+this.e*Math.sin(j))/(1-this.e*Math.sin(j)),this.alfa*this.e/2),c=2*(Math.atan(this.k*Math.pow(Math.tan(j/2+this.s45),this.alfa)/b)-this.s45),d=-k*this.alfa,e=Math.asin(Math.cos(this.ad)*Math.sin(c)+Math.sin(this.ad)*Math.cos(c)*Math.cos(d)),f=Math.asin(Math.cos(c)*Math.sin(d)/Math.cos(e)),g=this.n*f,h=this.ro0*Math.pow(Math.tan(this.s0/2+this.s45),this.n)/Math.pow(Math.tan(e/2+this.s45),this.n),a.y=h*Math.cos(g)/1,a.x=h*Math.sin(g)/1,this.czech&&(a.y*=-1,a.x*=-1),a},inverse:function(a){var b,c,d,e,f,g,h,i,j=a.x;a.x=a.y,a.y=j,this.czech&&(a.y*=-1,a.x*=-1),g=Math.sqrt(a.x*a.x+a.y*a.y),f=Math.atan2(a.y,a.x),e=f/Math.sin(this.s0),d=2*(Math.atan(Math.pow(this.ro0/g,1/this.n)*Math.tan(this.s0/2+this.s45))-this.s45),b=Math.asin(Math.cos(this.ad)*Math.sin(d)-Math.sin(this.ad)*Math.cos(d)*Math.cos(e)),c=Math.asin(Math.cos(d)*Math.sin(e)/Math.cos(b)),a.x=this.long0-c/this.alfa,h=b,i=0;var k=0;do{a.y=2*(Math.atan(Math.pow(this.k,-1/this.alfa)*Math.pow(Math.tan(b/2+this.s45),1/this.alfa)*Math.pow((1+this.e*Math.sin(h))/(1-this.e*Math.sin(h)),this.e/2))-this.s45),Math.abs(h-a.y)<1e-10&&(i=1),h=a.y,k+=1}while(0==i&&k<15);return k>=15?(Proj4js.reportError("PHI3Z-CONV:Latitude failed to converge after 15 iterations"),null):a}},Proj4js.Proj.somerc={init:function(){var a=this.lat0;this.lambda0=this.long0;var b=Math.sin(a),c=this.a,d=this.rf,e=1/d,f=2*e-Math.pow(e,2),g=this.e=Math.sqrt(f);this.R=this.k0*c*Math.sqrt(1-f)/(1-f*Math.pow(b,2)),this.alpha=Math.sqrt(1+f/(1-f)*Math.pow(Math.cos(a),4)),this.b0=Math.asin(b/this.alpha),this.K=Math.log(Math.tan(Math.PI/4+this.b0/2))-this.alpha*Math.log(Math.tan(Math.PI/4+a/2))+this.alpha*g/2*Math.log((1+g*b)/(1-g*b))},forward:function(a){var b=Math.log(Math.tan(Math.PI/4-a.y/2)),c=this.e/2*Math.log((1+this.e*Math.sin(a.y))/(1-this.e*Math.sin(a.y))),d=-this.alpha*(b+c)+this.K,e=2*(Math.atan(Math.exp(d))-Math.PI/4),f=this.alpha*(a.x-this.lambda0),g=Math.atan(Math.sin(f)/(Math.sin(this.b0)*Math.tan(e)+Math.cos(this.b0)*Math.cos(f))),h=Math.asin(Math.cos(this.b0)*Math.sin(e)-Math.sin(this.b0)*Math.cos(e)*Math.cos(f));return a.y=this.R/2*Math.log((1+Math.sin(h))/(1-Math.sin(h)))+this.y0,a.x=this.R*g+this.x0,a},inverse:function(a){for(var b=a.x-this.x0,c=a.y-this.y0,d=b/this.R,e=2*(Math.atan(Math.exp(c/this.R))-Math.PI/4),f=Math.asin(Math.cos(this.b0)*Math.sin(e)+Math.sin(this.b0)*Math.cos(e)*Math.cos(d)),g=Math.atan(Math.sin(d)/(Math.cos(this.b0)*Math.cos(d)-Math.sin(this.b0)*Math.tan(e))),h=this.lambda0+g/this.alpha,i=0,j=f,k=-1e3,l=0;Math.abs(j-k)>1e-7;){if(++l>20)return void Proj4js.reportError("omercFwdInfinity");i=1/this.alpha*(Math.log(Math.tan(Math.PI/4+f/2))-this.K)+this.e*Math.log(Math.tan(Math.PI/4+Math.asin(this.e*Math.sin(j))/2)),k=j,j=2*Math.atan(Math.exp(i))-Math.PI/2}return a.x=h,a.y=j,a}},Proj4js.Proj.stere={ssfn_:function(a,b,c){return b*=c,Math.tan(.5*(Proj4js.common.HALF_PI+a))*Math.pow((1-b)/(1+b),.5*c)},TOL:1e-8,NITER:8,CONV:1e-10,S_POLE:0,N_POLE:1,OBLIQ:2,EQUIT:3,init:function(){this.phits=this.lat_ts?this.lat_ts:Proj4js.common.HALF_PI;var a=Math.abs(this.lat0);if(Math.abs(a)-Proj4js.common.HALF_PI<Proj4js.common.EPSLN?this.mode=this.lat0<0?this.S_POLE:this.N_POLE:this.mode=a>Proj4js.common.EPSLN?this.OBLIQ:this.EQUIT,this.phits=Math.abs(this.phits),this.es){var b;switch(this.mode){case this.N_POLE:case this.S_POLE:Math.abs(this.phits-Proj4js.common.HALF_PI)<Proj4js.common.EPSLN?this.akm1=2*this.k0/Math.sqrt(Math.pow(1+this.e,1+this.e)*Math.pow(1-this.e,1-this.e)):(a=Math.sin(this.phits),this.akm1=Math.cos(this.phits)/Proj4js.common.tsfnz(this.e,this.phits,a),a*=this.e,this.akm1/=Math.sqrt(1-a*a));break;case this.EQUIT:this.akm1=2*this.k0;break;case this.OBLIQ:a=Math.sin(this.lat0),b=2*Math.atan(this.ssfn_(this.lat0,a,this.e))-Proj4js.common.HALF_PI,a*=this.e,this.akm1=2*this.k0*Math.cos(this.lat0)/Math.sqrt(1-a*a),this.sinX1=Math.sin(b),this.cosX1=Math.cos(b)}}else switch(this.mode){case this.OBLIQ:this.sinph0=Math.sin(this.lat0),this.cosph0=Math.cos(this.lat0);case this.EQUIT:this.akm1=2*this.k0;break;case this.S_POLE:case this.N_POLE:this.akm1=Math.abs(this.phits-Proj4js.common.HALF_PI)>=Proj4js.common.EPSLN?Math.cos(this.phits)/Math.tan(Proj4js.common.FORTPI-.5*this.phits):2*this.k0}},forward:function(a){var b=a.x;b=Proj4js.common.adjust_lon(b-this.long0);var c,d,e=a.y;if(this.sphere){var f,g,h,i;switch(f=Math.sin(e),g=Math.cos(e),h=Math.cos(b),i=Math.sin(b),this.mode){case this.EQUIT:d=1+g*h,d<=Proj4js.common.EPSLN&&Proj4js.reportError("stere:forward:Equit"),d=this.akm1/d,c=d*g*i,d*=f;break;case this.OBLIQ:d=1+this.sinph0*f+this.cosph0*g*h,d<=Proj4js.common.EPSLN&&Proj4js.reportError("stere:forward:Obliq"),d=this.akm1/d,c=d*g*i,d*=this.cosph0*f-this.sinph0*g*h;break;case this.N_POLE:h=-h,e=-e;case this.S_POLE:Math.abs(e-Proj4js.common.HALF_PI)<this.TOL&&Proj4js.reportError("stere:forward:S_POLE"),d=this.akm1*Math.tan(Proj4js.common.FORTPI+.5*e),c=i*d,d*=h}}else{h=Math.cos(b),i=Math.sin(b),f=Math.sin(e);var j,k;if(this.mode==this.OBLIQ||this.mode==this.EQUIT){var l=2*Math.atan(this.ssfn_(e,f,this.e));j=Math.sin(l-Proj4js.common.HALF_PI),k=Math.cos(l)}switch(this.mode){case this.OBLIQ:var m=this.akm1/(this.cosX1*(1+this.sinX1*j+this.cosX1*k*h));d=m*(this.cosX1*j-this.sinX1*k*h),c=m*k;break;case this.EQUIT:var m=2*this.akm1/(1+k*h);d=m*j,c=m*k;break;case this.S_POLE:e=-e,h=-h,f=-f;case this.N_POLE:c=this.akm1*Proj4js.common.tsfnz(this.e,e,f),d=-c*h}c*=i}return a.x=c*this.a+this.x0,a.y=d*this.a+this.y0,a},inverse:function(a){var b,c,d,e,f,g,h=(a.x-this.x0)/this.a,i=(a.y-this.y0)/this.a,j=0,k=0,l=0,m=0;if(this.sphere){var n,o,p,q;switch(o=Math.sqrt(h*h+i*i),n=2*Math.atan(o/this.akm1),p=Math.sin(n),q=Math.cos(n),b=0,this.mode){case this.EQUIT:c=Math.abs(o)<=Proj4js.common.EPSLN?0:Math.asin(i*p/o),0==q&&0==h||(b=Math.atan2(h*p,q*o));break;case this.OBLIQ:c=Math.abs(o)<=Proj4js.common.EPSLN?this.phi0:Math.asin(q*this.sinph0+i*p*this.cosph0/o),n=q-this.sinph0*Math.sin(c),0==n&&0==h||(b=Math.atan2(h*p*this.cosph0,n*o));break;case this.N_POLE:i=-i;case this.S_POLE:c=Math.abs(o)<=Proj4js.common.EPSLN?this.phi0:Math.asin(this.mode==this.S_POLE?-q:q),b=0==h&&0==i?0:Math.atan2(h,i)}a.x=Proj4js.common.adjust_lon(b+this.long0),a.y=c}else{switch(f=Math.sqrt(h*h+i*i),this.mode){case this.OBLIQ:case this.EQUIT:j=2*Math.atan2(f*this.cosX1,this.akm1),d=Math.cos(j),e=Math.sin(j),k=0==f?Math.asin(d*this.sinX1):Math.asin(d*this.sinX1+i*e*this.cosX1/f),j=Math.tan(.5*(Proj4js.common.HALF_PI+k)),h*=e,i=f*this.cosX1*d-i*this.sinX1*e,m=Proj4js.common.HALF_PI,l=.5*this.e;break;case this.N_POLE:i=-i;case this.S_POLE:j=-f/this.akm1,k=Proj4js.common.HALF_PI-2*Math.atan(j),m=-Proj4js.common.HALF_PI,l=-.5*this.e}for(g=this.NITER;g--;k=c)if(e=this.e*Math.sin(k),c=2*Math.atan(j*Math.pow((1+e)/(1-e),l))-m,Math.abs(k-c)<this.CONV)return this.mode==this.S_POLE&&(c=-c),b=0==h&&0==i?0:Math.atan2(h,i),a.x=Proj4js.common.adjust_lon(b+this.long0),a.y=c,a}}},Proj4js.Proj.nzmg={iterations:1,init:function(){this.A=new Array,this.A[1]=.6399175073,this.A[2]=-.1358797613,this.A[3]=.063294409,this.A[4]=-.02526853,this.A[5]=.0117879,this.A[6]=-.0055161,this.A[7]=.0026906,this.A[8]=-.001333,this.A[9]=67e-5,this.A[10]=-34e-5,this.B_re=new Array,this.B_im=new Array,this.B_re[1]=.7557853228,this.B_im[1]=0,this.B_re[2]=.249204646,this.B_im[2]=.003371507,this.B_re[3]=-.001541739,this.B_im[3]=.04105856,this.B_re[4]=-.10162907,this.B_im[4]=.01727609,this.B_re[5]=-.26623489,this.B_im[5]=-.36249218,this.B_re[6]=-.6870983,this.B_im[6]=-1.1651967,this.C_re=new Array,this.C_im=new Array,this.C_re[1]=1.3231270439,this.C_im[1]=0,this.C_re[2]=-.577245789,this.C_im[2]=-.007809598,this.C_re[3]=.508307513,this.C_im[3]=-.112208952,this.C_re[4]=-.15094762,this.C_im[4]=.18200602,this.C_re[5]=1.01418179,this.C_im[5]=1.64497696,this.C_re[6]=1.9660549,this.C_im[6]=2.5127645,this.D=new Array,this.D[1]=1.5627014243,this.D[2]=.5185406398,this.D[3]=-.03333098,this.D[4]=-.1052906,this.D[5]=-.0368594,this.D[6]=.007317,this.D[7]=.0122,this.D[8]=.00394,this.D[9]=-.0013},forward:function(a){for(var b=a.x,c=a.y,d=c-this.lat0,e=b-this.long0,f=d/Proj4js.common.SEC_TO_RAD*1e-5,g=e,h=1,i=0,j=1;j<=10;j++)h*=f,i+=this.A[j]*h;for(var k,l,m=i,n=g,o=1,p=0,q=0,r=0,j=1;j<=6;j++)k=o*m-p*n,l=p*m+o*n,o=k,p=l,q=q+this.B_re[j]*o-this.B_im[j]*p,r=r+this.B_im[j]*o+this.B_re[j]*p;return a.x=r*this.a+this.x0,a.y=q*this.a+this.y0,a},inverse:function(a){for(var b,c,d=a.x,e=a.y,f=d-this.x0,g=e-this.y0,h=g/this.a,i=f/this.a,j=1,k=0,l=0,m=0,n=1;n<=6;n++)b=j*h-k*i,c=k*h+j*i,j=b,k=c,l=l+this.C_re[n]*j-this.C_im[n]*k,m=m+this.C_im[n]*j+this.C_re[n]*k;for(var o=0;o<this.iterations;o++){for(var p,q,r=l,s=m,t=h,u=i,n=2;n<=6;n++)p=r*l-s*m,q=s*l+r*m,r=p,s=q,t+=(n-1)*(this.B_re[n]*r-this.B_im[n]*s),u+=(n-1)*(this.B_im[n]*r+this.B_re[n]*s);r=1,s=0;for(var v=this.B_re[1],w=this.B_im[1],n=2;n<=6;n++)p=r*l-s*m,q=s*l+r*m,r=p,s=q,v+=n*(this.B_re[n]*r-this.B_im[n]*s),w+=n*(this.B_im[n]*r+this.B_re[n]*s);var x=v*v+w*w;l=(t*v+u*w)/x,m=(u*v-t*w)/x}for(var y=l,z=m,A=1,B=0,n=1;n<=9;n++)A*=y,B+=this.D[n]*A;var C=this.lat0+B*Proj4js.common.SEC_TO_RAD*1e5,D=this.long0+z;return a.x=D,a.y=C,a}},Proj4js.Proj.mill={init:function(){},forward:function(a){var b=a.x,c=a.y,d=Proj4js.common.adjust_lon(b-this.long0),e=this.x0+this.a*d,f=this.y0+this.a*Math.log(Math.tan(Proj4js.common.PI/4+c/2.5))*1.25;return a.x=e,a.y=f,a},inverse:function(a){a.x-=this.x0,a.y-=this.y0;var b=Proj4js.common.adjust_lon(this.long0+a.x/this.a),c=2.5*(Math.atan(Math.exp(.8*a.y/this.a))-Proj4js.common.PI/4);return a.x=b,a.y=c,a}},Proj4js.Proj.gnom={init:function(a){this.sin_p14=Math.sin(this.lat0),this.cos_p14=Math.cos(this.lat0),this.infinity_dist=1e3*this.a,this.rc=1},forward:function(a){var b,c,d,e,f,g,h,i,j=a.x,k=a.y;return d=Proj4js.common.adjust_lon(j-this.long0),b=Math.sin(k),c=Math.cos(k),e=Math.cos(d),g=this.sin_p14*b+this.cos_p14*c*e,f=1,g>0||Math.abs(g)<=Proj4js.common.EPSLN?(h=this.x0+this.a*f*c*Math.sin(d)/g,i=this.y0+this.a*f*(this.cos_p14*b-this.sin_p14*c*e)/g):(Proj4js.reportError("orthoFwdPointError"),h=this.x0+this.infinity_dist*c*Math.sin(d),i=this.y0+this.infinity_dist*(this.cos_p14*b-this.sin_p14*c*e)),a.x=h,a.y=i,a},inverse:function(a){var b,c,d,e,f,g;return a.x=(a.x-this.x0)/this.a,a.y=(a.y-this.y0)/this.a,a.x/=this.k0,a.y/=this.k0,(b=Math.sqrt(a.x*a.x+a.y*a.y))?(e=Math.atan2(b,this.rc),c=Math.sin(e),d=Math.cos(e),g=Proj4js.common.asinz(d*this.sin_p14+a.y*c*this.cos_p14/b),f=Math.atan2(a.x*c,b*this.cos_p14*d-a.y*this.sin_p14*c),f=Proj4js.common.adjust_lon(this.long0+f)):(g=this.phic0,f=0),a.x=f,a.y=g,a}},Proj4js.Proj.sinu={init:function(){this.sphere?(this.n=1,this.m=0,this.es=0,this.C_y=Math.sqrt((this.m+1)/this.n),this.C_x=this.C_y/(this.m+1)):this.en=Proj4js.common.pj_enfn(this.es)},forward:function(a){var b,c,d=a.x,e=a.y;if(d=Proj4js.common.adjust_lon(d-this.long0),this.sphere){if(this.m)for(var f=this.n*Math.sin(e),g=Proj4js.common.MAX_ITER;g;--g){var h=(this.m*e+Math.sin(e)-f)/(this.m+Math.cos(e));if(e-=h,Math.abs(h)<Proj4js.common.EPSLN)break}else e=1!=this.n?Math.asin(this.n*Math.sin(e)):e;b=this.a*this.C_x*d*(this.m+Math.cos(e)),c=this.a*this.C_y*e}else{var i=Math.sin(e),j=Math.cos(e);c=this.a*Proj4js.common.pj_mlfn(e,i,j,this.en),b=this.a*d*j/Math.sqrt(1-this.es*i*i)}return a.x=b,a.y=c,a},inverse:function(a){var b,c,d;if(a.x-=this.x0,a.y-=this.y0,b=a.y/this.a,this.sphere)a.y/=this.C_y,b=this.m?Math.asin((this.m*a.y+Math.sin(a.y))/this.n):1!=this.n?Math.asin(Math.sin(a.y)/this.n):a.y,d=a.x/(this.C_x*(this.m+Math.cos(a.y)));else{b=Proj4js.common.pj_inv_mlfn(a.y/this.a,this.es,this.en);var e=Math.abs(b);e<Proj4js.common.HALF_PI?(e=Math.sin(b),c=this.long0+a.x*Math.sqrt(1-this.es*e*e)/(this.a*Math.cos(b)),d=Proj4js.common.adjust_lon(c)):e-Proj4js.common.EPSLN<Proj4js.common.HALF_PI&&(d=this.long0)}return a.x=d,a.y=b,a}},Proj4js.Proj.vandg={init:function(){this.R=6370997},forward:function(a){var b,c,d=a.x,e=a.y,f=Proj4js.common.adjust_lon(d-this.long0);Math.abs(e)<=Proj4js.common.EPSLN&&(b=this.x0+this.R*f,c=this.y0);var g=Proj4js.common.asinz(2*Math.abs(e/Proj4js.common.PI));(Math.abs(f)<=Proj4js.common.EPSLN||Math.abs(Math.abs(e)-Proj4js.common.HALF_PI)<=Proj4js.common.EPSLN)&&(b=this.x0,c=e>=0?this.y0+Proj4js.common.PI*this.R*Math.tan(.5*g):this.y0+Proj4js.common.PI*this.R*-Math.tan(.5*g));var h=.5*Math.abs(Proj4js.common.PI/f-f/Proj4js.common.PI),i=h*h,j=Math.sin(g),k=Math.cos(g),l=k/(j+k-1),m=l*l,n=l*(2/j-1),o=n*n,p=Proj4js.common.PI*this.R*(h*(l-o)+Math.sqrt(i*(l-o)*(l-o)-(o+i)*(m-o)))/(o+i);return f<0&&(p=-p),b=this.x0+p,p=Math.abs(p/(Proj4js.common.PI*this.R)),c=e>=0?this.y0+Proj4js.common.PI*this.R*Math.sqrt(1-p*p-2*h*p):this.y0-Proj4js.common.PI*this.R*Math.sqrt(1-p*p-2*h*p),a.x=b,a.y=c,a},inverse:function(a){var b,c,d,e,f,g,h,i,j,k,l,m,n;return a.x-=this.x0,a.y-=this.y0,l=Proj4js.common.PI*this.R,d=a.x/l,e=a.y/l,f=d*d+e*e,g=-Math.abs(e)*(1+f),h=g-2*e*e+d*d,i=-2*g+1+2*e*e+f*f,n=e*e/i+(2*h*h*h/i/i/i-9*g*h/i/i)/27,j=(g-h*h/3/i)/i,k=2*Math.sqrt(-j/3),l=3*n/j/k,Math.abs(l)>1&&(l=l>=0?1:-1),m=Math.acos(l)/3,c=a.y>=0?(-k*Math.cos(m+Proj4js.common.PI/3)-h/3/i)*Proj4js.common.PI:-(-k*Math.cos(m+Proj4js.common.PI/3)-h/3/i)*Proj4js.common.PI,Math.abs(d)<Proj4js.common.EPSLN&&(b=this.long0),b=Proj4js.common.adjust_lon(this.long0+Proj4js.common.PI*(f-1+Math.sqrt(1+2*(d*d-e*e)+f*f))/2/d),a.x=b,a.y=c,a}},Proj4js.Proj.cea={init:function(){},forward:function(a){var b=a.x,c=a.y,d=Proj4js.common.adjust_lon(b-this.long0),e=this.x0+this.a*d*Math.cos(this.lat_ts),f=this.y0+this.a*Math.sin(c)/Math.cos(this.lat_ts);return a.x=e,a.y=f,a},inverse:function(a){a.x-=this.x0,a.y-=this.y0;var b=Proj4js.common.adjust_lon(this.long0+a.x/this.a/Math.cos(this.lat_ts)),c=Math.asin(a.y/this.a*Math.cos(this.lat_ts));return a.x=b,a.y=c,a}},Proj4js.Proj.eqc={init:function(){this.x0||(this.x0=0),this.y0||(this.y0=0),this.lat0||(this.lat0=0),this.long0||(this.long0=0),this.lat_ts||(this.lat_ts=0),this.title||(this.title="Equidistant Cylindrical (Plate Carre)"),this.rc=Math.cos(this.lat_ts)},forward:function(a){var b=a.x,c=a.y,d=Proj4js.common.adjust_lon(b-this.long0),e=Proj4js.common.adjust_lat(c-this.lat0);return a.x=this.x0+this.a*d*this.rc,a.y=this.y0+this.a*e,a},inverse:function(a){var b=a.x,c=a.y;return a.x=Proj4js.common.adjust_lon(this.long0+(b-this.x0)/(this.a*this.rc)),a.y=Proj4js.common.adjust_lat(this.lat0+(c-this.y0)/this.a),a}},Proj4js.Proj.cass={init:function(){this.sphere||(this.en=Proj4js.common.pj_enfn(this.es),this.m0=Proj4js.common.pj_mlfn(this.lat0,Math.sin(this.lat0),Math.cos(this.lat0),this.en))},C1:.16666666666666666,C2:.008333333333333333,C3:.041666666666666664,C4:.3333333333333333,C5:.06666666666666667,forward:function(a){var b,c,d=a.x,e=a.y;return d=Proj4js.common.adjust_lon(d-this.long0),this.sphere?(b=Math.asin(Math.cos(e)*Math.sin(d)),c=Math.atan2(Math.tan(e),Math.cos(d))-this.phi0):(this.n=Math.sin(e),this.c=Math.cos(e),c=Proj4js.common.pj_mlfn(e,this.n,this.c,this.en),this.n=1/Math.sqrt(1-this.es*this.n*this.n),this.tn=Math.tan(e),this.t=this.tn*this.tn,this.a1=d*this.c,this.c*=this.es*this.c/(1-this.es),this.a2=this.a1*this.a1,b=this.n*this.a1*(1-this.a2*this.t*(this.C1-(8-this.t+8*this.c)*this.a2*this.C2)),c-=this.m0-this.n*this.tn*this.a2*(.5+(5-this.t+6*this.c)*this.a2*this.C3)),a.x=this.a*b+this.x0,a.y=this.a*c+this.y0,a},inverse:function(a){a.x-=this.x0,a.y-=this.y0;var b,c,d=a.x/this.a,e=a.y/this.a;if(this.sphere)this.dd=e+this.lat0,b=Math.asin(Math.sin(this.dd)*Math.cos(d)),c=Math.atan2(Math.tan(d),Math.cos(this.dd));else{var f=Proj4js.common.pj_inv_mlfn(this.m0+e,this.es,this.en);this.tn=Math.tan(f),this.t=this.tn*this.tn,this.n=Math.sin(f),this.r=1/(1-this.es*this.n*this.n),this.n=Math.sqrt(this.r),this.r*=(1-this.es)*this.n,this.dd=d/this.n,this.d2=this.dd*this.dd,b=f-this.n*this.tn/this.r*this.d2*(.5-(1+3*this.t)*this.d2*this.C3),c=this.dd*(1+this.t*this.d2*(-this.C4+(1+3*this.t)*this.d2*this.C5))/Math.cos(f)}return a.x=Proj4js.common.adjust_lon(this.long0+c),a.y=b,a}},Proj4js.Proj.gauss={init:function(){var a=Math.sin(this.lat0),b=Math.cos(this.lat0);b*=b,this.rc=Math.sqrt(1-this.es)/(1-this.es*a*a),this.C=Math.sqrt(1+this.es*b*b/(1-this.es)),this.phic0=Math.asin(a/this.C),this.ratexp=.5*this.C*this.e,this.K=Math.tan(.5*this.phic0+Proj4js.common.FORTPI)/(Math.pow(Math.tan(.5*this.lat0+Proj4js.common.FORTPI),this.C)*Proj4js.common.srat(this.e*a,this.ratexp))},forward:function(a){var b=a.x,c=a.y;return a.y=2*Math.atan(this.K*Math.pow(Math.tan(.5*c+Proj4js.common.FORTPI),this.C)*Proj4js.common.srat(this.e*Math.sin(c),this.ratexp))-Proj4js.common.HALF_PI,a.x=this.C*b,a},inverse:function(a){for(var b=1e-14,c=a.x/this.C,d=a.y,e=Math.pow(Math.tan(.5*d+Proj4js.common.FORTPI)/this.K,1/this.C),f=Proj4js.common.MAX_ITER;f>0&&(d=2*Math.atan(e*Proj4js.common.srat(this.e*Math.sin(a.y),-.5*this.e))-Proj4js.common.HALF_PI,!(Math.abs(d-a.y)<b));--f)a.y=d;return f?(a.x=c,a.y=d,a):(Proj4js.reportError("gauss:inverse:convergence failed"),null)}},Proj4js.Proj.omerc={init:function(){this.mode||(this.mode=0),this.lon1||(this.lon1=0,this.mode=1),this.lon2||(this.lon2=0),this.lat2||(this.lat2=0);var a=this.b/this.a,b=1-Math.pow(a,2);Math.sqrt(b);this.sin_p20=Math.sin(this.lat0),this.cos_p20=Math.cos(this.lat0),this.con=1-this.es*this.sin_p20*this.sin_p20,this.com=Math.sqrt(1-b),this.bl=Math.sqrt(1+this.es*Math.pow(this.cos_p20,4)/(1-b)),this.al=this.a*this.bl*this.k0*this.com/this.con,Math.abs(this.lat0)<Proj4js.common.EPSLN?(this.ts=1,this.d=1,this.el=1):(this.ts=Proj4js.common.tsfnz(this.e,this.lat0,this.sin_p20),this.con=Math.sqrt(this.con),this.d=this.bl*this.com/(this.cos_p20*this.con),this.d*this.d-1>0?this.lat0>=0?this.f=this.d+Math.sqrt(this.d*this.d-1):this.f=this.d-Math.sqrt(this.d*this.d-1):this.f=this.d,this.el=this.f*Math.pow(this.ts,this.bl)),0!=this.mode?(this.g=.5*(this.f-1/this.f),this.gama=Proj4js.common.asinz(Math.sin(this.alpha)/this.d),this.longc=this.longc-Proj4js.common.asinz(this.g*Math.tan(this.gama))/this.bl,this.con=Math.abs(this.lat0),this.con>Proj4js.common.EPSLN&&Math.abs(this.con-Proj4js.common.HALF_PI)>Proj4js.common.EPSLN?(this.singam=Math.sin(this.gama),this.cosgam=Math.cos(this.gama),this.sinaz=Math.sin(this.alpha),this.cosaz=Math.cos(this.alpha),this.lat0>=0?this.u=this.al/this.bl*Math.atan(Math.sqrt(this.d*this.d-1)/this.cosaz):this.u=-this.al/this.bl*Math.atan(Math.sqrt(this.d*this.d-1)/this.cosaz)):Proj4js.reportError("omerc:Init:DataError")):(this.sinphi=Math.sin(this.at1),this.ts1=Proj4js.common.tsfnz(this.e,this.lat1,this.sinphi),this.sinphi=Math.sin(this.lat2),this.ts2=Proj4js.common.tsfnz(this.e,this.lat2,this.sinphi),this.h=Math.pow(this.ts1,this.bl),this.l=Math.pow(this.ts2,this.bl),this.f=this.el/this.h,this.g=.5*(this.f-1/this.f),this.j=(this.el*this.el-this.l*this.h)/(this.el*this.el+this.l*this.h),this.p=(this.l-this.h)/(this.l+this.h),this.dlon=this.lon1-this.lon2,this.dlon<-Proj4js.common.PI&&(this.lon2=this.lon2-2*Proj4js.common.PI),this.dlon>Proj4js.common.PI&&(this.lon2=this.lon2+2*Proj4js.common.PI),this.dlon=this.lon1-this.lon2,this.longc=.5*(this.lon1+this.lon2)-Math.atan(this.j*Math.tan(.5*this.bl*this.dlon)/this.p)/this.bl,this.dlon=Proj4js.common.adjust_lon(this.lon1-this.longc),this.gama=Math.atan(Math.sin(this.bl*this.dlon)/this.g),this.alpha=Proj4js.common.asinz(this.d*Math.sin(this.gama)),Math.abs(this.lat1-this.lat2)<=Proj4js.common.EPSLN?Proj4js.reportError("omercInitDataError"):this.con=Math.abs(this.lat1),this.con<=Proj4js.common.EPSLN||Math.abs(this.con-Proj4js.common.HALF_PI)<=Proj4js.common.EPSLN?Proj4js.reportError("omercInitDataError"):Math.abs(Math.abs(this.lat0)-Proj4js.common.HALF_PI)<=Proj4js.common.EPSLN&&Proj4js.reportError("omercInitDataError"),this.singam=Math.sin(this.gam),this.cosgam=Math.cos(this.gam),this.sinaz=Math.sin(this.alpha),this.cosaz=Math.cos(this.alpha),this.lat0>=0?this.u=this.al/this.bl*Math.atan(Math.sqrt(this.d*this.d-1)/this.cosaz):this.u=-this.al/this.bl*Math.atan(Math.sqrt(this.d*this.d-1)/this.cosaz))},forward:function(a){var b,c,d,e,f,g,h,i,j,k,l,m=a.x,n=a.y;b=Math.sin(n),k=Proj4js.common.adjust_lon(m-this.longc),g=Math.sin(this.bl*k),Math.abs(Math.abs(n)-Proj4js.common.HALF_PI)>Proj4js.common.EPSLN?(l=Proj4js.common.tsfnz(this.e,n,b),e=this.el/Math.pow(l,this.bl),j=.5*(e-1/e),c=.5*(e+1/e),h=(j*this.singam-g*this.cosgam)/c,d=Math.cos(this.bl*k),Math.abs(d)<1e-7?f=this.al*this.bl*k:(f=this.al*Math.atan((j*this.cosgam+g*this.singam)/d)/this.bl,d<0&&(f+=Proj4js.common.PI*this.al/this.bl))):(h=n>=0?this.singam:-this.singam,f=this.al*n/this.bl),Math.abs(Math.abs(h)-1)<=Proj4js.common.EPSLN&&Proj4js.reportError("omercFwdInfinity"),i=.5*this.al*Math.log((1-h)/(1+h))/this.bl,f-=this.u;var o=this.x0+i*this.cosaz+f*this.sinaz,p=this.y0+f*this.cosaz-i*this.sinaz;return a.x=o,a.y=p,a},inverse:function(a){var b,c,d,e,f,g,h,i,j,k,l,m;return a.x-=this.x0,a.y-=this.y0,0,e=a.x*this.cosaz-a.y*this.sinaz,f=a.y*this.cosaz+a.x*this.sinaz,f+=this.u,g=Math.exp(-this.bl*e/this.al),h=.5*(g-1/g),c=.5*(g+1/g),j=Math.sin(this.bl*f/this.al),k=(j*this.cosgam+h*this.singam)/c,Math.abs(Math.abs(k)-1)<=Proj4js.common.EPSLN?(l=this.longc,m=k>=0?Proj4js.common.HALF_PI:-Proj4js.common.HALF_PI):(d=1/this.bl,i=Math.pow(this.el/Math.sqrt((1+k)/(1-k)),d),m=Proj4js.common.phi2z(this.e,i),b=this.longc-Math.atan2(h*this.cosgam-j*this.singam,d)/this.bl,l=Proj4js.common.adjust_lon(b)),a.x=l,a.y=m,a}},Proj4js.Proj.lcc={init:function(){if(this.lat2||(this.lat2=this.lat0),this.k0||(this.k0=1),Math.abs(this.lat1+this.lat2)<Proj4js.common.EPSLN)return void Proj4js.reportError("lcc:init: Equal Latitudes");var a=this.b/this.a;this.e=Math.sqrt(1-a*a);var b=Math.sin(this.lat1),c=Math.cos(this.lat1),d=Proj4js.common.msfnz(this.e,b,c),e=Proj4js.common.tsfnz(this.e,this.lat1,b),f=Math.sin(this.lat2),g=Math.cos(this.lat2),h=Proj4js.common.msfnz(this.e,f,g),i=Proj4js.common.tsfnz(this.e,this.lat2,f),j=Proj4js.common.tsfnz(this.e,this.lat0,Math.sin(this.lat0));Math.abs(this.lat1-this.lat2)>Proj4js.common.EPSLN?this.ns=Math.log(d/h)/Math.log(e/i):this.ns=b,this.f0=d/(this.ns*Math.pow(e,this.ns)),this.rh=this.a*this.f0*Math.pow(j,this.ns),this.title||(this.title="Lambert Conformal Conic")},forward:function(a){var b=a.x,c=a.y;if(!(c<=90&&c>=-90&&b<=180&&b>=-180))return Proj4js.reportError("lcc:forward: llInputOutOfRange: "+b+" : "+c),null;var d,e,f=Math.abs(Math.abs(c)-Proj4js.common.HALF_PI);if(f>Proj4js.common.EPSLN)d=Proj4js.common.tsfnz(this.e,c,Math.sin(c)),e=this.a*this.f0*Math.pow(d,this.ns);else{if((f=c*this.ns)<=0)return Proj4js.reportError("lcc:forward: No Projection"),null;e=0}var g=this.ns*Proj4js.common.adjust_lon(b-this.long0);return a.x=this.k0*(e*Math.sin(g))+this.x0,a.y=this.k0*(this.rh-e*Math.cos(g))+this.y0,a},inverse:function(a){var b,c,d,e,f,g=(a.x-this.x0)/this.k0,h=this.rh-(a.y-this.y0)/this.k0;this.ns>0?(b=Math.sqrt(g*g+h*h),c=1):(b=-Math.sqrt(g*g+h*h),c=-1);var i=0;if(0!=b&&(i=Math.atan2(c*g,c*h)),0!=b||this.ns>0){if(c=1/this.ns,d=Math.pow(b/(this.a*this.f0),c),-9999==(e=Proj4js.common.phi2z(this.e,d)))return null}else e=-Proj4js.common.HALF_PI;return f=Proj4js.common.adjust_lon(i/this.ns+this.long0),a.x=f,a.y=e,a}},Proj4js.Proj.laea={S_POLE:1,N_POLE:2,EQUIT:3,OBLIQ:4,init:function(){var a=Math.abs(this.lat0);if(Math.abs(a-Proj4js.common.HALF_PI)<Proj4js.common.EPSLN?this.mode=this.lat0<0?this.S_POLE:this.N_POLE:Math.abs(a)<Proj4js.common.EPSLN?this.mode=this.EQUIT:this.mode=this.OBLIQ,this.es>0){var b;switch(this.qp=Proj4js.common.qsfnz(this.e,1),this.mmf=.5/(1-this.es),this.apa=this.authset(this.es),this.mode){case this.N_POLE:case this.S_POLE:this.dd=1;break;case this.EQUIT:this.rq=Math.sqrt(.5*this.qp),this.dd=1/this.rq,this.xmf=1,this.ymf=.5*this.qp;break;case this.OBLIQ:this.rq=Math.sqrt(.5*this.qp),b=Math.sin(this.lat0),this.sinb1=Proj4js.common.qsfnz(this.e,b)/this.qp,this.cosb1=Math.sqrt(1-this.sinb1*this.sinb1),this.dd=Math.cos(this.lat0)/(Math.sqrt(1-this.es*b*b)*this.rq*this.cosb1),this.ymf=(this.xmf=this.rq)/this.dd,this.xmf*=this.dd}}else this.mode==this.OBLIQ&&(this.sinph0=Math.sin(this.lat0),this.cosph0=Math.cos(this.lat0))},forward:function(a){var b,c,d=a.x,e=a.y;if(d=Proj4js.common.adjust_lon(d-this.long0),this.sphere){var f,g,h;switch(h=Math.sin(e),g=Math.cos(e),f=Math.cos(d),this.mode){case this.OBLIQ:case this.EQUIT:if((c=this.mode==this.EQUIT?1+g*f:1+this.sinph0*h+this.cosph0*g*f)<=Proj4js.common.EPSLN)return Proj4js.reportError("laea:fwd:y less than eps"),null;c=Math.sqrt(2/c),b=c*g*Math.sin(d),c*=this.mode==this.EQUIT?h:this.cosph0*h-this.sinph0*g*f;break;case this.N_POLE:f=-f;case this.S_POLE:if(Math.abs(e+this.phi0)<Proj4js.common.EPSLN)return Proj4js.reportError("laea:fwd:phi < eps"),null;c=Proj4js.common.FORTPI-.5*e,
c=2*(this.mode==this.S_POLE?Math.cos(c):Math.sin(c)),b=c*Math.sin(d),c*=f}}else{var f,i,h,j,k=0,l=0,m=0;switch(f=Math.cos(d),i=Math.sin(d),h=Math.sin(e),j=Proj4js.common.qsfnz(this.e,h),this.mode!=this.OBLIQ&&this.mode!=this.EQUIT||(k=j/this.qp,l=Math.sqrt(1-k*k)),this.mode){case this.OBLIQ:m=1+this.sinb1*k+this.cosb1*l*f;break;case this.EQUIT:m=1+l*f;break;case this.N_POLE:m=Proj4js.common.HALF_PI+e,j=this.qp-j;break;case this.S_POLE:m=e-Proj4js.common.HALF_PI,j=this.qp+j}if(Math.abs(m)<Proj4js.common.EPSLN)return Proj4js.reportError("laea:fwd:b < eps"),null;switch(this.mode){case this.OBLIQ:case this.EQUIT:m=Math.sqrt(2/m),c=this.mode==this.OBLIQ?this.ymf*m*(this.cosb1*k-this.sinb1*l*f):(m=Math.sqrt(2/(1+l*f)))*k*this.ymf,b=this.xmf*m*l*i;break;case this.N_POLE:case this.S_POLE:j>=0?(b=(m=Math.sqrt(j))*i,c=f*(this.mode==this.S_POLE?m:-m)):b=c=0}}return a.x=this.a*b+this.x0,a.y=this.a*c+this.y0,a},inverse:function(a){a.x-=this.x0,a.y-=this.y0;var b,c,d=a.x/this.a,e=a.y/this.a;if(this.sphere){var f,g=0,h=0;if(f=Math.sqrt(d*d+e*e),(c=.5*f)>1)return Proj4js.reportError("laea:Inv:DataError"),null;switch(c=2*Math.asin(c),this.mode!=this.OBLIQ&&this.mode!=this.EQUIT||(h=Math.sin(c),g=Math.cos(c)),this.mode){case this.EQUIT:c=Math.abs(f)<=Proj4js.common.EPSLN?0:Math.asin(e*h/f),d*=h,e=g*f;break;case this.OBLIQ:c=Math.abs(f)<=Proj4js.common.EPSLN?this.phi0:Math.asin(g*this.sinph0+e*h*this.cosph0/f),d*=h*this.cosph0,e=(g-Math.sin(c)*this.sinph0)*f;break;case this.N_POLE:e=-e,c=Proj4js.common.HALF_PI-c;break;case this.S_POLE:c-=Proj4js.common.HALF_PI}b=0!=e||this.mode!=this.EQUIT&&this.mode!=this.OBLIQ?Math.atan2(d,e):0}else{var i,j,k,l,m=0;switch(this.mode){case this.EQUIT:case this.OBLIQ:if(d/=this.dd,e*=this.dd,(l=Math.sqrt(d*d+e*e))<Proj4js.common.EPSLN)return a.x=0,a.y=this.phi0,a;j=2*Math.asin(.5*l/this.rq),i=Math.cos(j),d*=j=Math.sin(j),this.mode==this.OBLIQ?(m=i*this.sinb1+e*j*this.cosb1/l,k=this.qp*m,e=l*this.cosb1*i-e*this.sinb1*j):(m=e*j/l,k=this.qp*m,e=l*i);break;case this.N_POLE:e=-e;case this.S_POLE:if(!(k=d*d+e*e))return a.x=0,a.y=this.phi0,a;m=1-k/this.qp,this.mode==this.S_POLE&&(m=-m)}b=Math.atan2(d,e),c=this.authlat(Math.asin(m),this.apa)}return a.x=Proj4js.common.adjust_lon(this.long0+b),a.y=c,a},P00:.3333333333333333,P01:.17222222222222222,P02:.10257936507936508,P10:.06388888888888888,P11:.0664021164021164,P20:.016415012942191543,authset:function(a){var b,c=new Array;return c[0]=a*this.P00,b=a*a,c[0]+=b*this.P01,c[1]=b*this.P10,b*=a,c[0]+=b*this.P02,c[1]+=b*this.P11,c[2]=b*this.P20,c},authlat:function(a,b){var c=a+a;return a+b[0]*Math.sin(c)+b[1]*Math.sin(c+c)+b[2]*Math.sin(c+c+c)}},Proj4js.Proj.aeqd={init:function(){this.sin_p12=Math.sin(this.lat0),this.cos_p12=Math.cos(this.lat0)},forward:function(a){var b,c=a.x,d=(a.y,Math.sin(a.y)),e=Math.cos(a.y),f=Proj4js.common.adjust_lon(c-this.long0),g=Math.cos(f),h=this.sin_p12*d+this.cos_p12*e*g;if(Math.abs(Math.abs(h)-1)<Proj4js.common.EPSLN){if(b=1,h<0)return void Proj4js.reportError("aeqd:Fwd:PointError")}else{var i=Math.acos(h);b=i/Math.sin(i)}return a.x=this.x0+this.a*b*e*Math.sin(f),a.y=this.y0+this.a*b*(this.cos_p12*d-this.sin_p12*e*g),a},inverse:function(a){a.x-=this.x0,a.y-=this.y0;var b=Math.sqrt(a.x*a.x+a.y*a.y);if(b>2*Proj4js.common.HALF_PI*this.a)return void Proj4js.reportError("aeqdInvDataError");var c,d=b/this.a,e=Math.sin(d),f=Math.cos(d),g=this.long0;if(Math.abs(b)<=Proj4js.common.EPSLN)c=this.lat0;else{c=Proj4js.common.asinz(f*this.sin_p12+a.y*e*this.cos_p12/b);var h=Math.abs(this.lat0)-Proj4js.common.HALF_PI;if(Math.abs(h)<=Proj4js.common.EPSLN)g=this.lat0>=0?Proj4js.common.adjust_lon(this.long0+Math.atan2(a.x,-a.y)):Proj4js.common.adjust_lon(this.long0-Math.atan2(-a.x,a.y));else if(h=f-this.sin_p12*Math.sin(c),Math.abs(h)<Proj4js.common.EPSLN&&Math.abs(a.x)<Proj4js.common.EPSLN);else{Math.atan2(a.x*e*this.cos_p12,h*b);g=Proj4js.common.adjust_lon(this.long0+Math.atan2(a.x*e*this.cos_p12,h*b))}}return a.x=g,a.y=c,a}},Proj4js.Proj.moll={init:function(){},forward:function(a){for(var b=a.x,c=a.y,d=Proj4js.common.adjust_lon(b-this.long0),e=c,f=Proj4js.common.PI*Math.sin(c),g=0;!0;g++){var h=-(e+Math.sin(e)-f)/(1+Math.cos(e));if(e+=h,Math.abs(h)<Proj4js.common.EPSLN)break;g>=50&&Proj4js.reportError("moll:Fwd:IterationError")}e/=2,Proj4js.common.PI/2-Math.abs(c)<Proj4js.common.EPSLN&&(d=0);var i=.900316316158*this.a*d*Math.cos(e)+this.x0,j=1.4142135623731*this.a*Math.sin(e)+this.y0;return a.x=i,a.y=j,a},inverse:function(a){var b,c;a.x-=this.x0;var c=a.y/(1.4142135623731*this.a);Math.abs(c)>.999999999999&&(c=.999999999999);var b=Math.asin(c),d=Proj4js.common.adjust_lon(this.long0+a.x/(.900316316158*this.a*Math.cos(b)));d<-Proj4js.common.PI&&(d=-Proj4js.common.PI),d>Proj4js.common.PI&&(d=Proj4js.common.PI),c=(2*b+Math.sin(2*b))/Proj4js.common.PI,Math.abs(c)>1&&(c=1);var e=Math.asin(c);return a.x=d,a.y=e,a}},function(a,b,c){function d(a,c){this.wrapper="string"==typeof a?b.querySelector(a):a,this.scroller=this.wrapper.children[0],this.scrollerStyle=this.scroller.style,this.options={resizeScrollbars:!0,mouseWheelSpeed:20,snapThreshold:.334,startX:0,startY:0,scrollY:!0,directionLockThreshold:5,momentum:!0,bounce:!0,bounceTime:600,bounceEasing:"",preventDefault:!0,preventDefaultException:{tagName:/^(INPUT|TEXTAREA|BUTTON|SELECT)$/},HWCompositing:!0,useTransition:!0,useTransform:!0};for(var d in c)this.options[d]=c[d];this.translateZ=this.options.HWCompositing&&h.hasPerspective?" translateZ(0)":"",this.options.useTransition=h.hasTransition&&this.options.useTransition,this.options.useTransform=h.hasTransform&&this.options.useTransform,this.options.eventPassthrough=!0===this.options.eventPassthrough?"vertical":this.options.eventPassthrough,this.options.preventDefault=!this.options.eventPassthrough&&this.options.preventDefault,this.options.scrollY="vertical"!=this.options.eventPassthrough&&this.options.scrollY,this.options.scrollX="horizontal"!=this.options.eventPassthrough&&this.options.scrollX,this.options.freeScroll=this.options.freeScroll&&!this.options.eventPassthrough,this.options.directionLockThreshold=this.options.eventPassthrough?0:this.options.directionLockThreshold,this.options.bounceEasing="string"==typeof this.options.bounceEasing?h.ease[this.options.bounceEasing]||h.ease.circular:this.options.bounceEasing,this.options.resizePolling=void 0===this.options.resizePolling?60:this.options.resizePolling,!0===this.options.tap&&(this.options.tap="tap"),"scale"==this.options.shrinkScrollbars&&(this.options.useTransition=!1),this.options.invertWheelDirection=this.options.invertWheelDirection?-1:1,this.x=0,this.y=0,this.directionX=0,this.directionY=0,this._events={},this._init(),this.refresh(),this.scrollTo(this.options.startX,this.options.startY),this.enable()}function e(a,c,d){var e=b.createElement("div"),f=b.createElement("div");return!0===d&&(e.style.cssText="position:absolute;z-index:9999",f.style.cssText="-webkit-box-sizing:border-box;-moz-box-sizing:border-box;box-sizing:border-box;position:absolute;background:rgba(0,0,0,0.5);border:1px solid rgba(255,255,255,0.9);border-radius:3px"),f.className="iScrollIndicator","h"==a?(!0===d&&(e.style.cssText+=";height:7px;left:2px;right:2px;bottom:0",f.style.height="100%"),e.className="iScrollHorizontalScrollbar"):(!0===d&&(e.style.cssText+=";width:7px;bottom:2px;top:2px;right:1px",f.style.width="100%"),e.className="iScrollVerticalScrollbar"),e.style.cssText+=";overflow:hidden",c||(e.style.pointerEvents="none"),e.appendChild(f),e}function f(c,d){this.wrapper="string"==typeof d.el?b.querySelector(d.el):d.el,this.wrapperStyle=this.wrapper.style,this.indicator=this.wrapper.children[0],this.indicatorStyle=this.indicator.style,this.scroller=c,this.options={listenX:!0,listenY:!0,interactive:!1,resize:!0,defaultScrollbars:!1,shrink:!1,fade:!1,speedRatioX:0,speedRatioY:0};for(var e in d)this.options[e]=d[e];this.sizeRatioX=1,this.sizeRatioY=1,this.maxPosX=0,this.maxPosY=0,this.options.interactive&&(this.options.disableTouch||(h.addEvent(this.indicator,"touchstart",this),h.addEvent(a,"touchend",this)),this.options.disablePointer||(h.addEvent(this.indicator,"MSPointerDown",this),h.addEvent(a,"MSPointerUp",this)),this.options.disableMouse||(h.addEvent(this.indicator,"mousedown",this),h.addEvent(a,"mouseup",this))),this.options.fade&&(this.wrapperStyle[h.style.transform]=this.scroller.translateZ,this.wrapperStyle[h.style.transitionDuration]=h.isBadAndroid?"0.001s":"0ms",this.wrapperStyle.opacity="0")}var g=a.requestAnimationFrame||a.webkitRequestAnimationFrame||a.mozRequestAnimationFrame||a.oRequestAnimationFrame||a.msRequestAnimationFrame||function(b){a.setTimeout(b,1e3/60)},h=function(){function d(a){return!1!==g&&(""===g?a:g+a.charAt(0).toUpperCase()+a.substr(1))}var e={},f=b.createElement("div").style,g=function(){for(var a=["t","webkitT","MozT","msT","OT"],b=0,c=a.length;b<c;b++)if(a[b]+"ransform"in f)return a[b].substr(0,a[b].length-1);return!1}();e.getTime=Date.now||function(){return(new Date).getTime()},e.extend=function(a,b){for(var c in b)a[c]=b[c]},e.addEvent=function(a,b,c,d){a.addEventListener(b,c,!!d)},e.removeEvent=function(a,b,c,d){a.removeEventListener(b,c,!!d)},e.momentum=function(a,b,d,e,f,g){var h,i,j=a-b,k=c.abs(j)/d;return g=void 0===g?6e-4:g,h=a+k*k/(2*g)*(j<0?-1:1),i=k/g,h<e?(h=f?e-f/2.5*(k/8):e,j=c.abs(h-a),i=j/k):h>0&&(h=f?f/2.5*(k/8):0,j=c.abs(a)+h,i=j/k),{destination:c.round(h),duration:i}};var h=d("transform");return e.extend(e,{hasTransform:!1!==h,hasPerspective:d("perspective")in f,hasTouch:"ontouchstart"in a,hasPointer:navigator.msPointerEnabled,hasTransition:d("transition")in f}),e.isBadAndroid=/Android /.test(a.navigator.appVersion)&&!/Chrome\/\d/.test(a.navigator.appVersion),e.extend(e.style={},{transform:h,transitionTimingFunction:d("transitionTimingFunction"),transitionDuration:d("transitionDuration"),transitionDelay:d("transitionDelay"),transformOrigin:d("transformOrigin")}),e.hasClass=function(a,b){return new RegExp("(^|\\s)"+b+"(\\s|$)").test(a.className)},e.addClass=function(a,b){if(!e.hasClass(a,b)){var c=a.className.split(" ");c.push(b),a.className=c.join(" ")}},e.removeClass=function(a,b){if(e.hasClass(a,b)){var c=new RegExp("(^|\\s)"+b+"(\\s|$)","g");a.className=a.className.replace(c," ")}},e.offset=function(a){for(var b=-a.offsetLeft,c=-a.offsetTop;a=a.offsetParent;)b-=a.offsetLeft,c-=a.offsetTop;return{left:b,top:c}},e.preventDefaultException=function(a,b){for(var c in b)if(b[c].test(a[c]))return!0;return!1},e.extend(e.eventType={},{touchstart:1,touchmove:1,touchend:1,mousedown:2,mousemove:2,mouseup:2,MSPointerDown:3,MSPointerMove:3,MSPointerUp:3}),e.extend(e.ease={},{quadratic:{style:"cubic-bezier(0.25, 0.46, 0.45, 0.94)",fn:function(a){return a*(2-a)}},circular:{style:"cubic-bezier(0.1, 0.57, 0.1, 1)",fn:function(a){return c.sqrt(1- --a*a)}},back:{style:"cubic-bezier(0.175, 0.885, 0.32, 1.275)",fn:function(a){var b=4;return(a-=1)*a*((b+1)*a+b)+1}},bounce:{style:"",fn:function(a){return(a/=1)<1/2.75?7.5625*a*a:a<2/2.75?7.5625*(a-=1.5/2.75)*a+.75:a<2.5/2.75?7.5625*(a-=2.25/2.75)*a+.9375:7.5625*(a-=2.625/2.75)*a+.984375}},elastic:{style:"",fn:function(a){var b=.22;return 0===a?0:1==a?1:.4*c.pow(2,-10*a)*c.sin((a-b/4)*(2*c.PI)/b)+1}}}),e.tap=function(a,c){var d=b.createEvent("Event");d.initEvent(c,!0,!0),d.pageX=a.pageX,d.pageY=a.pageY,a.target.dispatchEvent(d)},e.click=function(a){var c,d=a.target;/(SELECT|INPUT|TEXTAREA)/i.test(d.tagName)||(c=b.createEvent("MouseEvents"),c.initMouseEvent("click",!0,!0,a.view,1,d.screenX,d.screenY,d.clientX,d.clientY,a.ctrlKey,a.altKey,a.shiftKey,a.metaKey,0,null),c._constructed=!0,d.dispatchEvent(c))},e}();d.prototype={version:"5.1.1",_init:function(){this._initEvents(),(this.options.scrollbars||this.options.indicators)&&this._initIndicators(),this.options.mouseWheel&&this._initWheel(),this.options.snap&&this._initSnap(),this.options.keyBindings&&this._initKeys()},destroy:function(){this._initEvents(!0),this._execEvent("destroy")},_transitionEnd:function(a){a.target==this.scroller&&this.isInTransition&&(this._transitionTime(),this.resetPosition(this.options.bounceTime)||(this.isInTransition=!1,this._execEvent("scrollEnd")))},_start:function(a){if((1==h.eventType[a.type]||0===a.button)&&this.enabled&&(!this.initiated||h.eventType[a.type]===this.initiated)){!this.options.preventDefault||h.isBadAndroid||h.preventDefaultException(a.target,this.options.preventDefaultException)||a.preventDefault();var b,d=a.touches?a.touches[0]:a;this.initiated=h.eventType[a.type],this.moved=!1,this.distX=0,this.distY=0,this.directionX=0,this.directionY=0,this.directionLocked=0,this._transitionTime(),this.startTime=h.getTime(),this.options.useTransition&&this.isInTransition?(this.isInTransition=!1,b=this.getComputedPosition(),this._translate(c.round(b.x),c.round(b.y)),this._execEvent("scrollEnd")):!this.options.useTransition&&this.isAnimating&&(this.isAnimating=!1,this._execEvent("scrollEnd")),this.startX=this.x,this.startY=this.y,this.absStartX=this.x,this.absStartY=this.y,this.pointX=d.pageX,this.pointY=d.pageY,this._execEvent("beforeScrollStart")}},_move:function(a){if(this.enabled&&h.eventType[a.type]===this.initiated){this.options.preventDefault&&a.preventDefault();var b,d,e,f,g=a.touches?a.touches[0]:a,i=g.pageX-this.pointX,j=g.pageY-this.pointY,k=h.getTime();if(this.pointX=g.pageX,this.pointY=g.pageY,this.distX+=i,this.distY+=j,e=c.abs(this.distX),f=c.abs(this.distY),!(k-this.endTime>300&&e<10&&f<10)){if(this.directionLocked||this.options.freeScroll||(e>f+this.options.directionLockThreshold?this.directionLocked="h":f>=e+this.options.directionLockThreshold?this.directionLocked="v":this.directionLocked="n"),"h"==this.directionLocked){if("vertical"==this.options.eventPassthrough)a.preventDefault();else if("horizontal"==this.options.eventPassthrough)return void(this.initiated=!1);j=0}else if("v"==this.directionLocked){if("horizontal"==this.options.eventPassthrough)a.preventDefault();else if("vertical"==this.options.eventPassthrough)return void(this.initiated=!1);i=0}i=this.hasHorizontalScroll?i:0,j=this.hasVerticalScroll?j:0,b=this.x+i,d=this.y+j,(b>0||b<this.maxScrollX)&&(b=this.options.bounce?this.x+i/3:b>0?0:this.maxScrollX),(d>0||d<this.maxScrollY)&&(d=this.options.bounce?this.y+j/3:d>0?0:this.maxScrollY),this.directionX=i>0?-1:i<0?1:0,this.directionY=j>0?-1:j<0?1:0,this.moved||this._execEvent("scrollStart"),this.moved=!0,this._translate(b,d),k-this.startTime>300&&(this.startTime=k,this.startX=this.x,this.startY=this.y)}}},_end:function(a){if(this.enabled&&h.eventType[a.type]===this.initiated){this.options.preventDefault&&!h.preventDefaultException(a.target,this.options.preventDefaultException)&&a.preventDefault();var b,d,e=(a.changedTouches&&a.changedTouches[0],h.getTime()-this.startTime),f=c.round(this.x),g=c.round(this.y),i=c.abs(f-this.startX),j=c.abs(g-this.startY),k=0,l="";if(this.isInTransition=0,this.initiated=0,this.endTime=h.getTime(),!this.resetPosition(this.options.bounceTime)){if(this.scrollTo(f,g),!this.moved)return this.options.tap&&h.tap(a,this.options.tap),this.options.click&&h.click(a),void this._execEvent("scrollCancel");if(this._events.flick&&e<200&&i<100&&j<100)return void this._execEvent("flick");if(this.options.momentum&&e<300&&(b=this.hasHorizontalScroll?h.momentum(this.x,this.startX,e,this.maxScrollX,this.options.bounce?this.wrapperWidth:0,this.options.deceleration):{destination:f,duration:0},d=this.hasVerticalScroll?h.momentum(this.y,this.startY,e,this.maxScrollY,this.options.bounce?this.wrapperHeight:0,this.options.deceleration):{destination:g,duration:0},f=b.destination,g=d.destination,k=c.max(b.duration,d.duration),this.isInTransition=1),this.options.snap){var m=this._nearestSnap(f,g);this.currentPage=m,k=this.options.snapSpeed||c.max(c.max(c.min(c.abs(f-m.x),1e3),c.min(c.abs(g-m.y),1e3)),300),f=m.x,g=m.y,this.directionX=0,this.directionY=0,l=this.options.bounceEasing}if(f!=this.x||g!=this.y)return(f>0||f<this.maxScrollX||g>0||g<this.maxScrollY)&&(l=h.ease.quadratic),void this.scrollTo(f,g,k,l);this._execEvent("scrollEnd")}}},_resize:function(){var a=this;clearTimeout(this.resizeTimeout),this.resizeTimeout=setTimeout(function(){a.refresh()},this.options.resizePolling)},resetPosition:function(a){var b=this.x,c=this.y;return a=a||0,!this.hasHorizontalScroll||this.x>0?b=0:this.x<this.maxScrollX&&(b=this.maxScrollX),!this.hasVerticalScroll||this.y>0?c=0:this.y<this.maxScrollY&&(c=this.maxScrollY),(b!=this.x||c!=this.y)&&(this.scrollTo(b,c,a,this.options.bounceEasing),!0)},disable:function(){this.enabled=!1},enable:function(){this.enabled=!0},refresh:function(){this.wrapper.offsetHeight;this.wrapperWidth=this.wrapper.clientWidth,this.wrapperHeight=this.wrapper.clientHeight,this.scrollerWidth=this.scroller.offsetWidth,this.scrollerHeight=this.scroller.offsetHeight,this.maxScrollX=this.wrapperWidth-this.scrollerWidth,this.maxScrollY=this.wrapperHeight-this.scrollerHeight,this.hasHorizontalScroll=this.options.scrollX&&this.maxScrollX<0,this.hasVerticalScroll=this.options.scrollY&&this.maxScrollY<0,this.hasHorizontalScroll||(this.maxScrollX=0,this.scrollerWidth=this.wrapperWidth),this.hasVerticalScroll||(this.maxScrollY=0,this.scrollerHeight=this.wrapperHeight),this.endTime=0,this.directionX=0,this.directionY=0,this.wrapperOffset=h.offset(this.wrapper),this._execEvent("refresh"),this.resetPosition()},on:function(a,b){this._events[a]||(this._events[a]=[]),this._events[a].push(b)},off:function(a,b){if(this._events[a]){var c=this._events[a].indexOf(b);c>-1&&this._events[a].splice(c,1)}},_execEvent:function(a){if(this._events[a]){var b=0,c=this._events[a].length;if(c)for(;b<c;b++)this._events[a][b].apply(this,[].slice.call(arguments,1))}},scrollBy:function(a,b,c,d){a=this.x+a,b=this.y+b,c=c||0,this.scrollTo(a,b,c,d)},scrollTo:function(a,b,c,d){d=d||h.ease.circular,this.isInTransition=this.options.useTransition&&c>0,!c||this.options.useTransition&&d.style?(this._transitionTimingFunction(d.style),this._transitionTime(c),this._translate(a,b)):this._animate(a,b,c,d.fn)},scrollToElement:function(a,b,d,e,f){if(a=a.nodeType?a:this.scroller.querySelector(a)){var g=h.offset(a);g.left-=this.wrapperOffset.left,g.top-=this.wrapperOffset.top,!0===d&&(d=c.round(a.offsetWidth/2-this.wrapper.offsetWidth/2)),!0===e&&(e=c.round(a.offsetHeight/2-this.wrapper.offsetHeight/2)),g.left-=d||0,g.top-=e||0,g.left=g.left>0?0:g.left<this.maxScrollX?this.maxScrollX:g.left,g.top=g.top>0?0:g.top<this.maxScrollY?this.maxScrollY:g.top,b=void 0===b||null===b||"auto"===b?c.max(c.abs(this.x-g.left),c.abs(this.y-g.top)):b,this.scrollTo(g.left,g.top,b,f)}},_transitionTime:function(a){if(a=a||0,this.scrollerStyle[h.style.transitionDuration]=a+"ms",!a&&h.isBadAndroid&&(this.scrollerStyle[h.style.transitionDuration]="0.001s"),this.indicators)for(var b=this.indicators.length;b--;)this.indicators[b].transitionTime(a)},_transitionTimingFunction:function(a){if(this.scrollerStyle[h.style.transitionTimingFunction]=a,this.indicators)for(var b=this.indicators.length;b--;)this.indicators[b].transitionTimingFunction(a)},_translate:function(a,b){if(this.options.useTransform?this.scrollerStyle[h.style.transform]="translate("+a+"px,"+b+"px)"+this.translateZ:(a=c.round(a),b=c.round(b),this.scrollerStyle.left=a+"px",this.scrollerStyle.top=b+"px"),this.x=a,this.y=b,this.indicators)for(var d=this.indicators.length;d--;)this.indicators[d].updatePosition()},_initEvents:function(b){var c=b?h.removeEvent:h.addEvent,d=this.options.bindToWrapper?this.wrapper:a;c(a,"orientationchange",this),c(a,"resize",this),this.options.click&&c(this.wrapper,"click",this,!0),this.options.disableMouse||(c(this.wrapper,"mousedown",this),c(d,"mousemove",this),c(d,"mousecancel",this),c(d,"mouseup",this)),h.hasPointer&&!this.options.disablePointer&&(c(this.wrapper,"MSPointerDown",this),c(d,"MSPointerMove",this),c(d,"MSPointerCancel",this),c(d,"MSPointerUp",this)),h.hasTouch&&!this.options.disableTouch&&(c(this.wrapper,"touchstart",this),c(d,"touchmove",this),c(d,"touchcancel",this),c(d,"touchend",this)),c(this.scroller,"transitionend",this),c(this.scroller,"webkitTransitionEnd",this),c(this.scroller,"oTransitionEnd",this),c(this.scroller,"MSTransitionEnd",this)},getComputedPosition:function(){var b,c,d=a.getComputedStyle(this.scroller,null);return this.options.useTransform?(d=d[h.style.transform].split(")")[0].split(", "),b=+(d[12]||d[4]),c=+(d[13]||d[5])):(b=+d.left.replace(/[^-\d.]/g,""),c=+d.top.replace(/[^-\d.]/g,"")),{x:b,y:c}},_initIndicators:function(){function a(a){for(var b=h.indicators.length;b--;)a.call(h.indicators[b])}var b,c=this.options.interactiveScrollbars,d="string"!=typeof this.options.scrollbars,g=[],h=this;this.indicators=[],this.options.scrollbars&&(this.options.scrollY&&(b={el:e("v",c,this.options.scrollbars),interactive:c,defaultScrollbars:!0,customStyle:d,resize:this.options.resizeScrollbars,shrink:this.options.shrinkScrollbars,fade:this.options.fadeScrollbars,listenX:!1},this.wrapper.appendChild(b.el),g.push(b)),this.options.scrollX&&(b={el:e("h",c,this.options.scrollbars),interactive:c,defaultScrollbars:!0,customStyle:d,resize:this.options.resizeScrollbars,shrink:this.options.shrinkScrollbars,fade:this.options.fadeScrollbars,listenY:!1},this.wrapper.appendChild(b.el),g.push(b))),this.options.indicators&&(g=g.concat(this.options.indicators));for(var i=g.length;i--;)this.indicators.push(new f(this,g[i]));this.options.fadeScrollbars&&(this.on("scrollEnd",function(){a(function(){this.fade()})}),this.on("scrollCancel",function(){a(function(){this.fade()})}),this.on("scrollStart",function(){a(function(){this.fade(1)})}),this.on("beforeScrollStart",function(){a(function(){this.fade(1,!0)})})),this.on("refresh",function(){a(function(){this.refresh()})}),this.on("destroy",function(){a(function(){this.destroy()}),delete this.indicators})},_initWheel:function(){h.addEvent(this.wrapper,"wheel",this),h.addEvent(this.wrapper,"mousewheel",this),h.addEvent(this.wrapper,"DOMMouseScroll",this),this.on("destroy",function(){h.removeEvent(this.wrapper,"wheel",this),h.removeEvent(this.wrapper,"mousewheel",this),h.removeEvent(this.wrapper,"DOMMouseScroll",this)})},_wheel:function(a){if(this.enabled){a.preventDefault(),a.stopPropagation();var b,d,e,f,g=this;if(void 0===this.wheelTimeout&&g._execEvent("scrollStart"),clearTimeout(this.wheelTimeout),this.wheelTimeout=setTimeout(function(){g._execEvent("scrollEnd"),g.wheelTimeout=void 0},400),"deltaX"in a)b=-a.deltaX,d=-a.deltaY;else if("wheelDeltaX"in a)b=a.wheelDeltaX/120*this.options.mouseWheelSpeed,d=a.wheelDeltaY/120*this.options.mouseWheelSpeed;else if("wheelDelta"in a)b=d=a.wheelDelta/120*this.options.mouseWheelSpeed;else{if(!("detail"in a))return;b=d=-a.detail/3*this.options.mouseWheelSpeed}if(b*=this.options.invertWheelDirection,d*=this.options.invertWheelDirection,this.hasVerticalScroll||(b=d,d=0),this.options.snap)return e=this.currentPage.pageX,f=this.currentPage.pageY,b>0?e--:b<0&&e++,d>0?f--:d<0&&f++,void this.goToPage(e,f);e=this.x+c.round(this.hasHorizontalScroll?b:0),f=this.y+c.round(this.hasVerticalScroll?d:0),e>0?e=0:e<this.maxScrollX&&(e=this.maxScrollX),f>0?f=0:f<this.maxScrollY&&(f=this.maxScrollY),this.scrollTo(e,f,0)}},_initSnap:function(){this.currentPage={},"string"==typeof this.options.snap&&(this.options.snap=this.scroller.querySelectorAll(this.options.snap)),this.on("refresh",function(){var a,b,d,e,f,g,h=0,i=0,j=0,k=this.options.snapStepX||this.wrapperWidth,l=this.options.snapStepY||this.wrapperHeight;if(this.pages=[],this.wrapperWidth&&this.wrapperHeight&&this.scrollerWidth&&this.scrollerHeight){if(!0===this.options.snap)for(d=c.round(k/2),e=c.round(l/2);j>-this.scrollerWidth;){for(this.pages[h]=[],a=0,f=0;f>-this.scrollerHeight;)this.pages[h][a]={x:c.max(j,this.maxScrollX),y:c.max(f,this.maxScrollY),width:k,height:l,cx:j-d,cy:f-e},f-=l,a++;j-=k,h++}else for(g=this.options.snap,a=g.length,b=-1;h<a;h++)(0===h||g[h].offsetLeft<=g[h-1].offsetLeft)&&(i=0,b++),this.pages[i]||(this.pages[i]=[]),j=c.max(-g[h].offsetLeft,this.maxScrollX),f=c.max(-g[h].offsetTop,this.maxScrollY),d=j-c.round(g[h].offsetWidth/2),e=f-c.round(g[h].offsetHeight/2),this.pages[i][b]={x:j,y:f,width:g[h].offsetWidth,height:g[h].offsetHeight,cx:d,cy:e},j>this.maxScrollX&&i++;this.goToPage(this.currentPage.pageX||0,this.currentPage.pageY||0,0),this.options.snapThreshold%1==0?(this.snapThresholdX=this.options.snapThreshold,this.snapThresholdY=this.options.snapThreshold):(this.snapThresholdX=c.round(this.pages[this.currentPage.pageX][this.currentPage.pageY].width*this.options.snapThreshold),this.snapThresholdY=c.round(this.pages[this.currentPage.pageX][this.currentPage.pageY].height*this.options.snapThreshold))}}),this.on("flick",function(){var a=this.options.snapSpeed||c.max(c.max(c.min(c.abs(this.x-this.startX),1e3),c.min(c.abs(this.y-this.startY),1e3)),300);this.goToPage(this.currentPage.pageX+this.directionX,this.currentPage.pageY+this.directionY,a)})},_nearestSnap:function(a,b){if(!this.pages.length)return{x:0,y:0,pageX:0,pageY:0};var d=0,e=this.pages.length,f=0;if(c.abs(a-this.absStartX)<this.snapThresholdX&&c.abs(b-this.absStartY)<this.snapThresholdY)return this.currentPage;for(a>0?a=0:a<this.maxScrollX&&(a=this.maxScrollX),b>0?b=0:b<this.maxScrollY&&(b=this.maxScrollY);d<e;d++)if(a>=this.pages[d][0].cx){a=this.pages[d][0].x;break}for(e=this.pages[d].length;f<e;f++)if(b>=this.pages[0][f].cy){b=this.pages[0][f].y;break}return d==this.currentPage.pageX&&(d+=this.directionX,d<0?d=0:d>=this.pages.length&&(d=this.pages.length-1),a=this.pages[d][0].x),f==this.currentPage.pageY&&(f+=this.directionY,f<0?f=0:f>=this.pages[0].length&&(f=this.pages[0].length-1),b=this.pages[0][f].y),{x:a,y:b,pageX:d,pageY:f}},goToPage:function(a,b,d,e){e=e||this.options.bounceEasing,a>=this.pages.length?a=this.pages.length-1:a<0&&(a=0),b>=this.pages[a].length?b=this.pages[a].length-1:b<0&&(b=0);var f=this.pages[a][b].x,g=this.pages[a][b].y;d=void 0===d?this.options.snapSpeed||c.max(c.max(c.min(c.abs(f-this.x),1e3),c.min(c.abs(g-this.y),1e3)),300):d,this.currentPage={x:f,y:g,pageX:a,pageY:b},this.scrollTo(f,g,d,e)},next:function(a,b){var c=this.currentPage.pageX,d=this.currentPage.pageY;c++,c>=this.pages.length&&this.hasVerticalScroll&&(c=0,d++),this.goToPage(c,d,a,b)},prev:function(a,b){var c=this.currentPage.pageX,d=this.currentPage.pageY;c--,c<0&&this.hasVerticalScroll&&(c=0,d--),this.goToPage(c,d,a,b)},_initKeys:function(b){var c,d={pageUp:33,pageDown:34,end:35,home:36,left:37,up:38,right:39,down:40};if("object"==typeof this.options.keyBindings)for(c in this.options.keyBindings)"string"==typeof this.options.keyBindings[c]&&(this.options.keyBindings[c]=this.options.keyBindings[c].toUpperCase().charCodeAt(0));else this.options.keyBindings={};for(c in d)this.options.keyBindings[c]=this.options.keyBindings[c]||d[c];h.addEvent(a,"keydown",this),this.on("destroy",function(){h.removeEvent(a,"keydown",this)})},_key:function(a){if(this.enabled){var b,d=this.options.snap,e=d?this.currentPage.pageX:this.x,f=d?this.currentPage.pageY:this.y,g=h.getTime(),i=this.keyTime||0,j=.25;switch(this.options.useTransition&&this.isInTransition&&(b=this.getComputedPosition(),this._translate(c.round(b.x),c.round(b.y)),this.isInTransition=!1),this.keyAcceleration=g-i<200?c.min(this.keyAcceleration+j,50):0,a.keyCode){case this.options.keyBindings.pageUp:this.hasHorizontalScroll&&!this.hasVerticalScroll?e+=d?1:this.wrapperWidth:f+=d?1:this.wrapperHeight;break;case this.options.keyBindings.pageDown:this.hasHorizontalScroll&&!this.hasVerticalScroll?e-=d?1:this.wrapperWidth:f-=d?1:this.wrapperHeight;break;case this.options.keyBindings.end:e=d?this.pages.length-1:this.maxScrollX,f=d?this.pages[0].length-1:this.maxScrollY;break;case this.options.keyBindings.home:e=0,f=0;break;case this.options.keyBindings.left:e+=d?-1:5+this.keyAcceleration>>0;break;case this.options.keyBindings.up:f+=d?1:5+this.keyAcceleration>>0;break;case this.options.keyBindings.right:e-=d?-1:5+this.keyAcceleration>>0;break;case this.options.keyBindings.down:f-=d?1:5+this.keyAcceleration>>0;break;default:return}if(d)return void this.goToPage(e,f);e>0?(e=0,this.keyAcceleration=0):e<this.maxScrollX&&(e=this.maxScrollX,this.keyAcceleration=0),f>0?(f=0,this.keyAcceleration=0):f<this.maxScrollY&&(f=this.maxScrollY,this.keyAcceleration=0),this.scrollTo(e,f,0),this.keyTime=g}},_animate:function(a,b,c,d){function e(){var m,n,o,p=h.getTime();if(p>=l)return f.isAnimating=!1,f._translate(a,b),void(f.resetPosition(f.options.bounceTime)||f._execEvent("scrollEnd"));p=(p-k)/c,o=d(p),m=(a-i)*o+i,n=(b-j)*o+j,f._translate(m,n),f.isAnimating&&g(e)}var f=this,i=this.x,j=this.y,k=h.getTime(),l=k+c;this.isAnimating=!0,e()},handleEvent:function(a){switch(a.type){case"touchstart":case"MSPointerDown":case"mousedown":this._start(a);break;case"touchmove":case"MSPointerMove":case"mousemove":this._move(a);break;case"touchend":case"MSPointerUp":case"mouseup":case"touchcancel":case"MSPointerCancel":case"mousecancel":this._end(a);break;case"orientationchange":case"resize":this._resize();break;case"transitionend":case"webkitTransitionEnd":case"oTransitionEnd":case"MSTransitionEnd":this._transitionEnd(a);break;case"wheel":case"DOMMouseScroll":case"mousewheel":this._wheel(a);break;case"keydown":this._key(a);break;case"click":a._constructed||(a.preventDefault(),a.stopPropagation())}}},f.prototype={handleEvent:function(a){switch(a.type){case"touchstart":case"MSPointerDown":case"mousedown":this._start(a);break;case"touchmove":case"MSPointerMove":case"mousemove":this._move(a);break;case"touchend":case"MSPointerUp":case"mouseup":case"touchcancel":case"MSPointerCancel":case"mousecancel":this._end(a)}},destroy:function(){this.options.interactive&&(h.removeEvent(this.indicator,"touchstart",this),h.removeEvent(this.indicator,"MSPointerDown",this),h.removeEvent(this.indicator,"mousedown",this),h.removeEvent(a,"touchmove",this),h.removeEvent(a,"MSPointerMove",this),h.removeEvent(a,"mousemove",this),h.removeEvent(a,"touchend",this),h.removeEvent(a,"MSPointerUp",this),h.removeEvent(a,"mouseup",this)),this.options.defaultScrollbars&&this.wrapper.parentNode.removeChild(this.wrapper)},_start:function(b){var c=b.touches?b.touches[0]:b;b.preventDefault(),b.stopPropagation(),this.transitionTime(),this.initiated=!0,this.moved=!1,this.lastPointX=c.pageX,this.lastPointY=c.pageY,this.startTime=h.getTime(),this.options.disableTouch||h.addEvent(a,"touchmove",this),this.options.disablePointer||h.addEvent(a,"MSPointerMove",this),this.options.disableMouse||h.addEvent(a,"mousemove",this),this.scroller._execEvent("beforeScrollStart")},_move:function(a){var b,c,d,e,f=a.touches?a.touches[0]:a;h.getTime();this.moved||this.scroller._execEvent("scrollStart"),this.moved=!0,b=f.pageX-this.lastPointX,this.lastPointX=f.pageX,c=f.pageY-this.lastPointY,this.lastPointY=f.pageY,d=this.x+b,e=this.y+c,this._pos(d,e),a.preventDefault(),a.stopPropagation()},_end:function(b){if(this.initiated){if(this.initiated=!1,b.preventDefault(),b.stopPropagation(),h.removeEvent(a,"touchmove",this),h.removeEvent(a,"MSPointerMove",this),h.removeEvent(a,"mousemove",this),this.scroller.options.snap){var d=this.scroller._nearestSnap(this.scroller.x,this.scroller.y),e=this.options.snapSpeed||c.max(c.max(c.min(c.abs(this.scroller.x-d.x),1e3),c.min(c.abs(this.scroller.y-d.y),1e3)),300);this.scroller.x==d.x&&this.scroller.y==d.y||(this.scroller.directionX=0,this.scroller.directionY=0,this.scroller.currentPage=d,this.scroller.scrollTo(d.x,d.y,e,this.scroller.options.bounceEasing))}this.moved&&this.scroller._execEvent("scrollEnd")}},transitionTime:function(a){a=a||0,this.indicatorStyle[h.style.transitionDuration]=a+"ms",!a&&h.isBadAndroid&&(this.indicatorStyle[h.style.transitionDuration]="0.001s")},transitionTimingFunction:function(a){this.indicatorStyle[h.style.transitionTimingFunction]=a},refresh:function(){this.transitionTime(),
this.options.listenX&&!this.options.listenY?this.indicatorStyle.display=this.scroller.hasHorizontalScroll?"block":"none":this.options.listenY&&!this.options.listenX?this.indicatorStyle.display=this.scroller.hasVerticalScroll?"block":"none":this.indicatorStyle.display=this.scroller.hasHorizontalScroll||this.scroller.hasVerticalScroll?"block":"none",this.scroller.hasHorizontalScroll&&this.scroller.hasVerticalScroll?(h.addClass(this.wrapper,"iScrollBothScrollbars"),h.removeClass(this.wrapper,"iScrollLoneScrollbar"),this.options.defaultScrollbars&&this.options.customStyle&&(this.options.listenX?this.wrapper.style.right="8px":this.wrapper.style.bottom="8px")):(h.removeClass(this.wrapper,"iScrollBothScrollbars"),h.addClass(this.wrapper,"iScrollLoneScrollbar"),this.options.defaultScrollbars&&this.options.customStyle&&(this.options.listenX?this.wrapper.style.right="2px":this.wrapper.style.bottom="2px"));this.wrapper.offsetHeight;this.options.listenX&&(this.wrapperWidth=this.wrapper.clientWidth,this.options.resize?(this.indicatorWidth=c.max(c.round(this.wrapperWidth*this.wrapperWidth/(this.scroller.scrollerWidth||this.wrapperWidth||1)),8),this.indicatorStyle.width=this.indicatorWidth+"px"):this.indicatorWidth=this.indicator.clientWidth,this.maxPosX=this.wrapperWidth-this.indicatorWidth,"clip"==this.options.shrink?(this.minBoundaryX=8-this.indicatorWidth,this.maxBoundaryX=this.wrapperWidth-8):(this.minBoundaryX=0,this.maxBoundaryX=this.maxPosX),this.sizeRatioX=this.options.speedRatioX||this.scroller.maxScrollX&&this.maxPosX/this.scroller.maxScrollX),this.options.listenY&&(this.wrapperHeight=this.wrapper.clientHeight,this.options.resize?(this.indicatorHeight=c.max(c.round(this.wrapperHeight*this.wrapperHeight/(this.scroller.scrollerHeight||this.wrapperHeight||1)),8),this.indicatorStyle.height=this.indicatorHeight+"px"):this.indicatorHeight=this.indicator.clientHeight,this.maxPosY=this.wrapperHeight-this.indicatorHeight,"clip"==this.options.shrink?(this.minBoundaryY=8-this.indicatorHeight,this.maxBoundaryY=this.wrapperHeight-8):(this.minBoundaryY=0,this.maxBoundaryY=this.maxPosY),this.maxPosY=this.wrapperHeight-this.indicatorHeight,this.sizeRatioY=this.options.speedRatioY||this.scroller.maxScrollY&&this.maxPosY/this.scroller.maxScrollY),this.updatePosition()},updatePosition:function(){var a=this.options.listenX&&c.round(this.sizeRatioX*this.scroller.x)||0,b=this.options.listenY&&c.round(this.sizeRatioY*this.scroller.y)||0;this.options.ignoreBoundaries||(a<this.minBoundaryX?("scale"==this.options.shrink&&(this.width=c.max(this.indicatorWidth+a,8),this.indicatorStyle.width=this.width+"px"),a=this.minBoundaryX):a>this.maxBoundaryX?"scale"==this.options.shrink?(this.width=c.max(this.indicatorWidth-(a-this.maxPosX),8),this.indicatorStyle.width=this.width+"px",a=this.maxPosX+this.indicatorWidth-this.width):a=this.maxBoundaryX:"scale"==this.options.shrink&&this.width!=this.indicatorWidth&&(this.width=this.indicatorWidth,this.indicatorStyle.width=this.width+"px"),b<this.minBoundaryY?("scale"==this.options.shrink&&(this.height=c.max(this.indicatorHeight+3*b,8),this.indicatorStyle.height=this.height+"px"),b=this.minBoundaryY):b>this.maxBoundaryY?"scale"==this.options.shrink?(this.height=c.max(this.indicatorHeight-3*(b-this.maxPosY),8),this.indicatorStyle.height=this.height+"px",b=this.maxPosY+this.indicatorHeight-this.height):b=this.maxBoundaryY:"scale"==this.options.shrink&&this.height!=this.indicatorHeight&&(this.height=this.indicatorHeight,this.indicatorStyle.height=this.height+"px")),this.x=a,this.y=b,this.scroller.options.useTransform?this.indicatorStyle[h.style.transform]="translate("+a+"px,"+b+"px)"+this.scroller.translateZ:(this.indicatorStyle.left=a+"px",this.indicatorStyle.top=b+"px")},_pos:function(a,b){a<0?a=0:a>this.maxPosX&&(a=this.maxPosX),b<0?b=0:b>this.maxPosY&&(b=this.maxPosY),a=this.options.listenX?c.round(a/this.sizeRatioX):this.scroller.x,b=this.options.listenY?c.round(b/this.sizeRatioY):this.scroller.y,this.scroller.scrollTo(a,b)},fade:function(a,b){if(!b||this.visible){clearTimeout(this.fadeTimeout),this.fadeTimeout=null;var c=a?250:500,d=a?0:300;a=a?"1":"0",this.wrapperStyle[h.style.transitionDuration]=c+"ms",this.fadeTimeout=setTimeout(function(a){this.wrapperStyle.opacity=a,this.visible=+a}.bind(this,a),d)}}},d.utils=h,"undefined"!=typeof module&&module.exports?module.exports=d:a.IScroll=d}(window,document,Math),function(a,b,c){function d(a,b,c){a.addEventListener?a.addEventListener(b,c,!1):a.attachEvent("on"+b,c)}function e(a){if("keypress"==a.type){var b=String.fromCharCode(a.which);return a.shiftKey||(b=b.toLowerCase()),b}return q[a.which]?q[a.which]:r[a.which]?r[a.which]:String.fromCharCode(a.which).toLowerCase()}function f(a){a=a||{};var b,c=!1;for(b in w)a[b]?c=!0:w[b]=0;c||(z=!1)}function g(a,b,c,d,e,f){var g,h,i=[],j=c.type;if(!u[a])return[];for("keyup"==j&&k(a)&&(b=[a]),g=0;g<u[a].length;++g)if(h=u[a][g],!(!d&&h.seq&&w[h.seq]!=h.level||j!=h.action||("keypress"!=j||c.metaKey||c.ctrlKey)&&b.sort().join(",")!==h.modifiers.sort().join(","))){var l=d&&h.seq==d&&h.level==f;(!d&&h.combo==e||l)&&u[a].splice(g,1),i.push(h)}return i}function h(a){var b=[];return a.shiftKey&&b.push("shift"),a.altKey&&b.push("alt"),a.ctrlKey&&b.push("ctrl"),a.metaKey&&b.push("meta"),b}function i(a,b,c,d){A.stopCallback(b,b.target||b.srcElement,c,d)||!1!==a(b,c)||(b.preventDefault?b.preventDefault():b.returnValue=!1,b.stopPropagation?b.stopPropagation():b.cancelBubble=!0)}function j(a){"number"!=typeof a.which&&(a.which=a.keyCode);var b=e(a);b&&("keyup"==a.type&&x===b?x=!1:A.handleKey(b,h(a),a))}function k(a){return"shift"==a||"ctrl"==a||"alt"==a||"meta"==a}function l(a,b,c,d){function g(b){return function(){z=b,++w[a],clearTimeout(p),p=setTimeout(f,1e3)}}function h(b){i(c,b,a),"keyup"!==d&&(x=e(b)),setTimeout(f,10)}for(var j=w[a]=0;j<b.length;++j){var k=j+1===b.length?h:g(d||m(b[j+1]).action);n(b[j],k,d,a,j)}}function m(a,b){var c,d,e,f=[];for(c="+"===a?["+"]:a.split("+"),e=0;e<c.length;++e)d=c[e],t[d]&&(d=t[d]),b&&"keypress"!=b&&s[d]&&(d=s[d],f.push("shift")),k(d)&&f.push(d);if(c=d,!(e=b)){if(!o){o={};for(var g in q)95<g&&112>g||q.hasOwnProperty(g)&&(o[q[g]]=g)}e=o[c]?"keydown":"keypress"}return"keypress"==e&&f.length&&(e="keydown"),{key:d,modifiers:f,action:e}}function n(a,b,c,d,e){v[a+":"+c]=b,a=a.replace(/\s+/g," ");var f=a.split(" ");1<f.length?l(a,f,b,c):(c=m(a,c),u[c.key]=u[c.key]||[],g(c.key,c.modifiers,{type:c.action},d,a,e),u[c.key][d?"unshift":"push"]({callback:b,modifiers:c.modifiers,action:c.action,seq:d,level:e,combo:a}))}var o,p,q={8:"backspace",9:"tab",13:"enter",16:"shift",17:"ctrl",18:"alt",20:"capslock",27:"esc",32:"space",33:"pageup",34:"pagedown",35:"end",36:"home",37:"left",38:"up",39:"right",40:"down",45:"ins",46:"del",91:"meta",93:"meta",224:"meta"},r={106:"*",107:"+",109:"-",110:".",111:"/",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'"},s={"~":"`","!":"1","@":"2","#":"3",$:"4","%":"5","^":"6","&":"7","*":"8","(":"9",")":"0",_:"-","+":"=",":":";",'"':"'","<":",",">":".","?":"/","|":"\\"},t={option:"alt",command:"meta",return:"enter",escape:"esc",mod:/Mac|iPod|iPhone|iPad/.test(navigator.platform)?"meta":"ctrl"},u={},v={},w={},x=!1,y=!1,z=!1;for(c=1;20>c;++c)q[111+c]="f"+c;for(c=0;9>=c;++c)q[c+96]=c;d(b,"keypress",j),d(b,"keydown",j),d(b,"keyup",j);var A={bind:function(a,b,c){a=a instanceof Array?a:[a];for(var d=0;d<a.length;++d)n(a[d],b,c);return this},unbind:function(a,b){return A.bind(a,function(){},b)},trigger:function(a,b){return v[a+":"+b]&&v[a+":"+b]({},a),this},reset:function(){return u={},v={},this},stopCallback:function(a,b){return!(-1<(" "+b.className+" ").indexOf(" mousetrap "))&&("INPUT"==b.tagName||"SELECT"==b.tagName||"TEXTAREA"==b.tagName||b.isContentEditable)},handleKey:function(a,b,c){var d,e=g(a,b,c);b={};var h=0,j=!1;for(d=0;d<e.length;++d)e[d].seq&&(h=Math.max(h,e[d].level));for(d=0;d<e.length;++d)e[d].seq?e[d].level==h&&(j=!0,b[e[d].seq]=1,i(e[d].callback,c,e[d].combo,e[d].seq)):j||i(e[d].callback,c,e[d].combo);e="keypress"==c.type&&y,c.type!=z||k(a)||e||f(b),y=j&&"keydown"==c.type}};a.Mousetrap=A,"function"==typeof define&&define.amd&&define(A)}(window,document),function(a){function b(b){return this.each(function(){var d=a(this),e=d.data("bs.tab");e||d.data("bs.tab",e=new c(this)),"string"==typeof b&&e[b]()})}var c=function(b){this.element=a(b)};c.VERSION="3.3.1",c.TRANSITION_DURATION=150,c.prototype.show=function(){var b=this.element,c=b.closest("ul:not(.dropdown-menu)"),d=b.data("target");if(d||(d=b.attr("href"),d=d&&d.replace(/.*(?=#[^\s]*$)/,"")),!b.parent("li").hasClass("active")){var e=c.find(".active:last a"),f=a.Event("hide.bs.tab",{relatedTarget:b[0]}),g=a.Event("show.bs.tab",{relatedTarget:e[0]});if(e.trigger(f),b.trigger(g),!g.isDefaultPrevented()&&!f.isDefaultPrevented()){var h=a(d);this.activate(b.closest("li"),c),this.activate(h,h.parent(),function(){e.trigger({type:"hidden.bs.tab",relatedTarget:b[0]}),b.trigger({type:"shown.bs.tab",relatedTarget:e[0]})})}}},c.prototype.activate=function(b,d,e){function f(){g.removeClass("active").find("> .dropdown-menu > .active").removeClass("active").end().find('[data-toggle="tab"]').attr("aria-expanded",!1),b.addClass("active").find('[data-toggle="tab"]').attr("aria-expanded",!0),h?(b[0].offsetWidth,b.addClass("in")):b.removeClass("fade"),b.parent(".dropdown-menu")&&b.closest("li.dropdown").addClass("active").end().find('[data-toggle="tab"]').attr("aria-expanded",!0),e&&e()}var g=d.find("> .active"),h=e&&a.support.transition&&(g.length&&g.hasClass("fade")||!!d.find("> .fade").length);g.length&&h?g.one("bsTransitionEnd",f).emulateTransitionEnd(c.TRANSITION_DURATION):f(),g.removeClass("in")};var d=a.fn.tab;a.fn.tab=b,a.fn.tab.Constructor=c,a.fn.tab.noConflict=function(){return a.fn.tab=d,this};var e=function(c){c.preventDefault(),b.call(a(this),"show")};a(document).on("click.bs.tab.data-api",'[data-toggle="tab"]',e).on("click.bs.tab.data-api",'[data-toggle="pill"]',e)}(jQuery),function a(b,c,d){function e(g,h){if(!c[g]){if(!b[g]){var i="function"==typeof require&&require;if(!h&&i)return i(g,!0);if(f)return f(g,!0);var j=new Error("Cannot find module '"+g+"'");throw j.code="MODULE_NOT_FOUND",j}var k=c[g]={exports:{}};b[g][0].call(k.exports,function(a){var c=b[g][1][a];return e(c||a)},k,k.exports,a,b,c,d)}return c[g].exports}for(var f="function"==typeof require&&require,g=0;g<d.length;g++)e(d[g]);return e}({1:[function(a,b,c){void 0!==b&&void 0!==c&&b.exports===c&&(b.exports="monospaced.elastic"),angular.module("monospaced.elastic",[]).constant("msdElasticConfig",{append:""}).directive("msdElastic",["$timeout","$window","msdElasticConfig",function(a,b,c){return{require:"ngModel",restrict:"A, C",link:function(d,e,f,g){function h(){var a=r;n=k,u=getComputedStyle(k),angular.forEach(C,function(b){a+=b+":"+u.getPropertyValue(b)+";"}),t.setAttribute("style",a)}function i(){var b,c,e,f,g;n!==k&&h(),o||(o=!0,t.value=k.value+p,t.style.overflowY=k.style.overflowY,b=""===k.style.height?"auto":parseInt(k.style.height,10),c=getComputedStyle(k).getPropertyValue("width"),"px"===c.substr(c.length-2,2)&&(f=parseInt(c,10)-x.width,t.style.width=f+"px"),e=t.scrollHeight,e>B?(e=B,g="scroll"):e<A&&(e=A),e+=x.height,k.style.overflowY=g||"hidden",b!==e&&(d.$emit("elastic:resize",l,b,e),k.style.height=e+"px"),a(function(){o=!1},1,!1))}function j(){o=!1,i()}var k=e[0],l=e;if("TEXTAREA"===k.nodeName&&b.getComputedStyle){l.css({overflow:"hidden","overflow-y":"hidden","word-wrap":"break-word"});var m=k.value;k.value="",k.value=m;var n,o,p=f.msdElastic?f.msdElastic.replace(/\\n/g,"\n"):c.append,q=angular.element(b),r="position: absolute; top: -999px; right: auto; bottom: auto;left: 0; overflow: hidden; -webkit-box-sizing: content-box;-moz-box-sizing: content-box; box-sizing: content-box;min-height: 0 !important; height: 0 !important; padding: 0;word-wrap: break-word; border: 0;",s=angular.element('<textarea aria-hidden="true" tabindex="-1" style="'+r+'"/>').data("elastic",!0),t=s[0],u=getComputedStyle(k),v=u.getPropertyValue("resize"),w="border-box"===u.getPropertyValue("box-sizing")||"border-box"===u.getPropertyValue("-moz-box-sizing")||"border-box"===u.getPropertyValue("-webkit-box-sizing"),x=w?{width:parseInt(u.getPropertyValue("border-right-width"),10)+parseInt(u.getPropertyValue("padding-right"),10)+parseInt(u.getPropertyValue("padding-left"),10)+parseInt(u.getPropertyValue("border-left-width"),10),height:parseInt(u.getPropertyValue("border-top-width"),10)+parseInt(u.getPropertyValue("padding-top"),10)+parseInt(u.getPropertyValue("padding-bottom"),10)+parseInt(u.getPropertyValue("border-bottom-width"),10)}:{width:0,height:0},y=parseInt(u.getPropertyValue("min-height"),10),z=parseInt(u.getPropertyValue("height"),10),A=Math.max(y,z)-x.height,B=parseInt(u.getPropertyValue("max-height"),10),C=["font-family","font-size","font-weight","font-style","letter-spacing","line-height","text-transform","word-spacing","text-indent"];l.data("elastic")||(B=B&&B>0?B:9e4,t.parentNode!==document.body&&angular.element(document.body).append(t),l.css({resize:"none"===v||"vertical"===v?"none":"horizontal"}).data("elastic",!0),k.oninput="onpropertychange"in k&&"oninput"in k?k.onkeyup=i:i,q.bind("resize",j),d.$watch(function(){return g.$modelValue},function(a){j()}),d.$on("elastic:adjust",function(){h(),j()}),a(i,0,!1),d.$on("$destroy",function(){s.remove(),q.unbind("resize",j)}))}}}}])},{}],2:[function(a,b,c){!function(a){if("object"==typeof c&&"object"==typeof b)b.exports=a();else{if("function"==typeof define&&define.amd)return define([],a);(this||window).browserKeymap=a()}}(function(){function a(a){if("keypress"==a.type)return"'"+String.fromCharCode(a.charCode)+"'";var b=f[a.keyCode],c=b;return null==c||a.altGraphKey?null:(a.altKey&&"Alt"!=b&&(c="Alt-"+c),a.ctrlKey&&"Ctrl"!=b&&(c="Ctrl-"+c),a.metaKey&&"Cmd"!=b&&(c="Cmd-"+c),a.shiftKey&&"Shift"!=b&&(c="Shift-"+c),c)}function b(a){return"Ctrl"==(a=/[^-]*$/.exec(a)[0])||"Alt"==a||"Shift"==a||"Mod"==a}function c(a){for(var b,c,d,f,g=a.split(/-(?!'?$)/),h=g[g.length-1],i=0;i<g.length-1;i++){var j=g[i];if(/^(cmd|meta|m)$/i.test(j))f=!0;else if(/^a(lt)?$/i.test(j))b=!0;else if(/^(c|ctrl|control)$/i.test(j))c=!0;else if(/^s(hift)$/i.test(j))d=!0;else{if(!/^mod$/i.test(j))throw new Error("Unrecognized modifier name: "+j);e?f=!0:c=!0}}return b&&(h="Alt-"+h),c&&(h="Ctrl-"+h),f&&(h="Cmd-"+h),d&&(h="Shift-"+h),h}function d(a,b){if(this.options=b||{},this.bindings=Object.create(null),a)for(var c in a)Object.prototype.hasOwnProperty.call(a,c)&&this.addBinding(c,a[c])}for(var e="undefined"!=typeof navigator?/Mac/.test(navigator.platform):"undefined"!=typeof os&&"darwin"==os.platform(),f={3:"Enter",8:"Backspace",9:"Tab",13:"Enter",16:"Shift",17:"Ctrl",18:"Alt",19:"Pause",20:"CapsLock",27:"Esc",32:"Space",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"Left",38:"Up",39:"Right",40:"Down",44:"PrintScrn",45:"Insert",46:"Delete",59:";",61:"=",91:"Mod",92:"Mod",93:"Mod",106:"*",107:"=",109:"-",110:".",111:"/",127:"Delete",173:"-",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'",63232:"Up",63233:"Down",63234:"Left",63235:"Right",63272:"Delete",63273:"Home",63275:"End",63276:"PageUp",63277:"PageDown",63302:"Insert"},g=0;g<10;g++)f[g+48]=f[g+96]=String(g);for(var g=65;g<=90;g++)f[g]=String.fromCharCode(g);for(var g=1;g<=12;g++)f[g+111]=f[g+63235]="F"+g;return d.prototype={normalize:function(a){return!1!==this.options.multi?a.split(/ +(?!\'$)/).map(c):[c(a)]},addBinding:function(a,b){for(var c=this.normalize(a),d=0;d<c.length;d++){var e=c.slice(0,d+1).join(" "),f=d==c.length-1?b:"...",g=this.bindings[e];if(g){if(g!=f)throw new Error("Inconsistent bindings for "+e)}else this.bindings[e]=f}},removeBinding:function(a){for(var b=this.normalize(a),c=b.length-1;c>=0;c--){var d=b.slice(0,c).join(" "),e=this.bindings[d];if("..."==e&&!this.unusedMulti(d))break;e&&delete this.bindings[d]}},unusedMulti:function(a){for(var b in this.bindings)if(b.length>a&&0==b.indexOf(a)&&" "==b.charAt(a.length))return!1;return!0},lookup:function(a,b){return this.options.call?this.options.call(a,b):this.bindings[a]},constructor:d},d.keyName=a,d.isModifierKey=b,d.normalizeKeyName=c,d})},{}],3:[function(a,b,c){b.exports={Aacute:"",aacute:"",Abreve:"",abreve:"",ac:"",acd:"",acE:"",Acirc:"",acirc:"",acute:"",Acy:"",acy:"",AElig:"",aelig:"",af:"",Afr:"",afr:"",Agrave:"",agrave:"",alefsym:"",aleph:"",Alpha:"",alpha:"",Amacr:"",amacr:"",amalg:"",amp:"&",AMP:"&",andand:"",And:"",and:"",andd:"",andslope:"",andv:"",ang:"",ange:"",angle:"",angmsdaa:"",angmsdab:"",angmsdac:"",angmsdad:"",angmsdae:"",angmsdaf:"",angmsdag:"",angmsdah:"",angmsd:"",angrt:"",angrtvb:"",angrtvbd:"",angsph:"",angst:"",angzarr:"",Aogon:"",aogon:"",Aopf:"",aopf:"",apacir:"",ap:"",apE:"",ape:"",apid:"",apos:"'",ApplyFunction:"",approx:"",approxeq:"",Aring:"",aring:"",Ascr:"",ascr:"",Assign:"",ast:"*",asymp:"",asympeq:"",Atilde:"",atilde:"",Auml:"",auml:"",awconint:"",awint:"",backcong:"",backepsilon:"",backprime:"",backsim:"",backsimeq:"",Backslash:"",Barv:"",barvee:"",barwed:"",Barwed:"",barwedge:"",bbrk:"",bbrktbrk:"",bcong:"",Bcy:"",bcy:"",bdquo:"",becaus:"",because:"",Because:"",bemptyv:"",bepsi:"",bernou:"",Bernoullis:"",Beta:"",beta:"",beth:"",between:"",Bfr:"",bfr:"",bigcap:"",bigcirc:"",bigcup:"",bigodot:"",bigoplus:"",bigotimes:"",bigsqcup:"",bigstar:"",bigtriangledown:"",bigtriangleup:"",biguplus:"",bigvee:"",bigwedge:"",bkarow:"",blacklozenge:"",blacksquare:"",blacktriangle:"",blacktriangledown:"",blacktriangleleft:"",blacktriangleright:"",blank:"",blk12:"",blk14:"",blk34:"",block:"",bne:"=",bnequiv:"",bNot:"",bnot:"",Bopf:"",bopf:"",bot:"",bottom:"",bowtie:"",boxbox:"",boxdl:"",boxdL:"",boxDl:"",boxDL:"",boxdr:"",boxdR:"",boxDr:"",boxDR:"",boxh:"",boxH:"",boxhd:"",boxHd:"",boxhD:"",boxHD:"",boxhu:"",boxHu:"",boxhU:"",boxHU:"",boxminus:"",boxplus:"",boxtimes:"",boxul:"",boxuL:"",boxUl:"",boxUL:"",boxur:"",boxuR:"",boxUr:"",boxUR:"",boxv:"",boxV:"",boxvh:"",boxvH:"",boxVh:"",boxVH:"",boxvl:"",boxvL:"",boxVl:"",boxVL:"",boxvr:"",boxvR:"",boxVr:"",boxVR:"",bprime:"",breve:"",Breve:"",brvbar:"",bscr:"",Bscr:"",bsemi:"",bsim:"",bsime:"",bsolb:"",bsol:"\\",bsolhsub:"",bull:"",bullet:"",bump:"",bumpE:"",bumpe:"",Bumpeq:"",bumpeq:"",Cacute:"",cacute:"",capand:"",capbrcup:"",capcap:"",cap:"",Cap:"",capcup:"",capdot:"",CapitalDifferentialD:"",caps:"",caret:"",caron:"",Cayleys:"",ccaps:"",Ccaron:"",ccaron:"",Ccedil:"",ccedil:"",Ccirc:"",ccirc:"",Cconint:"",ccups:"",ccupssm:"",Cdot:"",cdot:"",cedil:"",Cedilla:"",cemptyv:"",cent:"",centerdot:"",CenterDot:"",cfr:"",Cfr:"",CHcy:"",chcy:"",check:"",checkmark:"",Chi:"",chi:"",circ:"",circeq:"",circlearrowleft:"",circlearrowright:"",circledast:"",circledcirc:"",circleddash:"",CircleDot:"",circledR:"",circledS:"",CircleMinus:"",CirclePlus:"",CircleTimes:"",cir:"",cirE:"",cire:"",cirfnint:"",cirmid:"",cirscir:"",ClockwiseContourIntegral:"",CloseCurlyDoubleQuote:"",CloseCurlyQuote:"",clubs:"",clubsuit:"",colon:":",Colon:"",Colone:"",colone:"",coloneq:"",comma:",",commat:"@",comp:"",compfn:"",complement:"",complexes:"",cong:"",congdot:"",Congruent:"",conint:"",Conint:"",ContourIntegral:"",copf:"",Copf:"",coprod:"",Coproduct:"",copy:"",COPY:"",copysr:"",CounterClockwiseContourIntegral:"",crarr:"",cross:"",Cross:"",Cscr:"",cscr:"",csub:"",csube:"",csup:"",csupe:"",ctdot:"",cudarrl:"",cudarrr:"",cuepr:"",cuesc:"",cularr:"",cularrp:"",cupbrcap:"",cupcap:"",CupCap:"",cup:"",Cup:"",cupcup:"",cupdot:"",cupor:"",cups:"",curarr:"",curarrm:"",curlyeqprec:"",curlyeqsucc:"",curlyvee:"",curlywedge:"",curren:"",curvearrowleft:"",curvearrowright:"",cuvee:"",cuwed:"",cwconint:"",cwint:"",cylcty:"",dagger:"",Dagger:"",daleth:"",darr:"",Darr:"",dArr:"",dash:"",Dashv:"",dashv:"",dbkarow:"",dblac:"",Dcaron:"",dcaron:"",Dcy:"",dcy:"",ddagger:"",ddarr:"",DD:"",dd:"",DDotrahd:"",ddotseq:"",deg:"",Del:"",Delta:"",delta:"",demptyv:"",dfisht:"",Dfr:"",dfr:"",dHar:"",dharl:"",dharr:"",DiacriticalAcute:"",DiacriticalDot:"",DiacriticalDoubleAcute:"",DiacriticalGrave:"`",DiacriticalTilde:"",diam:"",diamond:"",Diamond:"",diamondsuit:"",diams:"",die:"",DifferentialD:"",digamma:"",disin:"",div:"",divide:"",divideontimes:"",divonx:"",DJcy:"",djcy:"",dlcorn:"",dlcrop:"",dollar:"$",Dopf:"",dopf:"",Dot:"",dot:"",DotDot:"",doteq:"",doteqdot:"",DotEqual:"",dotminus:"",dotplus:"",dotsquare:"",doublebarwedge:"",DoubleContourIntegral:"",DoubleDot:"",DoubleDownArrow:"",DoubleLeftArrow:"",DoubleLeftRightArrow:"",DoubleLeftTee:"",DoubleLongLeftArrow:"",DoubleLongLeftRightArrow:"",DoubleLongRightArrow:"",DoubleRightArrow:"",DoubleRightTee:"",DoubleUpArrow:"",DoubleUpDownArrow:"",DoubleVerticalBar:"",DownArrowBar:"",downarrow:"",DownArrow:"",Downarrow:"",DownArrowUpArrow:"",DownBreve:"",downdownarrows:"",downharpoonleft:"",downharpoonright:"",DownLeftRightVector:"",DownLeftTeeVector:"",DownLeftVectorBar:"",DownLeftVector:"",DownRightTeeVector:"",DownRightVectorBar:"",DownRightVector:"",DownTeeArrow:"",DownTee:"",drbkarow:"",drcorn:"",drcrop:"",Dscr:"",dscr:"",DScy:"",dscy:"",dsol:"",Dstrok:"",dstrok:"",dtdot:"",dtri:"",dtrif:"",duarr:"",duhar:"",dwangle:"",DZcy:"",dzcy:"",dzigrarr:"",Eacute:"",eacute:"",easter:"",Ecaron:"",ecaron:"",Ecirc:"",ecirc:"",ecir:"",ecolon:"",Ecy:"",ecy:"",eDDot:"",Edot:"",edot:"",eDot:"",ee:"",efDot:"",Efr:"",efr:"",eg:"",Egrave:"",egrave:"",egs:"",egsdot:"",el:"",Element:"",elinters:"",ell:"",els:"",elsdot:"",Emacr:"",emacr:"",empty:"",emptyset:"",EmptySmallSquare:"",emptyv:"",EmptyVerySmallSquare:"",emsp13:"",emsp14:"",emsp:"",ENG:"",eng:"",ensp:"",Eogon:"",eogon:"",Eopf:"",eopf:"",epar:"",eparsl:"",eplus:"",epsi:"",Epsilon:"",epsilon:"",epsiv:"",eqcirc:"",eqcolon:"",eqsim:"",eqslantgtr:"",eqslantless:"",Equal:"",equals:"=",EqualTilde:"",equest:"",Equilibrium:"",equiv:"",equivDD:"",eqvparsl:"",erarr:"",erDot:"",escr:"",Escr:"",esdot:"",Esim:"",esim:"",Eta:"",eta:"",ETH:"",eth:"",Euml:"",euml:"",euro:"",excl:"!",exist:"",Exists:"",expectation:"",exponentiale:"",ExponentialE:"",fallingdotseq:"",Fcy:"",fcy:"",female:"",ffilig:"",fflig:"",ffllig:"",Ffr:"",ffr:"",filig:"",FilledSmallSquare:"",FilledVerySmallSquare:"",fjlig:"fj",flat:"",fllig:"",fltns:"",fnof:"",Fopf:"",fopf:"",forall:"",ForAll:"",fork:"",forkv:"",Fouriertrf:"",fpartint:"",frac12:"",frac13:"",frac14:"",frac15:"",frac16:"",frac18:"",frac23:"",frac25:"",frac34:"",frac35:"",frac38:"",frac45:"",frac56:"",frac58:"",frac78:"",frasl:"",frown:"",fscr:"",Fscr:"",gacute:"",Gamma:"",gamma:"",Gammad:"",gammad:"",gap:"",Gbreve:"",gbreve:"",Gcedil:"",Gcirc:"",gcirc:"",Gcy:"",gcy:"",Gdot:"",gdot:"",ge:"",gE:"",gEl:"",gel:"",geq:"",geqq:"",geqslant:"",gescc:"",ges:"",gesdot:"",gesdoto:"",gesdotol:"",gesl:"",gesles:"",Gfr:"",gfr:"",gg:"",Gg:"",ggg:"",gimel:"",GJcy:"",gjcy:"",gla:"",gl:"",glE:"",glj:"",gnap:"",gnapprox:"",gne:"",gnE:"",gneq:"",gneqq:"",gnsim:"",Gopf:"",gopf:"",grave:"`",GreaterEqual:"",GreaterEqualLess:"",GreaterFullEqual:"",GreaterGreater:"",GreaterLess:"",GreaterSlantEqual:"",GreaterTilde:"",Gscr:"",gscr:"",gsim:"",gsime:"",gsiml:"",gtcc:"",gtcir:"",gt:">",GT:">",Gt:"",gtdot:"",gtlPar:"",gtquest:"",gtrapprox:"",gtrarr:"",gtrdot:"",gtreqless:"",gtreqqless:"",gtrless:"",gtrsim:"",gvertneqq:"",gvnE:"",Hacek:"",hairsp:"",half:"",hamilt:"",HARDcy:"",hardcy:"",harrcir:"",harr:"",hArr:"",harrw:"",Hat:"^",hbar:"",Hcirc:"",hcirc:"",hearts:"",heartsuit:"",hellip:"",hercon:"",hfr:"",Hfr:"",HilbertSpace:"",hksearow:"",hkswarow:"",hoarr:"",homtht:"",hookleftarrow:"",hookrightarrow:"",hopf:"",Hopf:"",horbar:"",HorizontalLine:"",hscr:"",Hscr:"",hslash:"",Hstrok:"",hstrok:"",HumpDownHump:"",HumpEqual:"",hybull:"",hyphen:"",Iacute:"",iacute:"",ic:"",Icirc:"",icirc:"",Icy:"",icy:"",Idot:"",IEcy:"",iecy:"",iexcl:"",iff:"",ifr:"",Ifr:"",Igrave:"",igrave:"",ii:"",iiiint:"",iiint:"",iinfin:"",iiota:"",IJlig:"",ijlig:"",Imacr:"",imacr:"",image:"",ImaginaryI:"",imagline:"",imagpart:"",imath:"",Im:"",imof:"",imped:"",Implies:"",incare:"",in:"",infin:"",infintie:"",inodot:"",intcal:"",int:"",Int:"",integers:"",Integral:"",intercal:"",Intersection:"",intlarhk:"",intprod:"",InvisibleComma:"",InvisibleTimes:"",IOcy:"",iocy:"",Iogon:"",iogon:"",Iopf:"",iopf:"",Iota:"",iota:"",iprod:"",iquest:"",iscr:"",Iscr:"",isin:"",isindot:"",isinE:"",isins:"",isinsv:"",isinv:"",it:"",Itilde:"",itilde:"",Iukcy:"",iukcy:"",Iuml:"",iuml:"",Jcirc:"",jcirc:"",Jcy:"",jcy:"",Jfr:"",jfr:"",jmath:"",Jopf:"",jopf:"",Jscr:"",jscr:"",Jsercy:"",jsercy:"",Jukcy:"",jukcy:"",Kappa:"",kappa:"",kappav:"",Kcedil:"",kcedil:"",Kcy:"",kcy:"",Kfr:"",kfr:"",kgreen:"",KHcy:"",khcy:"",KJcy:"",kjcy:"",Kopf:"",kopf:"",Kscr:"",kscr:"",lAarr:"",Lacute:"",lacute:"",laemptyv:"",lagran:"",Lambda:"",lambda:"",lang:"",Lang:"",langd:"",langle:"",lap:"",Laplacetrf:"",laquo:"",larrb:"",larrbfs:"",larr:"",Larr:"",lArr:"",larrfs:"",larrhk:"",larrlp:"",larrpl:"",larrsim:"",larrtl:"",latail:"",lAtail:"",lat:"",late:"",lates:"",lbarr:"",lBarr:"",lbbrk:"",lbrace:"{",lbrack:"[",lbrke:"",lbrksld:"",lbrkslu:"",Lcaron:"",lcaron:"",Lcedil:"",lcedil:"",lceil:"",lcub:"{",Lcy:"",lcy:"",ldca:"",ldquo:"",ldquor:"",ldrdhar:"",ldrushar:"",ldsh:"",le:"",lE:"",LeftAngleBracket:"",LeftArrowBar:"",leftarrow:"",LeftArrow:"",Leftarrow:"",LeftArrowRightArrow:"",leftarrowtail:"",LeftCeiling:"",LeftDoubleBracket:"",LeftDownTeeVector:"",LeftDownVectorBar:"",LeftDownVector:"",LeftFloor:"",leftharpoondown:"",leftharpoonup:"",leftleftarrows:"",leftrightarrow:"",LeftRightArrow:"",Leftrightarrow:"",leftrightarrows:"",leftrightharpoons:"",leftrightsquigarrow:"",LeftRightVector:"",LeftTeeArrow:"",LeftTee:"",LeftTeeVector:"",leftthreetimes:"",LeftTriangleBar:"",LeftTriangle:"",LeftTriangleEqual:"",LeftUpDownVector:"",LeftUpTeeVector:"",LeftUpVectorBar:"",LeftUpVector:"",LeftVectorBar:"",LeftVector:"",lEg:"",leg:"",leq:"",leqq:"",leqslant:"",lescc:"",les:"",lesdot:"",lesdoto:"",lesdotor:"",lesg:"",lesges:"",lessapprox:"",lessdot:"",lesseqgtr:"",lesseqqgtr:"",LessEqualGreater:"",LessFullEqual:"",LessGreater:"",lessgtr:"",LessLess:"",lesssim:"",LessSlantEqual:"",LessTilde:"",lfisht:"",lfloor:"",Lfr:"",lfr:"",lg:"",lgE:"",lHar:"",lhard:"",lharu:"",lharul:"",lhblk:"",LJcy:"",ljcy:"",llarr:"",ll:"",Ll:"",llcorner:"",Lleftarrow:"",llhard:"",lltri:"",Lmidot:"",lmidot:"",lmoustache:"",lmoust:"",lnap:"",lnapprox:"",lne:"",lnE:"",lneq:"",lneqq:"",lnsim:"",loang:"",loarr:"",lobrk:"",longleftarrow:"",LongLeftArrow:"",Longleftarrow:"",longleftrightarrow:"",LongLeftRightArrow:"",Longleftrightarrow:"",longmapsto:"",longrightarrow:"",LongRightArrow:"",Longrightarrow:"",looparrowleft:"",looparrowright:"",lopar:"",Lopf:"",lopf:"",loplus:"",lotimes:"",lowast:"",lowbar:"_",LowerLeftArrow:"",LowerRightArrow:"",loz:"",lozenge:"",lozf:"",lpar:"(",lparlt:"",lrarr:"",lrcorner:"",lrhar:"",lrhard:"",lrm:"",lrtri:"",lsaquo:"",lscr:"",Lscr:"",lsh:"",Lsh:"",lsim:"",lsime:"",lsimg:"",lsqb:"[",lsquo:"",lsquor:"",Lstrok:"",lstrok:"",ltcc:"",ltcir:"",lt:"<",LT:"<",Lt:"",ltdot:"",lthree:"",ltimes:"",ltlarr:"",ltquest:"",ltri:"",ltrie:"",ltrif:"",ltrPar:"",lurdshar:"",luruhar:"",lvertneqq:"",lvnE:"",macr:"",male:"",malt:"",maltese:"",Map:"",map:"",mapsto:"",mapstodown:"",mapstoleft:"",mapstoup:"",marker:"",mcomma:"",Mcy:"",mcy:"",mdash:"",mDDot:"",measuredangle:"",MediumSpace:"",Mellintrf:"",Mfr:"",mfr:"",mho:"",micro:"",midast:"*",midcir:"",mid:"",middot:"",minusb:"",minus:"",minusd:"",minusdu:"",MinusPlus:"",mlcp:"",mldr:"",mnplus:"",models:"",Mopf:"",mopf:"",mp:"",mscr:"",Mscr:"",mstpos:"",Mu:"",mu:"",multimap:"",mumap:"",nabla:"",Nacute:"",nacute:"",nang:"",nap:"",napE:"",napid:"",napos:"",napprox:"",natural:"",naturals:"",natur:"",nbsp:"",nbump:"",nbumpe:"",ncap:"",Ncaron:"",ncaron:"",Ncedil:"",ncedil:"",ncong:"",ncongdot:"",ncup:"",Ncy:"",ncy:"",ndash:"",nearhk:"",nearr:"",neArr:"",nearrow:"",ne:"",nedot:"",NegativeMediumSpace:"",NegativeThickSpace:"",NegativeThinSpace:"",NegativeVeryThinSpace:"",nequiv:"",nesear:"",nesim:"",NestedGreaterGreater:"",NestedLessLess:"",NewLine:"\n",nexist:"",nexists:"",Nfr:"",nfr:"",ngE:"",nge:"",ngeq:"",ngeqq:"",ngeqslant:"",nges:"",nGg:"",ngsim:"",nGt:"",ngt:"",ngtr:"",nGtv:"",nharr:"",nhArr:"",nhpar:"",ni:"",nis:"",nisd:"",niv:"",NJcy:"",njcy:"",nlarr:"",nlArr:"",nldr:"",nlE:"",nle:"",nleftarrow:"",nLeftarrow:"",nleftrightarrow:"",nLeftrightarrow:"",nleq:"",nleqq:"",nleqslant:"",nles:"",nless:"",nLl:"",nlsim:"",nLt:"",nlt:"",nltri:"",nltrie:"",nLtv:"",nmid:"",NoBreak:"",NonBreakingSpace:"",nopf:"",Nopf:"",Not:"",not:"",NotCongruent:"",NotCupCap:"",NotDoubleVerticalBar:"",NotElement:"",NotEqual:"",NotEqualTilde:"",NotExists:"",NotGreater:"",NotGreaterEqual:"",NotGreaterFullEqual:"",NotGreaterGreater:"",NotGreaterLess:"",NotGreaterSlantEqual:"",NotGreaterTilde:"",NotHumpDownHump:"",NotHumpEqual:"",notin:"",notindot:"",notinE:"",notinva:"",notinvb:"",notinvc:"",NotLeftTriangleBar:"",NotLeftTriangle:"",NotLeftTriangleEqual:"",NotLess:"",NotLessEqual:"",NotLessGreater:"",NotLessLess:"",NotLessSlantEqual:"",NotLessTilde:"",NotNestedGreaterGreater:"",NotNestedLessLess:"",notni:"",notniva:"",notnivb:"",notnivc:"",NotPrecedes:"",NotPrecedesEqual:"",NotPrecedesSlantEqual:"",NotReverseElement:"",NotRightTriangleBar:"",NotRightTriangle:"",NotRightTriangleEqual:"",NotSquareSubset:"",NotSquareSubsetEqual:"",NotSquareSuperset:"",NotSquareSupersetEqual:"",NotSubset:"",NotSubsetEqual:"",NotSucceeds:"",NotSucceedsEqual:"",NotSucceedsSlantEqual:"",NotSucceedsTilde:"",NotSuperset:"",NotSupersetEqual:"",NotTilde:"",NotTildeEqual:"",NotTildeFullEqual:"",NotTildeTilde:"",NotVerticalBar:"",nparallel:"",npar:"",nparsl:"",npart:"",npolint:"",npr:"",nprcue:"",nprec:"",npreceq:"",npre:"",nrarrc:"",nrarr:"",nrArr:"",nrarrw:"",nrightarrow:"",nRightarrow:"",nrtri:"",nrtrie:"",nsc:"",nsccue:"",nsce:"",Nscr:"",nscr:"",nshortmid:"",nshortparallel:"",nsim:"",nsime:"",nsimeq:"",nsmid:"",nspar:"",nsqsube:"",nsqsupe:"",nsub:"",nsubE:"",nsube:"",nsubset:"",nsubseteq:"",nsubseteqq:"",nsucc:"",nsucceq:"",nsup:"",nsupE:"",nsupe:"",nsupset:"",nsupseteq:"",nsupseteqq:"",ntgl:"",Ntilde:"",ntilde:"",ntlg:"",ntriangleleft:"",ntrianglelefteq:"",ntriangleright:"",ntrianglerighteq:"",Nu:"",nu:"",num:"#",numero:"",numsp:"",nvap:"",nvdash:"",nvDash:"",nVdash:"",nVDash:"",nvge:"",nvgt:">",nvHarr:"",nvinfin:"",nvlArr:"",nvle:"",nvlt:"<",nvltrie:"",nvrArr:"",nvrtrie:"",nvsim:"",nwarhk:"",nwarr:"",nwArr:"",nwarrow:"",nwnear:"",Oacute:"",oacute:"",oast:"",Ocirc:"",ocirc:"",ocir:"",Ocy:"",ocy:"",odash:"",Odblac:"",odblac:"",odiv:"",odot:"",odsold:"",OElig:"",oelig:"",ofcir:"",Ofr:"",ofr:"",ogon:"",Ograve:"",ograve:"",ogt:"",ohbar:"",ohm:"",oint:"",olarr:"",olcir:"",
olcross:"",oline:"",olt:"",Omacr:"",omacr:"",Omega:"",omega:"",Omicron:"",omicron:"",omid:"",ominus:"",Oopf:"",oopf:"",opar:"",OpenCurlyDoubleQuote:"",OpenCurlyQuote:"",operp:"",oplus:"",orarr:"",Or:"",or:"",ord:"",order:"",orderof:"",ordf:"",ordm:"",origof:"",oror:"",orslope:"",orv:"",oS:"",Oscr:"",oscr:"",Oslash:"",oslash:"",osol:"",Otilde:"",otilde:"",otimesas:"",Otimes:"",otimes:"",Ouml:"",ouml:"",ovbar:"",OverBar:"",OverBrace:"",OverBracket:"",OverParenthesis:"",para:"",parallel:"",par:"",parsim:"",parsl:"",part:"",PartialD:"",Pcy:"",pcy:"",percnt:"%",period:".",permil:"",perp:"",pertenk:"",Pfr:"",pfr:"",Phi:"",phi:"",phiv:"",phmmat:"",phone:"",Pi:"",pi:"",pitchfork:"",piv:"",planck:"",planckh:"",plankv:"",plusacir:"",plusb:"",pluscir:"",plus:"+",plusdo:"",plusdu:"",pluse:"",PlusMinus:"",plusmn:"",plussim:"",plustwo:"",pm:"",Poincareplane:"",pointint:"",popf:"",Popf:"",pound:"",prap:"",Pr:"",pr:"",prcue:"",precapprox:"",prec:"",preccurlyeq:"",Precedes:"",PrecedesEqual:"",PrecedesSlantEqual:"",PrecedesTilde:"",preceq:"",precnapprox:"",precneqq:"",precnsim:"",pre:"",prE:"",precsim:"",prime:"",Prime:"",primes:"",prnap:"",prnE:"",prnsim:"",prod:"",Product:"",profalar:"",profline:"",profsurf:"",prop:"",Proportional:"",Proportion:"",propto:"",prsim:"",prurel:"",Pscr:"",pscr:"",Psi:"",psi:"",puncsp:"",Qfr:"",qfr:"",qint:"",qopf:"",Qopf:"",qprime:"",Qscr:"",qscr:"",quaternions:"",quatint:"",quest:"?",questeq:"",quot:'"',QUOT:'"',rAarr:"",race:"",Racute:"",racute:"",radic:"",raemptyv:"",rang:"",Rang:"",rangd:"",range:"",rangle:"",raquo:"",rarrap:"",rarrb:"",rarrbfs:"",rarrc:"",rarr:"",Rarr:"",rArr:"",rarrfs:"",rarrhk:"",rarrlp:"",rarrpl:"",rarrsim:"",Rarrtl:"",rarrtl:"",rarrw:"",ratail:"",rAtail:"",ratio:"",rationals:"",rbarr:"",rBarr:"",RBarr:"",rbbrk:"",rbrace:"}",rbrack:"]",rbrke:"",rbrksld:"",rbrkslu:"",Rcaron:"",rcaron:"",Rcedil:"",rcedil:"",rceil:"",rcub:"}",Rcy:"",rcy:"",rdca:"",rdldhar:"",rdquo:"",rdquor:"",rdsh:"",real:"",realine:"",realpart:"",reals:"",Re:"",rect:"",reg:"",REG:"",ReverseElement:"",ReverseEquilibrium:"",ReverseUpEquilibrium:"",rfisht:"",rfloor:"",rfr:"",Rfr:"",rHar:"",rhard:"",rharu:"",rharul:"",Rho:"",rho:"",rhov:"",RightAngleBracket:"",RightArrowBar:"",rightarrow:"",RightArrow:"",Rightarrow:"",RightArrowLeftArrow:"",rightarrowtail:"",RightCeiling:"",RightDoubleBracket:"",RightDownTeeVector:"",RightDownVectorBar:"",RightDownVector:"",RightFloor:"",rightharpoondown:"",rightharpoonup:"",rightleftarrows:"",rightleftharpoons:"",rightrightarrows:"",rightsquigarrow:"",RightTeeArrow:"",RightTee:"",RightTeeVector:"",rightthreetimes:"",RightTriangleBar:"",RightTriangle:"",RightTriangleEqual:"",RightUpDownVector:"",RightUpTeeVector:"",RightUpVectorBar:"",RightUpVector:"",RightVectorBar:"",RightVector:"",ring:"",risingdotseq:"",rlarr:"",rlhar:"",rlm:"",rmoustache:"",rmoust:"",rnmid:"",roang:"",roarr:"",robrk:"",ropar:"",ropf:"",Ropf:"",roplus:"",rotimes:"",RoundImplies:"",rpar:")",rpargt:"",rppolint:"",rrarr:"",Rrightarrow:"",rsaquo:"",rscr:"",Rscr:"",rsh:"",Rsh:"",rsqb:"]",rsquo:"",rsquor:"",rthree:"",rtimes:"",rtri:"",rtrie:"",rtrif:"",rtriltri:"",RuleDelayed:"",ruluhar:"",rx:"",Sacute:"",sacute:"",sbquo:"",scap:"",Scaron:"",scaron:"",Sc:"",sc:"",sccue:"",sce:"",scE:"",Scedil:"",scedil:"",Scirc:"",scirc:"",scnap:"",scnE:"",scnsim:"",scpolint:"",scsim:"",Scy:"",scy:"",sdotb:"",sdot:"",sdote:"",searhk:"",searr:"",seArr:"",searrow:"",sect:"",semi:";",seswar:"",setminus:"",setmn:"",sext:"",Sfr:"",sfr:"",sfrown:"",sharp:"",SHCHcy:"",shchcy:"",SHcy:"",shcy:"",ShortDownArrow:"",ShortLeftArrow:"",shortmid:"",shortparallel:"",ShortRightArrow:"",ShortUpArrow:"",shy:"",Sigma:"",sigma:"",sigmaf:"",sigmav:"",sim:"",simdot:"",sime:"",simeq:"",simg:"",simgE:"",siml:"",simlE:"",simne:"",simplus:"",simrarr:"",slarr:"",SmallCircle:"",smallsetminus:"",smashp:"",smeparsl:"",smid:"",smile:"",smt:"",smte:"",smtes:"",SOFTcy:"",softcy:"",solbar:"",solb:"",sol:"/",Sopf:"",sopf:"",spades:"",spadesuit:"",spar:"",sqcap:"",sqcaps:"",sqcup:"",sqcups:"",Sqrt:"",sqsub:"",sqsube:"",sqsubset:"",sqsubseteq:"",sqsup:"",sqsupe:"",sqsupset:"",sqsupseteq:"",square:"",Square:"",SquareIntersection:"",SquareSubset:"",SquareSubsetEqual:"",SquareSuperset:"",SquareSupersetEqual:"",SquareUnion:"",squarf:"",squ:"",squf:"",srarr:"",Sscr:"",sscr:"",ssetmn:"",ssmile:"",sstarf:"",Star:"",star:"",starf:"",straightepsilon:"",straightphi:"",strns:"",sub:"",Sub:"",subdot:"",subE:"",sube:"",subedot:"",submult:"",subnE:"",subne:"",subplus:"",subrarr:"",subset:"",Subset:"",subseteq:"",subseteqq:"",SubsetEqual:"",subsetneq:"",subsetneqq:"",subsim:"",subsub:"",subsup:"",succapprox:"",succ:"",succcurlyeq:"",Succeeds:"",SucceedsEqual:"",SucceedsSlantEqual:"",SucceedsTilde:"",succeq:"",succnapprox:"",succneqq:"",succnsim:"",succsim:"",SuchThat:"",sum:"",Sum:"",sung:"",sup1:"",sup2:"",sup3:"",sup:"",Sup:"",supdot:"",supdsub:"",supE:"",supe:"",supedot:"",Superset:"",SupersetEqual:"",suphsol:"",suphsub:"",suplarr:"",supmult:"",supnE:"",supne:"",supplus:"",supset:"",Supset:"",supseteq:"",supseteqq:"",supsetneq:"",supsetneqq:"",supsim:"",supsub:"",supsup:"",swarhk:"",swarr:"",swArr:"",swarrow:"",swnwar:"",szlig:"",Tab:"\t",target:"",Tau:"",tau:"",tbrk:"",Tcaron:"",tcaron:"",Tcedil:"",tcedil:"",Tcy:"",tcy:"",tdot:"",telrec:"",Tfr:"",tfr:"",there4:"",therefore:"",Therefore:"",Theta:"",theta:"",thetasym:"",thetav:"",thickapprox:"",thicksim:"",ThickSpace:"",ThinSpace:"",thinsp:"",thkap:"",thksim:"",THORN:"",thorn:"",tilde:"",Tilde:"",TildeEqual:"",TildeFullEqual:"",TildeTilde:"",timesbar:"",timesb:"",times:"",timesd:"",tint:"",toea:"",topbot:"",topcir:"",top:"",Topf:"",topf:"",topfork:"",tosa:"",tprime:"",trade:"",TRADE:"",triangle:"",triangledown:"",triangleleft:"",trianglelefteq:"",triangleq:"",triangleright:"",trianglerighteq:"",tridot:"",trie:"",triminus:"",TripleDot:"",triplus:"",trisb:"",tritime:"",trpezium:"",Tscr:"",tscr:"",TScy:"",tscy:"",TSHcy:"",tshcy:"",Tstrok:"",tstrok:"",twixt:"",twoheadleftarrow:"",twoheadrightarrow:"",Uacute:"",uacute:"",uarr:"",Uarr:"",uArr:"",Uarrocir:"",Ubrcy:"",ubrcy:"",Ubreve:"",ubreve:"",Ucirc:"",ucirc:"",Ucy:"",ucy:"",udarr:"",Udblac:"",udblac:"",udhar:"",ufisht:"",Ufr:"",ufr:"",Ugrave:"",ugrave:"",uHar:"",uharl:"",uharr:"",uhblk:"",ulcorn:"",ulcorner:"",ulcrop:"",ultri:"",Umacr:"",umacr:"",uml:"",UnderBar:"_",UnderBrace:"",UnderBracket:"",UnderParenthesis:"",Union:"",UnionPlus:"",Uogon:"",uogon:"",Uopf:"",uopf:"",UpArrowBar:"",uparrow:"",UpArrow:"",Uparrow:"",UpArrowDownArrow:"",updownarrow:"",UpDownArrow:"",Updownarrow:"",UpEquilibrium:"",upharpoonleft:"",upharpoonright:"",uplus:"",UpperLeftArrow:"",UpperRightArrow:"",upsi:"",Upsi:"",upsih:"",Upsilon:"",upsilon:"",UpTeeArrow:"",UpTee:"",upuparrows:"",urcorn:"",urcorner:"",urcrop:"",Uring:"",uring:"",urtri:"",Uscr:"",uscr:"",utdot:"",Utilde:"",utilde:"",utri:"",utrif:"",uuarr:"",Uuml:"",uuml:"",uwangle:"",vangrt:"",varepsilon:"",varkappa:"",varnothing:"",varphi:"",varpi:"",varpropto:"",varr:"",vArr:"",varrho:"",varsigma:"",varsubsetneq:"",varsubsetneqq:"",varsupsetneq:"",varsupsetneqq:"",vartheta:"",vartriangleleft:"",vartriangleright:"",vBar:"",Vbar:"",vBarv:"",Vcy:"",vcy:"",vdash:"",vDash:"",Vdash:"",VDash:"",Vdashl:"",veebar:"",vee:"",Vee:"",veeeq:"",vellip:"",verbar:"|",Verbar:"",vert:"|",Vert:"",VerticalBar:"",VerticalLine:"|",VerticalSeparator:"",VerticalTilde:"",VeryThinSpace:"",Vfr:"",vfr:"",vltri:"",vnsub:"",vnsup:"",Vopf:"",vopf:"",vprop:"",vrtri:"",Vscr:"",vscr:"",vsubnE:"",vsubne:"",vsupnE:"",vsupne:"",Vvdash:"",vzigzag:"",Wcirc:"",wcirc:"",wedbar:"",wedge:"",Wedge:"",wedgeq:"",weierp:"",Wfr:"",wfr:"",Wopf:"",wopf:"",wp:"",wr:"",wreath:"",Wscr:"",wscr:"",xcap:"",xcirc:"",xcup:"",xdtri:"",Xfr:"",xfr:"",xharr:"",xhArr:"",Xi:"",xi:"",xlarr:"",xlArr:"",xmap:"",xnis:"",xodot:"",Xopf:"",xopf:"",xoplus:"",xotime:"",xrarr:"",xrArr:"",Xscr:"",xscr:"",xsqcup:"",xuplus:"",xutri:"",xvee:"",xwedge:"",Yacute:"",yacute:"",YAcy:"",yacy:"",Ycirc:"",ycirc:"",Ycy:"",ycy:"",yen:"",Yfr:"",yfr:"",YIcy:"",yicy:"",Yopf:"",yopf:"",Yscr:"",yscr:"",YUcy:"",yucy:"",yuml:"",Yuml:"",Zacute:"",zacute:"",Zcaron:"",zcaron:"",Zcy:"",zcy:"",Zdot:"",zdot:"",zeetrf:"",ZeroWidthSpace:"",Zeta:"",zeta:"",zfr:"",Zfr:"",ZHcy:"",zhcy:"",zigrarr:"",zopf:"",Zopf:"",Zscr:"",zscr:"",zwj:"",zwnj:""}},{}],4:[function(a,b,c){function d(a){return Array.prototype.slice.call(arguments,1).forEach(function(b){b&&Object.keys(b).forEach(function(c){a[c]=b[c]})}),a}function e(a){return Object.prototype.toString.call(a)}function f(a){return"[object String]"===e(a)}function g(a){return"[object Object]"===e(a)}function h(a){return"[object RegExp]"===e(a)}function i(a){return"[object Function]"===e(a)}function j(a){return a.replace(/[.?*+^$[\]\\(){}|-]/g,"\\$&")}function k(a){return Object.keys(a||{}).reduce(function(a,b){return a||s.hasOwnProperty(b)},!1)}function l(a){a.__index__=-1,a.__text_cache__=""}function m(a){return function(b,c){var d=b.slice(c);return a.test(d)?d.match(a)[0].length:0}}function n(){return function(a,b){b.normalize(a)}}function o(b){function c(a){return a.replace("%TLDS%",k.src_tlds)}function e(a,b){throw new Error('(LinkifyIt) Invalid schema "'+a+'": '+b)}var k=b.re=d({},a("./lib/re")),o=b.__tlds__.slice();b.__tlds_replaced__||o.push(u),o.push(k.src_xn),k.src_tlds=o.join("|"),k.email_fuzzy=RegExp(c(k.tpl_email_fuzzy),"i"),k.link_fuzzy=RegExp(c(k.tpl_link_fuzzy),"i"),k.link_no_ip_fuzzy=RegExp(c(k.tpl_link_no_ip_fuzzy),"i"),k.host_fuzzy_test=RegExp(c(k.tpl_host_fuzzy_test),"i");var p=[];b.__compiled__={},Object.keys(b.__schemas__).forEach(function(a){var c=b.__schemas__[a];if(null!==c){var d={validate:null,link:null};return b.__compiled__[a]=d,g(c)?(h(c.validate)?d.validate=m(c.validate):i(c.validate)?d.validate=c.validate:e(a,c),void(i(c.normalize)?d.normalize=c.normalize:c.normalize?e(a,c):d.normalize=n())):f(c)?void p.push(a):void e(a,c)}}),p.forEach(function(a){b.__compiled__[b.__schemas__[a]]&&(b.__compiled__[a].validate=b.__compiled__[b.__schemas__[a]].validate,b.__compiled__[a].normalize=b.__compiled__[b.__schemas__[a]].normalize)}),b.__compiled__[""]={validate:null,normalize:n()};var q=Object.keys(b.__compiled__).filter(function(a){return a.length>0&&b.__compiled__[a]}).map(j).join("|");b.re.schema_test=RegExp("(^|(?!_)(?:>|"+k.src_ZPCc+"))("+q+")","i"),b.re.schema_search=RegExp("(^|(?!_)(?:>|"+k.src_ZPCc+"))("+q+")","ig"),b.re.pretest=RegExp("("+b.re.schema_test.source+")|("+b.re.host_fuzzy_test.source+")|@","i"),l(b)}function p(a,b){var c=a.__index__,d=a.__last_index__,e=a.__text_cache__.slice(c,d);this.schema=a.__schema__.toLowerCase(),this.index=c+b,this.lastIndex=d+b,this.raw=e,this.text=e,this.url=e}function q(a,b){var c=new p(a,b);return a.__compiled__[c.schema].normalize(c,a),c}function r(a,b){if(!(this instanceof r))return new r(a,b);b||k(a)&&(b=a,a={}),this.__opts__=d({},s,b),this.__index__=-1,this.__last_index__=-1,this.__schema__="",this.__text_cache__="",this.__schemas__=d({},t,a),this.__compiled__={},this.__tlds__=v,this.__tlds_replaced__=!1,this.re={},o(this)}var s={fuzzyLink:!0,fuzzyEmail:!0,fuzzyIP:!1},t={"http:":{validate:function(a,b,c){var d=a.slice(b);return c.re.http||(c.re.http=new RegExp("^\\/\\/"+c.re.src_auth+c.re.src_host_port_strict+c.re.src_path,"i")),c.re.http.test(d)?d.match(c.re.http)[0].length:0}},"https:":"http:","ftp:":"http:","//":{validate:function(a,b,c){var d=a.slice(b);return c.re.no_http||(c.re.no_http=new RegExp("^"+c.re.src_auth+c.re.src_host_port_strict+c.re.src_path,"i")),c.re.no_http.test(d)?b>=3&&":"===a[b-3]?0:d.match(c.re.no_http)[0].length:0}},"mailto:":{validate:function(a,b,c){var d=a.slice(b);return c.re.mailto||(c.re.mailto=new RegExp("^"+c.re.src_email_name+"@"+c.re.src_host_strict,"i")),c.re.mailto.test(d)?d.match(c.re.mailto)[0].length:0}}},u="a[cdefgilmnoqrstuwxz]|b[abdefghijmnorstvwyz]|c[acdfghiklmnoruvwxyz]|d[ejkmoz]|e[cegrstu]|f[ijkmor]|g[abdefghilmnpqrstuwy]|h[kmnrtu]|i[delmnoqrst]|j[emop]|k[eghimnprwyz]|l[abcikrstuvy]|m[acdeghklmnopqrstuvwxyz]|n[acefgilopruz]|om|p[aefghklmnrstwy]|qa|r[eosuw]|s[abcdeghijklmnortuvxyz]|t[cdfghjklmnortvwz]|u[agksyz]|v[aceginu]|w[fs]|y[et]|z[amw]",v="biz|com|edu|gov|net|org|pro|web|xxx|aero|asia|coop|info|museum|name|shop|".split("|");r.prototype.add=function(a,b){return this.__schemas__[a]=b,o(this),this},r.prototype.set=function(a){return this.__opts__=d(this.__opts__,a),this},r.prototype.test=function(a){if(this.__text_cache__=a,this.__index__=-1,!a.length)return!1;var b,c,d,e,f,g,h,i;if(this.re.schema_test.test(a))for(h=this.re.schema_search,h.lastIndex=0;null!==(b=h.exec(a));)if(e=this.testSchemaAt(a,b[2],h.lastIndex)){this.__schema__=b[2],this.__index__=b.index+b[1].length,this.__last_index__=b.index+b[0].length+e;break}return this.__opts__.fuzzyLink&&this.__compiled__["http:"]&&(i=a.search(this.re.host_fuzzy_test))>=0&&(this.__index__<0||i<this.__index__)&&null!==(c=a.match(this.__opts__.fuzzyIP?this.re.link_fuzzy:this.re.link_no_ip_fuzzy))&&(f=c.index+c[1].length,(this.__index__<0||f<this.__index__)&&(this.__schema__="",this.__index__=f,this.__last_index__=c.index+c[0].length)),this.__opts__.fuzzyEmail&&this.__compiled__["mailto:"]&&a.indexOf("@")>=0&&null!==(d=a.match(this.re.email_fuzzy))&&(f=d.index+d[1].length,g=d.index+d[0].length,(this.__index__<0||f<this.__index__||f===this.__index__&&g>this.__last_index__)&&(this.__schema__="mailto:",this.__index__=f,this.__last_index__=g)),this.__index__>=0},r.prototype.pretest=function(a){return this.re.pretest.test(a)},r.prototype.testSchemaAt=function(a,b,c){return this.__compiled__[b.toLowerCase()]?this.__compiled__[b.toLowerCase()].validate(a,c,this):0},r.prototype.match=function(a){var b=0,c=[];this.__index__>=0&&this.__text_cache__===a&&(c.push(q(this,b)),b=this.__last_index__);for(var d=b?a.slice(b):a;this.test(d);)c.push(q(this,b)),d=d.slice(this.__last_index__),b+=this.__last_index__;return c.length?c:null},r.prototype.tlds=function(a,b){return a=Array.isArray(a)?a:[a],b?(this.__tlds__=this.__tlds__.concat(a).sort().filter(function(a,b,c){return a!==c[b-1]}).reverse(),o(this),this):(this.__tlds__=a.slice(),this.__tlds_replaced__=!0,o(this),this)},r.prototype.normalize=function(a){a.schema||(a.url="http://"+a.url),"mailto:"!==a.schema||/^mailto:/i.test(a.url)||(a.url="mailto:"+a.url)},b.exports=r},{"./lib/re":5}],5:[function(a,b,c){var d=c.src_Any=a("uc.micro/properties/Any/regex").source,e=c.src_Cc=a("uc.micro/categories/Cc/regex").source,f=c.src_Z=a("uc.micro/categories/Z/regex").source,g=c.src_P=a("uc.micro/categories/P/regex").source,h=c.src_ZPCc=[f,g,e].join("|"),i=c.src_ZCc=[f,e].join("|"),j="(?:(?!"+h+")"+d+")",k="(?:(?![0-9]|"+h+")"+d+")",l=c.src_ip4="(?:(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\\.){3}(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)";c.src_auth="(?:(?:(?!"+i+").)+@)?";var m=c.src_port="(?::(?:6(?:[0-4]\\d{3}|5(?:[0-4]\\d{2}|5(?:[0-2]\\d|3[0-5])))|[1-5]?\\d{1,4}))?",n=c.src_host_terminator="(?=$|"+h+")(?!-|_|:\\d|\\.-|\\.(?!$|"+h+"))",o=c.src_path="(?:[/?#](?:(?!"+i+"|[()[\\]{}.,\"'?!\\-]).|\\[(?:(?!"+i+"|\\]).)*\\]|\\((?:(?!"+i+"|[)]).)*\\)|\\{(?:(?!"+i+'|[}]).)*\\}|\\"(?:(?!'+i+'|["]).)+\\"|\\\'(?:(?!'+i+"|[']).)+\\'|\\'(?="+j+").|\\.{2,3}[a-zA-Z0-9%/]|\\.(?!"+i+"|[.]).|\\-(?!--(?:[^-]|$))(?:-*)|\\,(?!"+i+").|\\!(?!"+i+"|[!]).|\\?(?!"+i+"|[?]).)+|\\/)?",p=c.src_email_name='[\\-;:&=\\+\\$,\\"\\.a-zA-Z0-9_]+',q=c.src_xn="xn--[a-z0-9\\-]{1,59}",r=c.src_domain_root="(?:"+q+"|"+k+"{1,63})",s=c.src_domain="(?:"+q+"|(?:"+j+")|(?:"+j+"(?:-(?!-)|"+j+"){0,61}"+j+"))",t=c.src_host="(?:"+l+"|(?:(?:(?:"+s+")\\.)*"+r+"))",u=c.tpl_host_fuzzy="(?:"+l+"|(?:(?:(?:"+s+")\\.)+(?:%TLDS%)))",v=c.tpl_host_no_ip_fuzzy="(?:(?:(?:"+s+")\\.)+(?:%TLDS%))";c.src_host_strict=t+n;var w=c.tpl_host_fuzzy_strict=u+n;c.src_host_port_strict=t+m+n;var x=c.tpl_host_port_fuzzy_strict=u+m+n,y=c.tpl_host_port_no_ip_fuzzy_strict=v+m+n;c.tpl_host_fuzzy_test="localhost|\\.\\d{1,3}\\.|(?:\\.(?:%TLDS%)(?:"+h+"|$))",c.tpl_email_fuzzy="(^|>|"+i+")("+p+"@"+w+")",c.tpl_link_fuzzy="(^|(?![.:/\\-_@])(?:[$+<=>^`|]|"+h+"))((?![$+<=>^`|])"+x+o+")",c.tpl_link_no_ip_fuzzy="(^|(?![.:/\\-_@])(?:[$+<=>^`|]|"+h+"))((?![$+<=>^`|])"+y+o+")"},{"uc.micro/categories/Cc/regex":120,"uc.micro/categories/P/regex":122,"uc.micro/categories/Z/regex":123,"uc.micro/properties/Any/regex":125}],6:[function(a,b,c){b.exports=a("./lib/")},{"./lib/":16}],7:[function(a,b,c){b.exports=a("entities/maps/entities.json")},{"entities/maps/entities.json":3}],8:[function(a,b,c){b.exports=["address","article","aside","base","basefont","blockquote","body","caption","center","col","colgroup","dd","details","dialog","dir","div","dl","dt","fieldset","figcaption","figure","footer","form","frame","frameset","h1","head","header","hr","html","legend","li","link","main","menu","menuitem","meta","nav","noframes","ol","optgroup","option","p","param","pre","section","source","title","summary","table","tbody","td","tfoot","th","thead","title","tr","track","ul"]},{}],9:[function(a,b,c){var d="[a-zA-Z_:][a-zA-Z0-9:._-]*",e="[^\"'=<>`\\x00-\\x20]+",f="'[^']*'",g='"[^"]*"',h="(?:"+e+"|"+f+"|"+g+")",i="(?:\\s+"+d+"(?:\\s*=\\s*"+h+")?)",j="<[A-Za-z][A-Za-z0-9\\-]*"+i+"*\\s*\\/?>",k="<\\/[A-Za-z][A-Za-z0-9\\-]*\\s*>",l="\x3c!----\x3e|\x3c!--(?:-?[^>-])(?:-?[^-])*--\x3e",m="<[?].*?[?]>",n="<![A-Z]+\\s+[^>]*>",o="<!\\[CDATA\\[[\\s\\S]*?\\]\\]>",p=new RegExp("^(?:"+j+"|"+k+"|"+l+"|"+m+"|"+n+"|"+o+")"),q=new RegExp("^(?:"+j+"|"+k+")");b.exports.HTML_TAG_RE=p,b.exports.HTML_OPEN_CLOSE_TAG_RE=q},{}],10:[function(a,b,c){b.exports=["coap","doi","javascript","aaa","aaas","about","acap","cap","cid","crid","data","dav","dict","dns","file","ftp","geo","go","gopher","h323","http","https","iax","icap","im","imap","info","ipp","iris","iris.beep","iris.xpc","iris.xpcs","iris.lwz","ldap","mailto","mid","msrp","msrps","mtqp","mupdate","news","nfs","ni","nih","nntp","opaquelocktoken","pop","pres","rtsp","service","session","shttp","sieve","sip","sips","sms","snmp","soap.beep","soap.beeps","tag","tel","telnet","tftp","thismessage","tn3270","tip","tv","urn","vemmi","ws","wss","xcon","xcon-userid","xmlrpc.beep","xmlrpc.beeps","xmpp","z39.50r","z39.50s","adiumxtra","afp","afs","aim","apt","attachment","aw","beshare","bitcoin","bolo","callto","chrome","chrome-extension","com-eventbrite-attendee","content","cvs","dlna-playsingle","dlna-playcontainer","dtn","dvb","ed2k","facetime","feed","finger","fish","gg","git","gizmoproject","gtalk","hcp","icon","ipn","irc","irc6","ircs","itms","jar","jms","keyparc","lastfm","ldaps","magnet","maps","market","message","mms","ms-help","msnim","mumble","mvn","notes","oid","palm","paparazzi","platform","proxy","psyc","query","res","resource","rmi","rsync","rtmp","secondlife","sftp","sgn","skype","smb","soldat","spotify","ssh","steam","svn","teamspeak","things","udp","unreal","ut2004","ventrilo","view-source","webcal","wtai","wyciwyg","xfire","xri","ymsgr"]},{}],11:[function(a,b,c){function d(a){return Object.prototype.toString.call(a)}function e(a){return"[object String]"===d(a)}function f(a,b){return u.call(a,b)}function g(a){return Array.prototype.slice.call(arguments,1).forEach(function(b){if(b){if("object"!=typeof b)throw new TypeError(b+"must be object");Object.keys(b).forEach(function(c){a[c]=b[c]})}}),a}function h(a,b,c){return[].concat(a.slice(0,b),c,a.slice(b+1))}function i(a){return!(a>=55296&&a<=57343)&&(!(a>=64976&&a<=65007)&&(65535!=(65535&a)&&65534!=(65535&a)&&(!(a>=0&&a<=8)&&(11!==a&&(!(a>=14&&a<=31)&&(!(a>=127&&a<=159)&&!(a>1114111)))))))}function j(a){if(a>65535){a-=65536;var b=55296+(a>>10),c=56320+(1023&a);return String.fromCharCode(b,c)}return String.fromCharCode(a)}function k(a,b){var c=0;return f(z,b)?z[b]:35===b.charCodeAt(0)&&y.test(b)&&(c="x"===b[1].toLowerCase()?parseInt(b.slice(2),16):parseInt(b.slice(1),10),i(c))?j(c):a}function l(a){return a.indexOf("\\")<0?a:a.replace(v,"$1")}function m(a){return a.indexOf("\\")<0&&a.indexOf("&")<0?a:a.replace(x,function(a,b,c){return b||k(a,c)})}function n(a){return C[a]}function o(a){return A.test(a)?a.replace(B,n):a}function p(a){return a.replace(D,"\\$&")}function q(a){if(a>=8192&&a<=8202)return!0;switch(a){case 9:case 10:case 11:case 12:case 13:case 32:case 160:case 5760:case 8239:case 8287:case 12288:return!0}return!1}function r(a){return E.test(a)}function s(a){switch(a){case 33:case 34:case 35:case 36:case 37:case 38:case 39:case 40:case 41:case 42:case 43:case 44:case 45:case 46:case 47:case 58:case 59:case 60:case 61:case 62:case 63:case 64:case 91:case 92:case 93:case 94:case 95:case 96:case 123:case 124:case 125:case 126:return!0;default:return!1}}function t(a){return a.trim().replace(/\s+/g," ").toUpperCase()}var u=Object.prototype.hasOwnProperty,v=/\\([!"#$%&'()*+,\-.\/:;<=>?@[\\\]^_`{|}~])/g,w=/&([a-z#][a-z0-9]{1,31});/gi,x=new RegExp(v.source+"|"+w.source,"gi"),y=/^#((?:x[a-f0-9]{1,8}|[0-9]{1,8}))/i,z=a("./entities"),A=/[&<>"]/,B=/[&<>"]/g,C={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;"},D=/[.?*+^$[\]\\(){}|-]/g,E=a("uc.micro/categories/P/regex");c.lib={},c.lib.mdurl=a("mdurl"),c.lib.ucmicro=a("uc.micro"),c.assign=g,c.isString=e,c.has=f,c.unescapeMd=l,c.unescapeAll=m,c.isValidEntityCode=i,c.fromCodePoint=j,c.escapeHtml=o,c.arrayReplaceAt=h,c.isWhiteSpace=q,c.isMdAsciiPunct=s,c.isPunctChar=r,c.escapeRE=p,c.normalizeReference=t},{"./entities":7,mdurl:60,"uc.micro":124,"uc.micro/categories/P/regex":122}],12:[function(a,b,c){c.parseLinkLabel=a("./parse_link_label"),c.parseLinkDestination=a("./parse_link_destination"),c.parseLinkTitle=a("./parse_link_title")},{"./parse_link_destination":13,"./parse_link_label":14,"./parse_link_title":15}],13:[function(a,b,c){var d=a("../common/utils").unescapeAll;b.exports=function(a,b,c){var e,f,g=0,h=b,i={ok:!1,pos:0,lines:0,str:""};if(60===a.charCodeAt(b)){for(b++;b<c;){if(10===(e=a.charCodeAt(b)))return i;if(62===e)return i.pos=b+1,i.str=d(a.slice(h+1,b)),i.ok=!0,i;92===e&&b+1<c?b+=2:b++}return i}for(f=0;b<c&&32!==(e=a.charCodeAt(b))&&!(e<32||127===e);)if(92===e&&b+1<c)b+=2;else{if(40===e&&++f>1)break;if(41===e&&--f<0)break;b++}return h===b?i:(i.str=d(a.slice(h,b)),i.lines=g,i.pos=b,i.ok=!0,i)}},{"../common/utils":11}],14:[function(a,b,c){b.exports=function(a,b,c){var d,e,f,g,h=-1,i=a.posMax,j=a.pos;for(a.pos=b+1,d=1;a.pos<i;){if(93===(f=a.src.charCodeAt(a.pos))&&0===--d){e=!0;break}if(g=a.pos,a.md.inline.skipToken(a),91===f)if(g===a.pos-1)d++;else if(c)return a.pos=j,-1}return e&&(h=a.pos),a.pos=j,h}},{}],15:[function(a,b,c){var d=a("../common/utils").unescapeAll;b.exports=function(a,b,c){var e,f,g=0,h=b,i={ok:!1,pos:0,lines:0,str:""};if(b>=c)return i;if(34!==(f=a.charCodeAt(b))&&39!==f&&40!==f)return i;for(b++,40===f&&(f=41);b<c;){if((e=a.charCodeAt(b))===f)return i.pos=b+1,i.lines=g,i.str=d(a.slice(h+1,b)),i.ok=!0,i;10===e?g++:92===e&&b+1<c&&(b++,10===a.charCodeAt(b)&&g++),b++}return i}},{"../common/utils":11}],16:[function(a,b,c){function d(a){var b=a.trim().toLowerCase();return!r.test(b)||!!s.test(b)}function e(a){var b=o.parse(a,!0);if(b.hostname&&(!b.protocol||t.indexOf(b.protocol)>=0))try{b.hostname=p.toASCII(b.hostname)}catch(a){}return o.encode(o.format(b))}function f(a){var b=o.parse(a,!0);if(b.hostname&&(!b.protocol||t.indexOf(b.protocol)>=0))try{b.hostname=p.toUnicode(b.hostname)}catch(a){}return o.decode(o.format(b))}function g(a,b){if(!(this instanceof g))return new g(a,b);b||h.isString(a)||(b=a||{},a="default"),this.inline=new m,this.block=new l,this.core=new k,this.renderer=new j,this.linkify=new n,this.validateLink=d,this.normalizeLink=e,this.normalizeLinkText=f,this.utils=h,this.helpers=i,this.options={},this.configure(a),b&&this.set(b)}var h=a("./common/utils"),i=a("./helpers"),j=a("./renderer"),k=a("./parser_core"),l=a("./parser_block"),m=a("./parser_inline"),n=a("linkify-it"),o=a("mdurl"),p=a("punycode"),q={default:a("./presets/default"),zero:a("./presets/zero"),commonmark:a("./presets/commonmark")},r=/^(vbscript|javascript|file|data):/,s=/^data:image\/(gif|png|jpeg|webp);/,t=["http:","https:","mailto:"];g.prototype.set=function(a){return h.assign(this.options,a),this},g.prototype.configure=function(a){var b,c=this;if(h.isString(a)&&(b=a,!(a=q[b])))throw new Error('Wrong `markdown-it` preset "'+b+'", check name');if(!a)throw new Error("Wrong `markdown-it` preset, can't be empty");return a.options&&c.set(a.options),a.components&&Object.keys(a.components).forEach(function(b){a.components[b].rules&&c[b].ruler.enableOnly(a.components[b].rules)}),this},g.prototype.enable=function(a,b){var c=[];Array.isArray(a)||(a=[a]),["core","block","inline"].forEach(function(b){c=c.concat(this[b].ruler.enable(a,!0))},this);var d=a.filter(function(a){return c.indexOf(a)<0});if(d.length&&!b)throw new Error("MarkdownIt. Failed to enable unknown rule(s): "+d);return this},g.prototype.disable=function(a,b){var c=[];Array.isArray(a)||(a=[a]),["core","block","inline"].forEach(function(b){c=c.concat(this[b].ruler.disable(a,!0))},this);var d=a.filter(function(a){return c.indexOf(a)<0});if(d.length&&!b)throw new Error("MarkdownIt. Failed to disable unknown rule(s): "+d);return this},g.prototype.use=function(a){var b=[this].concat(Array.prototype.slice.call(arguments,1));return a.apply(a,b),this},g.prototype.parse=function(a,b){var c=new this.core.State(a,this,b);return this.core.process(c),c.tokens},g.prototype.render=function(a,b){return b=b||{},this.renderer.render(this.parse(a,b),this.options,b)},g.prototype.parseInline=function(a,b){var c=new this.core.State(a,this,b);return c.inlineMode=!0,this.core.process(c),c.tokens},g.prototype.renderInline=function(a,b){return b=b||{},this.renderer.render(this.parseInline(a,b),this.options,b)},b.exports=g},{"./common/utils":11,"./helpers":12,"./parser_block":17,"./parser_core":18,"./parser_inline":19,"./presets/commonmark":20,"./presets/default":21,"./presets/zero":22,"./renderer":23,"linkify-it":4,mdurl:60,punycode:119}],17:[function(a,b,c){function d(){this.ruler=new e;for(var a=0;a<f.length;a++)this.ruler.push(f[a][0],f[a][1],{alt:(f[a][2]||[]).slice()})}var e=a("./ruler"),f=[["code",a("./rules_block/code")],["fence",a("./rules_block/fence"),["paragraph","reference","blockquote","list"]],["blockquote",a("./rules_block/blockquote"),["paragraph","reference","list"]],["hr",a("./rules_block/hr"),["paragraph","reference","blockquote","list"]],["list",a("./rules_block/list"),["paragraph","reference","blockquote"]],["reference",a("./rules_block/reference")],["heading",a("./rules_block/heading"),["paragraph","reference","blockquote"]],["lheading",a("./rules_block/lheading")],["html_block",a("./rules_block/html_block"),["paragraph","reference","blockquote"]],["table",a("./rules_block/table"),["paragraph","reference"]],["paragraph",a("./rules_block/paragraph")]];d.prototype.tokenize=function(a,b,c){for(var d,e=this.ruler.getRules(""),f=e.length,g=b,h=!1,i=a.md.options.maxNesting;g<c&&(a.line=g=a.skipEmptyLines(g),!(g>=c))&&!(a.tShift[g]<a.blkIndent);){if(a.level>=i){a.line=c;break}for(d=0;d<f&&!e[d](a,g,c,!1);d++);if(a.tight=!h,a.isEmpty(a.line-1)&&(h=!0),(g=a.line)<c&&a.isEmpty(g)){if(h=!0,++g<c&&"list"===a.parentType&&a.isEmpty(g))break;a.line=g}}},d.prototype.parse=function(a,b,c,d){var e;if(!a)return[];e=new this.State(a,b,c,d),this.tokenize(e,e.line,e.lineMax)},d.prototype.State=a("./rules_block/state_block"),b.exports=d},{"./ruler":24,"./rules_block/blockquote":25,"./rules_block/code":26,"./rules_block/fence":27,"./rules_block/heading":28,"./rules_block/hr":29,"./rules_block/html_block":30,"./rules_block/lheading":31,"./rules_block/list":32,"./rules_block/paragraph":33,"./rules_block/reference":34,"./rules_block/state_block":35,"./rules_block/table":36}],18:[function(a,b,c){function d(){this.ruler=new e;for(var a=0;a<f.length;a++)this.ruler.push(f[a][0],f[a][1])}var e=a("./ruler"),f=[["normalize",a("./rules_core/normalize")],["block",a("./rules_core/block")],["inline",a("./rules_core/inline")],["linkify",a("./rules_core/linkify")],["replacements",a("./rules_core/replacements")],["smartquotes",a("./rules_core/smartquotes")]];d.prototype.process=function(a){var b,c,d;for(d=this.ruler.getRules(""),b=0,c=d.length;b<c;b++)d[b](a)},d.prototype.State=a("./rules_core/state_core"),b.exports=d},{"./ruler":24,"./rules_core/block":37,"./rules_core/inline":38,"./rules_core/linkify":39,"./rules_core/normalize":40,"./rules_core/replacements":41,"./rules_core/smartquotes":42,"./rules_core/state_core":43}],19:[function(a,b,c){function d(){this.ruler=new e;for(var a=0;a<f.length;a++)this.ruler.push(f[a][0],f[a][1])}var e=a("./ruler"),f=[["text",a("./rules_inline/text")],["newline",a("./rules_inline/newline")],["escape",a("./rules_inline/escape")],["backticks",a("./rules_inline/backticks")],["strikethrough",a("./rules_inline/strikethrough")],["emphasis",a("./rules_inline/emphasis")],["link",a("./rules_inline/link")],["image",a("./rules_inline/image")],["autolink",a("./rules_inline/autolink")],["html_inline",a("./rules_inline/html_inline")],["entity",a("./rules_inline/entity")]];d.prototype.skipToken=function(a){var b,c=a.pos,d=this.ruler.getRules(""),e=d.length,f=a.md.options.maxNesting,g=a.cache;if(void 0!==g[c])return void(a.pos=g[c]);if(a.level<f)for(b=0;b<e;b++)if(d[b](a,!0))return void(g[c]=a.pos);a.pos++,g[c]=a.pos},d.prototype.tokenize=function(a){for(var b,c,d=this.ruler.getRules(""),e=d.length,f=a.posMax,g=a.md.options.maxNesting;a.pos<f;){if(a.level<g)for(c=0;c<e&&!(b=d[c](a,!1));c++);if(b){if(a.pos>=f)break}else a.pending+=a.src[a.pos++]}a.pending&&a.pushPending()},d.prototype.parse=function(a,b,c,d){var e=new this.State(a,b,c,d);this.tokenize(e)},d.prototype.State=a("./rules_inline/state_inline"),b.exports=d},{"./ruler":24,"./rules_inline/autolink":44,"./rules_inline/backticks":45,"./rules_inline/emphasis":46,"./rules_inline/entity":47,"./rules_inline/escape":48,"./rules_inline/html_inline":49,"./rules_inline/image":50,"./rules_inline/link":51,"./rules_inline/newline":52,"./rules_inline/state_inline":53,"./rules_inline/strikethrough":54,"./rules_inline/text":55}],20:[function(a,b,c){b.exports={options:{html:!0,xhtmlOut:!0,breaks:!1,langPrefix:"language-",linkify:!1,typographer:!1,quotes:"",highlight:null,maxNesting:20},components:{core:{rules:["normalize","block","inline"]},block:{rules:["blockquote","code","fence","heading","hr","html_block","lheading","list","reference","paragraph"]},inline:{rules:["autolink","backticks","emphasis","entity","escape","html_inline","image","link","newline","text"]}}}},{}],21:[function(a,b,c){b.exports={options:{html:!1,xhtmlOut:!1,breaks:!1,langPrefix:"language-",linkify:!1,typographer:!1,quotes:"",highlight:null,maxNesting:20},components:{core:{},block:{},inline:{}}}},{}],22:[function(a,b,c){b.exports={options:{html:!1,xhtmlOut:!1,breaks:!1,langPrefix:"language-",linkify:!1,typographer:!1,quotes:"",highlight:null,maxNesting:20},components:{core:{rules:["normalize","block","inline"]},block:{rules:["paragraph"]},inline:{rules:["text"]}}}},{}],23:[function(a,b,c){function d(){this.rules=e({},h)}var e=a("./common/utils").assign,f=a("./common/utils").unescapeAll,g=a("./common/utils").escapeHtml,h={};h.code_inline=function(a,b){return"<code>"+g(a[b].content)+"</code>"},h.code_block=function(a,b){return"<pre><code>"+g(a[b].content)+"</code></pre>\n"},h.fence=function(a,b,c,d,e){
var h,i=a[b],j=i.info?f(i.info).trim():"",k="";return j&&(k=j.split(/\s+/g)[0],i.attrPush(["class",c.langPrefix+k])),h=c.highlight?c.highlight(i.content,k)||g(i.content):g(i.content),"<pre><code"+e.renderAttrs(i)+">"+h+"</code></pre>\n"},h.image=function(a,b,c,d,e){var f=a[b];return f.attrs[f.attrIndex("alt")][1]=e.renderInlineAsText(f.children,c,d),e.renderToken(a,b,c)},h.hardbreak=function(a,b,c){return c.xhtmlOut?"<br />\n":"<br>\n"},h.softbreak=function(a,b,c){return c.breaks?c.xhtmlOut?"<br />\n":"<br>\n":"\n"},h.text=function(a,b){return g(a[b].content)},h.html_block=function(a,b){return a[b].content},h.html_inline=function(a,b){return a[b].content},d.prototype.renderAttrs=function(a){var b,c,d;if(!a.attrs)return"";for(d="",b=0,c=a.attrs.length;b<c;b++)d+=" "+g(a.attrs[b][0])+'="'+g(a.attrs[b][1])+'"';return d},d.prototype.renderToken=function(a,b,c){var d,e="",f=!1,g=a[b];return g.hidden?"":(g.block&&-1!==g.nesting&&b&&a[b-1].hidden&&(e+="\n"),e+=(-1===g.nesting?"</":"<")+g.tag,e+=this.renderAttrs(g),0===g.nesting&&c.xhtmlOut&&(e+=" /"),g.block&&(f=!0,1===g.nesting&&b+1<a.length&&(d=a[b+1],"inline"===d.type||d.hidden?f=!1:-1===d.nesting&&d.tag===g.tag&&(f=!1))),e+=f?">\n":">")},d.prototype.renderInline=function(a,b,c){for(var d,e="",f=this.rules,g=0,h=a.length;g<h;g++)d=a[g].type,void 0!==f[d]?e+=f[d](a,g,b,c,this):e+=this.renderToken(a,g,b);return e},d.prototype.renderInlineAsText=function(a,b,c){for(var d="",e=this.rules,f=0,g=a.length;f<g;f++)"text"===a[f].type?d+=e.text(a,f,b,c,this):"image"===a[f].type&&(d+=this.renderInlineAsText(a[f].children,b,c));return d},d.prototype.render=function(a,b,c){var d,e,f,g="",h=this.rules;for(d=0,e=a.length;d<e;d++)f=a[d].type,"inline"===f?g+=this.renderInline(a[d].children,b,c):void 0!==h[f]?g+=h[a[d].type](a,d,b,c,this):g+=this.renderToken(a,d,b,c);return g},b.exports=d},{"./common/utils":11}],24:[function(a,b,c){function d(){this.__rules__=[],this.__cache__=null}d.prototype.__find__=function(a){for(var b=0;b<this.__rules__.length;b++)if(this.__rules__[b].name===a)return b;return-1},d.prototype.__compile__=function(){var a=this,b=[""];a.__rules__.forEach(function(a){a.enabled&&a.alt.forEach(function(a){b.indexOf(a)<0&&b.push(a)})}),a.__cache__={},b.forEach(function(b){a.__cache__[b]=[],a.__rules__.forEach(function(c){c.enabled&&(b&&c.alt.indexOf(b)<0||a.__cache__[b].push(c.fn))})})},d.prototype.at=function(a,b,c){var d=this.__find__(a),e=c||{};if(-1===d)throw new Error("Parser rule not found: "+a);this.__rules__[d].fn=b,this.__rules__[d].alt=e.alt||[],this.__cache__=null},d.prototype.before=function(a,b,c,d){var e=this.__find__(a),f=d||{};if(-1===e)throw new Error("Parser rule not found: "+a);this.__rules__.splice(e,0,{name:b,enabled:!0,fn:c,alt:f.alt||[]}),this.__cache__=null},d.prototype.after=function(a,b,c,d){var e=this.__find__(a),f=d||{};if(-1===e)throw new Error("Parser rule not found: "+a);this.__rules__.splice(e+1,0,{name:b,enabled:!0,fn:c,alt:f.alt||[]}),this.__cache__=null},d.prototype.push=function(a,b,c){var d=c||{};this.__rules__.push({name:a,enabled:!0,fn:b,alt:d.alt||[]}),this.__cache__=null},d.prototype.enable=function(a,b){Array.isArray(a)||(a=[a]);var c=[];return a.forEach(function(a){var d=this.__find__(a);if(d<0){if(b)return;throw new Error("Rules manager: invalid rule name "+a)}this.__rules__[d].enabled=!0,c.push(a)},this),this.__cache__=null,c},d.prototype.enableOnly=function(a,b){Array.isArray(a)||(a=[a]),this.__rules__.forEach(function(a){a.enabled=!1}),this.enable(a,b)},d.prototype.disable=function(a,b){Array.isArray(a)||(a=[a]);var c=[];return a.forEach(function(a){var d=this.__find__(a);if(d<0){if(b)return;throw new Error("Rules manager: invalid rule name "+a)}this.__rules__[d].enabled=!1,c.push(a)},this),this.__cache__=null,c},d.prototype.getRules=function(a){return null===this.__cache__&&this.__compile__(),this.__cache__[a]||[]},b.exports=d},{}],25:[function(a,b,c){b.exports=function(a,b,c,d){var e,f,g,h,i,j,k,l,m,n,o,p,q=a.bMarks[b]+a.tShift[b],r=a.eMarks[b];if(62!==a.src.charCodeAt(q++))return!1;if(d)return!0;for(32===a.src.charCodeAt(q)&&q++,i=a.blkIndent,a.blkIndent=0,h=[a.bMarks[b]],a.bMarks[b]=q,q=q<r?a.skipSpaces(q):q,f=q>=r,g=[a.tShift[b]],a.tShift[b]=q-a.bMarks[b],l=a.md.block.ruler.getRules("blockquote"),e=b+1;e<c&&!(a.tShift[e]<i)&&(q=a.bMarks[e]+a.tShift[e],r=a.eMarks[e],!(q>=r));e++)if(62!==a.src.charCodeAt(q++)){if(f)break;for(p=!1,n=0,o=l.length;n<o;n++)if(l[n](a,e,c,!0)){p=!0;break}if(p)break;h.push(a.bMarks[e]),g.push(a.tShift[e]),a.tShift[e]=-1}else 32===a.src.charCodeAt(q)&&q++,h.push(a.bMarks[e]),a.bMarks[e]=q,q=q<r?a.skipSpaces(q):q,f=q>=r,g.push(a.tShift[e]),a.tShift[e]=q-a.bMarks[e];for(j=a.parentType,a.parentType="blockquote",m=a.push("blockquote_open","blockquote",1),m.markup=">",m.map=k=[b,0],a.md.block.tokenize(a,b,e),m=a.push("blockquote_close","blockquote",-1),m.markup=">",a.parentType=j,k[1]=a.line,n=0;n<g.length;n++)a.bMarks[n+b]=h[n],a.tShift[n+b]=g[n];return a.blkIndent=i,!0}},{}],26:[function(a,b,c){b.exports=function(a,b,c){var d,e,f;if(a.tShift[b]-a.blkIndent<4)return!1;for(e=d=b+1;d<c;)if(a.isEmpty(d))d++;else{if(!(a.tShift[d]-a.blkIndent>=4))break;d++,e=d}return a.line=d,f=a.push("code_block","code",0),f.content=a.getLines(b,e,4+a.blkIndent,!0),f.map=[b,a.line],!0}},{}],27:[function(a,b,c){b.exports=function(a,b,c,d){var e,f,g,h,i,j,k,l=!1,m=a.bMarks[b]+a.tShift[b],n=a.eMarks[b];if(m+3>n)return!1;if(126!==(e=a.src.charCodeAt(m))&&96!==e)return!1;if(i=m,m=a.skipChars(m,e),(f=m-i)<3)return!1;if(k=a.src.slice(i,m),g=a.src.slice(m,n),g.indexOf("`")>=0)return!1;if(d)return!0;for(h=b;!(++h>=c)&&(m=i=a.bMarks[h]+a.tShift[h],n=a.eMarks[h],!(m<n&&a.tShift[h]<a.blkIndent));)if(a.src.charCodeAt(m)===e&&!(a.tShift[h]-a.blkIndent>=4||(m=a.skipChars(m,e))-i<f||(m=a.skipSpaces(m))<n)){l=!0;break}return f=a.tShift[b],a.line=h+(l?1:0),j=a.push("fence","code",0),j.info=g,j.content=a.getLines(b+1,h,f,!0),j.markup=k,j.map=[b,a.line],!0}},{}],28:[function(a,b,c){b.exports=function(a,b,c,d){var e,f,g,h,i=a.bMarks[b]+a.tShift[b],j=a.eMarks[b];if(35!==(e=a.src.charCodeAt(i))||i>=j)return!1;for(f=1,e=a.src.charCodeAt(++i);35===e&&i<j&&f<=6;)f++,e=a.src.charCodeAt(++i);return!(f>6||i<j&&32!==e)&&(!!d||(j=a.skipCharsBack(j,32,i),g=a.skipCharsBack(j,35,i),g>i&&32===a.src.charCodeAt(g-1)&&(j=g),a.line=b+1,h=a.push("heading_open","h"+String(f),1),h.markup="########".slice(0,f),h.map=[b,a.line],h=a.push("inline","",0),h.content=a.src.slice(i,j).trim(),h.map=[b,a.line],h.children=[],h=a.push("heading_close","h"+String(f),-1),h.markup="########".slice(0,f),!0))}},{}],29:[function(a,b,c){b.exports=function(a,b,c,d){var e,f,g,h,i=a.bMarks[b]+a.tShift[b],j=a.eMarks[b];if(42!==(e=a.src.charCodeAt(i++))&&45!==e&&95!==e)return!1;for(f=1;i<j;){if((g=a.src.charCodeAt(i++))!==e&&32!==g)return!1;g===e&&f++}return!(f<3)&&(!!d||(a.line=b+1,h=a.push("hr","hr",0),h.map=[b,a.line],h.markup=Array(f+1).join(String.fromCharCode(e)),!0))}},{}],30:[function(a,b,c){var d=a("../common/html_blocks"),e=a("../common/html_re").HTML_OPEN_CLOSE_TAG_RE,f=[[/^<(script|pre|style)(?=(\s|>|$))/i,/<\/(script|pre|style)>/i,!0],[/^<!--/,/-->/,!0],[/^<\?/,/\?>/,!0],[/^<![A-Z]/,/>/,!0],[/^<!\[CDATA\[/,/\]\]>/,!0],[new RegExp("^</?("+d.join("|")+")(?=(\\s|/?>|$))","i"),/^$/,!0],[new RegExp(e.source+"\\s*$"),/^$/,!1]];b.exports=function(a,b,c,d){var e,g,h,i,j=a.bMarks[b]+a.tShift[b],k=a.eMarks[b];if(!a.md.options.html)return!1;if(60!==a.src.charCodeAt(j))return!1;for(i=a.src.slice(j,k),e=0;e<f.length&&!f[e][0].test(i);e++);if(e===f.length)return!1;if(d)return f[e][2];if(g=b+1,!f[e][1].test(i))for(;g<c&&!(a.tShift[g]<a.blkIndent);g++)if(j=a.bMarks[g]+a.tShift[g],k=a.eMarks[g],i=a.src.slice(j,k),f[e][1].test(i)){0!==i.length&&g++;break}return a.line=g,h=a.push("html_block","",0),h.map=[b,g],h.content=a.getLines(b,g,a.blkIndent,!0),!0}},{"../common/html_blocks":8,"../common/html_re":9}],31:[function(a,b,c){b.exports=function(a,b,c){var d,e,f,g,h,i=b+1;return!(i>=c)&&(!(a.tShift[i]<a.blkIndent)&&(!(a.tShift[i]-a.blkIndent>3)&&(e=a.bMarks[i]+a.tShift[i],f=a.eMarks[i],!(e>=f)&&((45===(d=a.src.charCodeAt(e))||61===d)&&(e=a.skipChars(e,d),!((e=a.skipSpaces(e))<f)&&(e=a.bMarks[b]+a.tShift[b],a.line=i+1,h=61===d?1:2,g=a.push("heading_open","h"+String(h),1),g.markup=String.fromCharCode(d),g.map=[b,a.line],g=a.push("inline","",0),g.content=a.src.slice(e,a.eMarks[b]).trim(),g.map=[b,a.line-1],g.children=[],g=a.push("heading_close","h"+String(h),-1),g.markup=String.fromCharCode(d),!0))))))}},{}],32:[function(a,b,c){function d(a,b){var c,d,e;return d=a.bMarks[b]+a.tShift[b],e=a.eMarks[b],c=a.src.charCodeAt(d++),42!==c&&45!==c&&43!==c?-1:d<e&&32!==a.src.charCodeAt(d)?-1:d}function e(a,b){var c,d=a.bMarks[b]+a.tShift[b],e=d,f=a.eMarks[b];if(e+1>=f)return-1;if((c=a.src.charCodeAt(e++))<48||c>57)return-1;for(;;){if(e>=f)return-1;c=a.src.charCodeAt(e++);{if(!(c>=48&&c<=57)){if(41===c||46===c)break;return-1}if(e-d>=10)return-1}}return e<f&&32!==a.src.charCodeAt(e)?-1:e}function f(a,b){var c,d,e=a.level+2;for(c=b+2,d=a.tokens.length-2;c<d;c++)a.tokens[c].level===e&&"paragraph_open"===a.tokens[c].type&&(a.tokens[c+2].hidden=!0,a.tokens[c].hidden=!0,c+=2)}b.exports=function(a,b,c,g){var h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,A,B,C,D,E=!0;if((o=e(a,b))>=0)t=!0;else{if(!((o=d(a,b))>=0))return!1;t=!1}if(s=a.src.charCodeAt(o-1),g)return!0;for(v=a.tokens.length,t?(n=a.bMarks[b]+a.tShift[b],r=Number(a.src.substr(n,o-n-1)),A=a.push("ordered_list_open","ol",1),1!==r&&(A.attrs=[["start",r]])):A=a.push("bullet_list_open","ul",1),A.map=x=[b,0],A.markup=String.fromCharCode(s),h=b,w=!1,z=a.md.block.ruler.getRules("list");!(!(h<c)||(u=a.skipSpaces(o),p=a.eMarks[h],q=u>=p?1:u-o,q>4&&(q=1),i=o-a.bMarks[h]+q,A=a.push("list_item_open","li",1),A.markup=String.fromCharCode(s),A.map=y=[b,0],k=a.blkIndent,l=a.tight,j=a.tShift[b],m=a.parentType,a.tShift[b]=u-a.bMarks[b],a.blkIndent=i,a.tight=!0,a.parentType="list",a.md.block.tokenize(a,b,c,!0),a.tight&&!w||(E=!1),w=a.line-b>1&&a.isEmpty(a.line-1),a.blkIndent=k,a.tShift[b]=j,a.tight=l,a.parentType=m,A=a.push("list_item_close","li",-1),A.markup=String.fromCharCode(s),h=b=a.line,y[1]=h,u=a.bMarks[b],h>=c)||a.isEmpty(h)||a.tShift[h]<a.blkIndent);){for(D=!1,B=0,C=z.length;B<C;B++)if(z[B](a,h,c,!0)){D=!0;break}if(D)break;if(t){if((o=e(a,h))<0)break}else if((o=d(a,h))<0)break;if(s!==a.src.charCodeAt(o-1))break}return A=t?a.push("ordered_list_close","ol",-1):a.push("bullet_list_close","ul",-1),A.markup=String.fromCharCode(s),x[1]=h,a.line=h,E&&f(a,v),!0}},{}],33:[function(a,b,c){b.exports=function(a,b){for(var c,d,e,f,g,h=b+1,i=a.md.block.ruler.getRules("paragraph"),j=a.lineMax;h<j&&!a.isEmpty(h);h++)if(!(a.tShift[h]-a.blkIndent>3||a.tShift[h]<0)){for(d=!1,e=0,f=i.length;e<f;e++)if(i[e](a,h,j,!0)){d=!0;break}if(d)break}return c=a.getLines(b,h,a.blkIndent,!1).trim(),a.line=h,g=a.push("paragraph_open","p",1),g.map=[b,a.line],g=a.push("inline","",0),g.content=c,g.map=[b,a.line],g.children=[],g=a.push("paragraph_close","p",-1),!0}},{}],34:[function(a,b,c){var d=a("../helpers/parse_link_destination"),e=a("../helpers/parse_link_title"),f=a("../common/utils").normalizeReference;b.exports=function(a,b,c,g){var h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w=0,x=a.bMarks[b]+a.tShift[b],y=a.eMarks[b],z=b+1;if(91!==a.src.charCodeAt(x))return!1;for(;++x<y;)if(93===a.src.charCodeAt(x)&&92!==a.src.charCodeAt(x-1)){if(x+1===y)return!1;if(58!==a.src.charCodeAt(x+1))return!1;break}for(k=a.lineMax,u=a.md.block.ruler.getRules("reference");z<k&&!a.isEmpty(z);z++)if(!(a.tShift[z]-a.blkIndent>3||a.tShift[z]<0)){for(t=!1,m=0,n=u.length;m<n;m++)if(u[m](a,z,k,!0)){t=!0;break}if(t)break}for(s=a.getLines(b,z,a.blkIndent,!1).trim(),y=s.length,x=1;x<y;x++){if(91===(h=s.charCodeAt(x)))return!1;if(93===h){p=x;break}10===h?w++:92===h&&++x<y&&10===s.charCodeAt(x)&&w++}if(p<0||58!==s.charCodeAt(p+1))return!1;for(x=p+2;x<y;x++)if(10===(h=s.charCodeAt(x)))w++;else if(32!==h)break;if(q=d(s,x,y),!q.ok)return!1;if(l=a.md.normalizeLink(q.str),!a.md.validateLink(l))return!1;for(x=q.pos,w+=q.lines,i=x,j=w,r=x;x<y;x++)if(10===(h=s.charCodeAt(x)))w++;else if(32!==h)break;for(q=e(s,x,y),x<y&&r!==x&&q.ok?(v=q.str,x=q.pos,w+=q.lines):(v="",x=i,w=j);x<y&&32===s.charCodeAt(x);)x++;if(x<y&&10!==s.charCodeAt(x)&&v)for(v="",x=i,w=j;x<y&&32===s.charCodeAt(x);)x++;return!(x<y&&10!==s.charCodeAt(x))&&(!!(o=f(s.slice(1,p)))&&(!!g||(void 0===a.env.references&&(a.env.references={}),void 0===a.env.references[o]&&(a.env.references[o]={title:v,href:l}),a.line=b+w+1,!0)))}},{"../common/utils":11,"../helpers/parse_link_destination":13,"../helpers/parse_link_title":15}],35:[function(a,b,c){function d(a,b,c,d){var e,f,g,h,i,j,k;for(this.src=a,this.md=b,this.env=c,this.tokens=d,this.bMarks=[],this.eMarks=[],this.tShift=[],this.blkIndent=0,this.line=0,this.lineMax=0,this.tight=!1,this.parentType="root",this.ddIndent=-1,this.level=0,this.result="",f=this.src,j=0,k=!1,g=h=j=0,i=f.length;h<i;h++){if(e=f.charCodeAt(h),!k){if(32===e){j++;continue}k=!0}10!==e&&h!==i-1||(10!==e&&h++,this.bMarks.push(g),this.eMarks.push(h),this.tShift.push(j),k=!1,j=0,g=h+1)}this.bMarks.push(f.length),this.eMarks.push(f.length),this.tShift.push(0),this.lineMax=this.bMarks.length-1}var e=a("../token");d.prototype.push=function(a,b,c){var d=new e(a,b,c);return d.block=!0,c<0&&this.level--,d.level=this.level,c>0&&this.level++,this.tokens.push(d),d},d.prototype.isEmpty=function(a){return this.bMarks[a]+this.tShift[a]>=this.eMarks[a]},d.prototype.skipEmptyLines=function(a){for(var b=this.lineMax;a<b&&!(this.bMarks[a]+this.tShift[a]<this.eMarks[a]);a++);return a},d.prototype.skipSpaces=function(a){for(var b=this.src.length;a<b&&32===this.src.charCodeAt(a);a++);return a},d.prototype.skipChars=function(a,b){for(var c=this.src.length;a<c&&this.src.charCodeAt(a)===b;a++);return a},d.prototype.skipCharsBack=function(a,b,c){if(a<=c)return a;for(;a>c;)if(b!==this.src.charCodeAt(--a))return a+1;return a},d.prototype.getLines=function(a,b,c,d){var e,f,g,h,i,j=a;if(a>=b)return"";if(j+1===b)return f=this.bMarks[j]+Math.min(this.tShift[j],c),g=this.eMarks[b-1]+(d?1:0),this.src.slice(f,g);for(h=new Array(b-a),e=0;j<b;j++,e++)i=this.tShift[j],i>c&&(i=c),i<0&&(i=0),f=this.bMarks[j]+i,g=j+1<b||d?this.eMarks[j]+1:this.eMarks[j],h[e]=this.src.slice(f,g);return h.join("")},d.prototype.Token=e,b.exports=d},{"../token":56}],36:[function(a,b,c){function d(a,b){var c=a.bMarks[b]+a.blkIndent,d=a.eMarks[b];return a.src.substr(c,d-c)}function e(a){var b,c=[],d=0,e=a.length,f=0,g=0,h=!1,i=0;for(b=a.charCodeAt(d);d<e;)96===b&&f%2==0?(h=!h,i=d):124!==b||f%2!=0||h?92===b?f++:f=0:(c.push(a.substring(g,d)),g=d+1),d++,d===e&&h&&(h=!1,d=i+1),b=a.charCodeAt(d);return c.push(a.substring(g)),c}b.exports=function(a,b,c,f){var g,h,i,j,k,l,m,n,o,p,q;if(b+2>c)return!1;if(k=b+1,a.tShift[k]<a.blkIndent)return!1;if((i=a.bMarks[k]+a.tShift[k])>=a.eMarks[k])return!1;if(124!==(g=a.src.charCodeAt(i))&&45!==g&&58!==g)return!1;if(h=d(a,b+1),!/^[-:| ]+$/.test(h))return!1;if(l=h.split("|"),l.length<2)return!1;for(n=[],j=0;j<l.length;j++){if(!(o=l[j].trim())){if(0===j||j===l.length-1)continue;return!1}if(!/^:?-+:?$/.test(o))return!1;58===o.charCodeAt(o.length-1)?n.push(58===o.charCodeAt(0)?"center":"right"):58===o.charCodeAt(0)?n.push("left"):n.push("")}if(h=d(a,b).trim(),-1===h.indexOf("|"))return!1;if(l=e(h.replace(/^\||\|$/g,"")),n.length!==l.length)return!1;if(f)return!0;for(m=a.push("table_open","table",1),m.map=p=[b,0],m=a.push("thead_open","thead",1),m.map=[b,b+1],m=a.push("tr_open","tr",1),m.map=[b,b+1],j=0;j<l.length;j++)m=a.push("th_open","th",1),m.map=[b,b+1],n[j]&&(m.attrs=[["style","text-align:"+n[j]]]),m=a.push("inline","",0),m.content=l[j].trim(),m.map=[b,b+1],m.children=[],m=a.push("th_close","th",-1);for(m=a.push("tr_close","tr",-1),m=a.push("thead_close","thead",-1),m=a.push("tbody_open","tbody",1),m.map=q=[b+2,0],k=b+2;k<c&&!(a.tShift[k]<a.blkIndent)&&(h=d(a,k).trim(),-1!==h.indexOf("|"));k++){for(l=e(h.replace(/^\||\|$/g,"")),l.length=n.length,m=a.push("tr_open","tr",1),j=0;j<l.length;j++)m=a.push("td_open","td",1),n[j]&&(m.attrs=[["style","text-align:"+n[j]]]),m=a.push("inline","",0),m.content=l[j]?l[j].trim():"",m.children=[],m=a.push("td_close","td",-1);m=a.push("tr_close","tr",-1)}return m=a.push("tbody_close","tbody",-1),m=a.push("table_close","table",-1),p[1]=q[1]=k,a.line=k,!0}},{}],37:[function(a,b,c){b.exports=function(a){var b;a.inlineMode?(b=new a.Token("inline","",0),b.content=a.src,b.map=[0,1],b.children=[],a.tokens.push(b)):a.md.block.parse(a.src,a.md,a.env,a.tokens)}},{}],38:[function(a,b,c){b.exports=function(a){var b,c,d,e=a.tokens;for(c=0,d=e.length;c<d;c++)b=e[c],"inline"===b.type&&a.md.inline.parse(b.content,a.md,a.env,b.children)}},{}],39:[function(a,b,c){function d(a){return/^<a[>\s]/i.test(a)}function e(a){return/^<\/a\s*>/i.test(a)}var f=a("../common/utils").arrayReplaceAt;b.exports=function(a){var b,c,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v=a.tokens;if(a.md.options.linkify)for(c=0,g=v.length;c<g;c++)if("inline"===v[c].type&&a.md.linkify.pretest(v[c].content))for(h=v[c].children,q=0,b=h.length-1;b>=0;b--)if(j=h[b],"link_close"!==j.type){if("html_inline"===j.type&&(d(j.content)&&q>0&&q--,e(j.content)&&q++),!(q>0)&&"text"===j.type&&a.md.linkify.test(j.content)){for(m=j.content,u=a.md.linkify.match(m),k=[],p=j.level,o=0,l=0;l<u.length;l++)r=u[l].url,s=a.md.normalizeLink(r),a.md.validateLink(s)&&(t=u[l].text,t=u[l].schema?"mailto:"!==u[l].schema||/^mailto:/i.test(t)?a.md.normalizeLinkText(t):a.md.normalizeLinkText("mailto:"+t).replace(/^mailto:/,""):a.md.normalizeLinkText("http://"+t).replace(/^http:\/\//,""),n=u[l].index,n>o&&(i=new a.Token("text","",0),i.content=m.slice(o,n),i.level=p,k.push(i)),i=new a.Token("link_open","a",1),i.attrs=[["href",s]],i.level=p++,i.markup="linkify",i.info="auto",k.push(i),i=new a.Token("text","",0),i.content=t,i.level=p,k.push(i),i=new a.Token("link_close","a",-1),i.level=--p,i.markup="linkify",i.info="auto",k.push(i),o=u[l].lastIndex);o<m.length&&(i=new a.Token("text","",0),i.content=m.slice(o),i.level=p,k.push(i)),v[c].children=h=f(h,b,k)}}else for(b--;h[b].level!==j.level&&"link_open"!==h[b].type;)b--}},{"../common/utils":11}],40:[function(a,b,c){var d=/[\n\t]/g,e=/\r[\n\u0085]|[\u2424\u2028\u0085]/g,f=/\u0000/g;b.exports=function(a){var b,c,g;b=a.src.replace(e,"\n"),b=b.replace(f,""),b.indexOf("\t")>=0&&(c=0,g=0,b=b.replace(d,function(a,d){var e;return 10===b.charCodeAt(d)?(c=d+1,g=0,a):(e="    ".slice((d-c-g)%4),g=d-c+1,e)})),a.src=b}},{}],41:[function(a,b,c){function d(a,b){return j[b.toLowerCase()]}function e(a){var b,c;for(b=a.length-1;b>=0;b--)c=a[b],"text"===c.type&&(c.content=c.content.replace(i,d))}function f(a){var b,c;for(b=a.length-1;b>=0;b--)c=a[b],"text"===c.type&&g.test(c.content)&&(c.content=c.content.replace(/\+-/g,"").replace(/\.{2,}/g,"").replace(/([?!])/g,"$1..").replace(/([?!]){4,}/g,"$1$1$1").replace(/,{2,}/g,",").replace(/(^|[^-])---([^-]|$)/gm,"$1$2").replace(/(^|\s)--(\s|$)/gm,"$1$2").replace(/(^|[^-\s])--([^-\s]|$)/gm,"$1$2"))}var g=/\+-|\.\.|\?\?\?\?|!!!!|,,|--/,h=/\((c|tm|r|p)\)/i,i=/\((c|tm|r|p)\)/gi,j={c:"",r:"",p:"",tm:""};b.exports=function(a){var b;if(a.md.options.typographer)for(b=a.tokens.length-1;b>=0;b--)"inline"===a.tokens[b].type&&(h.test(a.tokens[b].content)&&e(a.tokens[b].children),g.test(a.tokens[b].content)&&f(a.tokens[b].children))}},{}],42:[function(a,b,c){function d(a,b,c){return a.substr(0,b)+c+a.substr(b+1)}function e(a,b){var c,e,i,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,A,B,C;for(A=[],c=0;c<a.length;c++){for(e=a[c],o=a[c].level,y=A.length-1;y>=0&&!(A[y].level<=o);y--);if(A.length=y+1,"text"===e.type){i=e.content,m=0,n=i.length;a:for(;m<n&&(j.lastIndex=m,l=j.exec(i));)if(w=x=!0,m=l.index+1,z="'"===l[0],q=l.index-1>=0?i.charCodeAt(l.index-1):32,r=m<n?i.charCodeAt(m):32,s=h(q)||g(String.fromCharCode(q)),t=h(r)||g(String.fromCharCode(r)),u=f(q),v=f(r),v?w=!1:t&&(u||s||(w=!1)),u?x=!1:s&&(v||t||(x=!1)),34===r&&'"'===l[0]&&q>=48&&q<=57&&(x=w=!1),w&&x&&(w=!1,x=t),w||x){if(x)for(y=A.length-1;y>=0&&(p=A[y],!(A[y].level<o));y--)if(p.single===z&&A[y].level===o){p=A[y],z?(B=b.md.options.quotes[2],C=b.md.options.quotes[3]):(B=b.md.options.quotes[0],C=b.md.options.quotes[1]),e.content=d(e.content,l.index,C),a[p.token].content=d(a[p.token].content,p.pos,B),m+=C.length-1,p.token===c&&(m+=B.length-1),i=e.content,n=i.length,A.length=y;continue a}w?A.push({token:c,pos:l.index,single:z,level:o}):x&&z&&(e.content=d(e.content,l.index,k))}else z&&(e.content=d(e.content,l.index,k))}}}var f=a("../common/utils").isWhiteSpace,g=a("../common/utils").isPunctChar,h=a("../common/utils").isMdAsciiPunct,i=/['"]/,j=/['"]/g,k="";b.exports=function(a){var b;if(a.md.options.typographer)for(b=a.tokens.length-1;b>=0;b--)"inline"===a.tokens[b].type&&i.test(a.tokens[b].content)&&e(a.tokens[b].children,a)}},{"../common/utils":11}],43:[function(a,b,c){function d(a,b,c){this.src=a,this.env=c,this.tokens=[],this.inlineMode=!1,this.md=b}var e=a("../token");d.prototype.Token=e,b.exports=d},{"../token":56}],44:[function(a,b,c){var d=a("../common/url_schemas"),e=/^<([a-zA-Z0-9.!#$%&'*+\/=?^_`{|}~-]+@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*)>/,f=/^<([a-zA-Z.\-]{1,25}):([^<>\x00-\x20]*)>/;b.exports=function(a,b){var c,g,h,i,j,k,l=a.pos;return 60===a.src.charCodeAt(l)&&(c=a.src.slice(l),!(c.indexOf(">")<0)&&(f.test(c)?(g=c.match(f),!(d.indexOf(g[1].toLowerCase())<0)&&(i=g[0].slice(1,-1),j=a.md.normalizeLink(i),!!a.md.validateLink(j)&&(b||(k=a.push("link_open","a",1),k.attrs=[["href",j]],k=a.push("text","",0),k.content=a.md.normalizeLinkText(i),k=a.push("link_close","a",-1)),a.pos+=g[0].length,!0))):!!e.test(c)&&(h=c.match(e),i=h[0].slice(1,-1),j=a.md.normalizeLink("mailto:"+i),!!a.md.validateLink(j)&&(b||(k=a.push("link_open","a",1),k.attrs=[["href",j]],k.markup="autolink",k.info="auto",k=a.push("text","",0),k.content=a.md.normalizeLinkText(i),k=a.push("link_close","a",-1),k.markup="autolink",k.info="auto"),a.pos+=h[0].length,!0))))}},{"../common/url_schemas":10}],45:[function(a,b,c){b.exports=function(a,b){var c,d,e,f,g,h,i=a.pos;if(96!==a.src.charCodeAt(i))return!1;for(c=i,i++,d=a.posMax;i<d&&96===a.src.charCodeAt(i);)i++;for(e=a.src.slice(c,i),f=g=i;-1!==(f=a.src.indexOf("`",g));){for(g=f+1;g<d&&96===a.src.charCodeAt(g);)g++;if(g-f===e.length)return b||(h=a.push("code_inline","code",0),h.markup=e,h.content=a.src.slice(i,f).replace(/[ \n]+/g," ").trim()),a.pos=g,!0}return b||(a.pending+=e),a.pos+=e.length,!0}},{}],46:[function(a,b,c){function d(a,b){var c,d,h,i,j,k,l,m,n,o=b,p=!0,q=!0,r=a.posMax,s=a.src.charCodeAt(b);for(c=b>0?a.src.charCodeAt(b-1):32;o<r&&a.src.charCodeAt(o)===s;)o++;return h=o-b,d=o<r?a.src.charCodeAt(o):32,l=g(c)||f(String.fromCharCode(c)),n=g(d)||f(String.fromCharCode(d)),k=e(c),m=e(d),m?p=!1:n&&(k||l||(p=!1)),k?q=!1:l&&(m||n||(q=!1)),95===s?(i=p&&(!q||l),j=q&&(!p||n)):(i=p,j=q),{can_open:i,can_close:j,delims:h}}var e=a("../common/utils").isWhiteSpace,f=a("../common/utils").isPunctChar,g=a("../common/utils").isMdAsciiPunct;b.exports=function(a,b){var c,e,f,g,h,i,j,k,l=a.posMax,m=a.pos,n=a.src.charCodeAt(m);if(95!==n&&42!==n)return!1;if(b)return!1;if(j=d(a,m),c=j.delims,!j.can_open)return a.pos+=c,a.pending+=a.src.slice(m,a.pos),!0;for(a.pos=m+c,i=[c];a.pos<l;)if(a.src.charCodeAt(a.pos)!==n)a.md.inline.skipToken(a);else{if(j=d(a,a.pos),e=j.delims,j.can_close){for(g=i.pop(),h=e;g!==h;){if(h<g){i.push(g-h);break}if(h-=g,0===i.length)break;a.pos+=g,g=i.pop()}if(0===i.length){c=g,f=!0;break}a.pos+=e;continue}j.can_open&&i.push(e),a.pos+=e}if(!f)return a.pos=m,!1;for(a.posMax=a.pos,a.pos=m+c,e=c;e>1;e-=2)k=a.push("strong_open","strong",1),k.markup=String.fromCharCode(n)+String.fromCharCode(n);for(e%2&&(k=a.push("em_open","em",1),k.markup=String.fromCharCode(n)),a.md.inline.tokenize(a),e%2&&(k=a.push("em_close","em",-1),k.markup=String.fromCharCode(n)),e=c;e>1;e-=2)k=a.push("strong_close","strong",-1),k.markup=String.fromCharCode(n)+String.fromCharCode(n);return a.pos=a.posMax+c,a.posMax=l,!0}},{"../common/utils":11}],47:[function(a,b,c){var d=a("../common/entities"),e=a("../common/utils").has,f=a("../common/utils").isValidEntityCode,g=a("../common/utils").fromCodePoint,h=/^&#((?:x[a-f0-9]{1,8}|[0-9]{1,8}));/i,i=/^&([a-z][a-z0-9]{1,31});/i;b.exports=function(a,b){var c,j,k=a.pos,l=a.posMax;if(38!==a.src.charCodeAt(k))return!1;if(k+1<l)if(35===a.src.charCodeAt(k+1)){if(j=a.src.slice(k).match(h))return b||(c="x"===j[1][0].toLowerCase()?parseInt(j[1].slice(1),16):parseInt(j[1],10),a.pending+=g(f(c)?c:65533)),a.pos+=j[0].length,!0}else if((j=a.src.slice(k).match(i))&&e(d,j[1]))return b||(a.pending+=d[j[1]]),a.pos+=j[0].length,!0;return b||(a.pending+="&"),a.pos++,!0}},{"../common/entities":7,"../common/utils":11}],48:[function(a,b,c){for(var d=[],e=0;e<256;e++)d.push(0);"\\!\"#$%&'()*+,./:;<=>?@[]^_`{|}~-".split("").forEach(function(a){d[a.charCodeAt(0)]=1}),b.exports=function(a,b){var c,e=a.pos,f=a.posMax;if(92!==a.src.charCodeAt(e))return!1;if(++e<f){if((c=a.src.charCodeAt(e))<256&&0!==d[c])return b||(a.pending+=a.src[e]),a.pos+=2,!0;if(10===c){for(b||a.push("hardbreak","br",0),e++;e<f&&32===a.src.charCodeAt(e);)e++;return a.pos=e,!0}}return b||(a.pending+="\\"),a.pos++,!0}},{}],49:[function(a,b,c){function d(a){var b=32|a;return b>=97&&b<=122}var e=a("../common/html_re").HTML_TAG_RE;b.exports=function(a,b){var c,f,g,h,i=a.pos;return!!a.md.options.html&&(g=a.posMax,!(60!==a.src.charCodeAt(i)||i+2>=g)&&(!(33!==(c=a.src.charCodeAt(i+1))&&63!==c&&47!==c&&!d(c))&&(!!(f=a.src.slice(i).match(e))&&(b||(h=a.push("html_inline","",0),h.content=a.src.slice(i,i+f[0].length)),a.pos+=f[0].length,!0))))}},{"../common/html_re":9}],50:[function(a,b,c){var d=a("../helpers/parse_link_label"),e=a("../helpers/parse_link_destination"),f=a("../helpers/parse_link_title"),g=a("../common/utils").normalizeReference;b.exports=function(a,b){var c,h,i,j,k,l,m,n,o,p,q,r,s="",t=a.pos,u=a.posMax;if(33!==a.src.charCodeAt(a.pos))return!1;if(91!==a.src.charCodeAt(a.pos+1))return!1;if(k=a.pos+2,(j=d(a,a.pos+1,!1))<0)return!1;if((l=j+1)<u&&40===a.src.charCodeAt(l)){for(l++;l<u&&(32===(h=a.src.charCodeAt(l))||10===h);l++);if(l>=u)return!1;for(r=l,n=e(a.src,l,a.posMax),n.ok&&(s=a.md.normalizeLink(n.str),a.md.validateLink(s)?l=n.pos:s=""),r=l;l<u&&(32===(h=a.src.charCodeAt(l))||10===h);l++);if(n=f(a.src,l,a.posMax),l<u&&r!==l&&n.ok)for(o=n.str,l=n.pos;l<u&&(32===(h=a.src.charCodeAt(l))||10===h);l++);else o="";if(l>=u||41!==a.src.charCodeAt(l))return a.pos=t,!1;l++}else{if(void 0===a.env.references)return!1;for(;l<u&&(32===(h=a.src.charCodeAt(l))||10===h);l++);if(l<u&&91===a.src.charCodeAt(l)?(r=l+1,l=d(a,l),l>=0?i=a.src.slice(r,l++):l=j+1):l=j+1,i||(i=a.src.slice(k,j)),!(m=a.env.references[g(i)]))return a.pos=t,!1;s=m.href,o=m.title}if(!b){a.pos=k,a.posMax=j;var v=new a.md.inline.State(a.src.slice(k,j),a.md,a.env,q=[]);v.md.inline.tokenize(v),p=a.push("image","img",0),p.attrs=c=[["src",s],["alt",""]],p.children=q,o&&c.push(["title",o])}return a.pos=l,a.posMax=u,!0}},{"../common/utils":11,"../helpers/parse_link_destination":13,"../helpers/parse_link_label":14,"../helpers/parse_link_title":15}],51:[function(a,b,c){var d=a("../helpers/parse_link_label"),e=a("../helpers/parse_link_destination"),f=a("../helpers/parse_link_title"),g=a("../common/utils").normalizeReference;b.exports=function(a,b){var c,h,i,j,k,l,m,n,o,p,q="",r=a.pos,s=a.posMax,t=a.pos;if(91!==a.src.charCodeAt(a.pos))return!1;if(k=a.pos+1,(j=d(a,a.pos,!0))<0)return!1;if((l=j+1)<s&&40===a.src.charCodeAt(l)){for(l++;l<s&&(32===(h=a.src.charCodeAt(l))||10===h);l++);if(l>=s)return!1;for(t=l,m=e(a.src,l,a.posMax),m.ok&&(q=a.md.normalizeLink(m.str),a.md.validateLink(q)?l=m.pos:q=""),t=l;l<s&&(32===(h=a.src.charCodeAt(l))||10===h);l++);if(m=f(a.src,l,a.posMax),l<s&&t!==l&&m.ok)for(o=m.str,l=m.pos;l<s&&(32===(h=a.src.charCodeAt(l))||10===h);l++);else o="";if(l>=s||41!==a.src.charCodeAt(l))return a.pos=r,!1;l++}else{if(void 0===a.env.references)return!1;for(;l<s&&(32===(h=a.src.charCodeAt(l))||10===h);l++);if(l<s&&91===a.src.charCodeAt(l)?(t=l+1,l=d(a,l),l>=0?i=a.src.slice(t,l++):l=j+1):l=j+1,i||(i=a.src.slice(k,j)),!(n=a.env.references[g(i)]))return a.pos=r,!1;q=n.href,o=n.title}return b||(a.pos=k,a.posMax=j,p=a.push("link_open","a",1),p.attrs=c=[["href",q]],o&&c.push(["title",o]),a.md.inline.tokenize(a),p=a.push("link_close","a",-1)),a.pos=l,a.posMax=s,!0}},{"../common/utils":11,"../helpers/parse_link_destination":13,"../helpers/parse_link_label":14,"../helpers/parse_link_title":15}],52:[function(a,b,c){b.exports=function(a,b){var c,d,e=a.pos;if(10!==a.src.charCodeAt(e))return!1;for(c=a.pending.length-1,d=a.posMax,b||(c>=0&&32===a.pending.charCodeAt(c)?c>=1&&32===a.pending.charCodeAt(c-1)?(a.pending=a.pending.replace(/ +$/,""),a.push("hardbreak","br",0)):(a.pending=a.pending.slice(0,-1),a.push("softbreak","br",0)):a.push("softbreak","br",0)),e++;e<d&&32===a.src.charCodeAt(e);)e++;return a.pos=e,!0}},{}],53:[function(a,b,c){function d(a,b,c,d){this.src=a,this.env=c,this.md=b,this.tokens=d,this.pos=0,this.posMax=this.src.length,this.level=0,this.pending="",this.pendingLevel=0,this.cache={}}var e=a("../token");d.prototype.pushPending=function(){var a=new e("text","",0);return a.content=this.pending,a.level=this.pendingLevel,this.tokens.push(a),this.pending="",a},d.prototype.push=function(a,b,c){this.pending&&this.pushPending();var d=new e(a,b,c);return c<0&&this.level--,d.level=this.level,c>0&&this.level++,this.pendingLevel=this.level,this.tokens.push(d),d},d.prototype.Token=e,b.exports=d},{"../token":56}],54:[function(a,b,c){function d(a,b){var c,d,h,i,j,k,l,m=b,n=!0,o=!0,p=a.posMax,q=a.src.charCodeAt(b);for(c=b>0?a.src.charCodeAt(b-1):32;m<p&&a.src.charCodeAt(m)===q;)m++;return m>=p&&(n=!1),h=m-b,d=m<p?a.src.charCodeAt(m):32,j=g(c)||f(String.fromCharCode(c)),l=g(d)||f(String.fromCharCode(d)),i=e(c),k=e(d),k?n=!1:l&&(i||j||(n=!1)),i?o=!1:j&&(k||l||(o=!1)),{can_open:n,can_close:o,delims:h}}var e=a("../common/utils").isWhiteSpace,f=a("../common/utils").isPunctChar,g=a("../common/utils").isMdAsciiPunct;b.exports=function(a,b){var c,e,f,g,h,i,j,k=a.posMax,l=a.pos,m=a.src.charCodeAt(l);if(126!==m)return!1;if(b)return!1;if(i=d(a,l),c=i.delims,!i.can_open)return a.pos+=c,a.pending+=a.src.slice(l,a.pos),!0;if((h=Math.floor(c/2))<=0)return!1;for(a.pos=l+c;a.pos<k;)if(a.src.charCodeAt(a.pos)!==m)a.md.inline.skipToken(a);else{if(i=d(a,a.pos),e=i.delims,f=Math.floor(e/2),i.can_close){if(f>=h){a.pos+=e-2,g=!0;break}h-=f,a.pos+=e;continue}i.can_open&&(h+=f),a.pos+=e}return g?(a.posMax=a.pos,a.pos=l+2,j=a.push("s_open","s",1),j.markup="~~",a.md.inline.tokenize(a),j=a.push("s_close","s",-1),j.markup="~~",a.pos=a.posMax+2,a.posMax=k,!0):(a.pos=l,!1)}},{"../common/utils":11}],55:[function(a,b,c){function d(a){switch(a){case 10:case 33:case 35:case 36:case 37:case 38:case 42:case 43:case 45:case 58:case 60:case 61:case 62:case 64:case 91:case 92:case 93:case 94:case 95:case 96:case 123:case 125:case 126:return!0;default:return!1}}b.exports=function(a,b){for(var c=a.pos;c<a.posMax&&!d(a.src.charCodeAt(c));)c++;return c!==a.pos&&(b||(a.pending+=a.src.slice(a.pos,c)),a.pos=c,!0)}},{}],56:[function(a,b,c){function d(a,b,c){this.type=a,this.tag=b,this.attrs=null,this.map=null,this.nesting=c,this.level=0,this.children=null,this.content="",this.markup="",this.info="",this.meta=null,this.block=!1,this.hidden=!1}d.prototype.attrIndex=function(a){var b,c,d;if(!this.attrs)return-1;for(b=this.attrs,c=0,d=b.length;c<d;c++)if(b[c][0]===a)return c;return-1},d.prototype.attrPush=function(a){this.attrs?this.attrs.push(a):this.attrs=[a]},b.exports=d},{}],57:[function(a,b,c){function d(a){var b,c,d=f[a];if(d)return d;for(d=f[a]=[],b=0;b<128;b++)c=String.fromCharCode(b),d.push(c);for(b=0;b<a.length;b++)c=a.charCodeAt(b),d[c]="%"+("0"+c.toString(16).toUpperCase()).slice(-2);return d}function e(a,b){var c;return"string"!=typeof b&&(b=e.defaultChars),c=d(b),a.replace(/(%[a-f0-9]{2})+/gi,function(a){var b,d,e,f,g,h,i,j="";for(b=0,d=a.length;b<d;b+=3)e=parseInt(a.slice(b+1,b+3),16),
e<128?j+=c[e]:192==(224&e)&&b+3<d&&128==(192&(f=parseInt(a.slice(b+4,b+6),16)))?(i=e<<6&1984|63&f,j+=i<128?"":String.fromCharCode(i),b+=3):224==(240&e)&&b+6<d&&(f=parseInt(a.slice(b+4,b+6),16),g=parseInt(a.slice(b+7,b+9),16),128==(192&f)&&128==(192&g))?(i=e<<12&61440|f<<6&4032|63&g,j+=i<2048||i>=55296&&i<=57343?"":String.fromCharCode(i),b+=6):240==(248&e)&&b+9<d&&(f=parseInt(a.slice(b+4,b+6),16),g=parseInt(a.slice(b+7,b+9),16),h=parseInt(a.slice(b+10,b+12),16),128==(192&f)&&128==(192&g)&&128==(192&h))?(i=e<<18&1835008|f<<12&258048|g<<6&4032|63&h,i<65536||i>1114111?j+="":(i-=65536,j+=String.fromCharCode(55296+(i>>10),56320+(1023&i))),b+=9):j+="";return j})}var f={};e.defaultChars=";/?:@&=+$,#",e.componentChars="",b.exports=e},{}],58:[function(a,b,c){function d(a){var b,c,d=f[a];if(d)return d;for(d=f[a]=[],b=0;b<128;b++)c=String.fromCharCode(b),/^[0-9a-z]$/i.test(c)?d.push(c):d.push("%"+("0"+b.toString(16).toUpperCase()).slice(-2));for(b=0;b<a.length;b++)d[a.charCodeAt(b)]=a[b];return d}function e(a,b,c){var f,g,h,i,j,k="";for("string"!=typeof b&&(c=b,b=e.defaultChars),void 0===c&&(c=!0),j=d(b),f=0,g=a.length;f<g;f++)if(h=a.charCodeAt(f),c&&37===h&&f+2<g&&/^[0-9a-f]{2}$/i.test(a.slice(f+1,f+3)))k+=a.slice(f,f+3),f+=2;else if(h<128)k+=j[h];else if(h>=55296&&h<=57343){if(h>=55296&&h<=56319&&f+1<g&&(i=a.charCodeAt(f+1))>=56320&&i<=57343){k+=encodeURIComponent(a[f]+a[f+1]),f++;continue}k+="%EF%BF%BD"}else k+=encodeURIComponent(a[f]);return k}var f={};e.defaultChars=";/?:@&=+$,-_.!~*'()#",e.componentChars="-_.!~*'()",b.exports=e},{}],59:[function(a,b,c){b.exports=function(a){var b="";return b+=a.protocol||"",b+=a.slashes?"//":"",b+=a.auth?a.auth+"@":"",a.hostname&&-1!==a.hostname.indexOf(":")?b+="["+a.hostname+"]":b+=a.hostname||"",b+=a.port?":"+a.port:"",b+=a.pathname||"",b+=a.search||"",b+=a.hash||""}},{}],60:[function(a,b,c){b.exports.encode=a("./encode"),b.exports.decode=a("./decode"),b.exports.format=a("./format"),b.exports.parse=a("./parse")},{"./decode":57,"./encode":58,"./format":59,"./parse":61}],61:[function(a,b,c){function d(){this.protocol=null,this.slashes=null,this.auth=null,this.port=null,this.hostname=null,this.hash=null,this.search=null,this.pathname=null}function e(a,b){if(a&&a instanceof d)return a;var c=new d;return c.parse(a,b),c}var f=/^([a-z0-9.+-]+:)/i,g=/:[0-9]*$/,h=/^(\/\/?(?!\/)[^\?\s]*)(\?[^\s]*)?$/,i=["<",">",'"',"`"," ","\r","\n","\t"],j=["{","}","|","\\","^","`"].concat(i),k=["'"].concat(j),l=["%","/","?",";","#"].concat(k),m=["/","?","#"],n=/^[+a-z0-9A-Z_-]{0,63}$/,o=/^([+a-z0-9A-Z_-]{0,63})(.*)$/,p={javascript:!0,"javascript:":!0},q={http:!0,https:!0,ftp:!0,gopher:!0,file:!0,"http:":!0,"https:":!0,"ftp:":!0,"gopher:":!0,"file:":!0};d.prototype.parse=function(a,b){var c,d,e,g,i,j=a;if(j=j.trim(),!b&&1===a.split("#").length){var k=h.exec(j);if(k)return this.pathname=k[1],k[2]&&(this.search=k[2]),this}var r=f.exec(j);if(r&&(r=r[0],e=r.toLowerCase(),this.protocol=r,j=j.substr(r.length)),(b||r||j.match(/^\/\/[^@\/]+@[^@\/]+/))&&(!(i="//"===j.substr(0,2))||r&&p[r]||(j=j.substr(2),this.slashes=!0)),!p[r]&&(i||r&&!q[r])){var s=-1;for(c=0;c<m.length;c++)-1!==(g=j.indexOf(m[c]))&&(-1===s||g<s)&&(s=g);var t,u;for(u=-1===s?j.lastIndexOf("@"):j.lastIndexOf("@",s),-1!==u&&(t=j.slice(0,u),j=j.slice(u+1),this.auth=t),s=-1,c=0;c<l.length;c++)-1!==(g=j.indexOf(l[c]))&&(-1===s||g<s)&&(s=g);-1===s&&(s=j.length),":"===j[s-1]&&s--;var v=j.slice(0,s);j=j.slice(s),this.parseHost(v),this.hostname=this.hostname||"";var w="["===this.hostname[0]&&"]"===this.hostname[this.hostname.length-1];if(!w){var x=this.hostname.split(/\./);for(c=0,d=x.length;c<d;c++){var y=x[c];if(y&&!y.match(n)){for(var z="",A=0,B=y.length;A<B;A++)y.charCodeAt(A)>127?z+="x":z+=y[A];if(!z.match(n)){var C=x.slice(0,c),D=x.slice(c+1),E=y.match(o);E&&(C.push(E[1]),D.unshift(E[2])),D.length&&(j=D.join(".")+j),this.hostname=C.join(".");break}}}}this.hostname.length>255&&(this.hostname=""),w&&(this.hostname=this.hostname.substr(1,this.hostname.length-2))}var F=j.indexOf("#");-1!==F&&(this.hash=j.substr(F),j=j.slice(0,F));var G=j.indexOf("?");return-1!==G&&(this.search=j.substr(G),j=j.slice(0,G)),j&&(this.pathname=j),q[e]&&this.hostname&&!this.pathname&&(this.pathname=""),this},d.prototype.parseHost=function(a){var b=g.exec(a);b&&(b=b[0],":"!==b&&(this.port=b.substr(1)),a=a.substr(0,a.length-b.length)),a&&(this.hostname=a)},b.exports=e},{}],62:[function(a,b,c){function d(a,b){var c=document.createElement(a);if(b)for(var d in b)"style"==d?c.style.cssText=b[d]:null!=b[d]&&c.setAttribute(d,b[d]);for(var f=arguments.length,g=Array(f>2?f-2:0),h=2;h<f;h++)g[h-2]=arguments[h];for(var i=0;i<g.length;i++)e(g[i],c);return c}function e(a,b){if("string"==typeof a&&(a=document.createTextNode(a)),Array.isArray(a))for(var c=0;c<a.length;c++)e(a[c],b);else b.appendChild(a)}function f(a){m?m(a):setTimeout(a,10)}function g(a){return new RegExp("(^|\\s)"+a+"(?:$|\\s)\\s*")}function h(a,b){var c=a.className,d=g(b).exec(c);if(d){var e=c.slice(d.index+d[0].length);a.className=c.slice(0,d.index)+(e?d[1]+e:"")}}function i(a,b){var c=a.className;g(b).test(c)||(a.className+=(c?" ":"")+b)}function j(a,b){return 1!=b.nodeType&&(b=b.parentNode),b&&a.contains(b)}function k(a){q?q.textContent+=a:p+=a}function l(){q||(q=document.createElement("style"),q.textContent="/* ProseMirror CSS */\n"+p,document.head.insertBefore(q,document.head.firstChild))}Object.defineProperty(c,"__esModule",{value:!0}),c.elt=d,c.requestAnimationFrame=f,c.rmClass=h,c.addClass=i,c.contains=j,c.insertCSS=k,c.ensureCSSAdded=l;var m=window.requestAnimationFrame||window.mozRequestAnimationFrame||window.webkitRequestAnimationFrame||window.msRequestAnimationFrame,n=/MSIE \d/.test(navigator.userAgent),o=/Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(navigator.userAgent),p=(c.browser={mac:/Mac/.test(navigator.platform),ie_upto10:n,ie_11up:o,ie:n||o,gecko:/gecko\/\d/i.test(navigator.userAgent)},""),q=null},{}],63:[function(a,b,c){function d(a){if(Array.isArray(a)){for(var b=0,c=Array(a.length);b<a.length;b++)c[b]=a[b];return c}return Array.from(a)}function e(a,b,c){"char"!=c&&"word"!=c&&p.AssertionError.raise("Unknown motion unit: "+c);for(var d=null,e=0;;){if(0==b)return b;var f=a.chunkBefore(b),g=f.start,h=f.node;if(!h.isText)return d?b:b-1;if("char"==c)for(var i=b-g;i>0;i--){if(!(0,q.isExtendingChar)(h.text.charAt(i-1)))return b-1;b--}else if("word"==c)for(var i=b-g;i>0;i--){var j=(0,q.charCategory)(h.text.charAt(i-1));if(null==d||1==e&&"space"==d)d=j;else if(d!=j)return b;b--,e++}}}function f(a,b){var c=a.doc.path(b.path),e=c.child(b.offset-1),f=c.child(b.offset);if(!e.type.canContainContent(f.type)||!1===a.tr.join(b).apply(a.apply.scroll)){var g=void 0;if(f.isTextblock&&(g=e.type.findConnection(f.type))){var h=a.tr,i=b.move(1);if(h.step("ancestor",b,i,null,{types:[e.type].concat(d(g)),attrs:[e.attrs].concat(d(g.map(function(){return null})))}),h.join(i),h.join(b),!1!==h.apply(a.apply.scroll))return}var j=(0,r.findSelectionFrom)(a.doc,b,1);return a.tr.lift(j.from,j.to).apply(a.apply.scroll)}}function g(a,b,c){"char"!=c&&"word"!=c&&p.AssertionError.raise("Unknown motion unit: "+c);for(var d=null,e=0;;){if(b==a.size)return b;var f=a.chunkAfter(b),g=f.start,h=f.node;if(!h.isText)return d?b:b+1;if("char"==c)for(var i=b-g;i<h.text.length;i++){if(!(0,q.isExtendingChar)(h.text.charAt(i+1)))return b+1;b++}else if("word"==c)for(var i=b-g;i<h.text.length;i++){var j=(0,q.charCategory)(h.text.charAt(i));if(null==d||1==e&&"space"==d)d=j;else if(d!=j)return b;b++,e++}}}function h(a){var b=a.selection,c=b.node,d=b.from;return c?(0,o.joinableBlocks)(a.doc,d)?d:null:(0,o.joinPoint)(a.doc,d,-1)}function i(a){var b=a.selection,c=b.node,d=b.to;return c?(0,o.joinableBlocks)(a.doc,d)?d:null:(0,o.joinPoint)(a.doc,d,1)}function j(a){var b=a.selection,c=0;if(b.node)return!!b.from.depth&&b.from.shorten();for(;c<b.head.depth&&c<b.anchor.depth&&b.head.path[c]==b.anchor.path[c];c++);return 0!=c&&b.head.shorten(c-1)}function k(a,b){var c=a.selection,d=c.from,e=c.to,f=c.node,g=b>0?e:d;return(0,r.findSelectionFrom)(a.doc,f&&f.isBlock?g:g.shorten(null,b>0?1:0),b)}function l(a,b){var c=a.selection,d=c.empty,e=c.node,f=c.from,g=c.to;if(!d&&!e)return!1;if(e&&e.isInline)return a.setTextSelection(b>0?g:f),!0;var h=void 0;if(!e&&(h=a.doc.path(f.path))&&(b>0?f.offset<h.size:f.offset)){var i=b>0?h.chunkAfter(f.offset):h.chunkBefore(f.offset),j=i.node,l=i.start;return!(!j.type.selectable||l!=f.offset-(b>0?0:1))&&(a.setNodeSelection(b<0?f.move(-1):f),!0)}var m=k(a,b);return!(!m||!(m instanceof r.NodeSelection||e))&&(a.setSelectionDirect(m),!0)}function m(a,b){var c=a.selection,d=c.empty,e=c.node,f=c.from,g=c.to;if(!d&&!e)return!1;var h=!0;if(e&&!e.isInline||(h=(0,r.verticalMotionLeavesTextblock)(a,b>0?g:f,b)),h){var i=k(a,b);if(i&&i instanceof r.NodeSelection)return a.setSelectionDirect(i),e||(a.sel.lastNonNodePos=f),!0}if(!e)return!1;if(e.isInline)return(0,s.setDOMSelectionToPos)(a,f),!1;var j=a.sel.lastNonNodePos,l=(0,r.findSelectionFrom)(a.doc,b<0?f:g,b);return j&&l&&n.Pos.samePath(j.path,l.from.path)?((0,s.setDOMSelectionToPos)(a,j),!1):(a.setSelectionDirect(l),!0)}Object.defineProperty(c,"__esModule",{value:!0}),c.baseCommands=void 0;var n=a("../model"),o=a("../transform"),p=a("../util/error"),q=a("./char"),r=a("./selection"),s=a("./dompos"),t=c.baseCommands=Object.create(null);t.deleteSelection={label:"Delete the selection",run:function(a){return a.tr.replaceSelection().apply(a.apply.scroll)},keys:{all:["Backspace(10)","Delete(10)","Mod-Backspace(10)","Mod-Delete(10)"],mac:["Ctrl-H(10)","Alt-Backspace(10)","Ctrl-D(10)","Ctrl-Alt-Backspace(10)","Alt-Delete(10)","Alt-D(10)"]}},t.joinBackward={label:"Join with the block above",run:function(a){var b=a.selection,c=b.head;if(!b.empty||c.offset>0)return!1;for(var d=void 0,e=void 0,g=c.path.length-1;!d&&g>=0;g--)c.path[g]>0&&(e=c.shorten(g),d=a.doc.path(e.path).child(e.offset-1));return d?null==d.type.contains?a.tr.delete(e.move(-1),e).apply(a.apply.scroll):f(a,e):a.tr.lift(c).apply(a.apply.scroll)},keys:["Backspace(30)","Mod-Backspace(30)"]},t.deleteCharBefore={label:"Delete a character before the cursor",run:function(a){var b=a.selection,c=b.head;if(!b.empty||0==c.offset)return!1;var d=e(a.doc.path(c.path),c.offset,"char");return a.tr.delete(new n.Pos(c.path,d),c).apply(a.apply.scroll)},keys:{all:["Backspace(60)"],mac:["Ctrl-H(40)"]}},t.deleteWordBefore={label:"Delete the word before the cursor",run:function(a){var b=a.selection,c=b.head;if(!b.empty||0==c.offset)return!1;var d=e(a.doc.path(c.path),c.offset,"word");return a.tr.delete(new n.Pos(c.path,d),c).apply(a.apply.scroll)},keys:{all:["Mod-Backspace(40)"],mac:["Alt-Backspace(40)"]}},t.joinForward={label:"Join with the block below",run:function(a){var b=a.selection,c=b.head;if(!b.empty||c.offset<a.doc.path(c.path).size)return!1;for(var d=void 0,e=void 0,g=c.path.length-1;!d&&g>=0;g--){e=c.shorten(g,1);var h=a.doc.path(e.path);e.offset<h.size&&(d=h.child(e.offset))}return!!d&&(null==d.type.contains?a.tr.delete(e,e.move(1)).apply(a.apply.scroll):f(a,e))},keys:["Delete(30)","Mod-Delete(30)"]},t.deleteCharAfter={label:"Delete a character after the cursor",run:function(a){var b=a.selection,c=b.head;if(!b.empty||c.offset==a.doc.path(c.path).size)return!1;var d=g(a.doc.path(c.path),c.offset,"char");return a.tr.delete(c,new n.Pos(c.path,d)).apply(a.apply.scroll)},keys:{all:["Delete(60)"],mac:["Ctrl-D(60)"]}},t.deleteWordAfter={label:"Delete a word after the cursor",run:function(a){var b=a.selection,c=b.head;if(!b.empty||c.offset==a.doc.path(c.path).size)return!1;var d=g(a.doc.path(c.path),c.offset,"word");return a.tr.delete(c,new n.Pos(c.path,d)).apply(a.apply.scroll)},keys:{all:["Mod-Delete(40)"],mac:["Ctrl-Alt-Backspace(40)","Alt-Delete(40)","Alt-D(40)"]}},t.joinUp={label:"Join with above block",run:function(a){var b=h(a),c=a.selection.node;if(!b)return!1;a.tr.join(b).apply(),c&&a.setNodeSelection(b.move(-1))},select:function(a){return h(a)},menu:{group:"block",rank:80,display:{type:"icon",width:800,height:900,path:"M0 75h800v125h-800z M0 825h800v-125h-800z M250 400h100v-100h100v100h100v100h-100v100h-100v-100h-100z"}},keys:["Alt-Up"]},t.joinDown={label:"Join with below block",run:function(a){var b=a.selection.node,c=i(a);if(!c)return!1;a.tr.join(c).apply(),b&&a.setNodeSelection(c.move(-1))},select:function(a){return i(a)},keys:["Alt-Down"]},t.lift={label:"Lift out of enclosing block",run:function(a){var b=a.selection,c=b.from,d=b.to;return a.tr.lift(c,d).apply(a.apply.scroll)},select:function(a){var b=a.selection,c=b.from,d=b.to;return(0,o.canLift)(a.doc,c,d)},menu:{group:"block",rank:75,display:{type:"icon",width:1024,height:1024,path:"M219 310v329q0 7-5 12t-12 5q-8 0-13-5l-164-164q-5-5-5-13t5-13l164-164q5-5 13-5 7 0 12 5t5 12zM1024 749v109q0 7-5 12t-12 5h-987q-7 0-12-5t-5-12v-109q0-7 5-12t12-5h987q7 0 12 5t5 12zM1024 530v109q0 7-5 12t-12 5h-621q-7 0-12-5t-5-12v-109q0-7 5-12t12-5h621q7 0 12 5t5 12zM1024 310v109q0 7-5 12t-12 5h-621q-7 0-12-5t-5-12v-109q0-7 5-12t12-5h621q7 0 12 5t5 12zM1024 91v109q0 7-5 12t-12 5h-987q-7 0-12-5t-5-12v-109q0-7 5-12t12-5h987q7 0 12 5t5 12z"}},keys:["Alt-Left"]},t.newlineInCode={label:"Insert newline",run:function(a){var b=a.selection,c=b.from,d=b.to,e=b.node,f=void 0;return!!(!e&&n.Pos.samePath(c.path,d.path)&&(f=a.doc.path(c.path)).type.isCode&&d.offset<f.size)&&a.tr.typeText("\n").apply(a.apply.scroll)},keys:["Enter(10)"]},t.createParagraphNear={label:"Create a paragraph near the selected leaf block",run:function(a){var b=a.selection,c=b.from,d=b.to,e=b.node;if(!e||!e.isBlock||e.type.contains)return!1;var f=c.offset?d:c;a.tr.insert(f,a.schema.defaultTextblockType().create()).apply(a.apply.scroll),a.setTextSelection(new n.Pos(f.toPath(),0))},keys:["Enter(20)"]},t.liftEmptyBlock={label:"Move current block up",run:function(a){var b=a.selection,c=b.head;if(!b.empty||c.offset>0||a.doc.path(c.path).size)return!1;if(c.depth>1){var d=c.shorten();if(d.offset>0&&d.offset<a.doc.path(d.path).size-1&&!1!==a.tr.split(d).apply())return}return a.tr.lift(c).apply(a.apply.scroll)},keys:["Enter(30)"]},t.splitBlock={label:"Split the current block",run:function(a){var b=a.selection,c=b.from,d=b.to,e=b.node,f=a.doc.path(d.path);if(e&&e.isBlock)return!!c.offset&&a.tr.split(c).apply(a.apply.scroll);var g=a.schema.defaultTextblockType(),h=d.offset==f.size?g:null,i=a.tr.delete(c,d).split(c,1,h);return d.offset<f.size&&!c.offset&&a.doc.path(c.path).type!=g&&i.setNodeType(c.shorten(),g),i.apply(a.apply.scroll)},keys:["Enter(60)"]},t.selectParentNode={label:"Select parent node",run:function(a){var b=j(a);if(!b)return!1;a.setNodeSelection(b)},select:function(a){return j(a)},menu:{group:"block",rank:90,display:{type:"icon",text:"",style:"font-weight: bold; vertical-align: 20%"}},keys:["Esc"]},t.selectNodeLeft={label:"Move the selection onto or out of the block to the left",run:function(a){var b=l(a,-1);return b&&a.scrollIntoView(),b},keys:["Left","Mod-Left"]},t.selectNodeRight={label:"Move the selection onto or out of the block to the right",run:function(a){var b=l(a,1);return b&&a.scrollIntoView(),b},keys:["Right","Mod-Right"]},t.selectNodeUp={label:"Move the selection onto or out of the block above",run:function(a){var b=m(a,-1);return!1!==b&&a.scrollIntoView(),b},keys:["Up"]},t.selectNodeDown={label:"Move the selection onto or out of the block below",run:function(a){var b=m(a,1);return!1!==b&&a.scrollIntoView(),b},keys:["Down"]},t.undo={label:"Undo last change",run:function(a){return a.scrollIntoView(),a.history.undo()},select:function(a){return a.history.undoDepth>0},menu:{group:"history",rank:10,display:{type:"icon",width:1024,height:1024,path:"M761 1024c113-206 132-520-313-509v253l-384-384 384-384v248c534-13 594 472 313 775z"}},keys:["Mod-Z"]},t.redo={label:"Redo last undone change",run:function(a){return a.scrollIntoView(),a.history.redo()},select:function(a){return a.history.redoDepth>0},menu:{group:"history",rank:20,display:{type:"icon",width:1024,height:1024,path:"M576 248v-248l384 384-384 384v-253c-446-10-427 303-313 509-280-303-221-789 313-775z"}},keys:["Mod-Y","Shift-Mod-Z"]}},{"../model":96,"../transform":102,"../util/error":114,"./char":65,"./dompos":69,"./selection":78}],64:[function(a,b,c){function d(a){return a&&a.__esModule?a:{default:a}}function e(){}function f(a){if(a.selection.node){var b=(0,i.findSelectionNear)(a.doc,a.selection.from,1,!0);b&&(0,j.setDOMSelectionToPos)(a,b.head)}return!1}Object.defineProperty(c,"__esModule",{value:!0}),c.captureKeys=void 0;var g=a("browserkeymap"),h=d(g),i=a("./selection"),j=a("./dompos"),k=a("../dom"),l={Esc:e,Enter:e,"Mod-Enter":e,"Shift-Enter":e,Backspace:e,Delete:e,"Mod-B":e,"Mod-I":e,"Mod-Backspace":e,"Mod-Delete":e,"Shift-Backspace":e,"Shift-Delete":e,"Shift-Mod-Backspace":e,"Shift-Mod-Delete":e,"Mod-Z":e,"Mod-Y":e,"Shift-Mod-Z":e,"Ctrl-D":e,"Ctrl-H":e,"Ctrl-Alt-Backspace":e,"Alt-D":e,"Alt-Delete":e,"Alt-Backspace":e,"Mod-A":f};["Left","Right","Up","Down","Home","End","PageUp","PageDown"].forEach(function(a){l[a]=l["Shift-"+a]=l["Mod-"+a]=l["Shift-Mod-"+a]=l["Alt-"+a]=l["Shift-Alt-"+a]=f}),["Left","Mod-Left","Right","Mod-Right","Up","Down"].forEach(function(a){return delete l[a]}),k.browser.mac&&(l["Ctrl-F"]=l["Ctrl-B"]=l["Ctrl-P"]=l["Ctrl-N"]=l["Alt-F"]=l["Alt-B"]=l["Ctrl-A"]=l["Ctrl-E"]=l["Ctrl-V"]=l.goPageUp=f);c.captureKeys=new h.default(l)},{"../dom":62,"./dompos":69,"./selection":78,browserkeymap:2}],65:[function(a,b,c){function d(a){return/\w/.test(a)||f(a)||a>""&&(a.toUpperCase()!=a.toLowerCase()||g.test(a))}function e(a){return/\s/.test(a)?"space":d(a)?"word":"other"}function f(a){return a.charCodeAt(0)>=768&&h.test(a)}Object.defineProperty(c,"__esModule",{value:!0}),c.isWordChar=d,c.charCategory=e,c.isExtendingChar=f;var g=/[\u00df\u0587\u0590-\u05f4\u0600-\u06ff\u3040-\u309f\u30a0-\u30ff\u3400-\u4db5\u4e00-\u9fcc\uac00-\ud7af]/,h=/[\u0300-\u036f\u0483-\u0489\u0591-\u05bd\u05bf\u05c1\u05c2\u05c4\u05c5\u05c7\u0610-\u061a\u064b-\u065e\u0670\u06d6-\u06dc\u06de-\u06e4\u06e7\u06e8\u06ea-\u06ed\u0711\u0730-\u074a\u07a6-\u07b0\u07eb-\u07f3\u0816-\u0819\u081b-\u0823\u0825-\u0827\u0829-\u082d\u0900-\u0902\u093c\u0941-\u0948\u094d\u0951-\u0955\u0962\u0963\u0981\u09bc\u09be\u09c1-\u09c4\u09cd\u09d7\u09e2\u09e3\u0a01\u0a02\u0a3c\u0a41\u0a42\u0a47\u0a48\u0a4b-\u0a4d\u0a51\u0a70\u0a71\u0a75\u0a81\u0a82\u0abc\u0ac1-\u0ac5\u0ac7\u0ac8\u0acd\u0ae2\u0ae3\u0b01\u0b3c\u0b3e\u0b3f\u0b41-\u0b44\u0b4d\u0b56\u0b57\u0b62\u0b63\u0b82\u0bbe\u0bc0\u0bcd\u0bd7\u0c3e-\u0c40\u0c46-\u0c48\u0c4a-\u0c4d\u0c55\u0c56\u0c62\u0c63\u0cbc\u0cbf\u0cc2\u0cc6\u0ccc\u0ccd\u0cd5\u0cd6\u0ce2\u0ce3\u0d3e\u0d41-\u0d44\u0d4d\u0d57\u0d62\u0d63\u0dca\u0dcf\u0dd2-\u0dd4\u0dd6\u0ddf\u0e31\u0e34-\u0e3a\u0e47-\u0e4e\u0eb1\u0eb4-\u0eb9\u0ebb\u0ebc\u0ec8-\u0ecd\u0f18\u0f19\u0f35\u0f37\u0f39\u0f71-\u0f7e\u0f80-\u0f84\u0f86\u0f87\u0f90-\u0f97\u0f99-\u0fbc\u0fc6\u102d-\u1030\u1032-\u1037\u1039\u103a\u103d\u103e\u1058\u1059\u105e-\u1060\u1071-\u1074\u1082\u1085\u1086\u108d\u109d\u135f\u1712-\u1714\u1732-\u1734\u1752\u1753\u1772\u1773\u17b7-\u17bd\u17c6\u17c9-\u17d3\u17dd\u180b-\u180d\u18a9\u1920-\u1922\u1927\u1928\u1932\u1939-\u193b\u1a17\u1a18\u1a56\u1a58-\u1a5e\u1a60\u1a62\u1a65-\u1a6c\u1a73-\u1a7c\u1a7f\u1b00-\u1b03\u1b34\u1b36-\u1b3a\u1b3c\u1b42\u1b6b-\u1b73\u1b80\u1b81\u1ba2-\u1ba5\u1ba8\u1ba9\u1c2c-\u1c33\u1c36\u1c37\u1cd0-\u1cd2\u1cd4-\u1ce0\u1ce2-\u1ce8\u1ced\u1dc0-\u1de6\u1dfd-\u1dff\u200c\u200d\u20d0-\u20f0\u2cef-\u2cf1\u2de0-\u2dff\u302a-\u302f\u3099\u309a\ua66f-\ua672\ua67c\ua67d\ua6f0\ua6f1\ua802\ua806\ua80b\ua825\ua826\ua8c4\ua8e0-\ua8f1\ua926-\ua92d\ua947-\ua951\ua980-\ua982\ua9b3\ua9b6-\ua9b9\ua9bc\uaa29-\uaa2e\uaa31\uaa32\uaa35\uaa36\uaa43\uaa4c\uaab0\uaab2-\uaab4\uaab7\uaab8\uaabe\uaabf\uaac1\uabe5\uabe8\uabed\udc00-\udfff\ufb1e\ufe00-\ufe0f\ufe20-\ufe26\uff9e\uff9f]/},{}],66:[function(a,b,c){function d(a){return a&&a.__esModule?a:{default:a}}function e(a){if(Array.isArray(a)){for(var b=0,c=Array(a.length);b<a.length;b++)c[b]=a[b];return c}return Array.from(a)}function f(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function g(a,b,c){if(!b.derive)return b;var d="object"==v(b.derive)?b.derive:{},e=d.name||c,f=a.constructor.deriveableCommands[e];f||E.AssertionError.raise("Don't know how to derive command "+e);var g=f.call(a,d);for(var h in b)"derive"!=h&&(g[h]=b[h]);return g}function h(a){function b(a,b){for(var d=0;d<b.length;d++){var e=/^(.+?)(?:\((\d+)\))?$/.exec(b[d]),f=u(e,3),g=(f[0],f[1]),h=f[2],i=void 0===h?50:h;(0,D.default)(c[g]||(c[g]=[]),{command:a,rank:i},function(a,b){return a.rank-b.rank})}}var c={},d=B.browser.mac?"mac":"pc";for(var e in a.commands){var f=a.commands[e],g=f.spec.keys;g&&(Array.isArray(g)&&b(f,g),g.all&&b(f,g.all),g[d]&&b(f,g[d]))}for(var h in c)c[h]=c[h].map(function(a){return a.command.name});return new y.default(c)}function i(a,b){a.signal("commandsChanging"),a.commands=b.derive(a.schema),a.input.baseKeymap=h(a),a.commandKeys=Object.create(null),a.signal("commandsChanged")}function j(a,b){var c=a.selection;return c.empty?b.isInSet(a.activeMarks()):a.doc.rangeHasMark(c.from,c.to,b)}function k(a,b){var c=a.selection,d=c.from,e=c.to;if(c.empty)return!b.isInSet(a.activeMarks())&&a.doc.path(d.path).type.canContainMark(b);var f=!1;return a.doc.nodesBetween(d,e,function(a){if(f||a.isTextblock&&!a.type.canContainMark(b))return!1;a.isInline&&!b.isInSet(a.marks)&&(f=!0)}),f}function l(a,b){var c=a.selection,d=c.from,e=c.to,f=!1;return a.doc.nodesBetween(d,e,function(a){if(a.isTextblock)return a.type.canContainMark(b)&&(f=!0),!1}),f}function m(a,b,c){var d=a.selection,e=d.from,f=d.to,g=d.empty,h=void 0,i=void 0;if(g)h=i=b.isInSet(a.activeMarks());else{var j=a.doc.path(e.path),k=j.size>e.offset&&j.chunkAfter(e.offset);h=k?b.isInSet(k.node.marks):null,i=b.isInSet(a.doc.marksAt(f))}if(h&&i&&h.attrs[c]==i.attrs[c])return h.attrs[c]}function n(a,b,c){var d=a.selection.node;if(d&&d.type==b)return d.attrs[c]}function o(a,b){return b&&b.map(function(b){var c=a.attrs[b.attr],d={type:"text",default:c.default,prefill:a instanceof z.NodeType?function(a){return n(a,this,b.attr)}:function(a){return m(a,this,b.attr)}};for(var e in b)d[e]=b[e];return d})}function p(a,b){var c=a.attrs;return a.params&&function(){var d=Object.create(null);if(c)for(var e in c)d[e]=c[e];a.params.forEach(function(a,c){return d[a.attr]=b[c]}),c=d}(),c}function q(a,b,c,d){return z.Pos.samePath(b.path,c.path)&&b.path.length>=2&&0==b.path[b.path.length-1]&&d.canContain(a.path(b.path.slice(0,b.path.length-1)))}function r(a,b,c,d,e){var f=!1;return e||(e={}),a.nodesBetween(b,c||b,function(a){if(a.isTextblock)return a.hasMarkup(d,e)&&(f=!0),!1}),f}function s(a,b,c){var d=a.selection,e=d.from,f=d.to,g=d.node;if(!g||g.isInline){if(!z.Pos.samePath(e.path,f.path))return!1;g=a.doc.path(e.path)}else if(!g.isTextblock)return!1;return g.hasMarkup(b,c)}var t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(a){return typeof a}:function(a){return a&&"function"==typeof Symbol&&a.constructor===Symbol?"symbol":typeof a},u=function(){function a(a,b){var c=[],d=!0,e=!1,f=void 0;try{for(var g,h=a[Symbol.iterator]();!(d=(g=h.next()).done)&&(c.push(g.value),!b||c.length!==b);d=!0);}catch(a){e=!0,f=a}finally{try{!d&&h.return&&h.return()}finally{if(e)throw f}}return c}return function(b,c){if(Array.isArray(b))return b;if(Symbol.iterator in Object(b))return a(b,c);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),v="function"==typeof Symbol&&"symbol"===t(Symbol.iterator)?function(a){return void 0===a?"undefined":t(a)}:function(a){return a&&"function"==typeof Symbol&&a.constructor===Symbol?"symbol":void 0===a?"undefined":t(a)},w=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}();Object.defineProperty(c,"__esModule",{value:!0}),c.CommandSet=c.Command=void 0,c.updateCommands=i,c.selectedNodeAttr=n;var x=a("browserkeymap"),y=d(x),z=a("../model"),A=a("../transform"),B=a("../dom"),C=a("../util/sortedinsert"),D=d(C),E=a("../util/error"),F=a("../util/obj"),G=a("./base_commands"),H=c.Command=function(){function a(b,c,d){f(this,a),this.name=d,this.name||E.NamespaceError.raise("Trying to define a command without a name"),this.spec=b,this.self=c}return w(a,[{key:"exec",value:function(a,b){var c=this.spec.run;return b?(this.params.length!=(b?b.length:0)&&E.AssertionError.raise("Invalid amount of parameters for command "+this.name),c.call.apply(c,[this.self,a].concat(e(b)))):this.params.length?new a.options.commandParamPrompt(a,this).open():c.call(this.self,a)}},{key:"select",value:function(a){var b=this.spec.select;return!b||b.call(this.self,a)}},{key:"active",value:function(a){var b=this.spec.active;return!!b&&b.call(this.self,a)}},{key:"params",get:function(){return this.spec.params||I}},{key:"label",get:function(){return this.spec.label||this.name}}]),a}(),I=[],J=function(){function a(b,c){f(this,a),this.base=b,this.op=c}return w(a,[{key:"add",value:function(b,c){return new a(this,function(a,d){function e(b,d,e){c&&!c(b,d)||(a[b]&&E.AssertionError.raise("Duplicate definition of command "+b),a[b]=new H(d,e,b))}if("schema"===b)d.registry("command",function(a,b,c,d){e(d+":"+a,g(c,b,a),c)});else for(var f in b)e(f,b[f])})}},{key:"update",value:function(b){return new a(this,function(a){for(var c in b){var d=b[c];if(d)if(d.run)a[c]=new H(d,null,c);else{var e=a[c];e&&(a[c]=new H((0,F.copyObj)(d,(0,F.copyObj)(e.spec)),e.self,c))}else delete a[c]}})}},{key:"derive",value:function(a){var b=this.base?this.base.derive(a):Object.create(null);return this.op(b,a),b}}]),a}();c.CommandSet=J,J.empty=new J(null,function(){return null}),J.default=J.empty.add("schema").add(G.baseCommands),z.NodeType.deriveableCommands=Object.create(null),z.MarkType.deriveableCommands=Object.create(null),z.MarkType.deriveableCommands.set=function(a){return{run:function(b){for(var c=arguments.length,d=Array(c>1?c-1:0),e=1;e<c;e++)d[e-1]=arguments[e];b.setMark(this,!0,p(a,d))},select:function(b){return a.inverseSelect?l(b,this)&&!j(b,this):k(b,this)},params:o(this,a.params)}},z.MarkType.deriveableCommands.unset=function(){return{run:function(a){a.setMark(this,!1)},select:function(a){return j(a,this)}}},z.MarkType.deriveableCommands.toggle=function(){return{run:function(a){a.setMark(this,null)},active:function(a){return j(a,this)},select:function(a){return l(a,this)}}},z.NodeType.deriveableCommands.wrap=function(a){return{run:function(b){var c=b.selection,d=c.from,e=c.to,f=c.head,g=!1;if(a.list&&f&&q(b.doc,d,e,this)){if(0==d.path[d.path.length-2])return!1;g=!0}for(var h=arguments.length,i=Array(h>1?h-1:0),j=1;j<h;j++)i[j-1]=arguments[j];var k=b.tr.wrap(d,e,this,p(a,i));return g&&k.join(d.shorten(d.depth-2)),k.apply(b.apply.scroll)},select:function(b){var c=b.selection,d=c.from,e=c.to,f=c.head;return!(a.list&&f&&q(b.doc,d,e,this)&&0==d.path[d.path.length-2])&&(0,A.canWrap)(b.doc,d,e,this,a.attrs)},params:o(this,a.params)}},z.NodeType.deriveableCommands.make=function(a){return{run:function(b){var c=b.selection,d=c.from,e=c.to;return b.tr.setBlockType(d,e,this,a.attrs).apply(b.apply.scroll)},select:function(b){var c=b.selection,d=c.from,e=c.to,f=c.node;return f?f.isTextblock&&!f.hasMarkup(this,a.attrs):!r(b.doc,d,e,this,a.attrs)},active:function(b){return s(b,this,a.attrs)}}},z.NodeType.deriveableCommands.insert=function(a){return{run:function(b){for(var c=arguments.length,d=Array(c>1?c-1:0),e=1;e<c;e++)d[e-1]=arguments[e];return b.tr.replaceSelection(this.create(p(a,d))).apply(b.apply.scroll)},select:this.isInline?function(a){return a.doc.path(a.selection.from.path).type.canContainType(this)}:null,params:o(this,a.params)}}},{"../dom":62,"../model":96,"../transform":102,"../util/error":114,"../util/obj":117,"../util/sortedinsert":118,"./base_commands":63,browserkeymap:2}],67:[function(a,b,c){(0,a("../dom").insertCSS)('\n\n.ProseMirror {\n  border: 1px solid silver;\n  position: relative;\n}\n\n.ProseMirror-content {\n  padding: 4px 8px 4px 14px;\n  white-space: pre-wrap;\n  line-height: 1.2;\n}\n\n.ProseMirror-drop-target {\n  position: absolute;\n  width: 1px;\n  background: #666;\n  display: none;\n}\n\n.ProseMirror-content ul.tight p, .ProseMirror-content ol.tight p {\n  margin: 0;\n}\n\n.ProseMirror-content ul, .ProseMirror-content ol {\n  padding-left: 30px;\n  cursor: default;\n}\n\n.ProseMirror-content blockquote {\n  padding-left: 1em;\n  border-left: 3px solid #eee;\n  margin-left: 0; margin-right: 0;\n}\n\n.ProseMirror-content pre {\n  white-space: pre-wrap;\n}\n\n.ProseMirror-selectednode {\n  outline: 2px solid #8cf;\n}\n\n.ProseMirror-content p:first-child,\n.ProseMirror-content h1:first-child,\n.ProseMirror-content h2:first-child,\n.ProseMirror-content h3:first-child,\n.ProseMirror-content h4:first-child,\n.ProseMirror-content h5:first-child,\n.ProseMirror-content h6:first-child {\n  margin-top: .3em;\n}\n\n/* Add space around the hr to make clicking it easier */\n\n.ProseMirror-content hr {\n  position: relative;\n  height: 6px;\n  border: none;\n}\n\n.ProseMirror-content hr:after {\n  content: "";\n  position: absolute;\n  left: 10px;\n  right: 10px;\n  top: 2px;\n  border-top: 2px solid silver;\n}\n\n.ProseMirror-content img {\n  cursor: default;\n}\n\n/* Make sure li selections wrap around markers */\n\n.ProseMirror-content li {\n  position: relative;\n  pointer-events: none; /* Don\'t do weird stuff with marker clicks */\n}\n.ProseMirror-content li > * {\n  pointer-events: auto;\n}\n\nli.ProseMirror-selectednode {\n  outline: none;\n}\n\nli.ProseMirror-selectednode:after {\n  content: "";\n  position: absolute;\n  left: -32px;\n  right: -2px; top: -2px; bottom: -2px;\n  border: 2px solid #8cf;\n  pointer-events: none;\n}\n\n')},{"../dom":62}],68:[function(a,b,c){function d(a,b,c){for(var d=c||0;d<b.path.length;d++){var e=b.path[c];if(e<a.size-1)return!1;a=a.child(e)}return b.offset==a.size}function e(a,b){if(a.offset>0)return!1;for(var c=b||0;c<a.path.length;c++)if(a.path[b]>0)return!1;return!0}function f(a){for(var b=a.content,c=a.doc,f=a.selection,g=f.from,h=f.to,i=0;;i++){var j=c.child(h.path[i]),k=e(g,i+1),l=d(j,h,i+1);if(k||l||g.path[i]!=h.path[i]||j.isTextblock){var m=i==g.depth?g.offset:g.path[i];k&&m>0&&m--;var n=i==h.depth?h.offset:h.path[i]+1;l&&n<c.size-1&&n++;var o=(0,r.fromDOM)(a.schema,b,{topNode:c.copy(),from:m,to:b.childNodes.length-(c.size-n)});o=o.copy(c.content.slice(0,m).append(o.content).append(c.content.slice(n)));for(var p=i-1;p>=0;p--){o=a.doc.path(g.path.slice(0,p)).replace(g.path[p],o)}return o}c=j,b=(0,t.findByPath)(b,g.path[i],!1)}}function g(a){var b=f(a),c=(0,q.findDiffStart)(a.doc.content,b.content);if(c){var d=i(a.doc.content,b.content,c);return k(a,c,d),a.tr.replace(c,d.a,b,c,d.b).apply(),!0}return!1}function h(a,b,c){var d=(0,s.samePathDepth)(a,b),e=d==a.depth,f=d==b.depth,g=(f?b.offset:b.path[d])-(e?a.offset:a.path[d]),h=e?c.move(g):c.shorten(d,g);return f?h:h.extend(new q.Pos(b.path.slice(d),b.offset))}function i(a,b,c){var d=(0,q.findDiffEnd)(a,b);return d?d.a.cmp(c)<0?{a:c,b:h(d.a,c,d.b)}:d.b.cmp(c)<0?{a:h(d.b,c,d.a),b:c}:d:d}function j(a,b){for(var c=Math.min(a.depth,b.depth),d=0;d<c;d++)if(a.path[d]!=b.path[d])return d;return c}function k(a,b,c){var d=Math.min(j(b,c.a),j(b,c.b));if(0==d)a.markAllDirty();else{var e=q.Pos.from(b.path.slice(0,d));a.markRangeDirty({from:e,to:e.move(1)})}}function l(a){var b=window.getSelection().getRangeAt(0),c=b.startContainer,d=b.endContainer;if(c==d&&3==c.nodeType){var e=c.nodeValue,f=b.startOffset,g=b.endOffset;return a&&g>=a.length&&e.slice(g-a.length,g)==a&&(f=g-a.length),{inside:c,lead:f,trail:e.length-g}}for(var h=null,i=null,j=c.childNodes[b.startOffset-1]||o(c);j.lastChild;)j=j.lastChild;if(j&&3==j.nodeType){var e=j.nodeValue;h=e.length,a&&e.slice(e.length-a.length)==a&&(h-=a.length)}for(var k=d.childNodes[b.endOffset]||n(d);k.firstChild;)k=k.firstChild;return k&&3==k.nodeType&&(i=k.nodeValue.length),{before:j,
sizeBefore:h,after:k,sizeAfter:i}}function m(a,b){if(a.inside){var c=a.inside.nodeValue;return c.slice(a.lead,c.length-a.trail)}var d=a.before,e=a.after,f="";if(!d)return b;3==d.nodeType&&(f=d.nodeValue.slice(a.sizeBefore));var g=p(d,e);if(null==g)return b;if(f+=g,e&&3==e.nodeType){var h=e.nodeValue;f+=h.slice(0,h.length-a.sizeAfter)}return f}function n(a){for(;;){var b=a.nextSibling;if(b){for(;b.firstChild;)b=b.firstChild;return b}if(!(a=a.parentElement))return null}}function o(a){for(;;){var b=a.previousSibling;if(b){for(;b.lastChild;)b=b.lastChild;return b}if(!(a=a.parentElement))return null}}function p(a,b){for(var c="",d=n(a);;){if(d==b)return c;if(!d)return null;3==d.nodeType&&(c+=d.nodeValue),d=d.firstChild||n(d)}}Object.defineProperty(c,"__esModule",{value:!0}),c.applyDOMChange=g,c.textContext=l,c.textInContext=m;var q=a("../model"),r=a("../format"),s=a("../transform/tree"),t=a("./dompos")},{"../format":81,"../model":96,"../transform/tree":110,"./dompos":69}],69:[function(a,b,c){function d(a,b){for(var c=[];b!=a.content;){var d=b.getAttribute("pm-offset");d&&c.unshift(+d),b=b.parentNode}return c}function e(a){var b=a.getAttribute("pm-leaf");return b&&"true"!=b?+b:1}function f(a,b,c,f){!f&&a.operation&&a.doc!=a.operation.doc&&z.AssertionError.raise("Fetching a position from an outdated DOM structure"),null==c&&(c=Array.prototype.indexOf.call(b.parentNode.childNodes,b),b=b.parentNode);for(var g=0,h=void 0;;){var i=0;if(3==b.nodeType)g+=c;else{if(b.hasAttribute("pm-container"))break;(h=b.getAttribute("pm-inner-offset"))?(g+=+h,i=-1):c&&c==b.childNodes.length&&(i=1)}var j=b.parentNode;c=i<0?0:Array.prototype.indexOf.call(j.childNodes,b)+i,b=j}var k=d(a,b);if(b.hasAttribute("pm-leaf"))return x.Pos.from(k,g+(c?1:0));for(var l=0,m=c-1;m>=0;m--){var n=b.childNodes[m];if(3==n.nodeType)f&&(g+=n.nodeValue.length);else{if(h=n.getAttribute("pm-offset")){l=+h+e(n);break}f&&!n.hasAttribute("pm-ignore")&&(g+=n.textContent.length)}}return new x.Pos(k,l+g)}function g(a,b,c){for(var d=i(a),e=c?d.lastChild:d.firstChild;e;e=c?e.previousSibling:e.nextSibling)if(1==e.nodeType){var f=e.getAttribute("pm-offset");if(f&&+f==b)return e}}function h(a,b){for(var c=a,d=0;d<b.length;d++)(c=g(c,b[d]))||z.AssertionError.raise("Failed to resolve path "+b.join("/"));return c}function i(a){return a.hasAttribute("pm-container")?a:a.querySelector("[pm-container]")}function j(a,b,c){for(var d,f=a.firstChild,g=0;f;f=f.nextSibling,g++)if(1==f.nodeType&&(d=f.getAttribute("pm-offset"))){var h=b-+d,i=e(f);if(h>=0&&(c?h<=i:h<i))return{node:f,offset:g,innerOffset:h}}}function k(a,b){for(;;){var c=a.firstChild;if(!c)return{node:a,offset:b};if(1!=c.nodeType)return{node:c,offset:b};if(c.hasAttribute("pm-inner-offset")){for(var d=0;;){var e=c.nextSibling,f=void 0;if(!e||(f=+e.getAttribute("pm-inner-offset"))>=b)break;c=e,d=f}b-=d}a=c}}function l(a,b){var c=i(h(a,b.path)),d=j(c,b.offset,!0),e=void 0;return d?"true"!=d.node.getAttribute("pm-leaf")&&(e=k(d.node,d.innerOffset))?e:{node:d.node.parentNode,offset:d.offset+(d.innerOffset?1:0)}:{node:c,offset:0}}function m(){return{left:0,right:window.innerWidth,top:0,bottom:window.innerHeight}}function n(a,b){b||(b=a.sel.range.head||a.sel.range.from);for(var c=t(a,b),d=a.content;;d=d.parentNode){var e=d==document.body,f=e?m():d.getBoundingClientRect(),g=0,h=0;if(c.top<f.top?h=-(f.top-c.top+A):c.bottom>f.bottom&&(h=c.bottom-f.bottom+A),c.left<f.left?g=-(f.left-c.left+A):c.right>f.right&&(g=c.right-f.right+A),g||h?e&&window.scrollBy(g,h):(h&&(d.scrollTop+=h),g&&(d.scrollLeft+=g)),e)break}}function o(a,b){for(var c=void 0,d=1e8,e=void 0,f=0,g=a.firstChild,h=0;g;g=g.nextSibling,h++){var i=void 0;if(1==g.nodeType)i=g.getClientRects();else{if(3!=g.nodeType)continue;i=s(g)}for(var j=0;j<i.length;j++){var k=i[j];if(k.left<=b.left&&k.right>=b.left){var l=k.top>b.top?k.top-b.top:k.bottom<b.top?b.top-k.bottom:0;if(l<d){c=g,d=l,e=l?{left:b.left,top:k.top}:b,1!=g.nodeType||g.firstChild||(f=j+(b.left>=(k.left+k.right)/2?1:0));continue}}!c&&(b.top>=k.bottom||b.top>=k.top&&b.left>=k.right)&&(f=j+1)}}return c?3==c.nodeType?p(c,e):c.firstChild?o(c,e):{node:a,offset:f}:{node:a,offset:f}}function p(a,b){for(var c=a.nodeValue.length,d=document.createRange(),e=0;e<c;e++){d.setEnd(a,e+1),d.setStart(a,e);var f=d.getBoundingClientRect();if(f.top!=f.bottom&&(f.left<=b.left&&f.right>=b.left&&f.top<=b.top&&f.bottom>=b.top))return{node:a,offset:e+(b.left>=(f.left+f.right)/2?1:0)}}return{node:a,offset:0}}function q(a,b){var c=document.elementFromPoint(b.left,b.top+1);if(!(0,y.contains)(a.content,c))return null;c.firstChild||(c=c.parentNode);var d=o(c,b);return f(a,d.node,d.offset)}function r(a,b,c){var d=document.createRange();return d.setEnd(a,c),d.setStart(a,b),d.getBoundingClientRect()}function s(a){var b=document.createRange();return b.setEnd(a,a.nodeValue.length),b.setStart(a,0),b.getClientRects()}function t(a,b){var c=l(a.content,b),d=c.node,e=c.offset,f=void 0,g=void 0;if(3==d.nodeType)e<d.nodeValue.length&&(g=r(d,e,e+1),f="left"),g&&g.left!=g.right||!e||(g=r(d,e-1,e),f="right");else if(d.firstChild){if(e<d.childNodes.length){var h=d.childNodes[e];g=3==h.nodeType?r(h,0,h.nodeValue.length):h.getBoundingClientRect(),f="left"}if((!g||g.left==g.right)&&e){var h=d.childNodes[e-1];g=3==h.nodeType?r(h,0,h.nodeValue.length):h.getBoundingClientRect(),f="right"}}else g=d.getBoundingClientRect(),f="left";var i=g[f];return{top:g.top,bottom:g.bottom,left:i,right:i}}function u(a,b){var c=l(a.content,b),d=c.node,e=c.offset,f=document.createRange();f.setEnd(d,e),f.setStart(d,e);var g=window.getSelection();g.removeAllRanges(),g.addRange(f)}function v(a,b,c,e){for(;b&&b!=a.content;b=b.parentNode)if(b.hasAttribute("pm-offset")){var f=d(a,b),g=a.doc.path(f);if(g.type.countCoordsAsChild){var h=g.type.countCoordsAsChild(g,f,b,c);if(h)return h}if((e||null==g.type.contains)&&g.type.selectable)return x.Pos.from(f);if(!e)return null}}function w(a,b,c,e){for(var f=c.target;f&&f!=a.content;f=f.parentNode)if(f.hasAttribute("pm-offset")){var g=d(a,f),h=a.doc.path(g),i=h.type[b]&&!1!==h.type[b](a,c,g,h);if(e||i)return i}}Object.defineProperty(c,"__esModule",{value:!0}),c.pathFromDOM=d,c.widthFromDOM=e,c.posFromDOM=f,c.findByPath=g,c.pathToDOM=h,c.childContainer=i,c.DOMFromPos=l,c.scrollIntoView=n,c.posAtCoords=q,c.coordsAtPos=t,c.setDOMSelectionToPos=u,c.selectableNodeAbove=v,c.handleNodeClick=w;var x=a("../model"),y=a("../dom"),z=a("../util/error"),A=5},{"../dom":62,"../model":96,"../util/error":114}],70:[function(a,b,c){function d(a,b){return{onRender:function(a,b,c){return a.isText||null!=a.type.contains||(b.contentEditable=!1,a.isBlock&&b.setAttribute("pm-leaf","true")),a.isBlock&&null!=c&&b.setAttribute("pm-offset",c),a.isTextblock&&g(b,a),b},onContainer:function(a){a.setAttribute("pm-container",!0)},renderInlineFlat:function(c,d,f){b.advanceTo(new k.Pos(a,f));for(var g=new k.Pos(a,f+c.width),h=b.nextChangeBefore(g),i=d,j=void 0,l=0;l<c.marks.length;l++)i=i.firstChild;1!=d.nodeType&&(d=(0,m.elt)("span",null,d),h||(j=d)),j||!h&&!b.current.length||(j=i==d?d=(0,m.elt)("span",null,i):i.parentNode.appendChild((0,m.elt)("span",null,i))),d.setAttribute("pm-offset",f),null==c.type.contains&&d.setAttribute("pm-leaf",c.isText?c.width:"true");for(var n=0;h;){var o=h-f,p=e(j,o);b.current.length&&(p.className=b.current.join(" ")),p.setAttribute("pm-inner-offset",n),n+=o,f+=o,b.advanceTo(new k.Pos(a,f)),(h=b.nextChangeBefore(g))||j.setAttribute("pm-inner-offset",n)}return b.current.length&&(j.className=b.current.join(" ")),d},document:document,path:a}}function e(a,b){var c=a.firstChild,d=c.nodeValue,e=a.parentNode.insertBefore((0,m.elt)("span",null,d.slice(0,b)),a);return c.nodeValue=d.slice(b),e}function f(a,b){a.content.textContent="",a.content.appendChild((0,l.toDOM)(b,d([],a.ranges.activeRangeTracker())))}function g(a,b){var c=0==b.size||b.lastChild.type.isBR||b.type.isCode&&b.lastChild.isText&&/\n$/.test(b.lastChild.text)?"br":b.lastChild.isText||null!=b.lastChild.type.contains?null:"text",d=a.lastChild,e=d&&1==d.nodeType&&d.hasAttribute("pm-ignore")?"BR"==d.nodeName?"br":"text":null;c!=e&&(e&&a.removeChild(d),c&&a.appendChild("br"==c?(0,m.elt)("br",{"pm-ignore":"trailing-break"}):(0,m.elt)("span",{"pm-ignore":"cursor-text"},"")))}function h(a,b){for(var c,d=a.copy();c=d.next().value;)if(c==b)return c}function i(a){var b=a.nextSibling;return a.parentNode.removeChild(a),b}function j(a,b,c,e){function j(a,c,d){for(var e,f=c.iter(),m=d.iter(),p=m.next().value,q=a.firstChild;e=f.next().value;){var r=f.offset-e.width,s=void 0,t=void 0;if(c.isTextblock||k.path.push(r),p==e)s=p;else if(s=h(m,e))for(;p!=s;)p=m.next().value,q=i(q);if(s&&!b.get(s))t=!0;else if(p&&!e.isText&&e.sameMarkup(p)&&b.get(p)!=n.DIRTY_REDRAW)t=!0,p.type.contains&&j((0,o.childContainer)(q),e,p);else{var u=(0,l.nodeToDOM)(e,k,r);a.insertBefore(u,q),t=!1}t&&(q.setAttribute("pm-offset",r),q=q.nextSibling,p=m.next().value),c.isTextblock||k.path.pop()}for(;p;)q=i(q),p=m.next().value;c.isTextblock&&g(a,c)}if(b.get(e)==n.DIRTY_REDRAW)return f(a,c);var k=d([],a.ranges.activeRangeTracker());j(a.content,c,e)}Object.defineProperty(c,"__esModule",{value:!0}),c.draw=f,c.redraw=j;var k=a("../model"),l=a("../format"),m=a("../dom"),n=a("./main"),o=a("./dompos")},{"../dom":62,"../format":81,"../model":96,"./dompos":69,"./main":74}],71:[function(a,b,c){function d(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function e(a){return"replace"==a.type&&a.from.offset<a.to.offset&&g.Pos.samePath(a.from.path,a.to.path)&&(!a.param||0==a.param.content.size)}var f=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}();Object.defineProperty(c,"__esModule",{value:!0}),c.History=void 0;var g=a("../model"),h=a("../transform"),i=function a(b,c,e){d(this,a),this.step=b,this.version=c,this.id=e},j=function(){function a(b){d(this,a),this.branch=b,this.remap=new h.Remapping,this.version=b.version,this.mirrorBuffer=Object.create(null)}return f(a,[{key:"moveToVersion",value:function(a){for(;this.version>a;)this.addNextMap()}},{key:"addNextMap",value:function(){var a=this.branch.mirror[this.version],b=this.branch.maps.length-(this.branch.version-this.version)-1,c=this.remap.addToFront(this.branch.maps[b],this.mirrorBuffer[this.version]);return--this.version,null!=a&&(this.mirrorBuffer[a]=c),c}},{key:"movePastStep",value:function(a){var b=this.addNextMap();a&&this.remap.addToBack(a.map,b)}}]),a}(),k=100,l=150,m=function(){function a(b,c,e){d(this,a),this.branch=c,this.callback=e,this.remap=new j(c),this.doc=b,this.events=[],this.maps=[],this.version=this.startVersion=c.version,this.i=c.events.length,this.timeout=null,this.aborted=!1}return f(a,[{key:"work",value:function(){var a=this;if(!this.aborted)for(var b=Date.now()+k;;){if(0==this.i)return this.finish();for(var c=this.branch.events[--this.i],d=[],f=c.length-1;f>=0;f--){var g=c[f],j=g.step,m=g.version,n=g.id;this.remap.moveToVersion(m);var o=j.map(this.remap.remap);if(o&&e(j)){for(var p=0,q=j.from;f>0;){var r=c[f-1];if(r.version!=m-1||!e(r.step)||q.cmp(r.step.to))break;p+=r.step.to.offset-r.step.from.offset,q=r.step.from,m--,f--,this.remap.addNextMap()}if(p>0){var s=o.from.move(-p);o=new h.Step("replace",s,o.to,s)}}var t=o&&o.apply(this.doc);t&&(this.doc=t.doc,this.maps.push(t.map.invert()),d.push(new i(o,this.version,n)),this.version--),this.remap.movePastStep(t)}if(d.length&&(d.reverse(),this.events.push(d)),Date.now()>b)return void(this.timeout=window.setTimeout(function(){return a.work()},l))}}},{key:"finish",value:function(){this.aborted||(this.events.reverse(),this.maps.reverse(),this.callback(this.maps.concat(this.branch.maps.slice(this.branch.maps.length-(this.branch.version-this.startVersion))),this.events))}},{key:"abort",value:function(){this.aborted=!0,window.clearTimeout(this.timeout)}}]),a}(),n=150,o=function(){function a(b){d(this,a),this.maxDepth=b,this.version=0,this.nextStepID=1,this.maps=[],this.mirror=Object.create(null),this.events=[],this.stepsSinceCompress=0,this.compressing=null,this.compressTimeout=null}return f(a,[{key:"clear",value:function(a){!a&&this.empty()||(this.maps.length=this.events.length=this.stepsSinceCompress=0,this.mirror=Object.create(null),this.abortCompression())}},{key:"newEvent",value:function(){for(this.abortCompression(),this.events.push([]);this.events.length>this.maxDepth;)this.events.shift()}},{key:"addMap",value:function(a){if(!this.empty())return this.maps.push(a),this.version++,this.stepsSinceCompress++,!0}},{key:"empty",value:function(){return 0==this.events.length}},{key:"addStep",value:function(a,b,c){this.addMap(b),null==c&&(c=this.nextStepID++),this.events[this.events.length-1].push(new i(a,this.version,c))}},{key:"addTransform",value:function(a,b){this.abortCompression();for(var c=0;c<a.steps.length;c++){var d=a.steps[c].invert(a.docs[c],a.maps[c]);this.addStep(d,a.maps[c],b&&b[c])}}},{key:"popEvent",value:function(a,b){this.abortCompression();var c=this.events.pop();if(!c)return null;for(var d=new j(this),e=b,f=new h.Transform(a),g=[],i=c.length-1;i>=0;i--){var k=c[i],l=k.step;if(e&&k.version==d.version)this.version--,delete this.mirror[this.version],this.maps.pop(),f.step(l),g.push(k.id),--d.version;else{e=!1,d.moveToVersion(k.version),l=l.map(d.remap);var m=l&&f.step(l);m&&(g.push(k.id),this.addMap(m.map)&&(this.mirror[this.version]=k.version)),i>0&&d.movePastStep(m)}}return this.empty()&&this.clear(!0),{transform:f,ids:g}}},{key:"lastStep",value:function(){for(var a=this.events.length-1;a>=0;a--){var b=this.events[a];if(b.length)return b[b.length-1]}}},{key:"getVersion",value:function(){var a=this.lastStep();return{lastID:a&&a.id,version:this.version}}},{key:"isAtVersion",value:function(a){var b=this.lastStep();return this.version==a.version&&(b&&b.id)==a.lastID}},{key:"findVersion",value:function(a){for(var b=this.events.length-1;b>=0;b--)for(var c=this.events[b],d=c.length-1;d>=0;d--)if(c[d].id<=a.lastID)return{event:b,step:d+1}}},{key:"rebased",value:function(a,b,c){if(!this.empty()){this.abortCompression();var d=this.version-c.length;a:for(var e=this.events.length-1;e>=0;e--)for(var f=this.events[e],g=f.length-1;g>=0;g--){var h=f[g];if(h.version<=d)break a;var j=c[h.version-d-1];if(-1==j)f.splice(g--,1);else{var k=b.steps[j].invert(b.docs[j],b.maps[j]);f[g]=new i(k,d+a.length+j+1,h.id)}}this.maps.length>c.length?this.maps=this.maps.slice(0,this.maps.length-c.length).concat(a).concat(b.maps):this.maps=b.maps.slice(),this.version=d+a.length+b.maps.length,this.stepsSinceCompress+=a.length+b.steps.length-c.length}}},{key:"abortCompression",value:function(){this.compressing&&(this.compressing.abort(),this.compressing=null)}},{key:"needsCompression",value:function(){return this.stepsSinceCompress>n&&!this.compressing}},{key:"startCompression",value:function(a){var b=this;this.compressing=new m(a,this,function(a,c){b.maps=a,b.events=c,b.mirror=Object.create(null),b.compressing=null,b.stepsSinceCompress=0}),this.compressing.work()}}]),a}(),p=750;c.History=function(){function a(b){var c=this;d(this,a),this.pm=b,this.done=new o(b.options.historyDepth),this.undone=new o(b.options.historyDepth),this.lastAddedAt=0,this.ignoreTransform=!1,this.allowCollapsing=!0,b.on("transform",function(a,b){return c.recordTransform(a,b)})}return f(a,[{key:"recordTransform",value:function(a,b){if(!this.ignoreTransform){if(0==b.addToHistory)for(var c=0;c<a.maps.length;c++){var d=a.maps[c];this.done.addMap(d),this.undone.addMap(d)}else{this.undone.clear();var e=Date.now();e>this.lastAddedAt+this.pm.options.historyEventDelay&&this.done.newEvent(),this.done.addTransform(a),this.lastAddedAt=e}this.maybeScheduleCompression()}}},{key:"undo",value:function(){return this.shift(this.done,this.undone)}},{key:"redo",value:function(){return this.shift(this.undone,this.done)}},{key:"shift",value:function(a,b){var c=a.popEvent(this.pm.doc,this.allowCollapsing);if(!c)return!1;var d=c.transform,e=c.ids;return this.ignoreTransform=!0,this.pm.apply(d),this.ignoreTransform=!1,d.steps.length?(b&&(b.newEvent(),b.addTransform(d,e)),this.lastAddedAt=0,!0):this.shift(a,b)}},{key:"getVersion",value:function(){return this.done.getVersion()}},{key:"isAtVersion",value:function(a){return this.done.isAtVersion(a)}},{key:"backToVersion",value:function(a){var b=this.done.findVersion(a);if(!b)return!1;var c=this.done.events[b.event];if(b.event==this.done.events.length-1&&b.step==c.length)return!0;var d=this.done.events.slice(b.event+1).reduce(function(a,b){return a.concat(b)},c.slice(b.step));return this.done.events.length=b.event+((c.length=b.step)?1:0),this.done.events.push(d),this.shift(this.done),!0}},{key:"rebased",value:function(a,b,c){this.done.rebased(a,b,c),this.undone.rebased(a,b,c),this.maybeScheduleCompression()}},{key:"maybeScheduleCompression",value:function(){this.maybeScheduleCompressionForBranch(this.done),this.maybeScheduleCompressionForBranch(this.undone)}},{key:"maybeScheduleCompressionForBranch",value:function(a){var b=this;window.clearTimeout(a.compressTimeout),a.needsCompression()&&(a.compressTimeout=window.setTimeout(function(){a.needsCompression()&&a.startCompression(b.pm.doc)},p))}},{key:"undoDepth",get:function(){return this.done.events.length}},{key:"redoDepth",get:function(){return this.undone.events.length}}]),a}()},{"../model":96,"../transform":102}],72:[function(a,b,c){function d(a){return a&&a.__esModule?a:{default:a}}Object.defineProperty(c,"__esModule",{value:!0}),c.Keymap=c.baseCommands=c.Command=c.CommandSet=c.MarkedRange=c.SelectionError=c.Range=c.defineOption=c.ProseMirror=void 0;var e=a("./main");Object.defineProperty(c,"ProseMirror",{enumerable:!0,get:function(){return e.ProseMirror}});var f=a("./options");Object.defineProperty(c,"defineOption",{enumerable:!0,get:function(){return f.defineOption}});var g=a("./selection");Object.defineProperty(c,"Range",{enumerable:!0,get:function(){return g.Range}}),Object.defineProperty(c,"SelectionError",{enumerable:!0,get:function(){return g.SelectionError}});var h=a("./range");Object.defineProperty(c,"MarkedRange",{enumerable:!0,get:function(){return h.MarkedRange}});var i=a("./command");Object.defineProperty(c,"CommandSet",{enumerable:!0,get:function(){return i.CommandSet}}),Object.defineProperty(c,"Command",{enumerable:!0,get:function(){return i.Command}});var j=a("./base_commands");Object.defineProperty(c,"baseCommands",{enumerable:!0,get:function(){return j.baseCommands}}),a("./schema_commands");var k=a("browserkeymap"),l=d(k);c.Keymap=l.default},{"./base_commands":63,"./command":66,"./main":74,"./options":75,"./range":76,"./schema_commands":77,"./selection":78,browserkeymap:2}],73:[function(a,b,c){function d(a){return a&&a.__esModule?a:{default:a}}function e(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function f(a,b,c){var d=a.input.keySeq;if(d){if(o.default.isModifierKey(b))return!0;clearTimeout(w),w=setTimeout(function(){a.input.keySeq==d&&(a.input.keySeq=null)},50),b=d+" "+b}for(var e=function b(c){if(!1===c)return"nothing";if("..."==c)return"multi";if(null==c)return!1;var d=!1;if(Array.isArray(c))for(var e=0;!1===d&&e<c.length;e++)d=b(c[e]);else d="string"==typeof c?a.execCommand(c):c(a);return 0!=d&&"handled"},f=void 0,g=0;!f&&g<a.input.keymaps.length;g++)f=e(a.input.keymaps[g].map.lookup(b,a));return f||(f=e(a.input.baseKeymap.lookup(b,a))||e(r.captureKeys.lookup(b))),"multi"==f&&(a.input.keySeq=b),"handled"!=f&&"multi"!=f||c.preventDefault(),d&&!f&&/\'$/.test(b)?(c.preventDefault(),!0):!!f}function g(a,b,c){if(b.empty&&!c)return!1;var d=a.input.storedMarks||a.doc.marksAt(b.from);a.tr.replaceWith(b.from,b.to,a.schema.text(c,d)).apply({scrollIntoView:!0}),a.signal("textInput",c)}function h(a,b){var c=(0,v.selectableNodeAbove)(a,b.target,{left:b.clientX,top:b.clientY},!0);if(!c)return a.sel.fastPoll();var d=a.selection,e=d.node,f=d.from;if(e&&c.depth>=f.depth&&0==c.shorten(f.depth).cmp(f)){if(0==f.depth)return a.sel.fastPoll();c=f.shorten()}a.setNodeSelection(c),a.focus(),b.preventDefault()}function i(a,b){b.preventDefault();var c=(0,v.selectableNodeAbove)(a,b.target,{left:b.clientX,top:b.clientY},!0);if(c){var d=a.doc.nodeAfter(c);if(d.isBlock&&!d.isTextblock)a.setNodeSelection(c);else{var e=d.isInline?c.path:c.toPath();d.isInline&&(d=a.doc.path(e)),a.setTextSelection(new p.Pos(e,0),new p.Pos(e,d.size))}a.focus()}}function j(a){var b=a.input.composing,c=(0,t.textInContext)(b.context,b.endData),d=(0,u.rangeFromDOMLoose)(a);a.ensureOperation(),a.input.composing=null,c!=b.data&&g(a,b.range,c),d&&!d.eq(a.sel.range)&&a.setSelectionDirect(d)}function k(a,b,c,d){var e=a.sliceBetween(b,c);C={doc:a,from:b,to:c,schema:a.type.schema,html:(0,q.toHTML)(e),text:(0,q.toText)(e)},d&&(d.clearData(),d.setData("text/html",C.html),d.setData("text/plain",C.text))}function l(a,b,c){var d=b.getData("text/plain"),e=b.getData("text/html");if(!e&&!d)return null;var f=void 0;if(c&&d)f=(0,q.fromText)(a.schema,a.signalPipelined("transformPastedText",d));else{if(C&&C.html==e&&C.schema==a.schema)return C;f=e?(0,q.fromHTML)(a.schema,a.signalPipelined("transformPastedHTML",e)):(0,q.parseFrom)(a.schema,a.signalPipelined("transformPastedText",d),(0,q.knownSource)("markdown")?"markdown":"text")}return{doc:f,from:(0,u.findSelectionAtStart)(f).from,to:(0,u.findSelectionAtEnd)(f).to}}var m=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}();Object.defineProperty(c,"__esModule",{value:!0}),c.Input=void 0,c.dispatchKey=f;var n=a("browserkeymap"),o=d(n),p=a("../model"),q=a("../format"),r=a("./capturekeys"),s=a("../dom"),t=a("./domchange"),u=a("./selection"),v=a("./dompos"),w=null,x={};c.Input=function(){function a(b){var c=this;e(this,a),this.pm=b,this.baseKeymap=null,this.keySeq=null,this.composing=null,this.mouseDown=null,this.shiftKey=this.updatingComposition=!1,this.skipInput=0,this.draggingFrom=!1,this.keymaps=[],this.defaultKeymap=null,this.storedMarks=null,this.dropTarget=b.wrapper.appendChild((0,s.elt)("div",{class:"ProseMirror-drop-target"}));var d=function(a){var c=x[a];b.content.addEventListener(a,function(a){return c(b,a)})};for(var f in x)d(f);b.on("selectionChange",function(){return c.storedMarks=null})}return m(a,[{key:"maybeAbortComposition",value:function(){if(this.composing&&!this.updatingComposition){if(this.composing.finished)j(this.pm);else{this.composing=null,this.skipInput++;var a=window.getSelection();if(a.rangeCount){var b=a.getRangeAt(0);a.removeAllRanges(),a.addRange(b)}}return!0}}}]),a}();x.keydown=function(a,b){if(a.signal("interaction"),16==b.keyCode&&(a.input.shiftKey=!0),!a.input.composing){var c=o.default.keyName(b);c&&f(a,c,b)||a.sel.fastPoll()}},x.keyup=function(a,b){16==b.keyCode&&(a.input.shiftKey=!1)},x.keypress=function(a,b){if(!(a.input.composing||!b.charCode||b.ctrlKey&&!b.altKey||s.browser.mac&&b.metaKey||f(a,o.default.keyName(b)))){var c=a.selection;c.node&&null==c.node.contains&&(a.tr.delete(c.from,c.to).apply(),c=a.selection),g(a,c,String.fromCharCode(b.charCode)),b.preventDefault()}};var y=0,z=0;x.mousedown=function(a,b){a.signal("interaction");var c=Date.now(),d=c-y<500,e=c-z<600;z=y,y=c,e?i(a,b):a.input.mouseDown=new A(a,b,d)};var A=function(){function a(b,c,d){e(this,a),this.pm=b,this.event=c,this.leaveToBrowser=b.input.shiftKey||d;var f=(0,v.pathFromDOM)(b,c.target),g=b.doc.path(f);this.mightDrag=g.type.draggable||g==b.sel.range.node?f:null,this.mightDrag&&(c.target.draggable=!0,s.browser.gecko&&(this.setContentEditable=!c.target.hasAttribute("contentEditable"))&&c.target.setAttribute("contentEditable","false")),this.x=c.clientX,this.y=c.clientY,addEventListener("mouseup",this.up=this.up.bind(this)),addEventListener("mousemove",this.move=this.move.bind(this)),b.sel.fastPoll()}return m(a,[{key:"done",value:function(){removeEventListener("mouseup",this.up),removeEventListener("mousemove",this.move),this.mightDrag&&(this.event.target.draggable=!1,s.browser.gecko&&this.setContentEditable&&this.event.target.removeAttribute("contentEditable"))}},{key:"up",value:function(){if(this.done(),this.leaveToBrowser)this.pm.sel.fastPoll();else if(this.event.ctrlKey)h(this.pm,this.event);else if(!(0,v.handleNodeClick)(this.pm,"handleClick",this.event,!0)){var a=(0,v.selectableNodeAbove)(this.pm,this.event.target,{left:this.x,top:this.y});a?(this.pm.setNodeSelection(a),this.pm.focus()):this.pm.sel.fastPoll()}}},{key:"move",value:function(a){!this.leaveToBrowser&&(Math.abs(this.x-a.clientX)>4||Math.abs(this.y-a.clientY)>4)&&(this.leaveToBrowser=!0),this.pm.sel.fastPoll()}}]),a}();x.touchdown=function(a){a.sel.fastPoll()},x.contextmenu=function(a,b){(0,v.handleNodeClick)(a,"handleContextMenu",b,!1)};var B=function a(b,c){e(this,a),this.finished=!1,this.context=(0,t.textContext)(c),this.data=c,this.endData=null;var d=b.selection;if(c){var f=d.head.path,g=b.doc.path(f).textContent,h=g.indexOf(c,d.head.offset-c.length);h>-1&&h<=d.head.offset+c.length&&(d=new u.TextSelection(new p.Pos(f,h),new p.Pos(f,h+c.length)))}this.range=d};x.compositionstart=function(a,b){if(!a.input.maybeAbortComposition()){a.flush(),a.input.composing=new B(a,b.data);var c=a.selection.head.shorten();a.markRangeDirty({from:c,to:c.move(1)})}},x.compositionupdate=function(a,b){var c=a.input.composing;c&&c.data!=b.data&&(c.data=b.data,a.input.updatingComposition=!0,g(a,c.range,c.data),a.input.updatingComposition=!1,c.range=new u.TextSelection(c.range.from,c.range.from.move(c.data.length)))},x.compositionend=function(a,b){var c=a.input.composing;c&&(a.input.composing.finished=!0,a.input.composing.endData=b.data,setTimeout(function(){a.input.composing==c&&j(a)},20))},x.input=function(a){return a.input.skipInput?--a.input.skipInput:a.input.composing?void(a.input.composing.finished&&j(a)):(a.startOperation({readSelection:!1}),(0,t.applyDOMChange)(a),void a.scrollIntoView())};var C=null;x.copy=x.cut=function(a,b){var c=a.selection,d=c.from,e=c.to,f=c.empty;f||(k(a.doc,d,e,b.clipboardData),b.clipboardData&&(b.preventDefault(),"cut"!=b.type||f||a.tr.delete(d,e).apply()))},x.paste=function(a,b){if(b.clipboardData){var c=a.selection,d=l(a,b.clipboardData,a.input.shiftKey);d&&(b.preventDefault(),a.tr.replace(c.from,c.to,d.doc,d.from,d.to).apply(),a.scrollIntoView())}},x.dragstart=function(a,b){var c=a.input.mouseDown;if(c&&c.done(),b.dataTransfer){var d=a.selection,e=d.from,f=d.to,g=d.empty,h=void 0,i=!g&&a.posAtCoords({left:b.clientX,top:b.clientY});if(i&&i.cmp(e)>=0&&i.cmp(f)<=0)h={from:e,to:f};else if(c&&c.mightDrag){var j=p.Pos.from(c.mightDrag);h={from:j,to:j.move(1)}}h&&(a.input.draggingFrom=h,k(a.doc,h.from,h.to,b.dataTransfer))}},x.dragend=function(a){return window.setTimeout(function(){return a.input.draggingFrom=!1},50)},x.dragover=x.dragenter=function(a,b){b.preventDefault();var c=a.posAtCoords({left:b.clientX,top:b.clientY});if(c){var d=(0,v.coordsAtPos)(a,c),e=a.wrapper.getBoundingClientRect();d.top-=e.top,d.right-=e.left,d.bottom-=e.top,d.left-=e.left;var f=a.input.dropTarget;f.style.display="block",f.style.left=d.left-1+"px",f.style.top=d.top+"px",f.style.height=d.bottom-d.top+"px"}},x.dragleave=function(a){return a.input.dropTarget.style.display=""},x.drop=function(a,b){if(a.input.dropTarget.style.display="",b.dataTransfer){var c=l(a,b.dataTransfer);if(c){b.preventDefault();var d=a.posAtCoords({left:b.clientX,top:b.clientY}),e=d;if(!d)return;var f=a.tr;a.input.draggingFrom&&!b.ctrlKey&&(f.delete(a.input.draggingFrom.from,a.input.draggingFrom.to),d=f.map(d).pos),f.replace(d,d,c.doc,c.from,c.to).apply();var g=f.map(e).pos;p.Pos.samePath(d.path,g.path)&&g.offset==d.offset+1&&a.doc.nodeAfter(d).type.selectable?a.setNodeSelection(d):a.setTextSelection(d,g),a.focus()}}},x.focus=function(a){(0,s.addClass)(a.wrapper,"ProseMirror-focused"),a.signal("focus")},x.blur=function(a){(0,s.rmClass)(a.wrapper,"ProseMirror-focused"),a.signal("blur")}},{"../dom":62,"../format":81,"../model":96,"./capturekeys":64,"./domchange":68,"./dompos":69,"./selection":78,browserkeymap:2}],74:[function(a,b,c){function d(a){return a&&a.__esModule?a:{default:a}}function e(a,b){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!b||"object"!==(void 0===b?"undefined":h(b))&&"function"!=typeof b?a:b}function f(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+(void 0===b?"undefined":h(b)));a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}function g(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}var h="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(a){return typeof a}:function(a){return a&&"function"==typeof Symbol&&a.constructor===Symbol?"symbol":typeof a},i=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}();Object.defineProperty(c,"__esModule",{value:!0}),c.DIRTY_REDRAW=c.DIRTY_RESCAN=c.ProseMirror=void 0,a("./css");var j=a("browserkeymap"),k=d(j),l=a("../model"),m=a("../transform"),n=a("../util/sortedinsert"),o=d(n),p=a("../util/error"),q=a("../util/map"),r=a("../util/event"),s=a("../dom"),t=a("../format"),u=a("./options"),v=a("./selection"),w=a("./dompos"),x=a("./draw"),y=a("./input"),z=a("./history"),A=a("./range"),B=c.ProseMirror=function(){function a(b){g(this,a),(0,s.ensureCSSAdded)(),b=this.options=(0,u.parseOptions)(b),this.schema=b.schema,null==b.doc&&(b.doc=this.schema.node("doc",null,[this.schema.node("paragraph")])),this.content=(0,s.elt)("div",{class:"ProseMirror-content","pm-container":!0}),this.wrapper=(0,s.elt)("div",{class:"ProseMirror"},this.content),this.wrapper.ProseMirror=this,b.place&&b.place.appendChild?b.place.appendChild(this.wrapper):b.place&&b.place(this.wrapper),this.setDocInner(b.docFormat?(0,t.parseFrom)(this.schema,b.doc,b.docFormat):b.doc),(0,x.draw)(this,this.doc),this.content.contentEditable=!0,b.label&&this.content.setAttribute("aria-label",b.label),this.mod=Object.create(null),this.cached=Object.create(null),this.operation=null,this.dirtyNodes=new q.Map,this.flushScheduled=!1,this.sel=new v.SelectionState(this,(0,v.findSelectionAtStart)(this.doc)),this.accurateSelection=!1,this.input=new y.Input(this),this.commands=null,this.commandKeys=null,(0,u.initOptions)(this)}return i(a,[{key:"setOption",value:function(a,b){(0,u.setOption)(this,a,b),this.signal("optionChanged",a,b)}},{key:"getOption",value:function(a){return this.options[a]}},{key:"setTextSelection",value:function(a,b){this.setSelection(new v.TextSelection(a,b))}},{key:"setNodeSelection",value:function(a){this.checkPos(a,!1);var b=this.doc.path(a.path);a.offset>=b.size&&v.SelectionError.raise("Trying to set a node selection at the end of a node");var c=b.child(a.offset);c.type.selectable||v.SelectionError.raise("Trying to select a non-selectable node"),this.input.maybeAbortComposition(),this.sel.setAndSignal(new v.NodeSelection(a,a.move(1),c))}},{key:"setSelection",value:function(a){a instanceof v.TextSelection?(this.checkPos(a.head,!0),a.empty||this.checkPos(a.anchor,!0)):this.checkPos(a.to,!1),this.setSelectionDirect(a)}},{key:"setSelectionDirect",value:function(a){this.ensureOperation(),this.input.maybeAbortComposition(),a.eq(this.sel.range)||this.sel.setAndSignal(a)}},{key:"setContent",value:function(a,b){b&&(a=(0,t.parseFrom)(this.schema,a,b)),this.setDoc(a)}},{key:"getContent",value:function(a){return a?(0,t.serializeTo)(this.doc,a):this.doc}},{key:"setDocInner",value:function(a){
a.type!=this.schema.nodes.doc&&p.AssertionError.raise("Trying to set a document with a different schema"),this.doc=a,this.ranges=new A.RangeStore(this),this.history=new z.History(this)}},{key:"setDoc",value:function(a,b){b||(b=(0,v.findSelectionAtStart)(a)),this.signal("beforeSetDoc",a,b),this.ensureOperation(),this.setDocInner(a),this.sel.set(b,!0),this.signal("setDoc",a,b)}},{key:"updateDoc",value:function(a,b,c){this.ensureOperation(),this.input.maybeAbortComposition(),this.ranges.transform(b),this.doc=a,this.sel.setAndSignal(c||this.sel.range.map(a,b)),this.signal("change")}},{key:"apply",value:function(a){var b=arguments.length<=1||void 0===arguments[1]?E:arguments[1];return a.doc!=this.doc&&(a.docs[0]!=this.doc&&(0,l.findDiffStart)(a.docs[0],this.doc)&&p.AssertionError.raise("Applying a transform that does not start with the current document"),this.updateDoc(a.doc,a,b.selection),this.signal("transform",a,b),b.scrollIntoView&&this.scrollIntoView(),a)}},{key:"checkPos",value:function(a,b){a.isValid(this.doc,b)||p.AssertionError.raise("Position "+a+" is not valid in current document")}},{key:"ensureOperation",value:function(){return this.operation||this.startOperation()}},{key:"startOperation",value:function(a){var b=this;return this.operation=new F(this),a&&!1===a.readSelection||!this.sel.readFromDOM()||(this.operation.sel=this.sel.range),this.flushScheduled||((0,s.requestAnimationFrame)(function(){b.flushScheduled=!1,b.flush()}),this.flushScheduled=!0),this.operation}},{key:"flush",value:function(){if(document.body.contains(this.wrapper)&&this.operation){this.signal("flushing");var a=this.operation;if(a){this.operation=null,this.accurateSelection=!0;var b=a.doc!=this.doc||this.dirtyNodes.size,c=!1;this.input.composing||!b&&!a.composingAtStart||((0,x.redraw)(this,this.dirtyNodes,this.doc,a.doc),this.dirtyNodes.clear(),c=!0),(!c&&a.sel.eq(this.sel.range)||this.input.composing)&&!a.focus||this.sel.toDOM(a.focus),!1!==a.scrollIntoView&&(0,w.scrollIntoView)(this,a.scrollIntoView),b&&this.signal("draw"),this.signal("flush"),this.accurateSelection=!1}}}},{key:"addKeymap",value:function(a){var b=arguments.length<=1||void 0===arguments[1]?50:arguments[1];(0,o.default)(this.input.keymaps,{map:a,rank:b},function(a,b){return a.rank-b.rank})}},{key:"removeKeymap",value:function(a){for(var b=this.input.keymaps,c=0;c<b.length;++c)if(b[c].map==a||b[c].map.options.name==a)return b.splice(c,1),!0}},{key:"markRange",value:function(a,b,c){this.checkPos(a),this.checkPos(b);var d=new A.MarkedRange(a,b,c);return this.ranges.addRange(d),d}},{key:"removeRange",value:function(a){this.ranges.removeRange(a)}},{key:"setMark",value:function(a,b,c){var d=this.selection;if(d.empty){var e=this.activeMarks();if(null==b&&(b=!a.isInSet(e)),b&&!this.doc.path(d.head.path).type.canContainMark(a))return;this.input.storedMarks=b?a.create(c).addToSet(e):a.removeFromSet(e),this.signal("activeMarkChange")}else(null!=b?b:!this.doc.rangeHasMark(d.from,d.to,a))?this.apply(this.tr.addMark(d.from,d.to,a.create(c))):this.apply(this.tr.removeMark(d.from,d.to,a))}},{key:"activeMarks",value:function(){var a;return this.input.storedMarks||((a=this.selection.head)?this.doc.marksAt(a):[])}},{key:"focus",value:function(){this.operation?this.operation.focus=!0:this.sel.toDOM(!0)}},{key:"hasFocus",value:function(){return this.sel.range instanceof v.NodeSelection?document.activeElement==this.content:(0,v.hasFocus)(this)}},{key:"posAtCoords",value:function(a){return(0,w.posAtCoords)(this,a)}},{key:"coordsAtPos",value:function(a){return this.checkPos(a),(0,w.coordsAtPos)(this,a)}},{key:"scrollIntoView",value:function(){var a=arguments.length<=0||void 0===arguments[0]?null:arguments[0];a&&this.checkPos(a),this.ensureOperation(),this.operation.scrollIntoView=a}},{key:"execCommand",value:function(a,b){var c=this.commands[a];return!(!c||!1===c.exec(this,b))}},{key:"keyForCommand",value:function(a){var b=this.commandKeys[a];if(void 0!==b)return b;var c=this.commands[a],d=this.input.baseKeymap;if(!c)return this.commandKeys[a]=null;var e=c.spec.key||(s.browser.mac?c.spec.macKey:c.spec.pcKey);if(e){e=k.default.normalizeKeyName(Array.isArray(e)?e[0]:e);var f=d.bindings[e];if(Array.isArray(f)?f.indexOf(a)>-1:f==a)return this.commandKeys[a]=e}for(var g in d.bindings){var h=d.bindings[g];if(Array.isArray(h)?h.indexOf(a)>-1:h==a)return this.commandKeys[a]=g}return this.commandKeys[a]=null}},{key:"markRangeDirty",value:function(a){this.ensureOperation();for(var b=this.dirtyNodes,c=a.from,d=a.to,e=0,f=this.doc;;e++){var g=e==c.depth,h=e==d.depth;if(g||h||c.path[e]!=d.path[e]){if("break"===function(){var a=g?c.offset:c.path[e],i=h?d.offset:d.path[e]+1;if(f.isTextblock)f.forEach(function(c,d,e){d<i&&e>a&&b.set(c,D)});else for(var j,k=f.iter(a,i);j=k.next().value;)b.set(j,D);return"break"}())break}else{var i=f.child(c.path[e]);b.has(i)||b.set(i,C),f=i}}}},{key:"markAllDirty",value:function(){this.dirtyNodes.set(this.doc,D)}},{key:"selection",get:function(){return this.accurateSelection||this.ensureOperation(),this.sel.range}},{key:"tr",get:function(){return new G(this)}}]),a}();B.prototype.apply.scroll={scrollIntoView:!0};var C=c.DIRTY_RESCAN=1,D=c.DIRTY_REDRAW=2,E={};(0,r.eventMixin)(B);var F=function a(b){g(this,a),this.doc=b.doc,this.sel=b.sel.range,this.scrollIntoView=!1,this.focus=!1,this.composingAtStart=!!b.input.composing},G=function(a){function b(a){g(this,b);var c=e(this,Object.getPrototypeOf(b).call(this,a.doc));return c.pm=a,c}return f(b,a),i(b,[{key:"apply",value:function(a){return this.pm.apply(this,a)}},{key:"replaceSelection",value:function(a,b){var c=this.selection,d=c.empty,e=c.from,f=c.to,g=c.node,h=void 0;if(a&&a.isInline&&!1!==b){var i=d?this.pm.input.storedMarks:this.doc.marksAt(e);a=a.type.create(a.attrs,a.text,i)}if(g&&g.isTextblock&&a&&a.isInline)e=new l.Pos(e.toPath(),0),f=new l.Pos(e.path,g.size);else if(g)for(;e.depth&&0==e.offset&&(h=this.doc.path(e.path))&&e.offset==h.size-1&&!h.type.canBeEmpty&&(!a||!h.type.canContain(a));)e=e.shorten(),f=f.shorten(null,1);else if(a&&a.isBlock&&this.doc.path(e.path.slice(0,e.depth-1)).type.canContain(a)){this.delete(e,f);var j=this.doc.path(e.path);return e.offset&&e.offset!=j.size&&this.split(e),this.insert(e.shorten(null,e.offset?1:0),a)}return a?this.replaceWith(e,f,a):this.delete(e,f)}},{key:"deleteSelection",value:function(){return this.replaceSelection()}},{key:"typeText",value:function(a){return this.replaceSelection(this.pm.schema.text(a),!0)}},{key:"selection",get:function(){return this.steps.length?this.pm.selection.map(this):this.pm.selection}}]),b}(m.Transform)},{"../dom":62,"../format":81,"../model":96,"../transform":102,"../util/error":114,"../util/event":115,"../util/map":116,"../util/sortedinsert":118,"./css":67,"./dompos":69,"./draw":70,"./history":71,"./input":73,"./options":75,"./range":76,"./selection":78,browserkeymap:2}],75:[function(a,b,c){function d(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function e(a,b,c,d){n[a]=new m(b,c,d)}function f(a){var b=Object.create(null),c=a?[a].concat(a.use||[]):[];a:for(var d in n){for(var e=0;e<c.length;e++)if(d in c[e]){b[d]=c[e][d];continue a}b[d]=n[d].defaultValue}return b}function g(a){for(var b in n){var c=n[b];c.update&&c.updateOnInit&&c.update(a,a.options[b],null,!0)}}function h(a,b,c){var d=n[b];void 0===d&&j.AssertionError.raise("Option '"+b+"' is not defined"),!1===d.update&&j.AssertionError.raise("Option '"+b+"' can not be changed");var e=a.options[b];a.options[b]=c,d.update&&d.update(a,c,e,!1)}Object.defineProperty(c,"__esModule",{value:!0}),c.defineOption=e,c.parseOptions=f,c.initOptions=g,c.setOption=h;var i=a("../model"),j=a("../util/error"),k=a("../ui/prompt"),l=a("./command"),m=function a(b,c,e){d(this,a),this.defaultValue=b,this.update=c,this.updateOnInit=!1!==e},n=Object.create(null);e("schema",i.defaultSchema,!1),e("doc",null,function(a,b){return a.setDoc(b)},!1),e("docFormat",null),e("place",null),e("historyDepth",100),e("historyEventDelay",500),e("commands",l.CommandSet.default,l.updateCommands),e("commandParamPrompt",k.ParamPrompt),e("label",null)},{"../model":96,"../ui/prompt":111,"../util/error":114,"./command":66}],76:[function(a,b,c){function d(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}var e=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}();Object.defineProperty(c,"__esModule",{value:!0}),c.RangeStore=c.MarkedRange=void 0;var f=a("../util/event"),g=c.MarkedRange=function(){function a(b,c,e){d(this,a),this.options=e||{},this.from=b,this.to=c}return e(a,[{key:"remove",value:function(){this.signal("removed",this.from,this.to.max(this.from)),this.from=this.to=null}}]),a}();(0,f.eventMixin)(g);var h=function(){function a(){d(this,a),this.sorted=[]}return e(a,[{key:"find",value:function(a){for(var b=0,c=this.sorted.length;;){if(c<b+10){for(var d=b;d<c;d++)if(this.sorted[d].at.cmp(a)>=0)return d;return c}var e=b+c>>1;this.sorted[e].at.cmp(a)>0?c=e:b=e}}},{key:"insert",value:function(a){this.sorted.splice(this.find(a.at),0,a)}},{key:"remove",value:function(a,b){for(var c=this.find(a),d=0;;d++){var e=c-d-1,f=c+d;if(e>=0&&this.sorted[e].range==b)return void this.sorted.splice(e,1);if(f<this.sorted.length&&this.sorted[f].range==b)return void this.sorted.splice(f,1)}}},{key:"resort",value:function(){for(var a=0;a<this.sorted.length;a++)for(var b=this.sorted[a],c=b.at="open"==b.type?b.range.from:b.range.to,d=a;d>0&&this.sorted[d-1].at.cmp(c)>0;)this.sorted[d]=this.sorted[d-1],this.sorted[--d]=b}}]),a}(),i=(c.RangeStore=function(){function a(b){d(this,a),this.pm=b,this.ranges=[],this.sorted=new h}return e(a,[{key:"addRange",value:function(a){this.ranges.push(a),this.sorted.insert({type:"open",at:a.from,range:a}),this.sorted.insert({type:"close",at:a.to,range:a}),this.pm.markRangeDirty(a)}},{key:"removeRange",value:function(a){var b=this.ranges.indexOf(a);b>-1&&(this.ranges.splice(b,1),this.sorted.remove(a.from,a),this.sorted.remove(a.to,a),this.pm.markRangeDirty(a),a.remove())}},{key:"transform",value:function(a){for(var b=0;b<this.ranges.length;b++){var c=this.ranges[b];c.from=a.map(c.from,c.options.inclusiveLeft?-1:1).pos,c.to=a.map(c.to,c.options.inclusiveRight?1:-1).pos;var d=c.from.cmp(c.to);!1!==c.options.removeWhenEmpty&&d>=0?(this.removeRange(c),b--):d>0&&(c.to=c.from)}this.sorted.resort()}},{key:"activeRangeTracker",value:function(){return new i(this.sorted.sorted)}}]),a}(),function(){function a(b){d(this,a),this.sorted=b,this.pos=0,this.current=[]}return e(a,[{key:"advanceTo",value:function(a){for(var b=void 0;this.pos<this.sorted.length&&(b=this.sorted[this.pos]).at.cmp(a)<=0;){var c=b.range.options.className;c&&("open"==b.type?this.current.push(c):this.current.splice(this.current.indexOf(c),1)),this.pos++}}},{key:"nextChangeBefore",value:function(a){for(;;){if(this.pos==this.sorted.length)return null;var b=this.sorted[this.pos];if(b.range.options.className)return b.at.cmp(a)>=0?null:b.at.offset;this.pos++}}}]),a}())},{"../util/event":115}],77:[function(a,b,c){var d=a("../model");a("./command"),a("../format");d.StrongMark.register("command","set",{derive:!0,label:"Lis lihavointi"}),d.StrongMark.register("command","unset",{derive:!0,label:"Poista lihavointi"}),d.StrongMark.register("command","toggle",{derive:!0,label:"Lihavoi",menu:{group:"inline",rank:20,display:{type:"icon",width:805,height:1024,path:"M317 869q42 18 80 18 214 0 214-191 0-65-23-102-15-25-35-42t-38-26-46-14-48-6-54-1q-41 0-57 5 0 30-0 90t-0 90q0 4-0 38t-0 55 2 47 6 38zM309 442q24 4 62 4 46 0 81-7t62-25 42-51 14-81q0-40-16-70t-45-46-61-24-70-8q-28 0-74 7 0 28 2 86t2 86q0 15-0 45t-0 45q0 26 0 39zM0 950l1-53q8-2 48-9t60-15q4-6 7-15t4-19 3-18 1-21 0-19v-37q0-561-12-585-2-4-12-8t-25-6-28-4-27-2-17-1l-2-47q56-1 194-6t213-5q13 0 39 0t38 0q40 0 78 7t73 24 61 40 42 59 16 78q0 29-9 54t-22 41-36 32-41 25-48 22q88 20 146 76t58 141q0 57-20 102t-53 74-78 48-93 27-100 8q-25 0-75-1t-75-1q-60 0-175 6t-132 6z"}},keys:["Mod-B"]}),d.EmMark.register("command","set",{derive:!0,label:"Lis korostus"}),d.EmMark.register("command","unset",{derive:!0,label:"Poista korostus"}),d.EmMark.register("command","toggle",{derive:!0,label:"Korosta",menu:{group:"inline",rank:21,display:{type:"icon",width:585,height:1024,path:"M0 949l9-48q3-1 46-12t63-21q16-20 23-57 0-4 35-165t65-310 29-169v-14q-13-7-31-10t-39-4-33-3l10-58q18 1 68 3t85 4 68 1q27 0 56-1t69-4 56-3q-2 22-10 50-17 5-58 16t-62 19q-4 10-8 24t-5 22-4 26-3 24q-15 84-50 239t-44 203q-1 5-7 33t-11 51-9 47-3 32l0 10q9 2 105 17-1 25-9 56-6 0-18 0t-18 0q-16 0-49-5t-49-5q-78-1-117-1-29 0-81 5t-69 6z"}},keys:["Mod-I"]});d.BulletList.register("command","wrap",{derive:{list:!0},label:"Luo valinnasta lista",menu:{group:"block",rank:40,display:{type:"icon",width:768,height:896,path:"M0 512h128v-128h-128v128zM0 256h128v-128h-128v128zM0 768h128v-128h-128v128zM256 512h512v-128h-512v128zM256 256h512v-128h-512v128zM256 768h512v-128h-512v128z"}},keys:["Alt-Right '*'","Alt-Right '-'"]}),d.OrderedList.register("command","wrap",{derive:{list:!0},label:"Luo valinnasta numeroitu lista",menu:{group:"block",rank:41,display:{type:"icon",width:768,height:896,path:"M320 512h448v-128h-448v128zM320 768h448v-128h-448v128zM320 128v128h448v-128h-448zM79 384h78v-256h-36l-85 23v50l43-2v185zM189 590c0-36-12-78-96-78-33 0-64 6-83 16l1 66c21-10 42-15 67-15s32 11 32 28c0 26-30 58-110 112v50h192v-67l-91 2c49-30 87-66 87-113l1-1z"}},keys:["Alt-Right '1'"]}),d.HardBreak.register("command","insert",{label:"Insert hard break",run:function(a){var b=a.selection,c=b.node,d=b.from;return(!c||!c.isBlock)&&(a.doc.path(d.path).type.isCode?a.tr.typeText("\n").apply(a.apply.scroll):a.tr.replaceSelection(this.create()).apply(a.apply.scroll))},keys:["Mod-Enter","Shift-Enter"]}),d.ListItem.register("command","split",{label:"Split the current list item",run:function(a){var b=a.selection,c=b.from,e=b.to,f=b.node;if(f&&f.isBlock||c.path.length<2||!d.Pos.samePath(c.path,e.path))return!1;var g=c.shorten(),h=a.doc.path(g.path);if(h.type!=this)return!1;var i=e.offset==h.child(g.offset).size?a.schema.defaultTextblockType():null;return a.tr.delete(c,e).split(c,2,i).apply(a.apply.scroll)},keys:["Enter(50)"]});for(var e=function(a){d.Heading.registerComputed("command","make"+a,function(b){if(a<=b.maxLevel)return{derive:{name:"make",attrs:{level:a}},label:"Muuta otsikkotasoon "+a,keys:["Mod-H '"+a+"'"],menu:{group:"heading",rank:30+a,display:{type:"label",label:"H"+a},activeDisplay:"H"+a}}})},f=1;f<=10;f++)e(f);d.Paragraph.register("command","make",{derive:!0,label:"Muuta kappaleeksi",keys:["Mod-P"],menu:{group:"heading",rank:37,display:{type:"label",label:"P"},activeDisplay:"P"}}),d.HorizontalRule.register("command","insert",{derive:!0,label:"Insert horizontal rule",keys:["Mod-Shift--"],menu:{group:"insert",rank:70,display:{type:"label",label:"Horizontal rule"}}})},{"../format":81,"../model":96,"./command":66}],78:[function(a,b,c){function d(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function e(a,b){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!b||"object"!==(void 0===b?"undefined":o(b))&&"function"!=typeof b?a:b}function f(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+(void 0===b?"undefined":o(b)));a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}function g(a){if(!h(a))return null;var b=window.getSelection();return new w((0,t.posFromDOM)(a,b.anchorNode,b.anchorOffset,!0),(0,t.posFromDOM)(a,b.focusNode,b.focusOffset,!0))}function h(a){var b=window.getSelection();return b.rangeCount&&(0,s.contains)(a.content,b.anchorNode)}function i(a,b,c,d,e){var f=a.path(b);if(f.isTextblock)return new w(new q.Pos(b,c));for(var g=c+(d>0?0:-1);d>0?g<f.size:g>=0;g+=d){var h=f.child(g);if(!e&&null==h.type.contains&&h.type.selectable)return new x(new q.Pos(b,g),new q.Pos(b,g+1),h);b.push(g);var j=i(a,b,d<0?h.size:0,d,e);if(j)return j;b.pop()}}function j(a,b,c,d){for(var e=b.path.slice(),f=b.offset;;){var g=i(a,e,f,c,d);if(g)return g;if(!e.length)break;f=e.pop()+(c>0?1:0)}}function k(a,b){var c=arguments.length<=2||void 0===arguments[2]?1:arguments[2],d=arguments[3],e=j(a,b,c,d)||j(a,b,-c,d);return e||u("Searching for selection in invalid document "+a),e}function l(a){var b=arguments.length<=1||void 0===arguments[1]?[]:arguments[1],c=arguments[2];return i(a,b.slice(),0,1,c)}function m(a){var b=arguments.length<=1||void 0===arguments[1]?[]:arguments[1],c=arguments[2];return i(a,b.slice(),a.size,-1,c)}function n(a,b,c){for(var d=(0,t.pathToDOM)(a.content,b.path),e=(0,t.coordsAtPos)(a,b),f=d.firstChild;f;f=f.nextSibling)if(1==f.nodeType)for(var g=f.getClientRects(),h=0;h<g.length;h++){var i=g[h];if(c<0?i.bottom<e.top:i.top>e.bottom)return!1}return!0}var o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(a){return typeof a}:function(a){return a&&"function"==typeof Symbol&&a.constructor===Symbol?"symbol":typeof a},p=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}();Object.defineProperty(c,"__esModule",{value:!0}),c.NodeSelection=c.TextSelection=c.Selection=c.SelectionState=c.SelectionError=void 0,c.rangeFromDOMLoose=g,c.hasFocus=h,c.findSelectionFrom=j,c.findSelectionNear=k,c.findSelectionAtStart=l,c.findSelectionAtEnd=m,c.verticalMotionLeavesTextblock=n;var q=a("../model"),r=a("../util/error"),s=a("../dom"),t=a("./dompos"),u=c.SelectionError=function(a){function b(){return d(this,b),e(this,Object.getPrototypeOf(b).apply(this,arguments))}return f(b,a),b}(r.ProseMirrorError),v=(c.SelectionState=function(){function a(b,c){var e=this;d(this,a),this.pm=b,this.range=c,this.lastNonNodePos=null,this.lastFocusTime=this.lastFastPollTime=0,this.polling=null,this.lastAnchorNode=this.lastHeadNode=this.lastAnchorOffset=this.lastHeadOffset=null,this.lastNode=null,b.content.addEventListener("focus",function(){return e.receivedFocus()}),this.poller=this.poller.bind(this)}return p(a,[{key:"setAndSignal",value:function(a,b){this.set(a,b),this.pm.signal("selectionChange")}},{key:"set",value:function(a,b){this.range=a,a.node||(this.lastNonNodePos=null),!1!==b&&(this.lastAnchorNode=null)}},{key:"poller",value:function(){h(this.pm)?(this.pm.operation||this.readFromDOM(),this.polling=setTimeout(this.poller,100)):this.polling=null}},{key:"startPolling",value:function(){clearTimeout(this.polling),this.polling=setTimeout(this.poller,50)}},{key:"fastPoll",value:function(){this.lastFastPollTime=Date.now(),this.startPolling()}},{key:"stopPolling",value:function(){clearTimeout(this.polling),this.polling=null}},{key:"domChanged",value:function(){var a=window.getSelection();return a.anchorNode!=this.lastAnchorNode||a.anchorOffset!=this.lastAnchorOffset||a.focusNode!=this.lastHeadNode||a.focusOffset!=this.lastHeadOffset}},{key:"storeDOMState",value:function(){var a=window.getSelection();this.lastAnchorNode=a.anchorNode,this.lastAnchorOffset=a.anchorOffset,this.lastHeadNode=a.focusNode,this.lastHeadOffset=a.focusOffset}},{key:"readFromDOM",value:function(){if(this.pm.input.composing||!h(this.pm)||!this.domChanged())return!1;var a=window.getSelection(),b=this.pm.doc,c=(0,t.posFromDOM)(this.pm,a.anchorNode,a.anchorOffset),d=a.isCollapsed?c:(0,t.posFromDOM)(this.pm,a.focusNode,a.focusOffset);if(this.range.node&&a.isCollapsed&&this.lastFocusTime>Date.now()-100&&this.lastFastPollTime<Date.now()-100){var e=l(this.pm.doc,void 0,!0);if(e&&0==c.cmp(e.anchor))return this.toDOM()}var f=k(b,d,this.range.head&&this.range.head.cmp(d)<0?-1:1);return f instanceof w&&b.path(c.path).isTextblock&&(f=new w(c,f.head)),this.setAndSignal(f),f instanceof x||f.head.cmp(d)||f.anchor.cmp(c)?this.toDOM():(this.clearNode(),this.storeDOMState()),!0}},{key:"toDOM",value:function(a){this.range instanceof x?this.nodeToDOM(a):this.rangeToDOM(a)}},{key:"nodeToDOM",value:function(a){window.getSelection().removeAllRanges(),a&&this.pm.content.focus();var b=(0,t.pathToDOM)(this.pm.content,this.range.from.toPath());b!=this.lastNode&&(this.clearNode(),b.classList.add("ProseMirror-selectednode"),this.lastNode=b)}},{key:"clearNode",value:function(){if(this.lastNode)return this.lastNode.classList.remove("ProseMirror-selectednode"),this.lastNode=null,!0}},{key:"rangeToDOM",value:function(a){if(!this.clearNode()&&!h(this.pm)){if(!a)return;s.browser.gecko&&this.pm.content.focus()}if(this.domChanged()){var b=this.pm.content,c=(0,t.DOMFromPos)(b,this.range.anchor),d=(0,t.DOMFromPos)(b,this.range.head),e=window.getSelection(),f=document.createRange();if(e.extend)f.setEnd(c.node,c.offset),f.collapse(!1);else{if(this.range.anchor.cmp(this.range.head)>0){var g=c;c=d,d=g}f.setEnd(d.node,d.offset),f.setStart(c.node,c.offset)}e.removeAllRanges(),e.addRange(f),e.extend&&e.extend(d.node,d.offset),this.storeDOMState()}}},{key:"receivedFocus",value:function(){this.lastFocusTime=Date.now(),null==this.polling&&this.startPolling()}}]),a}(),c.Selection=function a(){d(this,a)}),w=c.TextSelection=function(a){function b(a,c){d(this,b);var f=e(this,Object.getPrototypeOf(b).call(this));return f.anchor=a,f.head=c||a,f}return f(b,a),p(b,[{key:"eq",value:function(a){return a instanceof b&&!a.head.cmp(this.head)&&!a.anchor.cmp(this.anchor)}},{key:"map",value:function(a,c){var d=c.map(this.head).pos;if(!a.path(d.path).isTextblock)return k(a,d);var e=c.map(this.anchor).pos;return new b(a.path(e.path).isTextblock?e:d,d)}},{key:"inverted",get:function(){return this.anchor.cmp(this.head)>0}},{key:"from",get:function(){return this.inverted?this.head:this.anchor}},{key:"to",get:function(){return this.inverted?this.anchor:this.head}},{key:"empty",get:function(){return 0==this.anchor.cmp(this.head)}}]),b}(v),x=c.NodeSelection=function(a){function b(a,c,f){d(this,b);var g=e(this,Object.getPrototypeOf(b).call(this));return g.from=a,g.to=c,g.node=f,g}return f(b,a),p(b,[{key:"eq",value:function(a){return a instanceof b&&!this.from.cmp(a.from)}},{key:"map",value:function(a,c){var d=c.map(this.from,1).pos,e=c.map(this.to,-1).pos;if(q.Pos.samePath(d.path,e.path)&&d.offset==e.offset-1){var f=a.nodeAfter(d);if(f.type.selectable)return new b(d,e,f)}return k(a,d)}},{key:"empty",get:function(){return!1}}]),b}(v)},{"../dom":62,"../model":96,"../util/error":114,"./dompos":69}],79:[function(a,b,c){function d(a){return a&&a.__esModule?a:{default:a}}function e(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function f(a,b,c){c||(c={});var d=new s(a,c.topNode||a.node("doc"),c),e=c.from?b.childNodes[c.from]:b.firstChild,f=null!=c.to&&b.childNodes[c.to]||null;d.addAll(e,f,!0);for(var g=void 0;d.stack.length;)g=d.leave();return g}function g(a,b,c){var d=(c&&c.document||window.document).createElement("div");return d.innerHTML=b,f(a,d,c)}function h(a){for(var b=/\s*([\w-]+)\s*:\s*([^;]+)/g,c=void 0,d=[];c=b.exec(a);)d.push(c[1],c[2].trim());return d}function i(a){return a.cached.parseDOMInfo||(a.cached.parseDOMInfo=j(a))}function j(a){var b=Object.create(null),c=Object.create(null);return b._=[],a.registry("parseDOM",function(a,c,d){var e=c.parse;"block"==e?e=function(a,b){b.wrapIn(a,this)}:"mark"==e&&(e=function(a,b){b.wrapMark(a,this)}),(0,n.default)(b[a]||(b[a]=[]),{type:d,parse:e,rank:null==c.rank?50:c.rank},function(a,b){return a.rank-b.rank})}),a.registry("parseDOMStyle",function(a,b,d){(0,n.default)(c[a]||(c[a]=[]),{type:d,parse:b.parse,rank:null==b.rank?50:b.rank},function(a,b){return a.rank-b.rank})}),{tags:b,styles:c}}var k=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}();Object.defineProperty(c,"__esModule",{value:!0}),c.fromDOM=f,c.fromHTML=g;var l=a("../model"),m=a("../util/sortedinsert"),n=d(m),o=a("./register");(0,o.defineSource)("dom",f),(0,o.defineSource)("html",g);var p={address:!0,article:!0,aside:!0,blockquote:!0,canvas:!0,dd:!0,div:!0,dl:!0,fieldset:!0,figcaption:!0,figure:!0,footer:!0,form:!0,h1:!0,h2:!0,h3:!0,h4:!0,h5:!0,h6:!0,header:!0,hgroup:!0,hr:!0,li:!0,noscript:!0,ol:!0,output:!0,p:!0,pre:!0,section:!0,table:!0,tfoot:!0,ul:!0},q={head:!0,noscript:!0,object:!0,script:!0,style:!0,title:!0},r=[],s=function(){function a(b,c,d){e(this,a),this.options=d||{},this.schema=b,this.stack=[],this.marks=r,this.closing=!1,this.enter(c.type,c.attrs);var f=i(b);this.tagInfo=f.tags,this.styleInfo=f.styles}return k(a,[{key:"addDOM",value:function(a){if(3==a.nodeType){var b=a.nodeValue,c=this.top,d=void 0;(/\S/.test(b)||c.type.isTextblock)&&(b=b.replace(/\s+/g," "),/^\s/.test(b)&&(!(d=c.content[c.content.length-1])||"text"==d.type.name&&/\s$/.test(d.text))&&(b=b.slice(1)),b&&this.insertNode(this.schema.text(b,this.marks)))}else if(1!=a.nodeType||a.hasAttribute("pm-ignore"));else{var e=a.getAttribute("style");e?this.addElementWithStyles(h(e),a):this.addElement(a)}}},{key:"addElement",value:function(a){var b=a.nodeName.toLowerCase();this.parseNodeType(b,a)||q.hasOwnProperty(b)||(this.addAll(a.firstChild,null),p.hasOwnProperty(b)&&this.top.type==this.schema.defaultTextblockType()&&(this.closing=!0))}},{key:"addElementWithStyles",value:function(a,b){for(var c=this,d=[],e=0;e<a.length;e+=2){var f=this.styleInfo[a[e]],g=a[e+1];if(f)for(var h=0;h<f.length;h++)d.push(f[h],g)}!function a(e){if(e==d.length)c.addElement(b);else{var f=d[e];f.parse.call(f.type,d[e+1],c,a.bind(null,e+2))}}(0)}},{key:"tryParsers",value:function(a,b){if(a)for(var c=0;c<a.length;c++){var d=a[c];if(!1!==d.parse.call(d.type,b,this))return!0}}},{key:"parseNodeType",value:function(a,b){return this.tryParsers(this.tagInfo[a],b)||this.tryParsers(this.tagInfo._,b)}},{key:"addAll",value:function(a,b,c){for(var d=c&&this.stack.slice(),e=a;e!=b;e=e.nextSibling)this.addDOM(e),c&&p.hasOwnProperty(e.nodeName.toLowerCase())&&this.sync(d)}},{key:"doClose",value:function(){if(this.closing&&!(this.stack.length<2)){var a=this.leave();this.enter(a.type,a.attrs),this.closing=!1}}},{key:"insertNode",value:function(a){if(this.top.type.canContain(a))this.doClose();else for(var b=this.stack.length-1;b>=0;b--){var c=this.stack[b].type.findConnection(a.type);if(c){if(b==this.stack.length-1)this.doClose();else for(;this.stack.length>b+1;)this.leave();for(var d=0;d<c.length;d++)this.enter(c[d]);this.marks.length&&(this.marks=r);break}}return this.top.content.push(a),a}},{key:"insert",value:function(a,b,c){return this.insertNode(a.createAutoFill(b,c,this.marks))}},{key:"enter",value:function(a,b){this.stack.push({type:a,attrs:b,content:[]})}},{key:"leave",value:function(){this.marks.length&&(this.marks=r);var a=this.stack.pop(),b=a.content[a.content.length-1];b&&b.isText&&/\s$/.test(b.text)&&(a.content[a.content.length-1]=b.copy(b.text.slice(0,b.text.length-1)));var c=a.type.createAutoFill(a.attrs,a.content);return this.stack.length&&this.insertNode(c),c}},{key:"sync",value:function(a){for(;this.stack.length>a.length;)this.leave();for(;;){var b=this.stack.length-1,c=this.stack[b],d=a[b];if(c.type==d.type&&l.Node.sameAttrs(c.attrs,d.attrs))break;this.leave()}for(;a.length>this.stack.length;){var e=a[this.stack.length];this.enter(e.type,e.attrs)}this.marks.length&&(this.marks=r),this.closing=!1}},{key:"wrapIn",value:function(a,b,c){this.enter(b,c),this.addAll(a.firstChild,null,!0),this.leave()}},{key:"wrapMark",value:function(a,b){var c=this.marks;this.marks=(b.instance||b).addToSet(c),a.call?a():this.addAll(a.firstChild,null),this.marks=c}},{key:"top",get:function(){return this.stack[this.stack.length-1]}}]),a}();l.Paragraph.register("parseDOM","p",{parse:"block"}),l.BlockQuote.register("parseDOM","blockquote",{parse:"block"});for(var t=function(a){l.Heading.registerComputed("parseDOM","h"+a,function(b){if(a<=b.maxLevel)return{parse:function(b,c){c.wrapIn(b,this,{level:a})}}})},u=1;u<=6;u++)t(u);l.HorizontalRule.register("parseDOM","hr",{parse:"block"}),l.CodeBlock.register("parseDOM","pre",{parse:function(a,b){var c=a.firstChild&&/^code$/i.test(a.firstChild.nodeName)&&a.firstChild.getAttribute("class");if(c&&/fence/.test(c)){for(var d=[],e=/(?:^|\s)lang-(\S+)/g,f=void 0;f=e.test(c);)d.push(f[1]);c=d.join(" ")}else c=null;var g=a.textContent;b.insert(this,{params:c},g?[b.schema.text(g)]:[])}}),l.BulletList.register("parseDOM","ul",{parse:"block"}),l.OrderedList.register("parseDOM","ol",{parse:function(a,b){var c={order:a.getAttribute("start")||1};b.wrapIn(a,this,c)}}),l.ListItem.register("parseDOM","li",{parse:"block"}),l.HardBreak.register("parseDOM","br",{parse:function(a,b){b.insert(this)}}),l.Image.register("parseDOM","img",{parse:function(a,b){b.insert(this,{src:a.getAttribute("src"),title:a.getAttribute("title")||null,alt:a.getAttribute("alt")||null})}}),l.LinkMark.register("parseDOM","a",{parse:function(a,b){var c=a.getAttribute("href");if(!c)return!1;b.wrapMark(a,this.create({href:c,title:a.getAttribute("title")}))}}),l.EmMark.register("parseDOM","i",{parse:"mark"}),l.EmMark.register("parseDOM","em",{parse:"mark"}),l.StrongMark.register("parseDOMStyle","font-style",{parse:function(a,b,c){"italic"==a?b.wrapMark(c,this):c()}}),l.StrongMark.register("parseDOM","b",{parse:"mark"}),l.StrongMark.register("parseDOM","strong",{parse:"mark"}),l.StrongMark.register("parseDOMStyle","font-weight",{parse:function(a,b,c){"bold"==a||"bolder"==a||!/\D/.test(a)&&+a>=500?b.wrapMark(c,this):c()}}),l.CodeMark.register("parseDOM","code",{parse:"mark"})},{"../model":96,"../util/sortedinsert":118,"./register":82}],80:[function(a,b,c){function d(a,b){for(var c=b.trim().split(/\n{2,}/),d=[],e=0;e<c.length;e++){for(var f=[],g=c[e].split("\n"),h=0;h<g.length;h++)h&&f.push(a.node("hard_break")),g[h]&&f.push(a.text(g[h]));d.push(a.node("paragraph",null,f))}return d.length||d.push(a.node("paragraph")),a.node("doc",null,d)}Object.defineProperty(c,"__esModule",{value:!0}),c.fromText=d,(0,a("./register").defineSource)("text",d)},{"./register":82}],81:[function(a,b,c){Object.defineProperty(c,"__esModule",{value:!0});var d=a("./register");Object.defineProperty(c,"serializeTo",{enumerable:!0,get:function(){return d.serializeTo}}),Object.defineProperty(c,"knownTarget",{enumerable:!0,get:function(){return d.knownTarget}}),Object.defineProperty(c,"defineTarget",{enumerable:!0,get:function(){return d.defineTarget}}),Object.defineProperty(c,"parseFrom",{enumerable:!0,get:function(){return d.parseFrom}}),Object.defineProperty(c,"knownSource",{enumerable:!0,get:function(){return d.knownSource}}),Object.defineProperty(c,"defineSource",{enumerable:!0,get:function(){return d.defineSource}});var e=a("./from_dom");Object.defineProperty(c,"fromDOM",{enumerable:!0,get:function(){return e.fromDOM}}),Object.defineProperty(c,"fromHTML",{enumerable:!0,get:function(){return e.fromHTML}});var f=a("./to_dom");Object.defineProperty(c,"toDOM",{enumerable:!0,get:function(){return f.toDOM}}),Object.defineProperty(c,"toHTML",{enumerable:!0,get:function(){return f.toHTML}}),Object.defineProperty(c,"nodeToDOM",{enumerable:!0,get:function(){return f.nodeToDOM}});var g=a("./from_text");Object.defineProperty(c,"fromText",{enumerable:!0,get:function(){return g.fromText}});var h=a("./to_text");Object.defineProperty(c,"toText",{enumerable:!0,get:function(){return h.toText}})},{"./from_dom":79,"./from_text":80,"./register":82,"./to_dom":83,"./to_text":84}],82:[function(a,b,c){function d(a,b,c){var d=k[b];return d||j.NamespaceError.raise("Target format "+b+" not defined"),d(a,c)}function e(a){return!!k[a]}function f(a,b){k[a]=b}function g(a,b,c,d){var e=l[c]
;return e||j.NamespaceError.raise("Source format "+c+" not defined"),e(a,b,d)}function h(a){return!!l[a]}function i(a,b){l[a]=b}Object.defineProperty(c,"__esModule",{value:!0}),c.serializeTo=d,c.knownTarget=e,c.defineTarget=f,c.parseFrom=g,c.knownSource=h,c.defineSource=i;var j=a("../util/error"),k=Object.create(null);f("json",function(a){return a.toJSON()});var l=Object.create(null);i("json",function(a,b){return a.nodeFromJSON(b)})},{"../util/error":114}],83:[function(a,b,c){function d(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function e(a,b){return new l(b).renderContent(a)}function f(a,b,c){var d=new l(b),e=d.renderNode(a,c);return a.isInline&&(e=d.wrapInlineFlat(e,a.marks),d.options.renderInlineFlat&&(e=b.renderInlineFlat(a,e,c)||e)),e}function g(a,b){var c=new l(b),d=c.elt("div");return d.appendChild(c.renderContent(a)),d.innerHTML}function h(a,b){a.prototype.serializeDOM=b}var i=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}();Object.defineProperty(c,"__esModule",{value:!0}),c.toDOM=e,c.nodeToDOM=f,c.toHTML=g;var j=a("../model"),k=a("./register"),l=function(){function a(b){d(this,a),this.options=b||{},this.doc=this.options.document||window.document}return i(a,[{key:"elt",value:function(a,b){var c=this.doc.createElement(a);if(b)for(var d in b)"style"==d?c.style.cssText=b[d]:b[d]&&c.setAttribute(d,b[d]);for(var e=arguments.length,f=Array(e>2?e-2:0),g=2;g<e;g++)f[g-2]=arguments[g];for(var h=0;h<f.length;h++)c.appendChild("string"==typeof f[h]?this.doc.createTextNode(f[h]):f[h]);return c}},{key:"renderNode",value:function(a,b){var c=a.type.serializeDOM(a,this);return this.options.onRender&&(c=this.options.onRender(a,c,b)||c),c}},{key:"renderContent",value:function(a,b){return b||(b=this.doc.createDocumentFragment()),a.isTextblock?this.options.renderInlineFlat?this.renderInlineFlatInto(a,b):this.renderInlineInto(a,b):this.renderBlocksInto(a,b),b}},{key:"renderBlocksInto",value:function(a,b){for(var c,d=a.iter();c=d.next().value;)this.options.path&&this.options.path.push(d.offset-c.width),b.appendChild(this.renderNode(c,d.offset-c.width)),this.options.path&&this.options.path.pop()}},{key:"renderInlineInto",value:function(a,b){var c=this,d=b,e=[];a.forEach(function(a,b){for(var f=0;f<Math.min(e.length,a.marks.length)&&a.marks[f].eq(e[f]);++f);for(;f<e.length;)e.pop(),d=d.parentNode;for(;e.length<a.marks.length;){var g=a.marks[e.length];e.push(g),d=d.appendChild(c.renderMark(g))}d.appendChild(c.renderNode(a,b))})}},{key:"renderInlineFlatInto",value:function(a,b){var c=this;a.forEach(function(a,d){var e=c.renderNode(a,d);e=c.wrapInlineFlat(e,a.marks),e=c.options.renderInlineFlat(a,e,d)||e,b.appendChild(e)})}},{key:"renderMark",value:function(a){return a.type.serializeDOM(a,this)}},{key:"wrapInlineFlat",value:function(a,b){for(var c=b.length-1;c>=0;c--){var d=this.renderMark(b[c]);d.appendChild(a),a=d}return a}},{key:"renderAs",value:function(a,b,c){var d=this.renderContent(a,this.elt(b,c));return this.options.onContainer&&this.options.onContainer(d),d}}]),a}();(0,k.defineTarget)("dom",e),(0,k.defineTarget)("html",g),h(j.BlockQuote,function(a,b){return b.renderAs(a,"blockquote")}),j.BlockQuote.prototype.countCoordsAsChild=function(a,b,c,d){var e=c.firstChild.getBoundingClientRect();if(d.left<e.left-2)return j.Pos.from(b)},h(j.BulletList,function(a,b){return b.renderAs(a,"ul")}),h(j.OrderedList,function(a,b){return b.renderAs(a,"ol",{start:"1"!=a.attrs.order&&a.attrs.order})}),j.OrderedList.prototype.countCoordsAsChild=j.BulletList.prototype.countCoordsAsChild=function(a,b,c,d){for(var e=0;e<c.childNodes.length;e++){var f=c.childNodes[e];if(f.hasAttribute("pm-offset")){var g=f.getBoundingClientRect();if(d.left>g.left-2)return null;if(g.top<=d.top&&g.bottom>=d.top)return new j.Pos(b,e)}}},h(j.ListItem,function(a,b){return b.renderAs(a,"li")}),h(j.HorizontalRule,function(a,b){return b.elt("hr")}),h(j.Paragraph,function(a,b){return b.renderAs(a,"p")}),h(j.Heading,function(a,b){return b.renderAs(a,"h"+a.attrs.level)}),h(j.CodeBlock,function(a,b){var c=b.renderAs(a,"code");return null!=a.attrs.params&&(c.className="fence "+a.attrs.params.replace(/(^|\s+)/g,"$&lang-")),b.elt("pre",null,c)}),h(j.Text,function(a,b){return b.doc.createTextNode(a.text)}),h(j.Image,function(a,b){return b.elt("img",{src:a.attrs.src,alt:a.attrs.alt,title:a.attrs.title})}),h(j.HardBreak,function(a,b){return b.elt("br")}),h(j.EmMark,function(a,b){return b.elt("em")}),h(j.StrongMark,function(a,b){return b.elt("strong")}),h(j.CodeMark,function(a,b){return b.elt("code")}),h(j.LinkMark,function(a,b){return b.elt("a",{href:a.attrs.href,title:a.attrs.title})})},{"../model":96,"./register":82}],84:[function(a,b,c){function d(a){return a.type.serializeText(a).trim()}Object.defineProperty(c,"__esModule",{value:!0}),c.toText=d;var e=a("../model"),f=a("./register");e.Block.prototype.serializeText=function(a){var b="";return a.forEach(function(a){return b+=a.type.serializeText(a)}),b},e.Textblock.prototype.serializeText=function(a){var b=e.Block.prototype.serializeText(a);return b&&b+"\n\n"},e.Inline.prototype.serializeText=function(){return""},e.HardBreak.prototype.serializeText=function(){return"\n"},e.Text.prototype.serializeText=function(a){return a.text},(0,f.defineTarget)("text",d)},{"../model":96,"./register":82}],85:[function(a,b,c){function d(a){return a&&a.__esModule?a:{default:a}}function e(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function f(a,b){var c=l(a).parse(b,{}),d=new x(a,c),e=void 0;d.parseTokens(c);do{e=d.closeNode()}while(d.stack.length);return e}function g(a,b){if(a.isText&&b.isText&&r.Mark.sameSet(a.marks,b.marks))return a.copy(a.text+b.text)}function h(a){return a.cached.markdownTokens||(a.cached.markdownTokens=j(a))}function i(a,b,c,d){"block"==d.parse?(a[b+"_open"]=function(a,b){var e="function"==typeof d.attrs?d.attrs.call(c,a,b):d.attrs;a.openNode(c,e)},a[b+"_close"]=function(a){return a.closeNode()}):"mark"==d.parse?(a[b+"_open"]=function(a,b){var e=d.attrs instanceof Function?d.attrs.call(c,a,b):d.attrs;a.openMark(c.create(e))},a[b+"_close"]=function(a){return a.closeMark(c)}):d.parse?a[b]=d.parse.bind(c):t.AssertionError.raise("Unrecognized markdown parsing spec: "+d)}function j(a){var b=Object.create(null);return b.text=function(a,b){return a.addText(b.content)},b.inline=function(a,b){return a.parseTokens(b.children)},b.softbreak=function(a){return a.addText("\n")},a.registry("parseMarkdown",function(a,c,d){i(b,a,d,c)}),b}function k(a){var b=a.cached.markdownConfig;return b||function(){var c=null,d=[];a.registry("configureMarkdown",function(a,b){if("init"==a)c&&t.AssertionError.raise("Two markdown parser initializers defined in schema"),c=b;else{var e=(/_(\d+)$/.exec(a)||[0,50])[1];(0,v.default)(d,{f:b,rank:e},function(a,b){return a.rank-b.rank})}}),b={init:c||function(){return(0,q.default)("commonmark")},modifiers:d.map(function(a){return a.f})}}(),b}function l(a){var b=k(a),c=b.init();return b.modifiers.forEach(function(a){return c=a(c)}),c}function m(a){return"\n"==a.charAt(a.length-1)?a.slice(0,a.length-1):a}function n(a,b){a.openNode(this),a.addText(m(b.content)),a.closeNode()}var o=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}();Object.defineProperty(c,"__esModule",{value:!0}),c.fromMarkdown=f;var p=a("markdown-it"),q=d(p),r=a("../model"),s=a("../format"),t=a("../util/error"),u=a("../util/sortedinsert"),v=d(u);(0,s.defineSource)("markdown",f);var w=[],x=function(){function a(b,c){e(this,a),this.schema=b,this.stack=[{type:b.nodes.doc,content:[]}],this.tokens=c,this.marks=w,this.tokenTypes=h(b)}return o(a,[{key:"top",value:function(){return this.stack[this.stack.length-1]}},{key:"push",value:function(a){this.stack.length&&this.top().content.push(a)}},{key:"addText",value:function(a){var b=this.top().content,c=b[b.length-1],d=this.schema.text(a,this.marks),e=void 0;c&&(e=g(c,d))?b[b.length-1]=e:b.push(d)}},{key:"openMark",value:function(a){this.marks=a.addToSet(this.marks)}},{key:"closeMark",value:function(a){this.marks=a.removeFromSet(this.marks)}},{key:"parseTokens",value:function(a){for(var b=0;b<a.length;b++){var c=a[b],d=this.tokenTypes[c.type];if(!d)throw new Error("Token type `"+c.type+"` not supported by Markdown parser");d(this,c)}}},{key:"addNode",value:function(a,b,c){var d=a.createAutoFill(b,c,this.marks);return this.push(d),d}},{key:"openNode",value:function(a,b){this.stack.push({type:a,attrs:b,content:[]})}},{key:"closeNode",value:function(){this.marks.length&&(this.marks=w);var a=this.stack.pop();return this.addNode(a.type,a.attrs,a.content)}},{key:"getAttr",value:function(a,b){if(a.attrs)for(var c=0;c<a.attrs.length;c++)if(a.attrs[c][0]==b)return a.attrs[c][1]}}]),a}();r.BlockQuote.register("parseMarkdown","blockquote",{parse:"block"}),r.Paragraph.register("parseMarkdown","paragraph",{parse:"block"}),r.ListItem.register("parseMarkdown","list_item",{parse:"block"}),r.BulletList.register("parseMarkdown","bullet_list",{parse:"block"}),r.OrderedList.register("parseMarkdown","ordered_list",{parse:"block",attrs:function(a,b){return{order:Number(a.getAttr(b,"order")||1)}}}),r.Heading.register("parseMarkdown","heading",{parse:"block",attrs:function(a,b){return{level:Math.min(this.maxLevel,+b.tag.slice(1))}}}),r.CodeBlock.register("parseMarkdown","code_block",{parse:n}),r.CodeBlock.register("parseMarkdown","fence",{parse:n}),r.HorizontalRule.register("parseMarkdown","hr",{parse:function(a,b){a.addNode(this,{markup:b.markup})}}),r.Image.register("parseMarkdown","image",{parse:function(a,b){a.addNode(this,{src:a.getAttr(b,"src"),title:a.getAttr(b,"title")||null,alt:b.children[0]&&b.children[0].content||null})}}),r.HardBreak.register("parseMarkdown","hardbreak",{parse:function(a){a.addNode(this)}}),r.EmMark.register("parseMarkdown","em",{parse:"mark"}),r.StrongMark.register("parseMarkdown","strong",{parse:"mark"}),r.LinkMark.register("parseMarkdown","link",{parse:"mark",attrs:function(a,b){return{href:a.getAttr(b,"href"),title:a.getAttr(b,"title")||null}}}),r.CodeMark.register("parseMarkdown","code_inline",{parse:function(a,b){a.openMark(this.create()),a.addText(b.content),a.closeMark(this)}})},{"../format":81,"../model":96,"../util/error":114,"../util/sortedinsert":118,"markdown-it":6}],86:[function(a,b,c){Object.defineProperty(c,"__esModule",{value:!0});var d=a("./from_markdown");Object.defineProperty(c,"fromMarkdown",{enumerable:!0,get:function(){return d.fromMarkdown}});var e=a("./to_markdown");Object.defineProperty(c,"toMarkdown",{enumerable:!0,get:function(){return e.toMarkdown}})},{"./from_markdown":85,"./to_markdown":87}],87:[function(a,b,c){function d(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function e(a){var b=new j;return b.renderContent(a),b.out}function f(a,b){a.prototype.serializeMarkdown=b}function g(a,b,c){a.prototype.openMarkdown=b,a.prototype.closeMarkdown=c}var h=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}();Object.defineProperty(c,"__esModule",{value:!0}),c.toMarkdown=e;var i=a("../model");(0,a("../format").defineTarget)("markdown",e);var j=function(){function a(){d(this,a),this.delim=this.out="",this.closed=!1,this.inTightList=!1}return h(a,[{key:"flushClose",value:function(a){if(this.closed){if(this.atBlank()||(this.out+="\n"),null==a&&(a=2),a>1){var b=this.delim,c=/\s+$/.exec(b);c&&(b=b.slice(0,b.length-c[0].length));for(var d=1;d<a;d++)this.out+=b+"\n"}this.closed=!1}}},{key:"wrapBlock",value:function(a,b,c,d){var e=this.delim;this.write(b||a),this.delim+=a,d(),this.delim=e,this.closeBlock(c)}},{key:"atBlank",value:function(){return/(^|\n)$/.test(this.out)}},{key:"ensureNewLine",value:function(){this.atBlank()||(this.out+="\n")}},{key:"write",value:function(a){this.flushClose(),this.delim&&this.atBlank()&&(this.out+=this.delim),a&&(this.out+=a)}},{key:"closeBlock",value:function(a){this.closed=a}},{key:"text",value:function(a,b){for(var c=a.split("\n"),d=0;d<c.length;d++){var e=this.atBlank()||this.closed;this.write(),this.out+=!1!==b?this.esc(c[d],e):c[d],d!=c.length-1&&(this.out+="\n")}}},{key:"render",value:function(a){a.type.serializeMarkdown(this,a)}},{key:"renderContent",value:function(a){var b=this;a.forEach(function(a){return b.render(a)})}},{key:"renderInline",value:function(a){var b=this,c=[],d=function(a){var d=a?a.marks.slice():[];!c.length||"code"!=c[c.length-1].type||d.length&&"code"==d[d.length-1].type||(b.text("`",!1),c.pop());for(var e=0;e<c.length;e++){for(var f=c[e],g=!1,h=0;h<d.length;h++)if(d[h].eq(c[e])){d.splice(h,1),g=!0;break}g||(b.text(b.markString(f,!1),!1),c.splice(e--,1))}for(var e=0;e<d.length;e++){var f=d[e];c.push(f),b.text(b.markString(f,!0),!1)}a&&b.render(a)};a.forEach(d),d(null)}},{key:"renderList",value:function(a,b,c){var d=this;this.closed&&this.closed.type==a.type?this.flushClose(3):this.inTightList&&this.flushClose(1);var e=this.inTightList;this.inTightList=a.attrs.tight;for(var f,g=function(e,f,g){f&&a.attrs.tight&&d.flushClose(1),d.wrapBlock(b,c(f),a,function(){return d.render(g)})},h=a.iter(),i=0;f=h.next().value;i++)g(h,i,f);this.inTightList=e}},{key:"esc",value:function(a,b){return a=a.replace(/[`*\\~+\[\]]/g,"\\$&"),b&&(a=a.replace(/^[:#-]/,"\\$&")),a}},{key:"quote",value:function(a){var b=-1==a.indexOf('"')?'""':-1==a.indexOf("'")?"''":"()";return b[0]+a+b[1]}},{key:"repeat",value:function(a,b){for(var c="",d=0;d<b;d++)c+=a;return c}},{key:"markString",value:function(a,b){var c=b?a.type.openMarkdown:a.type.closeMarkdown;return"string"==typeof c?c:c(this,a)}}]),a}();f(i.BlockQuote,function(a,b){a.wrapBlock("> ",null,b,function(){return a.renderContent(b)})}),f(i.CodeBlock,function(a,b){null==b.attrs.params?a.wrapBlock("    ",null,b,function(){return a.text(b.textContent,!1)}):(a.write("```"+b.attrs.params+"\n"),a.text(b.textContent,!1),a.ensureNewLine(),a.write("```"),a.closeBlock(b))}),f(i.Heading,function(a,b){a.write(a.repeat("#",b.attrs.level)+" "),a.renderInline(b),a.closeBlock(b)}),f(i.HorizontalRule,function(a,b){a.write(b.attrs.markup||"---"),a.closeBlock(b)}),f(i.BulletList,function(a,b){a.renderList(b,"  ",function(){return(b.attrs.bullet||"*")+" "})}),f(i.OrderedList,function(a,b){var c=Number(b.attrs.order||1),d=String(c+b.size-1).length,e=a.repeat(" ",d+2);a.renderList(b,e,function(b){var e=String(c+b);return a.repeat(" ",d-e.length)+e+". "})}),f(i.ListItem,function(a,b){return a.renderContent(b)}),f(i.Paragraph,function(a,b){a.renderInline(b),a.closeBlock(b)}),f(i.Image,function(a,b){a.write("!["+a.esc(b.attrs.alt||"")+"]("+a.esc(b.attrs.src)+(b.attrs.title?" "+a.quote(b.attrs.title):"")+")")}),f(i.HardBreak,function(a){return a.write("\\\n")}),f(i.Text,function(a,b){return a.text(b.text)}),g(i.EmMark,"*","*"),g(i.StrongMark,"**","**"),g(i.LinkMark,"[",function(a,b){return"]("+a.esc(b.attrs.href)+(b.attrs.title?" "+a.quote(b.attrs.title):"")+")"}),g(i.CodeMark,"`","`")},{"../format":81,"../model":96}],88:[function(a,b,c){function d(a,b){var c=document.createElement("div");if(c.className=k,b.path){h[a]||e(a,b);var d=c.appendChild(document.createElementNS(i,"svg"));d.style.width=b.width/b.height+"em";d.appendChild(document.createElementNS(i,"use")).setAttributeNS(j,"href","#pm-icon-"+a)}else c.appendChild(document.createElement("span")).textContent=b.text,b.css&&(c.firstChild.style.cssText=b.css);return c}function e(a,b){g||(g=document.createElementNS(i,"svg"),g.style.display="none",document.body.insertBefore(g,document.body.firstChild));var c=document.createElementNS(i,"symbol");c.id="pm-icon-"+a,c.setAttribute("viewBox","0 0 "+b.width+" "+b.height),c.appendChild(document.createElementNS(i,"path")).setAttribute("d",b.path),g.appendChild(c),h[a]=!0}Object.defineProperty(c,"__esModule",{value:!0}),c.getIcon=d;var f=a("../dom"),g=null,h=Object.create(null),i="http://www.w3.org/2000/svg",j="http://www.w3.org/1999/xlink",k="ProseMirror-icon";(0,f.insertCSS)("\n."+k+" {\n  display: inline-block;\n  line-height: .8;\n  vertical-align: -2px; /* Compensate for padding */\n  padding: 2px 8px;\n  cursor: pointer;\n}\n\n."+k+" svg {\n  fill: currentColor;\n  height: 1em;\n}\n\n."+k+" span {\n  vertical-align: text-top;\n}")},{"../dom":62}],89:[function(a,b,c){function d(a){return a&&a.__esModule?a:{default:a}}function e(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function f(a,b){if(!b.label)return null;var c=b.name&&a.keyForCommand(b.name);return c?b.label+" ("+c+")":b.label}function g(a,b){for(var c=[],d=0;d<a.length;d++){var e=a[d].render(b);e&&c.push((0,l.elt)("div",{class:r+"-dropdown-item"},e))}return c.length||c.push((0,l.elt)("div",{class:r+"-dropdown-empty"},"(empty)")),c}function h(a,b){for(var c=void 0,d=Array.isArray(b),e=0;e<(d?b.length:1);e++){var f=d?b[e]:b;if(f instanceof t){var g=f.get(a);if(!d||1==b.length)return g;c=(c||b.slice(0,e)).concat(g)}else c&&c.push(f)}return c||(d?b:[b])}function i(a,b){for(var c=document.createDocumentFragment(),d=!1,e=0;e<b.length;e++){for(var f=h(a,b[e]),g=!1,i=0;i<f.length;i++){var k=f[i].render(a);k&&(!g&&d&&c.appendChild(j()),c.appendChild((0,l.elt)("span",{class:r+"item"},k)),g=!0)}g&&(d=!0)}return c}function j(){return(0,l.elt)("span",{class:r+"separator"})}var k=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}();Object.defineProperty(c,"__esModule",{value:!0}),c.historyGroup=c.blockGroup=c.headingGroup=c.insertMenu=c.inlineGroup=c.DropdownSubmenu=c.Dropdown=c.MenuCommandGroup=c.MenuCommand=void 0,c.resolveGroup=h,c.renderGrouped=i;var l=a("../dom"),m=a("../util/sortedinsert"),n=d(m),o=a("../util/obj"),p=a("../util/error"),q=a("./icons"),r="ProseMirror-menu",s=c.MenuCommand=function(){function a(b,c){e(this,a),this.command_=b,this.options=c}return k(a,[{key:"command",value:function(a){return"string"==typeof this.command_?a.commands[this.command_]:this.command_}},{key:"render",value:function(a){var b=this.command(a),c=!1;if(b){if("ignore"!=this.options.select&&!b.select(a)){if(null==this.options.select||"hide"==this.options.select)return null;"disable"==this.options.select&&(c=!0)}var d=this.options.display;d||p.AssertionError.raise("No display style defined for menu command "+b.name);var e=void 0;return d.render?e=d.render(b):"icon"==d.type?(e=(0,q.getIcon)(b.name,d),!c&&b.active(a)&&e.classList.add(r+"-active")):"label"==d.type?e=(0,l.elt)("div",null,d.label||b.spec.label):p.AssertionError.raise("Unsupported command display style: "+d.type),e.setAttribute("title",f(a,b)),this.options.class&&e.classList.add(this.options.class),c&&e.classList.add(r+"-disabled"),this.options.css&&(e.style.cssText+=this.options.css),e.addEventListener("mousedown",function(c){c.preventDefault(),c.stopPropagation(),a.signal("interaction"),b.exec(a,null,e)}),e}}}]),a}(),t=c.MenuCommandGroup=function(){function a(b,c){e(this,a),this.name=b,this.options=c}return k(a,[{key:"collect",value:function(a){var b=this,c=[];for(var d in a.commands){var e=a.commands[d],f=e.spec.menu;f&&f.group==this.name&&(0,n.default)(c,{cmd:e,rank:null==f.rank?50:f.rank},function(a,b){return a.rank-b.rank})}return c.map(function(a){var c=a.cmd.spec.menu;return b.options&&(c=(0,o.copyObj)(b.options,(0,o.copyObj)(c))),new s(a.cmd,c)})}},{key:"get",value:function(a){var b=a.mod.menuGroups||this.startGroups(a);return b[this.name]||(b[this.name]=this.collect(a))}},{key:"startGroups",value:function(a){var b=function b(){a.mod.menuGroups=null,a.off("commandsChanging",b)};return a.on("commandsChanging",b),a.mod.menuGroups=Object.create(null)}}]),a}(),u=(c.Dropdown=function(){function a(b,c){e(this,a),this.options=b||{},this.content=c}return k(a,[{key:"render",value:function(a){var b=this;if(0!=h(a,this.content).length){var c=this.options.activeLabel&&this.findActiveIn(this,a)||this.options.label,d=(0,l.elt)("div",{class:r+"-dropdown "+(this.options.class||""),style:this.options.css,title:this.options.title},c),e=null;return d.addEventListener("mousedown",function(c){c.preventDefault(),c.stopPropagation(),e=e&&e()?null:b.expand(a,d)}),d}}},{key:"expand",value:function(a,b){function c(){if(!j)return j=!0,a.off("interaction",c),a.wrapper.removeChild(i),!0}var d=g(h(a,this.content),a),e=b.getBoundingClientRect(),f=a.wrapper.getBoundingClientRect(),i=(0,l.elt)("div",{class:r+"-dropdown-menu "+(this.options.class||""),style:"left: "+(e.left-f.left)+"px; top: "+(e.bottom-f.top)+"px"},d),j=!1;return a.signal("interaction"),a.wrapper.appendChild(i),a.on("interaction",c),c}},{key:"findActiveIn",value:function(a,b){for(var c=h(b,a.content),d=0;d<c.length;d++){var e=c[d];if(e instanceof s){if(e.command(b).active(b))return e.options.activeLabel}else if(e instanceof u){var f=this.findActiveIn(e,b);if(f)return f}}}}]),a}(),c.DropdownSubmenu=function(){function a(b,c){e(this,a),this.options=b||{},this.content=c}return k(a,[{key:"render",value:function(a){var b=h(a,this.content);if(b.length){var c=(0,l.elt)("div",{class:r+"-submenu-label"},this.options.label),d=(0,l.elt)("div",{class:r+"-submenu-wrap"},c,(0,l.elt)("div",{class:r+"-submenu"},g(b,a)));return c.addEventListener("mousedown",function(a){a.preventDefault(),a.stopPropagation(),d.classList.toggle(r+"-submenu-wrap-active")}),d}}}]),a}());c.inlineGroup=new t("inline"),c.headingGroup=new t("heading"),c.blockGroup=new t("block"),c.historyGroup=new t("history");(0,l.insertCSS)("\n\n.ProseMirror-textblock-dropdown {\n  min-width: 3em;\n}\n\n."+r+" {\n  margin: 0 -4px;\n  line-height: 1;\n}\n\n.ProseMirror-tooltip ."+r+" {\n  width: -webkit-fit-content;\n  width: fit-content;\n  white-space: pre;\n}\n\n."+r+"item {\n  margin-right: 3px;\n  display: inline-block;\n}\n\n."+r+"separator {\n  border-right: 1px solid #ddd;\n  margin-right: 3px;\n}\n\n."+r+"-dropdown, ."+r+"-dropdown-menu {\n  font-size: 90%;\n}\n\n."+r+"-dropdown {\n  padding: 1px 14px 1px 4px;\n  display: inline-block;\n  vertical-align: 1px;\n  position: relative;\n  cursor: pointer;\n}\n\n."+r+'-dropdown:after {\n  content: "";\n  border-left: 4px solid transparent;\n  border-right: 4px solid transparent;\n  border-top: 4px solid currentColor;\n  opacity: .6;\n  position: absolute;\n  right: 2px;\n  top: calc(50% - 2px);\n}\n\n.'+r+"-dropdown-menu, ."+r+"-submenu {\n  position: absolute;\n  background: white;\n  color: #666;\n  border: 1px solid #aaa;\n  padding: 2px;\n}\n\n."+r+"-dropdown-menu {\n  z-index: 15;\n  min-width: 6em;\n}\n\n."+r+"-dropdown-item {\n  cursor: pointer;\n  padding: 2px 8px 2px 4px;\n}\n\n."+r+"-dropdown-item:hover {\n  background: #f2f2f2;\n}\n\n."+r+"-dropdown-empty {\n  opacity: 0.4;\n}\n\n."+r+"-submenu-wrap {\n  position: relative;\n  margin-right: -4px;\n}\n\n."+r+'-submenu-label:after {\n  content: "";\n  border-top: 4px solid transparent;\n  border-bottom: 4px solid transparent;\n  border-left: 4px solid currentColor;\n  opacity: .6;\n  position: absolute;\n  right: 4px;\n  top: calc(50% - 4px);\n}\n\n.'+r+"-submenu {\n  display: none;\n  min-width: 4em;\n  left: 100%;\n  top: -3px;\n}\n\n."+r+"-active {\n  background: #eee;\n  border-radius: 4px;\n}\n\n."+r+"-active {\n  background: #eee;\n  border-radius: 4px;\n}\n\n."+r+"-disabled {\n  opacity: .3;\n}\n\n."+r+"-submenu-wrap:hover ."+r+"-submenu, ."+r+"-submenu-wrap-active ."+r+"-submenu {\n  display: block;\n}\n")},{"../dom":62,"../util/error":114,"../util/obj":117,"../util/sortedinsert":118,"./icons":88}],90:[function(a,b,c){function d(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function e(a){for(var b=a.parentNode;b;b=b.parentNode)if(b.scrollHeight>b.clientHeight)return b}var f="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(a){return typeof a}:function(a){return a&&"function"==typeof Symbol&&a.constructor===Symbol?"symbol":typeof a},g="function"==typeof Symbol&&"symbol"===f(Symbol.iterator)?function(a){return void 0===a?"undefined":f(a)}:function(a){return a&&"function"==typeof Symbol&&a.constructor===Symbol?"symbol":void 0===a?"undefined":f(a)},h=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),i=a("../edit"),j=a("../dom"),k=a("../ui/update"),l=a("./menu"),m="ProseMirror-menubar";(0,i.defineOption)("menuBar",!1,function(a,b){a.mod.menuBar&&a.mod.menuBar.detach(),a.mod.menuBar=b?new o(a,b):null});var n=[l.inlineGroup,l.headingGroup,l.blockGroup,l.historyGroup],o=function(){function a(b,c){var e=this;d(this,a),this.pm=b,this.config=c||{},this.wrapper=b.wrapper.insertBefore((0,j.elt)("div",{class:m}),b.wrapper.firstChild),this.spacer=null,this.maxHeight=0,this.widthForMaxHeight=0,this.updater=new k.UpdateScheduler(b,"selectionChange change activeMarkChange commandsChanged",function(){return e.update()}),this.content=c.content||n,this.updater.force(),this.floating=!1,this.config.float&&(this.updateFloat(),this.scrollFunc=function(){document.body.contains(e.pm.wrapper)?e.updateFloat():window.removeEventListener("scroll",e.scrollFunc)},window.addEventListener("scroll",this.scrollFunc))}return h(a,[{key:"detach",value:function(){this.updater.detach(),this.wrapper.parentNode.removeChild(this.wrapper),this.scrollFunc&&window.removeEventListener("scroll",this.scrollFunc)}},{key:"update",value:function(){var a=this;return this.wrapper.textContent="",this.wrapper.appendChild((0,l.renderGrouped)(this.pm,this.content)),this.float?this.updateScrollCursor():function(){if(a.wrapper.offsetWidth!=a.widthForMaxHeight&&(a.widthForMaxHeight=a.wrapper.offsetWidth,a.maxHeight=0),a.wrapper.offsetHeight>a.maxHeight)return a.maxHeight=a.wrapper.offsetHeight,function(){a.wrapper.style.minHeight=a.maxHeight+"px"}}}},{key:"updateFloat",value:function(){var a=this.pm.wrapper.getBoundingClientRect();if(this.floating)if(a.top>=0||a.bottom<this.wrapper.offsetHeight+10)this.floating=!1,this.wrapper.style.position=this.wrapper.style.left=this.wrapper.style.width="",this.wrapper.style.display="",this.spacer.parentNode.removeChild(this.spacer),this.spacer=null;else{var b=(this.pm.wrapper.offsetWidth-this.pm.wrapper.clientWidth)/2;this.wrapper.style.left=a.left+b+"px",this.wrapper.style.display=a.top>window.innerHeight?"none":""}else if(a.top<0&&a.bottom>=this.wrapper.offsetHeight+10){this.floating=!0;var c=this.wrapper.getBoundingClientRect();this.wrapper.style.left=c.left+"px",this.wrapper.style.width=c.width+"px",this.wrapper.style.position="fixed",this.spacer=(0,j.elt)("div",{class:m+"-spacer",style:"height: "+c.height+"px"}),this.pm.wrapper.insertBefore(this.spacer,this.wrapper)}}},{key:"updateScrollCursor",value:function(){var a=this;if(!this.floating)return null;var b=this.pm.selection.head;return b?function(){var c=a.pm.coordsAtPos(b),d=a.wrapper.getBoundingClientRect();if(c.top<d.bottom&&c.bottom>d.top){var f=function(){var b=e(a.pm.wrapper);if(b)return{v:function(){b.scrollTop-=d.bottom-c.top}}}();if("object"===(void 0===f?"undefined":g(f)))return f.v}}:null}}]),a}();(0,j.insertCSS)("\n."+m+" {\n  border-top-left-radius: inherit;\n  border-top-right-radius: inherit;\n  position: relative;\n  min-height: 1em;\n  color: #666;\n  padding: 1px 6px;\n  top: 0; left: 0; right: 0;\n  border-bottom: 1px solid silver;\n  background: white;\n  z-index: 10;\n  -moz-box-sizing: border-box;\n  box-sizing: border-box;\n  overflow: visible;\n}\n")},{"../dom":62,"../edit":72,"../ui/update":113,"./menu":89}],91:[function(a,b,c){function d(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function e(){var a=window.getSelection().getRangeAt(0),b=a.getClientRects();if(!b.length)return a.getBoundingClientRect();for(var c=b[0],d=c.left,e=c.right,f=c.top,g=1;d==e&&b.length>g;){var h=b[g++];d=h.left,e=h.right,f=h.top}for(;g<b.length;g++)b[g].top<b[0].bottom-1&&(g==b.length-1||Math.abs(b[g+1].left-b[g].left)>1)&&(d=Math.min(d,b[g].left),e=Math.max(e,b[g].right),f=Math.min(f,b[g].top));return{top:f,left:(d+e)/2}}function f(a){var b=a.content.querySelector(".ProseMirror-selectednode");if(!b)return{left:0,top:0};var c=b.getBoundingClientRect();return{left:Math.min((c.left+c.right)/2,c.left+20),top:c.top}}var g=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),h=a("../model"),i=a("../edit"),j=a("../dom"),k=a("../ui/tooltip"),l=a("../ui/update"),m=a("./menu"),n="ProseMirror-tooltipmenu";(0,i.defineOption)("tooltipMenu",!1,function(a,b){a.mod.tooltipMenu&&a.mod.tooltipMenu.detach(),a.mod.tooltipMenu=b?new q(a,b):null});var o=[m.inlineGroup],p=[[m.headingGroup,m.blockGroup]],q=function(){function a(b,c){var e=this;d(this,a),this.pm=b,this.config=c||{},this.showLinks=!1!==this.config.showLinks,this.selectedBlockMenu=this.config.selectedBlockMenu,this.updater=new l.UpdateScheduler(b,"change selectionChange blur commandsChanged",function(){return e.update()}),this.onContextMenu=this.onContextMenu.bind(this),b.content.addEventListener("contextmenu",this.onContextMenu),this.tooltip=new k.Tooltip(b.wrapper,"above"),this.inlineContent=this.config.inlineContent||o,this.blockContent=this.config.blockContent||p,this.selectedBlockContent=this.config.selectedBlockContent||this.inlineContent.concat(this.blockContent)}return g(a,[{key:"detach",value:function(){this.updater.detach(),this.tooltip.detach(),this.pm.content.removeEventListener("contextmenu",this.onContextMenu)}},{key:"show",value:function(a,b){this.tooltip.open((0,j.elt)("div",null,(0,m.renderGrouped)(this.pm,a)),b)}},{key:"update",value:function(){var a=this,b=this.pm.selection,c=b.empty,d=b.node,g=b.from,i=b.to,j=void 0;if(this.pm.hasFocus()){if(d&&d.isBlock)return function(){var b=f(a.pm);return function(){return a.show(a.blockContent,b)}};if(!c)return function(){var b=d?f(a.pm):e(),c=a.selectedBlockMenu&&h.Pos.samePath(g.path,i.path)&&0==g.offset&&i.offset==a.pm.doc.path(g.path).size;return function(){return a.show(c?a.selectedBlockContent:a.inlineContent,b)}};if(this.selectedBlockMenu&&0==this.pm.doc.path(g.path).size)return function(){var b=a.pm.coordsAtPos(g);return function(){return a.show(a.blockContent,b)}};if(this.showLinks&&(j=this.linkUnderCursor()))return function(){var b=a.pm.coordsAtPos(g);return function(){return a.showLink(j,b)}};this.tooltip.close()}else this.tooltip.close()}},{key:"linkUnderCursor",value:function(){var a=this.pm.selection.head;return a?this.pm.doc.marksAt(a).reduce(function(a,b){return a||"link"==b.type.name&&b},null):null}},{key:"showLink",value:function(a,b){var c=(0,j.elt)("div",{class:n+"-linktext"},(0,j.elt)("a",{href:a.attrs.href,title:a.attrs.title},a.attrs.href));this.tooltip.open(c,b)}},{key:"onContextMenu",value:function(a){if(this.pm.selection.empty){var b=this.pm.posAtCoords({left:a.clientX,top:a.clientY});b&&b.isValid(this.pm.doc,!0)&&(this.pm.setTextSelection(b,b),this.pm.flush(),this.show(this.inlineContent,e()))}}}]),a}();(0,j.insertCSS)("\n\n."+n+"-linktext a {\n  color: #444;\n  text-decoration: none;\n  padding: 0 5px;\n}\n\n."+n+"-linktext a:hover {\n  text-decoration: underline;\n}\n\n")},{"../dom":62,"../edit":72,"../model":96,"../ui/tooltip":112,"../ui/update":113,"./menu":89}],
92:[function(a,b,c){function d(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function e(a,b){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!b||"object"!==(void 0===b?"undefined":g(b))&&"function"!=typeof b?a:b}function f(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+(void 0===b?"undefined":g(b)));a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}var g="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(a){return typeof a}:function(a){return a&&"function"==typeof Symbol&&a.constructor===Symbol?"symbol":typeof a},h=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}();Object.defineProperty(c,"__esModule",{value:!0}),c.defaultSchema=c.CodeMark=c.LinkMark=c.StrongMark=c.EmMark=c.HardBreak=c.Image=c.Paragraph=c.CodeBlock=c.Heading=c.HorizontalRule=c.ListItem=c.BulletList=c.OrderedList=c.BlockQuote=c.Doc=void 0;var i=a("./schema"),j=c.Doc=function(a){function b(){return d(this,b),e(this,Object.getPrototypeOf(b).apply(this,arguments))}return f(b,a),h(b,null,[{key:"kinds",get:function(){return"doc"}}]),b}(i.Block),k=c.BlockQuote=function(a){function b(){return d(this,b),e(this,Object.getPrototypeOf(b).apply(this,arguments))}return f(b,a),b}(i.Block),l=c.OrderedList=function(a){function b(){return d(this,b),e(this,Object.getPrototypeOf(b).apply(this,arguments))}return f(b,a),h(b,[{key:"contains",get:function(){return"list_item"}},{key:"attrs",get:function(){return{order:new i.Attribute({default:"1"})}}}]),b}(i.Block),m=c.BulletList=function(a){function b(){return d(this,b),e(this,Object.getPrototypeOf(b).apply(this,arguments))}return f(b,a),h(b,[{key:"contains",get:function(){return"list_item"}}]),b}(i.Block),n=c.ListItem=function(a){function b(){return d(this,b),e(this,Object.getPrototypeOf(b).apply(this,arguments))}return f(b,a),h(b,null,[{key:"kinds",get:function(){return"list_item"}}]),b}(i.Block),o=c.HorizontalRule=function(a){function b(){return d(this,b),e(this,Object.getPrototypeOf(b).apply(this,arguments))}return f(b,a),h(b,[{key:"contains",get:function(){return null}}]),b}(i.Block),p=c.Heading=function(a){function b(){return d(this,b),e(this,Object.getPrototypeOf(b).apply(this,arguments))}return f(b,a),h(b,[{key:"attrs",get:function(){return{level:new i.Attribute({default:"1"})}}},{key:"maxLevel",get:function(){return 3}}]),b}(i.Textblock),q=c.CodeBlock=function(a){function b(){return d(this,b),e(this,Object.getPrototypeOf(b).apply(this,arguments))}return f(b,a),h(b,[{key:"contains",get:function(){return"text"}},{key:"containsMarks",get:function(){return!1}},{key:"isCode",get:function(){return!0}}]),b}(i.Textblock),r=c.Paragraph=function(a){function b(){return d(this,b),e(this,Object.getPrototypeOf(b).apply(this,arguments))}return f(b,a),h(b,[{key:"defaultTextblock",get:function(){return!0}}]),b}(i.Textblock),s=c.Image=function(a){function b(){return d(this,b),e(this,Object.getPrototypeOf(b).apply(this,arguments))}return f(b,a),h(b,[{key:"attrs",get:function(){return{src:new i.Attribute,alt:new i.Attribute({default:""}),title:new i.Attribute({default:""})}}},{key:"draggable",get:function(){return!0}}]),b}(i.Inline),t=c.HardBreak=function(a){function b(){return d(this,b),e(this,Object.getPrototypeOf(b).apply(this,arguments))}return f(b,a),h(b,[{key:"selectable",get:function(){return!1}},{key:"isBR",get:function(){return!0}}]),b}(i.Inline),u=c.EmMark=function(a){function b(){return d(this,b),e(this,Object.getPrototypeOf(b).apply(this,arguments))}return f(b,a),h(b,null,[{key:"rank",get:function(){return 51}}]),b}(i.MarkType),v=c.StrongMark=function(a){function b(){return d(this,b),e(this,Object.getPrototypeOf(b).apply(this,arguments))}return f(b,a),h(b,null,[{key:"rank",get:function(){return 52}}]),b}(i.MarkType),w=c.LinkMark=function(a){function b(){return d(this,b),e(this,Object.getPrototypeOf(b).apply(this,arguments))}return f(b,a),h(b,[{key:"attrs",get:function(){return{href:new i.Attribute,title:new i.Attribute({default:""})}}}],[{key:"rank",get:function(){return 25}}]),b}(i.MarkType),x=c.CodeMark=function(a){function b(){return d(this,b),e(this,Object.getPrototypeOf(b).apply(this,arguments))}return f(b,a),h(b,[{key:"isCode",get:function(){return!0}}],[{key:"rank",get:function(){return 101}}]),b}(i.MarkType),y=new i.SchemaSpec({doc:j,blockquote:k,ordered_list:l,bullet_list:m,list_item:n,horizontal_rule:o,paragraph:r,heading:p,code_block:q,text:i.Text,image:s,hard_break:t},{em:u,strong:v,link:w,code:x});c.defaultSchema=new i.Schema(y)},{"./schema":100}],93:[function(a,b,c){function d(a,b){for(var c=arguments.length<=2||void 0===arguments[2]?[]:arguments[2],e=a.iter(),g=b.iter(),h=0;;){if(e.atEnd()||g.atEnd()){if(a.size==b.size)return null;break}var i=e.next(),j=g.next();if(i!=j){if(!i.sameMarkup(j))break;if(i.isText&&i.text!=j.text){for(var k=0;i.text[k]==j.text[k];k++)h++;break}if(i.size||j.size){c.push(h);var l=d(i.content,j.content,c);if(l)return l;c.pop()}h+=i.width}else h+=i.width}return new f.Pos(c,h)}function e(a,b){for(var c=arguments.length<=2||void 0===arguments[2]?[]:arguments[2],d=arguments.length<=3||void 0===arguments[3]?[]:arguments[3],g=a.reverseIter(),h=b.reverseIter(),i=a.size,j=b.size;;){if(g.atEnd()||h.atEnd()){if(a.size==b.size)return null;break}var k=g.next(),l=h.next();if(k!=l){if(!k.sameMarkup(l))break;if(k.isText&&k.text!=l.text){for(var m=0,n=Math.min(k.text.length,l.text.length);m<n&&k.text[k.text.length-m-1]==l.text[l.text.length-m-1];)m++,i--,j--;break}if(i-=k.width,j-=l.width,k.size||l.size){c.push(i),d.push(j);var o=e(k.content,l.content,c,d);if(o)return o;c.pop(),d.pop()}}else i-=k.width,j-=l.width}return{a:new f.Pos(c,i),b:new f.Pos(d,j)}}Object.defineProperty(c,"__esModule",{value:!0}),c.findDiffStart=d,c.findDiffEnd=e;var f=a("./pos")},{"./pos":99}],94:[function(a,b,c){function d(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function e(a,b){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!b||"object"!==(void 0===b?"undefined":g(b))&&"function"!=typeof b?a:b}function f(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+(void 0===b?"undefined":g(b)));a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}var g="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(a){return typeof a}:function(a){return a&&"function"==typeof Symbol&&a.constructor===Symbol?"symbol":typeof a};Object.defineProperty(c,"__esModule",{value:!0}),c.ModelError=void 0;var h=a("../util/error");c.ModelError=function(a){function b(){return d(this,b),e(this,Object.getPrototypeOf(b).apply(this,arguments))}return f(b,a),b}(h.ProseMirrorError)},{"../util/error":114}],95:[function(a,b,c){function d(a,b){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!b||"object"!==(void 0===b?"undefined":g(b))&&"function"!=typeof b?a:b}function e(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+(void 0===b?"undefined":g(b)));a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}function f(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}var g="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(a){return typeof a}:function(a){return a&&"function"==typeof Symbol&&a.constructor===Symbol?"symbol":typeof a},h=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}();Object.defineProperty(c,"__esModule",{value:!0}),c.emptyFragment=c.Fragment=void 0;var i=a("./error"),j=c.Fragment=function(){function a(){f(this,a)}return h(a,[{key:"append",value:function(a){var b=arguments.length<=1||void 0===arguments[1]?0:arguments[1],c=arguments.length<=2||void 0===arguments[2]?0:arguments[2];return this.size?a.size?this.appendInner(a,b,c):b?this.replace(this.size-1,this.lastChild.close(b-1,"end")):this:c?a.replace(0,a.firstChild.close(c-1,"start")):a}},{key:"toString",value:function(){var a="";return this.forEach(function(b){return a+=(a?", ":"")+b.toString()}),a}},{key:"toArray",value:function(){for(var a,b=arguments.length<=0||void 0===arguments[0]?0:arguments[0],c=arguments.length<=1||void 0===arguments[1]?this.size:arguments[1],d=arguments[2],e=[],f=this.iter(b,c);a=f.next().value;)e.push(d?d(a):a);return e}},{key:"map",value:function(b){return a.fromArray(this.toArray(void 0,void 0,b))}},{key:"some",value:function(a){for(var b,c=this.iter();b=c.next().value;)if(a(b))return b}},{key:"close",value:function(a,b){var c="start"==b?this.firstChild:this.lastChild,d=c.close(a-1,b);return d==c?this:this.replace("start"==b?0:this.size-1,d)}},{key:"nodesBetween",value:function(a,b,c,d,e){for(var f,g=a&&a.depth>d.length,h=b&&b.depth>d.length,i=g?a.path[d.length]:a?a.offset:0,j=h?b.path[d.length]+1:b?b.offset:this.size,k=this.iter(i,j);f=k.next().value;){var l=k.offset-f.width;d.push(l),f.nodesBetween(g&&l==i?a:null,h&&k.offset==j?b:null,c,d,e),d.pop()}}},{key:"sliceBetween",value:function(a,b){for(var c,d=arguments.length<=2||void 0===arguments[2]?0:arguments[2],e=a&&a.depth>d,f=b&&b.depth>d,g=e?a.path[d]:a?a.offset:0,h=f?b.path[d]+1:b?b.offset:this.size,i=[],j=this.iter(g,h);c=j.next().value;){var k=e&&j.offset-c.width==g?a:null,l=f&&j.offset==h?b:null;(k||l)&&(c=c.sliceBetween(k,l,d+1)),i.push(c)}return new this.constructor(i)}},{key:"textContent",get:function(){var a="";return this.forEach(function(b){return a+=b.textContent}),a}}],[{key:"fromJSON",value:function(a,b){return b?this.fromArray(b.map(a.nodeFromJSON)):o}},{key:"fromArray",value:function(a){if(!a.length)return o;for(var b=!1,c=void 0,d=0;d<a.length;d++){var e=a[d];e.isText&&(b=!0,d&&a[d-1].sameMarkup(e))?(c||(c=a.slice(0,d)),c[c.length-1]=e.copy(c[c.length-1].text+e.text)):c&&c.push(e)}return b?new r(c||a):new n(a)}},{key:"from",value:function(b){return b?b instanceof a?b:this.fromArray(Array.isArray(b)?b:[b]):o}}]),a}(),k={done:!0},l=function(){function a(b,c,d){f(this,a),this.array=b,this.pos=c,this.end=d}return h(a,[{key:"copy",value:function(){return new this.constructor(this.array,this.pos,this.end)}},{key:"atEnd",value:function(){return this.pos==this.end}},{key:"next",value:function(){return this.pos==this.end?k:this.array[this.pos++]}},{key:"offset",get:function(){return this.pos}}]),a}(),m=function(a){function b(){return f(this,b),d(this,Object.getPrototypeOf(b).apply(this,arguments))}return e(b,a),h(b,[{key:"next",value:function(){return this.pos==this.end?k:this.array[--this.pos]}}]),b}(l),n=function(a){function b(a){f(this,b);var c=d(this,Object.getPrototypeOf(b).call(this));return c.content=a,c}return e(b,a),h(b,[{key:"iter",value:function(){var a=arguments.length<=0||void 0===arguments[0]?0:arguments[0],b=arguments.length<=1||void 0===arguments[1]?this.size:arguments[1];return new l(this.content,a,b)}},{key:"reverseIter",value:function(){var a=arguments.length<=0||void 0===arguments[0]?this.size:arguments[0],b=arguments.length<=1||void 0===arguments[1]?0:arguments[1];return new m(this.content,a,b)}},{key:"child",value:function(a){return(a<0||a>=this.content.length)&&i.ModelError.raise("Offset "+a+" out of range"),this.content[a]}},{key:"forEach",value:function(a){for(var b=0;b<this.content.length;b++)a(this.content[b],b,b+1)}},{key:"chunkBefore",value:function(a){return{node:this.child(a-1),start:a-1}}},{key:"chunkAfter",value:function(a){return{node:this.child(a),start:a}}},{key:"slice",value:function(a){var c=arguments.length<=1||void 0===arguments[1]?this.size:arguments[1];return a==c?o:new b(this.content.slice(a,c))}},{key:"replace",value:function(a,c){c.isText&&i.ModelError.raise("Argument to replace should be a non-text node");var d=this.content.slice();return d[a]=c,new b(d)}},{key:"appendInner",value:function(a,b,c){var d=this.content.length-1,e=this.content.slice(0,d),f=this.content[d],g=a.firstChild;return b>0&&c>0&&f.sameMarkup(g)?e.push(f.append(g.content,b-1,c-1)):e.push(f.close(b-1,"end"),g.close(c-1,"start")),j.fromArray(e.concat(a.toArray(g.width)))}},{key:"toJSON",value:function(){return this.content.map(function(a){return a.toJSON()})}},{key:"size",get:function(){return this.content.length}},{key:"firstChild",get:function(){return this.content.length?this.content[0]:null}},{key:"lastChild",get:function(){return this.content.length?this.content[this.content.length-1]:null}}]),b}(j),o=c.emptyFragment=new n([]),p=function(){function a(b,c,d){var e=arguments.length<=3||void 0===arguments[3]?-1:arguments[3];f(this,a),this.frag=b,this.offset=c,this.pos=e,this.endOffset=d}return h(a,[{key:"copy",value:function(){return new this.constructor(this.frag,this.offset,this.endOffset,this.pos)}},{key:"atEnd",value:function(){return this.offset==this.endOffset}},{key:"next",value:function(){if(-1==this.pos){var a=this.init();if(a)return a}return this.offset==this.endOffset?k:this.advance()}},{key:"advance",value:function(){var a=this.frag.content[this.pos++],b=this.offset+a.width;return b>this.endOffset?(a=a.copy(a.text.slice(0,this.endOffset-this.offset)),this.offset=this.endOffset,a):(this.offset=b,a)}},{key:"init",value:function(){this.pos=0;for(var a=0;a<this.offset;){var b=this.frag.content[this.pos++],c=a+b.width;if(c==this.offset)break;if(c>this.offset){var d=b.width;return c>this.endOffset&&(d=this.endOffset-a,c=this.endOffset),b=b.copy(b.text.slice(this.offset-a,d)),this.offset=c,b}a=c}}}]),a}(),q=function(a){function b(){return f(this,b),d(this,Object.getPrototypeOf(b).apply(this,arguments))}return e(b,a),h(b,[{key:"advance",value:function(){var a=this.frag.content[--this.pos],b=this.offset-a.width;return b<this.endOffset?(a=a.copy(a.text.slice(this.endOffset-b)),this.offset=this.endOffset,a):(this.offset=b,a)}},{key:"init",value:function(){this.pos=this.frag.content.length;for(var a=this.frag.size;a>this.offset;){var b=this.frag.content[--this.pos],c=a-b.width;if(c==this.offset)break;if(c<this.offset)return c<this.endOffset?(b=b.copy(b.text.slice(this.endOffset-c,this.offset-c)),c=this.endOffset):b=b.copy(b.text.slice(0,this.offset-c)),this.offset=c,b;a=c}}}]),b}(p),r=function(a){function b(a,c){f(this,b);var e=d(this,Object.getPrototypeOf(b).call(this));if(e.content=a,e.size=c||0,null==c)for(var g=0;g<a.length;g++)e.size+=a[g].width;return e}return e(b,a),h(b,[{key:"iter",value:function(){var a=arguments.length<=0||void 0===arguments[0]?0:arguments[0],b=arguments.length<=1||void 0===arguments[1]?this.size:arguments[1];return new p(this,a,b)}},{key:"reverseIter",value:function(){var a=arguments.length<=0||void 0===arguments[0]?this.size:arguments[0],b=arguments.length<=1||void 0===arguments[1]?0:arguments[1];return new q(this,a,b)}},{key:"child",value:function(a){(a<0||a>=this.size)&&i.ModelError.raise("Offset "+a+" out of range");for(var b=0,c=0;b<this.content.length;b++){var d=this.content[b];if((c+=d.width)>a)return d}}},{key:"forEach",value:function(a){for(var b=0,c=0;b<this.content.length;b++){var d=this.content[b];a(d,c,c+=d.width)}}},{key:"chunkBefore",value:function(a){a||i.ModelError.raise("No chunk before start of node");for(var b=0,c=0;b<this.content.length;b++){var d=this.content[b],e=c+d.width;if(e>=a)return{node:d,start:c};c=e}}},{key:"chunkAfter",value:function(a){a==this.size&&i.ModelError.raise("No chunk after end of node");for(var b=0,c=0;b<this.content.length;b++){var d=this.content[b],e=c+d.width;if(e>a)return{node:d,start:c};c=e}}},{key:"slice",value:function(){var a=arguments.length<=0||void 0===arguments[0]?0:arguments[0],c=arguments.length<=1||void 0===arguments[1]?this.size:arguments[1];return a==c?o:new b(this.toArray(a,c))}},{key:"replace",value:function(a,c){c.isText&&i.ModelError.raise("Argument to replace should be a non-text node");for(var d=void 0,e=void 0,f=0;f<a;e++)d=this.content[e],f+=d.width;d.isText&&i.ModelError.raise("Can not replace text content with replace method");var g=this.content.slice();return g[e]=c,new b(g)}},{key:"appendInner",value:function(a,b,c){var d=this.content.length-1,e=this.content.slice(0,d),f=this.content[d],g=a.firstChild,h=f.sameMarkup(g);return h&&f.isText?e.push(f.copy(f.text+g.text)):h&&b>0&&c>0?e.push(f.append(g.content,b-1,c-1)):e.push(f.close(b-1,"end"),g.close(c-1,"start")),j.fromArray(e.concat(a.toArray(g.width)))}},{key:"toJSON",value:function(){return this.content.map(function(a){return a.toJSON()})}},{key:"firstChild",get:function(){return this.size?this.content[0]:null}},{key:"lastChild",get:function(){return this.size?this.content[this.content.length-1]:null}}]),b}(j);"undefined"!=typeof Symbol&&(j.prototype[Symbol.iterator]=function(){return this.iter()},l.prototype[Symbol.iterator]=p.prototype[Symbol.iterator]=function(){return this})},{"./error":94}],96:[function(a,b,c){Object.defineProperty(c,"__esModule",{value:!0});var d=a("./node");Object.defineProperty(c,"Node",{enumerable:!0,get:function(){return d.Node}});var e=a("./fragment");Object.defineProperty(c,"Fragment",{enumerable:!0,get:function(){return e.Fragment}}),Object.defineProperty(c,"emptyFragment",{enumerable:!0,get:function(){return e.emptyFragment}});var f=a("./mark");Object.defineProperty(c,"Mark",{enumerable:!0,get:function(){return f.Mark}});var g=a("./schema");Object.defineProperty(c,"SchemaSpec",{enumerable:!0,get:function(){return g.SchemaSpec}}),Object.defineProperty(c,"Schema",{enumerable:!0,get:function(){return g.Schema}}),Object.defineProperty(c,"SchemaError",{enumerable:!0,get:function(){return g.SchemaError}}),Object.defineProperty(c,"NodeType",{enumerable:!0,get:function(){return g.NodeType}}),Object.defineProperty(c,"Block",{enumerable:!0,get:function(){return g.Block}}),Object.defineProperty(c,"Textblock",{enumerable:!0,get:function(){return g.Textblock}}),Object.defineProperty(c,"Inline",{enumerable:!0,get:function(){return g.Inline}}),Object.defineProperty(c,"Text",{enumerable:!0,get:function(){return g.Text}}),Object.defineProperty(c,"MarkType",{enumerable:!0,get:function(){return g.MarkType}}),Object.defineProperty(c,"Attribute",{enumerable:!0,get:function(){return g.Attribute}});var h=a("./defaultschema");Object.defineProperty(c,"defaultSchema",{enumerable:!0,get:function(){return h.defaultSchema}}),Object.defineProperty(c,"Doc",{enumerable:!0,get:function(){return h.Doc}}),Object.defineProperty(c,"BlockQuote",{enumerable:!0,get:function(){return h.BlockQuote}}),Object.defineProperty(c,"OrderedList",{enumerable:!0,get:function(){return h.OrderedList}}),Object.defineProperty(c,"BulletList",{enumerable:!0,get:function(){return h.BulletList}}),Object.defineProperty(c,"ListItem",{enumerable:!0,get:function(){return h.ListItem}}),Object.defineProperty(c,"HorizontalRule",{enumerable:!0,get:function(){return h.HorizontalRule}}),Object.defineProperty(c,"Paragraph",{enumerable:!0,get:function(){return h.Paragraph}}),Object.defineProperty(c,"Heading",{enumerable:!0,get:function(){return h.Heading}}),Object.defineProperty(c,"CodeBlock",{enumerable:!0,get:function(){return h.CodeBlock}}),Object.defineProperty(c,"Image",{enumerable:!0,get:function(){return h.Image}}),Object.defineProperty(c,"HardBreak",{enumerable:!0,get:function(){return h.HardBreak}}),Object.defineProperty(c,"CodeMark",{enumerable:!0,get:function(){return h.CodeMark}}),Object.defineProperty(c,"EmMark",{enumerable:!0,get:function(){return h.EmMark}}),Object.defineProperty(c,"StrongMark",{enumerable:!0,get:function(){return h.StrongMark}}),Object.defineProperty(c,"LinkMark",{enumerable:!0,get:function(){return h.LinkMark}});var i=a("./pos");Object.defineProperty(c,"Pos",{enumerable:!0,get:function(){return i.Pos}});var j=a("./diff");Object.defineProperty(c,"findDiffStart",{enumerable:!0,get:function(){return j.findDiffStart}}),Object.defineProperty(c,"findDiffEnd",{enumerable:!0,get:function(){return j.findDiffEnd}});var k=a("./error");Object.defineProperty(c,"ModelError",{enumerable:!0,get:function(){return k.ModelError}})},{"./defaultschema":92,"./diff":93,"./error":94,"./fragment":95,"./mark":97,"./node":98,"./pos":99,"./schema":100}],97:[function(a,b,c){function d(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}var e=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}();Object.defineProperty(c,"__esModule",{value:!0});var f=(c.Mark=function(){function a(b,c){d(this,a),this.type=b,this.attrs=c}return e(a,[{key:"toJSON",value:function(){var a={_:this.type.name};for(var b in this.attrs)a[b]=this.attrs[b];return a}},{key:"addToSet",value:function(a){for(var b=0;b<a.length;b++){var c=a[b];if(c.type==this.type)return this.eq(c)?a:a.slice(0,b).concat(this).concat(a.slice(b+1));if(c.type.rank>this.type.rank)return a.slice(0,b).concat(this).concat(a.slice(b))}return a.concat(this)}},{key:"removeFromSet",value:function(a){for(var b=0;b<a.length;b++)if(this.eq(a[b]))return a.slice(0,b).concat(a.slice(b+1));return a}},{key:"isInSet",value:function(a){for(var b=0;b<a.length;b++)if(this.eq(a[b]))return!0;return!1}},{key:"eq",value:function(a){if(this==a)return!0;if(this.type!=a.type)return!1;for(var b in this.attrs)if(a.attrs[b]!=this.attrs[b])return!1;return!0}}],[{key:"sameSet",value:function(a,b){if(a==b)return!0;if(a.length!=b.length)return!1;for(var c=0;c<a.length;c++)if(!a[c].eq(b[c]))return!1;return!0}},{key:"setFrom",value:function(b){if(!b||0==b.length)return f;if(b instanceof a)return[b];var c=b.slice();return c.sort(function(a,b){return a.type.rank-b.type.rank}),c}}]),a}(),[])},{}],98:[function(a,b,c){function d(a,b){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!b||"object"!==(void 0===b?"undefined":h(b))&&"function"!=typeof b?a:b}function e(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+(void 0===b?"undefined":h(b)));a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}function f(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function g(a,b){for(var c=a.length-1;c>=0;c--)b=a[c].type.name+"("+b+")";return b}var h="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(a){return typeof a}:function(a){return a&&"function"==typeof Symbol&&a.constructor===Symbol?"symbol":typeof a},i=function a(b,c,d){null===b&&(b=Function.prototype);var e=Object.getOwnPropertyDescriptor(b,c);if(void 0===e){var f=Object.getPrototypeOf(b);return null===f?void 0:a(f,c,d)}if("value"in e)return e.value;var g=e.get;if(void 0!==g)return g.call(d)},j=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}();Object.defineProperty(c,"__esModule",{value:!0}),c.TextNode=c.Node=void 0;var k=a("./fragment"),l=a("./mark"),m=a("./pos"),n=[],o=Object.create(null),p=function(){function a(b,c,d,e){f(this,a),this.type=b,this.attrs=c,this.content=d||k.emptyFragment,this.marks=e||n}return j(a,[{key:"child",value:function(a){return this.content.child(a)}},{key:"iter",value:function(a,b){return this.content.iter(a,b)}},{key:"reverseIter",value:function(a,b){return this.content.reverseIter(a,b)}},{key:"chunkBefore",value:function(a){return this.content.chunkBefore(a)}},{key:"chunkAfter",value:function(a){return this.content.chunkAfter(a)}},{key:"forEach",value:function(a){this.content.forEach(a)}},{key:"sameMarkup",value:function(a){return this.hasMarkup(a.type,a.attrs,a.marks)}},{key:"hasMarkup",value:function(b,c,d){return this.type==b&&a.sameAttrs(this.attrs,c||o)&&l.Mark.sameSet(this.marks,d||n)}},{key:"copy",value:function(){var a=arguments.length<=0||void 0===arguments[0]?null:arguments[0];return new this.constructor(this.type,this.attrs,a,this.marks)}},{key:"mark",value:function(a){return new this.constructor(this.type,this.attrs,this.content,a)}},{key:"slice",value:function(a,b){return this.copy(this.content.slice(a,b))}},{key:"splice",value:function(a,b,c){return this.copy(this.content.slice(0,a).append(c).append(this.content.slice(b)))}},{key:"append",value:function(a){var b=arguments.length<=1||void 0===arguments[1]?0:arguments[1],c=arguments.length<=2||void 0===arguments[2]?0:arguments[2];return this.copy(this.content.append(a,b,c))}},{key:"replace",value:function(a,b){return this.copy(this.content.replace(a,b))}},{key:"replaceDeep",value:function(a,b){var c=arguments.length<=2||void 0===arguments[2]?0:arguments[2];if(c==a.length)return b;var d=a[c];return this.replace(d,this.child(d).replaceDeep(a,b,c+1))}},{key:"close",value:function(a,b){if(0==a&&0==this.size&&!this.type.canBeEmpty)return this.copy(this.type.defaultContent());var c=void 0;return a>0&&(c=this.content.close(a-1,b))!=this.content?this.copy(c):this}},{key:"path",value:function(a){for(var b=0,c=this;b<a.length;c=c.child(a[b]),b++);return c}},{key:"nodeAfter",value:function(a){var b=this.path(a.path);return a.offset<b.size?b.child(a.offset):null}},{key:"pathNodes",value:function(a){for(var b=[],c=0,d=this;b.push(d),c!=a.length;c++)d=d.child(a[c]);return b}},{key:"siblingRange",value:function(a,b){for(var c=0,d=this;;c++){if(d.isTextblock){var e=a.path.slice(0,c-1),f=a.path[c-1];return{from:new m.Pos(e,f),to:new m.Pos(e,f+1)}}var g=c==a.path.length,h=c==b.path.length,i=g?a.offset:a.path[c],j=h?b.offset:b.path[c];if(g||h||i!=j){var e=a.path.slice(0,c);return{from:new m.Pos(e,i),to:new m.Pos(e,j+(h?0:1))}}d=d.child(i)}}},{key:"nodesBetween",value:function(a,b,c){var d=arguments.length<=3||void 0===arguments[3]?[]:arguments[3];!1!==c(this,d,arguments.length<=4||void 0===arguments[4]?null:arguments[4])&&this.content.nodesBetween(a,b,c,d,this)}},{key:"inlineNodesBetween",value:function(a,b,c){this.nodesBetween(a,b,function(a,b,d){if(a.isInline){var e=b.length-1;c(a,b.slice(0,e),b[e],b[e]+a.width,d)}})}},{key:"sliceBetween",value:function(a,b){var c=arguments.length<=2||void 0===arguments[2]?0:arguments[2];return this.copy(this.content.sliceBetween(a,b,c))}},{key:"marksAt",value:function(a){var b=this.path(a.path);return b.isTextblock&&b.size?b.chunkBefore(a.offset||1).node.marks:n}},{key:"rangeHasMark",value:function(a,b,c){var d=!1;return this.nodesBetween(a,b,function(a){c.isInSet(a.marks)&&(d=!0)}),d}},{key:"toString",value:function(){var a=this.type.name;return this.content.size&&(a+="("+this.content.toString()+")"),g(this.marks,a)}},{key:"toJSON",value:function(){var a={type:this.type.name};for(var b in this.attrs){a.attrs=this.attrs;break}return this.size&&(a.content=this.content.toJSON()),this.marks.length&&(a.marks=this.marks.map(function(a){return a.toJSON()})),a}},{key:"size",get:function(){return this.content.size}},{key:"width",get:function(){return 1}},{key:"textContent",get:function(){return this.content.textContent}},{key:"firstChild",get:function(){return this.content.firstChild}},{key:"lastChild",get:function(){return this.content.lastChild}},{key:"isBlock",get:function(){return this.type.isBlock}},{key:"isTextblock",get:function(){return this.type.isTextblock}},{key:"isInline",get:function(){return this.type.isInline}},{key:"isText",get:function(){return this.type.isText}},{key:"value",get:function(){return this}}],[{key:"sameAttrs",value:function(a,b){if(a==b)return!0;for(var c in a)if(a[c]!==b[c])return!1;return!0}},{key:"fromJSON",value:function(a,b){var c=a.nodeType(b.type),d=null!=b.text?b.text:k.Fragment.fromJSON(a,b.content);return c.create(b.attrs,d,b.marks&&b.marks.map(a.markFromJSON))}}]),a}();c.Node=p,"undefined"!=typeof Symbol&&(p.prototype[Symbol.iterator]=function(){return this.iter()});c.TextNode=function(a){function b(a,c,e,g){f(this,b);var h=d(this,Object.getPrototypeOf(b).call(this,a,c,null,g));return h.text=e,h}return e(b,a),j(b,[{key:"toString",value:function(){return g(this.marks,JSON.stringify(this.text))}},{key:"mark",value:function(a){return new b(this.type,this.attrs,this.text,a)}},{key:"toJSON",value:function(){var a=i(Object.getPrototypeOf(b.prototype),"toJSON",this).call(this);return a.text=this.text,a}},{key:"textContent",get:function(){return this.text}},{key:"width",get:function(){return this.text.length}}]),b}(p)},{"./fragment":95,"./mark":97,"./pos":99}],99:[function(a,b,c){function d(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}var e=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}();Object.defineProperty(c,"__esModule",{value:!0}),c.Pos=void 0;var f=a("./error");c.Pos=function(){function a(b,c){d(this,a),this.path=b,this.offset=c}return e(a,[{key:"toString",value:function(){return this.path.join("/")+":"+this.offset}},{key:"max",value:function(a){return this.cmp(a)>0?this:a}},{key:"min",value:function(a){return this.cmp(a)<0?this:a}},{key:"cmp",value:function(b){return b==this?0:a.cmp(this.path,this.offset,b.path,b.offset)}},{key:"shorten",value:function(){var b=arguments.length<=0||void 0===arguments[0]?null:arguments[0],c=arguments.length<=1||void 0===arguments[1]?0:arguments[1];return b>=this.depth?this:a.shorten(this.path,b,c)}},{key:"move",value:function(b){return new a(this.path,this.offset+b)}},{key:"toPath",value:function(){var a=arguments.length<=0||void 0===arguments[0]?0:arguments[0];return this.path.concat(this.offset+a)}},{key:"extend",value:function(b){for(var c=this.path.slice(),d=this.offset,e=0;e<b.path.length;e++)c.push(b.path[e]+d),d=0;return new a(c,b.offset+d)}},{key:"isValid",value:function(a,b){for(var c=0,d=a;;c++){if(c==this.path.length)return!(b&&!d.isTextblock)&&this.offset<=d.size;var e=this.path[c];if(e>=d.size)return!1;d=d.child(e)}}},{key:"toJSON",value:function(){return this}},{key:"depth",get:function(){return this.path.length}}],[{key:"cmp",value:function(a,b,c,d){for(var e=a.length,f=c.length,g=0,h=Math.min(e,f);g<h;g++){var i=a[g]-c[g];if(0!=i)return i}return e>f?d<=a[g]?1:-1:f>e?b<=c[g]?-1:1:b-d}},{key:"samePath",value:function(a,b){if(a.length!=b.length)return!1;for(var c=0;c<a.length;c++)if(a[c]!==b[c])return!1;return!0}},{key:"shorten",value:function(b){var c=arguments.length<=1||void 0===arguments[1]?null:arguments[1],d=arguments.length<=2||void 0===arguments[2]?0:arguments[2];return null==c&&(c=b.length-1),new a(b.slice(0,c),b[c]+d)}},{key:"from",value:function(b){var c=arguments.length<=1||void 0===arguments[1]?0:arguments[1];return b.length||f.ModelError.raise("Can't create a pos from an empty array"),new a(b.slice(0,b.length-1),b[b.length-1]+c)}},{key:"fromJSON",value:function(b){return new a(b.path,b.offset)}}]),a}()},{"./error":94}],100:[function(a,b,c){function d(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function e(a,b){
if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!b||"object"!==(void 0===b?"undefined":h(b))&&"function"!=typeof b?a:b}function f(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+(void 0===b?"undefined":h(b)));a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}function g(a,b){var c=(0,n.copyObj)(a);for(var d in b){var e=b[d];null==e?delete c[d]:c[d]=e}return c}var h="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(a){return typeof a}:function(a){return a&&"function"==typeof Symbol&&a.constructor===Symbol?"symbol":typeof a},i=function a(b,c,d){null===b&&(b=Function.prototype);var e=Object.getOwnPropertyDescriptor(b,c);if(void 0===e){var f=Object.getPrototypeOf(b);return null===f?void 0:a(f,c,d)}if("value"in e)return e.value;var g=e.get;if(void 0!==g)return g.call(d)},j=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}();Object.defineProperty(c,"__esModule",{value:!0}),c.Schema=c.SchemaSpec=c.MarkType=c.Attribute=c.Text=c.Inline=c.Textblock=c.Block=c.NodeType=c.SchemaError=void 0;var k=a("./node"),l=a("./fragment"),m=a("./mark"),n=a("../util/obj"),o=a("../util/error"),p=c.SchemaError=function(a){function b(){return d(this,b),e(this,Object.getPrototypeOf(b).apply(this,arguments))}return f(b,a),b}(o.ProseMirrorError),q=function(){function a(){d(this,a)}return j(a,[{key:"getDefaultAttrs",value:function(){var a=Object.create(null);for(var b in this.attrs){var c=this.attrs[b];if(null==c.default)return null;a[b]=c.default}return a}},{key:"computeAttrs",value:function(a,b){var c=Object.create(null);for(var d in this.attrs){var e=a&&a[d];if(null==e){var f=this.attrs[d];null!=f.default?e=f.default:f.compute?e=f.compute(this,b):p.raise("No value supplied for attribute "+d)}c[d]=e}return c}},{key:"freezeAttrs",value:function(){var a=Object.create(null);for(var b in this.attrs)a[b]=this.attrs[b];Object.defineProperty(this,"attrs",{value:a})}},{key:"attrs",get:function(){return{}}}],[{key:"updateAttrs",value:function(a){Object.defineProperty(this.prototype,"attrs",{value:g(this.prototype.attrs,a)})}},{key:"getRegistry",value:function(){return this==a?null:(this.prototype.hasOwnProperty("registry")||(this.prototype.registry=Object.create(Object.getPrototypeOf(this).getRegistry())),this.prototype.registry)}},{key:"getNamespace",value:function(b){if(this==a)return null;var c=this.getRegistry();return Object.prototype.hasOwnProperty.call(c,b)||(c[b]=Object.create(Object.getPrototypeOf(this).getNamespace(b))),c[b]}},{key:"register",value:function(a,b,c){this.getNamespace(a)[b]=function(){return c}}},{key:"registerComputed",value:function(a,b,c){this.getNamespace(a)[b]=c}},{key:"cleanNamespace",value:function(a){this.getNamespace(a).__proto__=null}}]),a}(),r=c.NodeType=function(a){function b(a,c,f){d(this,b);var g=e(this,Object.getPrototypeOf(b).call(this));return g.name=a,g.kind=c,g.freezeAttrs(),g.defaultAttrs=g.getDefaultAttrs(),g.schema=f,g}return f(b,a),j(b,[{key:"canContainFragment",value:function(a){var b=this,c=!0;return a.forEach(function(a){b.canContain(a)||(c=!1)}),c}},{key:"canContain",value:function(a){if(!this.canContainType(a.type))return!1;for(var b=0;b<a.marks.length;b++)if(!this.canContainMark(a.marks[b]))return!1;return!0}},{key:"canContainMark",value:function(a){var b=this.containsMarks;if(!0===b)return!0;if(b)for(var c=0;c<b.length;c++)if(b[c]==a.name)return!0;return!1}},{key:"canContainType",value:function(a){return this.schema.subKind(a.kind,this.contains)}},{key:"canContainContent",value:function(a){return this.schema.subKind(a.contains,this.contains)}},{key:"findConnection",value:function(a){if(this.canContainType(a))return[];for(var b=Object.create(null),c=[{from:this,via:[]}];c.length;){var d=c.shift();for(var e in this.schema.nodes){var f=this.schema.nodes[e];if(f.defaultAttrs&&!(f.contains in b)&&d.from.canContainType(f)){var g=d.via.concat(f);if(f.canContainType(a))return g;c.push({from:f,via:g}),b[f.contains]=!0}}}}},{key:"computeAttrs",value:function(a,c){return!a&&this.defaultAttrs?this.defaultAttrs:i(Object.getPrototypeOf(b.prototype),"computeAttrs",this).call(this,a,c)}},{key:"create",value:function(a,b,c){return new k.Node(this,this.computeAttrs(a,b),l.Fragment.from(b),m.Mark.setFrom(c))}},{key:"createAutoFill",value:function(a,b,c){return b&&0!=b.length||this.canBeEmpty||(b=this.defaultContent()),this.create(a,b,c)}},{key:"isBlock",get:function(){return!1}},{key:"isTextblock",get:function(){return!1}},{key:"isInline",get:function(){return!1}},{key:"isText",get:function(){return!1}},{key:"selectable",get:function(){return!0}},{key:"draggable",get:function(){return!1}},{key:"locked",get:function(){return!1}},{key:"contains",get:function(){return null}},{key:"canBeEmpty",get:function(){return!0}},{key:"containsMarks",get:function(){return!1}}],[{key:"compile",value:function(a,b){var c=Object.create(null);for(var d in a){for(var e=a[d],f=e.kinds.split(" "),g=0;g<f.length;g++)b.registerKind(f[g],g?f[g-1]:null);c[d]=new e(d,f[f.length-1],b)}for(var d in c){var h=c[d].contains;!h||h in b.kinds||p.raise("Node type "+d+" is specified to contain non-existing kind "+h)}return c.doc||p.raise("Every schema needs a 'doc' type"),c.text||p.raise("Every schema needs a 'text' type"),c}},{key:"kinds",get:function(){return"node"}}]),b}(q),s=c.Block=function(a){function b(){return d(this,b),e(this,Object.getPrototypeOf(b).apply(this,arguments))}return f(b,a),j(b,[{key:"defaultContent",value:function(){var a=this.schema.defaultTextblockType().create(),b=this.findConnection(a.type);b||p.raise("Can't create default content for "+this.name);for(var c=b.length-1;c>=0;c--)a=b[c].create(null,a);return l.Fragment.from(a)}},{key:"contains",get:function(){return"block"}},{key:"isBlock",get:function(){return!0}},{key:"canBeEmpty",get:function(){return null==this.contains}}],[{key:"kinds",get:function(){return"block"}}]),b}(r),t=(c.Textblock=function(a){function b(){return d(this,b),e(this,Object.getPrototypeOf(b).apply(this,arguments))}return f(b,a),j(b,[{key:"contains",get:function(){return"inline"}},{key:"containsMarks",get:function(){return!0}},{key:"isTextblock",get:function(){return!0}},{key:"canBeEmpty",get:function(){return!0}}]),b}(s),c.Inline=function(a){function b(){return d(this,b),e(this,Object.getPrototypeOf(b).apply(this,arguments))}return f(b,a),j(b,[{key:"isInline",get:function(){return!0}}],[{key:"kinds",get:function(){return"inline"}}]),b}(r)),u=(c.Text=function(a){function b(){return d(this,b),e(this,Object.getPrototypeOf(b).apply(this,arguments))}return f(b,a),j(b,[{key:"create",value:function(a,b,c){return new k.TextNode(this,this.computeAttrs(a,b),b,c)}},{key:"selectable",get:function(){return!1}},{key:"isText",get:function(){return!0}}],[{key:"kinds",get:function(){return i(Object.getPrototypeOf(b),"kinds",this)+" text"}}]),b}(t),c.Attribute=function a(){var b=arguments.length<=0||void 0===arguments[0]?{}:arguments[0];d(this,a),this.default=b.default,this.compute=b.compute,this.label=b.label},c.MarkType=function(a){function b(a,c,f){d(this,b);var g=e(this,Object.getPrototypeOf(b).call(this));g.name=a,g.freezeAttrs(),g.rank=c,g.schema=f;var h=g.getDefaultAttrs();return g.instance=h&&new m.Mark(g,h),g}return f(b,a),j(b,[{key:"create",value:function(a){return!a&&this.instance?this.instance:new m.Mark(this,this.computeAttrs(a))}},{key:"removeFromSet",value:function(a){for(var b=0;b<a.length;b++)if(a[b].type==this)return a.slice(0,b).concat(a.slice(b+1));return a}},{key:"isInSet",value:function(a){for(var b=0;b<a.length;b++)if(a[b].type==this)return a[b]}}],[{key:"getOrder",value:function(a){var b=[];for(var c in a)b.push({name:c,rank:a[c].rank});b.sort(function(a,b){return a.rank-b.rank});for(var d=Object.create(null),e=0;e<b.length;e++)d[b[e].name]=e;return d}},{key:"compile",value:function(a,b){var c=this.getOrder(a),d=Object.create(null);for(var e in a)d[e]=new a[e](e,c[e],b);return d}},{key:"rank",get:function(){return 50}}]),b}(q)),v=(c.SchemaSpec=function(){function a(b,c){d(this,a),this.nodes=b||{},this.marks=c||{}}return j(a,[{key:"update",value:function(b,c){return new a(b?g(this.nodes,b):this.nodes,c?g(this.marks,c):this.marks)}}]),a}(),function(){function a(b){d(this,a),this.spec=b,this.kinds=Object.create(null),this.nodes=r.compile(b.nodes,this),this.marks=u.compile(b.marks,this);for(var c in this.nodes)c in this.marks&&p.raise(c+" can not be both a node and a mark");this.cached=Object.create(null),this.node=this.node.bind(this),this.text=this.text.bind(this),this.nodeFromJSON=this.nodeFromJSON.bind(this),this.markFromJSON=this.markFromJSON.bind(this)}return j(a,[{key:"node",value:function(a,b,c,d){return"string"==typeof a?a=this.nodeType(a):a instanceof r?a.schema!=this&&p.raise("Node type from different schema used ("+a.name+")"):p.raise("Invalid node type: "+a),a.create(b,c,d)}},{key:"text",value:function(a,b){return this.nodes.text.create(null,a,m.Mark.setFrom(b))}},{key:"defaultTextblockType",value:function(){var a=this.cached.defaultTextblockType;if(void 0!==a)return a;for(var b in this.nodes)if(this.nodes[b].defaultTextblock)return this.cached.defaultTextblockType=this.nodes[b];return this.cached.defaultTextblockType=null}},{key:"mark",value:function(a,b){return(this.marks[a]||p.raise("No mark named "+a)).create(b)}},{key:"nodeFromJSON",value:function(a){return k.Node.fromJSON(this,a)}},{key:"markFromJSON",value:function(a){var b=this.marks[a._],c=null;for(var d in a)"_"!=d&&(c||(c=Object.create(null)),c[d]=a[d]);return c?b.create(c):b.instance}},{key:"nodeType",value:function(a){return this.nodes[a]||p.raise("Unknown node type: "+a)}},{key:"registerKind",value:function(a,b){if(a in this.kinds){if(this.kinds[a]==b)return;p.raise("Inconsistent superkinds for kind "+a+": "+b+" and "+this.kinds[a])}this.subKind(a,b)&&p.raise("Conflicting kind hierarchy through "+a+" and "+b),this.kinds[a]=b}},{key:"subKind",value:function(a,b){for(;;){if(a==b)return!0;if(!(a=this.kinds[a]))return!1}}},{key:"registry",value:function(a,b){for(var c=0;c<2;c++){var d=c?this.marks:this.nodes;for(var e in d){var f=d[e],g=f.registry,h=g&&g[a];if(h)for(var i in h){var j=h[i](f);null!=j&&b(i,j,f,e)}}}}}]),a}());c.Schema=v},{"../util/error":114,"../util/obj":117,"./fragment":95,"./mark":97,"./node":98}],101:[function(a,b,c){function d(a,b){for(var c=[a.path(b.from.path)],d=!1;;){for(var e=-1,f=function(a,d){c.some(function(b){return!a.type.canContainContent(b.type)})||(e=d),a=a.child(b.from.path[d]),g=a},g=a,h=0;h<b.from.path.length;h++)f(g,h);if(e>-1)return{path:b.from.path.slice(0,e),unwrap:d};if(d||!c[0].isBlock)return null;c=c[0].content.slice(b.from.offset,b.to.offset),d=!0}}function e(a,b,c){var e=a.siblingRange(b,c||b),f=d(a,e);if(f)return{found:f,range:e}}function f(a,b,c,d){var e=a.siblingRange(b,c||b);if(e.from.offset==e.to.offset)return null;var f=a.path(e.from.path),g=f.type.findConnection(d),h=d.findConnection(f.child(e.from.offset).type);return g&&h?{range:e,around:g,inside:h}:void 0}var g="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(a){return typeof a}:function(a){return a&&"function"==typeof Symbol&&a.constructor===Symbol?"symbol":typeof a},h="function"==typeof Symbol&&"symbol"===g(Symbol.iterator)?function(a){return void 0===a?"undefined":g(a)}:function(a){return a&&"function"==typeof Symbol&&a.constructor===Symbol?"symbol":void 0===a?"undefined":g(a)};Object.defineProperty(c,"__esModule",{value:!0}),c.canLift=e,c.canWrap=f;var i=a("../model"),j=a("./transform"),k=a("./step"),l=a("./tree"),m=a("./map");k.Step.define("ancestor",{apply:function(a,b){var c=b.from,d=b.to;if(!(0,l.isFlatRange)(c,d))return null;for(var e=c.path,f=c.offset,g=d.offset,j=b.param,n=j.depth,o=void 0===n?0:n,p=j.types,q=void 0===p?[]:p,r=j.attrs,s=void 0===r?[]:r,t=a.path(c.path),u=0;u<o;u++){if(f>0||g<a.path(e).size||0==e.length)return null;f=e[e.length-1],g=f+1,e=e.slice(0,e.length-1)}if(0==o&&0==q.length)return null;var v=a.path(e),w=v.size,x=void 0;if(v.type.locked)return null;if(q.length){var y=function(){var a=q[q.length-1],b=t.content.slice(c.offset,d.offset);if(!v.type.canContainType(q[0])||b.some(function(b){return!a.canContain(b)})||!t.size&&!a.canBeEmpty||a.locked)return{v:null};for(var e=null,h=q.length-1;h>=0;h--)e=q[h].create(s[h],e||b);x=v.splice(f,g,i.Fragment.from(e))}();if("object"===(void 0===y?"undefined":h(y)))return y.v}else{if(!v.type.canContainFragment(t.content)||!t.size&&0==f&&g==v.size&&!v.type.canBeEmpty)return null;x=v.splice(f,g,t.content)}for(var z=a.replaceDeep(e,x),A=e.slice(),u=0;u<q.length;u++)A.push(u?0:f);var B=new i.Pos(A,q.length?0:f),C=null,D=q.length?1:d.offset-c.offset;if(o!=q.length||o>1||q.length>1){var E=new i.Pos(e,f),F=new i.Pos(e,g),G=new i.Pos(e,f+D),H=new i.Pos(A,B.offset+(d.offset-c.offset));C=[new m.ReplacedRange(E,c,E,B),new m.ReplacedRange(d,F,H,G,F,G)]}var I=[new m.MovedRange(c,d.offset-c.offset,B)];return g-f!=D&&I.push(new m.MovedRange(new i.Pos(e,g),w-g,new i.Pos(e,f+D))),new k.StepResult(z,new m.PosMap(I,C))},invert:function(a,b,c){var d=[],e=[];if(a.param.depth)for(var f=0;f<a.param.depth;f++){var g=b.path(a.from.path.slice(0,a.from.path.length-f));d.unshift(g.type),e.unshift(g.attrs)}var h=c.map(a.from).pos,i=a.from.cmp(a.to)?c.map(a.to,-1).pos:h;return new k.Step("ancestor",h,i,null,{depth:a.param.types?a.param.types.length:0,types:d,attrs:e})},paramToJSON:function(a){return{depth:a.depth,types:a.types&&a.types.map(function(a){return a.name}),attrs:a.attrs}},paramFromJSON:function(a,b){return{depth:b.depth,types:b.types&&b.types.map(function(b){return a.nodeType(b)}),attrs:b.attrs}}}),j.Transform.prototype.lift=function(a){var b=arguments.length<=1||void 0===arguments[1]?a:arguments[1],c=e(this.doc,a,b);if(!c)return this;for(var d=c.found,f=c.range,g=f.from.path.length-d.path.length,h=d.unwrap&&this.doc.path(f.from.path),j=0,k=f.to;;j++){if(k.offset<this.doc.path(k.path).size){this.split(k,g-j);break}if(j==g-1)break;k=k.shorten(null,1)}for(var j=0,k=f.from;;j++){if(k.offset>0){this.split(k,g-j);for(var l=f.from.path.length-g,m=k.path.slice(0,l).concat(k.path[l]+1);m.length<f.from.path.length;)m.push(0);f={from:new i.Pos(m,0),to:new i.Pos(m,f.to.offset-f.from.offset)};break}if(j==g-1)break;k=k.shorten()}if(d.unwrap){for(var n=f.to.offset-1;n>f.from.offset;n--)this.join(new i.Pos(f.from.path,n));for(var o,p=0,n=h.iter(f.from.offset,f.to.offset);o=n.next().value;)p+=o.size;var m=f.from.path.concat(f.from.offset);f={from:new i.Pos(m,0),to:new i.Pos(m,p)},++g}return this.step("ancestor",f.from,f.to,null,{depth:g}),this},j.Transform.prototype.wrap=function(a,b,c,d){var e=f(this.doc,a,b,c);if(!e)return this;var g=e.range,h=e.around,j=e.inside,k=h.concat(c).concat(j),l=h.map(function(){return null}).concat(d).concat(j.map(function(){return null}));if(this.step("ancestor",g.from,g.to,null,{types:k,attrs:l}),j.length){for(var m=g.from.path.slice(),n=0;n<h.length+j.length+1;n++)m.push(n?0:g.from.offset);for(var n=g.to.offset-1-g.from.offset;n>0;n--)this.split(new i.Pos(m,n),j.length)}return this},j.Transform.prototype.setBlockType=function(a,b,c,d){var e=this;return this.doc.nodesBetween(a,b||a,function(a,b){if(a.isTextblock&&!a.hasMarkup(c,d))return b=b.slice(),e.clearMarkup(new i.Pos(b,0),new i.Pos(b,a.size),c),e.step("ancestor",new i.Pos(b,0),new i.Pos(b,e.doc.path(b).size),null,{depth:1,types:[c],attrs:[d]}),!1}),this},j.Transform.prototype.setNodeType=function(a,b,c){var d=this.doc.nodeAfter(a),e=a.toPath();return this.step("ancestor",new i.Pos(e,0),new i.Pos(e,d.size),null,{depth:1,types:[b],attrs:[c]}),this}},{"../model":96,"./map":104,"./step":108,"./transform":109,"./tree":110}],102:[function(a,b,c){Object.defineProperty(c,"__esModule",{value:!0}),c.Remapping=c.MapResult=c.PosMap=c.joinableBlocks=c.joinPoint=c.canWrap=c.canLift=c.StepResult=c.Step=c.Transform=void 0;var d=a("./transform");Object.defineProperty(c,"Transform",{enumerable:!0,get:function(){return d.Transform}});var e=a("./step");Object.defineProperty(c,"Step",{enumerable:!0,get:function(){return e.Step}}),Object.defineProperty(c,"StepResult",{enumerable:!0,get:function(){return e.StepResult}});var f=a("./ancestor");Object.defineProperty(c,"canLift",{enumerable:!0,get:function(){return f.canLift}}),Object.defineProperty(c,"canWrap",{enumerable:!0,get:function(){return f.canWrap}});var g=a("./join");Object.defineProperty(c,"joinPoint",{enumerable:!0,get:function(){return g.joinPoint}}),Object.defineProperty(c,"joinableBlocks",{enumerable:!0,get:function(){return g.joinableBlocks}});var h=a("./map");Object.defineProperty(c,"PosMap",{enumerable:!0,get:function(){return h.PosMap}}),Object.defineProperty(c,"MapResult",{enumerable:!0,get:function(){return h.MapResult}}),Object.defineProperty(c,"Remapping",{enumerable:!0,get:function(){return h.Remapping}}),a("./mark"),a("./split"),a("./replace")},{"./ancestor":101,"./join":103,"./map":104,"./mark":105,"./replace":106,"./split":107,"./step":108,"./transform":109}],103:[function(a,b,c){function d(a,b){if(0==b.offset)return!1;var c=a.path(b.path);if(c.isTextblock||b.offset==c.size)return!1;var d=c.child(b.offset-1).type;return!d.isTextblock&&d.contains&&d==c.child(b.offset).type}function e(a,b){for(var c=arguments.length<=2||void 0===arguments[2]?-1:arguments[2];;){if(d(a,b))return b;if(0==b.depth)return null;b=b.shorten(null,c<0?0:1)}}Object.defineProperty(c,"__esModule",{value:!0}),c.joinableBlocks=d,c.joinPoint=e;var f=a("../model"),g=a("./transform"),h=a("./step"),i=a("./map");h.Step.define("join",{apply:function(a,b){var c=a.path(b.from.path),d=a.path(b.to.path);if(b.from.offset<c.size||b.to.offset>0||!c.type.canContainFragment(d.content))return null;var e=b.from.path,g=b.to.path,j=e.length-1,k=e[j]+1;if(e.length!=g.length||0==e.length||k!=g[j])return null;for(var l=0;l<j;l++)if(e[l]!=g[l])return null;var m=e.slice(0,j),n=a.path(m),o=n.size;if(n.type.locked)return null;var p=c.append(d.content),q=a.replaceDeep(m,n.splice(k-1,k+1,f.Fragment.from(p))),r=new i.PosMap([new i.MovedRange(b.to,d.size,b.from),new i.MovedRange(new f.Pos(m,k+1),o-k-1,new f.Pos(m,k))],[new i.ReplacedRange(b.from,b.to,b.from,b.from,b.to.shorten())]);return new h.StepResult(q,r)},invert:function(a,b){return new h.Step("split",null,null,a.from,b.path(a.to.path).copy())}}),g.Transform.prototype.join=function(a){var b=this.doc.path(a.path);return 0==a.offset||a.offset==b.size||b.isTextblock?this:(this.step("join",new f.Pos(a.path.concat(a.offset-1),b.child(a.offset-1).size),new f.Pos(a.path.concat(a.offset),0)),this)}},{"../model":96,"./map":104,"./step":108,"./transform":109}],104:[function(a,b,c){function d(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function e(a,b){if(b.path.length>a.path.length){for(var c=[b.path[a.path.length]-a.offset],d=a.path.length+1;d<b.path.length;d++)c.push(b.path[d]);return new h.Pos(c,b.offset)}return new h.Pos([],b.offset-a.offset)}function f(a,b){for(var c=arguments.length<=2||void 0===arguments[2]?1:arguments[2],d=arguments[3],f=0;f<a.replaced.length;f++){var g=a.replaced[f],i=d?g.after:g.before,j=void 0,k=void 0;if((j=b.cmp(i.from))>=0&&(k=b.cmp(i.to))<=0){var m=d?g.before:g.after;return new l(c<0?m.from:m.to,!(!j||!k),{rangeID:f,offset:e(i.ref,b)})}}for(var f=0;f<a.moved.length;f++){var g=a.moved[f],n=d?g.dest:g.start;if(b.cmp(n)>=0&&h.Pos.cmp(b.path,b.offset,n.path,n.offset+g.size)<=0){var o=d?g.start:g.dest,p=n.depth;if(b.depth>p){var q=o.offset+(b.path[p]-n.offset);return new l(new h.Pos(o.path.concat(q).concat(b.path.slice(p+1)),b.offset))}return new l(new h.Pos(o.path,o.offset+(b.offset-n.offset)))}}return new l(b)}var g=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}();Object.defineProperty(c,"__esModule",{value:!0}),c.Remapping=c.nullMap=c.MapResult=c.PosMap=c.ReplacedRange=c.MovedRange=void 0;var h=a("../model"),i=(c.MovedRange=function(){function a(b,c){var e=arguments.length<=2||void 0===arguments[2]?null:arguments[2];d(this,a),this.start=b,this.size=c,this.dest=e}return g(a,[{key:"toString",value:function(){return"[moved "+this.start+"+"+this.size+" to "+this.dest+"]"}},{key:"end",get:function(){return new h.Pos(this.start.path,this.start.offset+this.size)}}]),a}(),function a(b,c,e){d(this,a),this.from=b,this.to=c,this.ref=e}),j=(c.ReplacedRange=function(){function a(b,c,e,f){var g=arguments.length<=4||void 0===arguments[4]?b:arguments[4],h=arguments.length<=5||void 0===arguments[5]?e:arguments[5];d(this,a),this.before=new i(b,c,g),this.after=new i(e,f,h)}return g(a,[{key:"toString",value:function(){return"[replaced "+this.before.from+"-"+this.before.to+" with "+this.after.from+"-"+this.after.to+"]"}}]),a}(),[]),k=c.PosMap=function(){function a(b,c){d(this,a),this.moved=b||j,this.replaced=c||j}return g(a,[{key:"recover",value:function(a){return this.replaced[a.rangeID].after.ref.extend(a.offset)}},{key:"map",value:function(a,b){return f(this,a,b,!1)}},{key:"invert",value:function(){return new m(this)}},{key:"toString",value:function(){return this.moved.concat(this.replaced).join(" ")}}]),a}(),l=c.MapResult=function a(b){var c=!(arguments.length<=1||void 0===arguments[1])&&arguments[1],e=arguments.length<=2||void 0===arguments[2]?null:arguments[2];d(this,a),this.pos=b,this.deleted=c,this.recover=e},m=function(){function a(b){d(this,a),this.inner=b}return g(a,[{key:"recover",value:function(a){return this.inner.replaced[a.rangeID].before.ref.extend(a.offset)}},{key:"map",value:function(a,b){return f(this.inner,a,b,!0)}},{key:"invert",value:function(){return this.inner}},{key:"toString",value:function(){return"-"+this.inner}}]),a}();c.nullMap=new k,c.Remapping=function(){function a(){var b=arguments.length<=0||void 0===arguments[0]?[]:arguments[0],c=arguments.length<=1||void 0===arguments[1]?[]:arguments[1],e=arguments.length<=2||void 0===arguments[2]?Object.create(null):arguments[2];d(this,a),this.head=b,this.tail=c,this.mirror=e}return g(a,[{key:"addToFront",value:function(a,b){this.head.push(a);var c=-this.head.length;return null!=b&&(this.mirror[c]=b),c}},{key:"addToBack",value:function(a,b){this.tail.push(a);var c=this.tail.length-1;return null!=b&&(this.mirror[b]=c),c}},{key:"get",value:function(a){return a<0?this.head[-a-1]:this.tail[a]}},{key:"map",value:function(a,b){for(var c=!1,d=-this.head.length;d<this.tail.length;d++){var e=this.get(d),f=e.map(a,b);if(f.recover){var g=this.mirror[d];if(null!=g){d=g,a=this.get(g).recover(f.recover);continue}}f.deleted&&(c=!0),a=f.pos}return new l(a,c)}}]),a}()},{"../model":96}],105:[function(a,b,c){var d=a("../model"),e=a("./transform"),f=a("./step"),g=a("./tree");f.Step.define("addMark",{apply:function(a,b){return new f.StepResult((0,g.copyStructure)(a,b.from,b.to,function(a,c,d){return a.type.canContainMark(b.param)?(0,g.copyInline)(a,c,d,function(a){return a.mark(b.param.addToSet(a.marks))}):a}))},invert:function(a,b,c){return new f.Step("removeMark",a.from,c.map(a.to).pos,null,a.param)},paramToJSON:function(a){return a.toJSON()},paramFromJSON:function(a,b){return a.markFromJSON(b)}}),e.Transform.prototype.addMark=function(a,b,c){var e=this,g=[],h=[],i=null,j=null;return this.doc.inlineNodesBetween(a,b,function(a,b,e,k,l){var m=a.marks;if(c.isInSet(m)||!l.type.canContainMark(c.type))j=i=null;else{var n=c.type.isInSet(m);n?i&&i.param.eq(n)?i.to=new d.Pos(b,k):(i=new f.Step("removeMark",new d.Pos(b,e),new d.Pos(b,k),null,n),g.push(i)):i&&(i=null),j?j.to=new d.Pos(b,k):(j=new f.Step("addMark",new d.Pos(b,e),new d.Pos(b,k),null,c),h.push(j))}}),g.forEach(function(a){return e.step(a)}),h.forEach(function(a){return e.step(a)}),this},f.Step.define("removeMark",{apply:function(a,b){return new f.StepResult((0,g.copyStructure)(a,b.from,b.to,function(a,c,d){return(0,g.copyInline)(a,c,d,function(a){return a.mark(b.param.removeFromSet(a.marks))})}))},invert:function(a,b,c){return new f.Step("addMark",a.from,c.map(a.to).pos,null,a.param)},paramToJSON:function(a){return a.toJSON()},paramFromJSON:function(a,b){return a.markFromJSON(b)}}),e.Transform.prototype.removeMark=function(a,b){var c=this,e=arguments.length<=2||void 0===arguments[2]?null:arguments[2],f=[],g=0;return this.doc.inlineNodesBetween(a,b,function(a,b,c,h){var i=a.marks;g++;var j=null;if(e instanceof d.MarkType){var k=e.isInSet(i);k&&(j=[k])}else e?e.isInSet(i)&&(j=[e]):j=i;if(j&&j.length){b=b.slice();for(var l=0;l<j.length;l++){for(var m=j[l],k=void 0,n=0;n<f.length;n++){var o=f[n];o.step==g-1&&m.eq(f[n].style)&&(k=o)}k?(k.to=new d.Pos(b,h),k.step=g):f.push({style:m,from:new d.Pos(b,c),to:new d.Pos(b,h),step:g})}}}),f.forEach(function(a){return c.step("removeMark",a.from,a.to,null,a.style)}),this},e.Transform.prototype.clearMarkup=function(a,b,c){var e=this,g=[];this.doc.inlineNodesBetween(a,b,function(a,b,h,i){var j=a.marks,k=a.type;if(c?!c.canContainType(k):!k.isText){b=b.slice();var l=new d.Pos(b,h);return void g.push(new f.Step("replace",l,new d.Pos(b,i),l))}for(var m=0;m<j.length;m++){var n=j[m];c&&c.canContainMark(n.type)||(b=b.slice(),e.step("removeMark",new d.Pos(b,h),new d.Pos(b,i),null,n))}});for(var h=g.length-1;h>=0;h--)this.step(g[h]);return this}},{"../model":96,"./step":108,"./transform":109,"./tree":110}],106:[function(a,b,c){function d(a,b,c,d){for(var e=[],f=b.path.slice(0,d),g=d;;g++){var h=g==b.depth?0:1,j=g==b.depth?b.offset:b.path[g],k=a.size-j,m=c.size-k,n=b.shorten(g,h),o=new i.Pos(f,m+h);if(n.cmp(o)&&e.push(new l.MovedRange(n,k-h,o)),!h)return e;a=a.child(j),c=c.child(m),f=f.concat(m)}}function e(a,b,c,f,g){var h=arguments.length<=5||void 0===arguments[5]?0:arguments[5];if(h==f.length){var i=a.sliceBetween(null,b,h),j=a.sliceBetween(c,null,h),k=void 0;return i.type.canContainFragment(g.content)?(k=g.content.size?i.append(g.content,b.depth-h,g.openLeft).append(j.content,g.openRight,c.depth-h):i.append(j.content,b.depth-h,c.depth-h),k.size||k.type.canBeEmpty||(k=k.copy(k.type.defaultContent())),{doc:k,moved:d(a,c,k,h)}):null}var l=f[h],k=e(a.child(l),b,c,f,g,h+1);return k?{doc:a.replace(l,k.doc),moved:k.moved}:null}function f(a,b){for(var c=a[b]=a[b].splice(0,1,i.emptyFragment),d=b-1;d>=0;d--)c=a[d]=a[d].replace(0,c)}function g(a,b,c,d){for(var e=b.sliceBetween(c,d),g=[],h=e,j=0;j<=c.path.length;j++,h=h.firstChild)g.push(h);var k=(0,m.samePathDepth)(c,d),l=a.length-1,n=g.length-1,o=null,p=g[n];for(p.isTextblock&&p.size&&a[l].isTextblock&&(o=a[l--].copy(p.content),--n,f(g,n));;){for(var h=g[n],q=h.type,r=null,s=n<=k,j=l;j>=0;j--){var t=a[j];if(s?t.type.canContainContent(h.type):t.type==q){r=j;break}}if(null!=r)if(o)for(;l>=r;){var u=a[l],v=i.Fragment.from(o);o=u.copy(l==r?v.append(h.content):v),l--}else o=a[r].copy(h.content),l=r-1;if(null!=r||0==h.size){if(s)break;n&&f(g,n-1)}n--}return{repl:{content:o?o.content:i.emptyFragment,openLeft:c.depth-n,openRight:d.depth-n},depth:l+1}}function h(a,b,c,d){for(var e=(0,m.samePathDepth)(c,d),f=d.shorten(null,1);f.path.length>e&&1==b.path(f.path).size;)f=f.shorten(null,1);a.split(f,f.path.length-e);for(var g=d,h=new i.Pos(g.path,b.path(g.path).size),j=b.path(g.path.slice(0,e)),k=j.pathNodes(c.path.slice(e)),l=j.pathNodes(g.path.slice(e));k.length&&l.length&&k[0].sameMarkup(l[0]);)k.shift(),l.shift();(l.length||k.length)&&a.step("ancestor",g,h,null,{depth:l.length,types:k.map(function(a){return a.type}),attrs:k.map(function(a){return a.attrs})});for(var n=e;n<c.path.length;n++)a.join(c.shorten(n,1))}Object.defineProperty(c,"__esModule",{value:!0}),c.replace=e;var i=a("../model"),j=a("./transform"),k=a("./step"),l=a("./map"),m=a("./tree"),n={content:i.emptyFragment,openLeft:0,openRight:0};k.Step.define("replace",{apply:function(a,b){var c=b.pos,d=c.path;if(b.from.depth<d.length||b.to.depth<d.length)return null;for(var f=0;f<d.length;f++)if(b.from.path[f]!=d[f]||b.to.path[f]!=d[f])return null;var g=e(a,b.from,b.to,c.path,b.param||n);if(!g)return null;var h=g.doc,i=g.moved,j=i.length?i[i.length-1].dest:b.to,m=new l.ReplacedRange(b.from,b.to,b.from,j,c,c);return new k.StepResult(h,new l.PosMap(i,[m]))},invert:function(a,b,c){var d=a.pos.depth;return new k.Step("replace",a.from,c.map(a.to).pos,a.from.shorten(d),{content:b.path(a.pos.path).content.sliceBetween(a.from,a.to,d),openLeft:a.from.depth-d,openRight:a.to.depth-d})},paramToJSON:function(a){return a&&{content:a.content.size&&a.content.toJSON(),openLeft:a.openLeft,openRight:a.openRight}},paramFromJSON:function(a,b){return b&&{content:i.Fragment.fromJSON(a,b.content),openLeft:b.openLeft,openRight:b.openRight}}}),j.Transform.prototype.delete=function(a,b){return a.cmp(b)&&this.replace(a,b),this},j.Transform.prototype.replace=function(a,b,c,d,e){var f=void 0,j=void 0,k=this.doc,l=(0,m.samePathDepth)(a,b);if(c){var o=g(k.pathNodes(a.path),c,d,e);for(f=o.repl,j=o.depth;j>l;)f.content.size&&(f={content:i.Fragment.from(k.path(a.path.slice(0,j)).copy(f.content)),openLeft:f.openLeft+1,openRight:f.openRight+1}),j--}else f=n,j=l;var p=a.shorten(j),q=k,r=b;if(f.content.size||(0,m.replaceHasEffect)(k,a,b)){var s=this.step("replace",a,b,p,f);q=s.doc,r=s.map.map(b).pos}if(!k.path(b.path).isTextblock)return this;if(!(f.content.size?c.path(e.path).isTextblock:k.path(a.path).isTextblock))return this;var t=k.path(p.path).pathNodes(b.path.slice(j)).slice(1),u=void 0;if(f.content.size){var v=f.content;u=[];for(var w=0;w<f.openRight;w++){var x=v.child(v.size-1);u.push(x),v=x.content}}else u=k.path(p.path).pathNodes(a.path.slice(j)).slice(1);if(u.length&&(t.length!=u.length||!t.every(function(a,b){return a.sameMarkup(u[b])}))){for(var y=r.shorten(p.depth),z=y.path,A=y.offset,B=void 0,C=q.path(z),w=0;;w++){if(w==u.length){B=new i.Pos(z,A);break}z.push(A-1),C=C.child(A-1),A=C.size}h(this,q,B,r)}return this},j.Transform.prototype.replaceWith=function(a,b,c){return c instanceof i.Fragment||(c=i.Fragment.from(c)),i.Pos.samePath(a.path,b.path)?this.step("replace",a,b,a,{content:c,openLeft:0,openRight:0}):this.delete(a,b).step("replace",a,a,a,{content:c,openLeft:0,openRight:0}),this},j.Transform.prototype.insert=function(a,b){return this.replaceWith(a,a,b)},j.Transform.prototype.insertText=function(a,b){return this.insert(a,this.doc.type.schema.text(b,this.doc.marksAt(a)))},j.Transform.prototype.insertInline=function(a,b){return this.insert(a,b.mark(this.doc.marksAt(a)))}},{"../model":96,"./map":104,"./step":108,"./transform":109,"./tree":110}],107:[function(a,b,c){var d=a("../model"),e=a("./transform"),f=a("./step"),g=a("./map");f.Step.define("split",{apply:function(a,b){var c=b.pos;if(0==c.depth)return null;var e=c.shorten(),h=e.path,i=e.offset,j=a.path(h),k=j.child(i),l=k.size,m=b.param||k,n=m.type,o=m.attrs,p=c.offset;if(0==p&&!k.type.canBeEmpty||k.type.locked||p==k.size&&!n.canBeEmpty)return null;var q=j.splice(i,i+1,d.Fragment.from([k.slice(0,p),n.create(o,k.content.slice(p))])),r=a.replaceDeep(h,q),s=new d.Pos(h.concat(i+1),0),t=new g.PosMap([new g.MovedRange(c,l-c.offset,s),new g.MovedRange(new d.Pos(h,i+1),q.size-2-i,new d.Pos(h,i+2))],[new g.ReplacedRange(c,c,c,s,c,c.shorten(null,1))]);return new f.StepResult(r,t)},invert:function(a,b,c){return new f.Step("join",a.pos,c.map(a.pos).pos)},paramToJSON:function(a){return a&&{type:a.type.name,attrs:a.attrs}},paramFromJSON:function(a,b){return b&&{type:a.nodeType(b.type),attrs:b.attrs}}}),e.Transform.prototype.split=function(a){var b=arguments.length<=1||void 0===arguments[1]?1:arguments[1],c=arguments[2],d=arguments[3];if(0==b)return this;for(var e=0;;e++){if(this.step("split",null,null,a,c&&{type:c,attrs:d}),e==b-1)return this;c=null,a=a.shorten(null,1)}},
e.Transform.prototype.splitIfNeeded=function(a){for(var b=arguments.length<=1||void 0===arguments[1]?1:arguments[1],c=0;c<b;c++){var d=a.shorten(a.depth-c);d.offset&&d.offset<this.doc.path(d.path).size&&this.step("split",null,null,d)}return this}},{"../model":96,"./map":104,"./step":108,"./transform":109}],108:[function(a,b,c){function d(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}var e=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}();Object.defineProperty(c,"__esModule",{value:!0}),c.StepResult=c.Step=void 0;var f=a("../model"),g=a("../util/error"),h=a("./map"),i=(c.Step=function(){function a(b,c,e,f){var h=arguments.length<=4||void 0===arguments[4]?null:arguments[4];d(this,a),b in i||g.NamespaceError.raise("Unknown step type: "+b),this.type=b,this.from=c,this.to=e,this.pos=f,this.param=h}return e(a,[{key:"apply",value:function(a){return i[this.type].apply(a,this)}},{key:"invert",value:function(a,b){return i[this.type].invert(this,a,b)}},{key:"map",value:function(b){var c=!0,d=null,e=null,f=null;if(this.from){var g=b.map(this.from,1);d=g.pos,g.deleted||(c=!1)}if(this.to)if(0==this.to.cmp(this.from))e=d;else{var g=b.map(this.to,-1);e=g.pos.max(d),g.deleted||(c=!1)}if(this.pos)if(d&&0==this.pos.cmp(this.from))f=d;else if(e&&0==this.pos.cmp(this.to))f=e;else{var g=b.map(this.pos,1);f=g.pos,g.deleted||(c=!1)}return c?null:new a(this.type,d,e,f,this.param)}},{key:"toJSON",value:function(){var a=i[this.type];return{type:this.type,from:this.from,to:this.to,pos:this.pos,param:a.paramToJSON?a.paramToJSON(this.param):this.param}}}],[{key:"fromJSON",value:function(b,c){var d=i[c.type];return new a(c.type,c.from&&f.Pos.fromJSON(c.from),c.to&&f.Pos.fromJSON(c.to),c.pos&&f.Pos.fromJSON(c.pos),d.paramFromJSON?d.paramFromJSON(b,c.param):c.param)}},{key:"define",value:function(a,b){i[a]=b}}]),a}(),c.StepResult=function a(b){var c=arguments.length<=1||void 0===arguments[1]?h.nullMap:arguments[1];d(this,a),this.doc=b,this.map=c},Object.create(null))},{"../model":96,"../util/error":114,"./map":104}],109:[function(a,b,c){function d(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}var e=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}();Object.defineProperty(c,"__esModule",{value:!0}),c.Transform=void 0;var f=a("./step"),g=a("./map"),h=function(){function a(b){d(this,a),this.steps=[],this.docs=[b],this.maps=[]}return e(a,[{key:"step",value:function(a,b,c,d,e){"string"==typeof a&&(a=new f.Step(a,b,c,d,e));var g=a.apply(this.doc);return g&&(this.steps.push(a),this.maps.push(g.map),this.docs.push(g.doc)),g}},{key:"map",value:function(a,b){for(var c=!1,d=0;d<this.maps.length;d++){var e=this.maps[d].map(a,b);a=e.pos,e.deleted&&(c=!0)}return new g.MapResult(a,c)}},{key:"doc",get:function(){return this.docs[this.docs.length-1]}},{key:"before",get:function(){return this.docs[0]}}]),a}();c.Transform=h},{"./map":104,"./step":108}],110:[function(a,b,c){function d(a,b,c,e){var f=arguments.length<=4||void 0===arguments[4]?0:arguments[4];if(a.isTextblock)return e(a,b?b.offset:0,c?c.offset:a.size);if(!a.size)return a;for(var g,h=b?b.path[f]:0,i=c?c.path[f]+1:a.size,k=a.content.toArray(0,h),l=a.iter(h,i);g=l.next().value;){var m=l.offset-g.width==h?b:null,n=l.offset==i?c:null;k.push(d(g,m,n,e,f+1))}return a.copy(j.Fragment.fromArray(k.concat(a.content.toArray(i))))}function e(a,b,c,d){return a.splice(b,c,a.content.slice(b,c).map(d))}function f(a,b){if(a.path.length!=b.path.length)return!1;for(var c=0;c<a.path.length;c++)if(a.path[c]!=b.path[c])return!1;return a.offset<=b.offset}function g(a,b,c){if(!c||0==b||b==a.size)return!1;var d=a.child(b-1),e=a.child(b);return d.sameMarkup(e)}function h(a,b,c){for(var d=0,e=a;;d++){var f=d==b.depth,h=d==c.depth;if(f||h||b.path[d]!=c.path[d]){var i=void 0,j=void 0;if(f)i=b.offset;else{i=b.path[d]+1;for(var k=d+1,l=e.child(i-1);k<=b.path.length;k++)if(k==b.path.length){if(b.offset<l.size)return!0}else{if(b.path[k]+1<l.size)return!0;l=l.child(b.path[k])}}if(h)j=c.offset;else{j=c.path[d];for(var k=d+1;k<=c.path.length;k++)if((k==c.path.length?c.offset:c.path[k])>0)return!0}return i!=j||g(e,i,Math.min(b.depth,c.depth)-d)}e=e.child(b.path[d])}}function i(a,b){for(var c=0;;c++)if(c==a.path.length||c==b.path.length||a.path[c]!=b.path[c])return c}Object.defineProperty(c,"__esModule",{value:!0}),c.copyStructure=d,c.copyInline=e,c.isFlatRange=f,c.replaceHasEffect=h,c.samePathDepth=i;var j=a("../model")},{"../model":96}],111:[function(a,b,c){function d(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function e(a,b,c){var d=(0,h.elt)("button",{class:"ProseMirror-prompt-close"}),e=(0,h.elt)("div",{class:"ProseMirror-prompt"},b,d),f=a.wrapper.getBoundingClientRect();if(a.wrapper.appendChild(e),c&&c.pos)e.style.left=c.pos.left-f.left+"px",e.style.pos=c.pos.top-f.top+"px";else{var g=e.getBoundingClientRect(),i=Math.max(0,f.left)+Math.min(window.innerWidth,f.right)-g.width,j=Math.max(0,f.top)+Math.min(window.innerHeight,f.bottom)-g.height;e.style.left=i/2-f.left+"px",e.style.top=j/2-f.top+"px"}var k=function b(){a.off("interaction",b),e.parentNode&&(e.parentNode.removeChild(e),c&&c.onClose&&c.onClose())};return d.addEventListener("click",k),a.on("interaction",k),{close:k}}var f=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}();Object.defineProperty(c,"__esModule",{value:!0}),c.ParamPrompt=void 0,c.openPrompt=e;var g=a("../util/error"),h=a("../dom"),i=c.ParamPrompt=function(){function a(b,c){var e=this;d(this,a),this.pm=b,this.command=c,this.doClose=null,this.fields=c.params.map(function(a){return a.type in e.paramTypes||g.AssertionError.raise("Unsupported parameter type: "+a.type),e.paramTypes[a.type].render.call(e.pm,a,e.defaultValue(a))}),this.form=(0,h.elt)("form",null,this.fields.map(function(a){return(0,h.elt)("div",null,a)}))}return f(a,[{key:"close",value:function(){this.doClose&&(this.doClose(),this.doClose=null)}},{key:"open",value:function(){var a=this;this.close();var b=this.prompt(),c=this.pm.hasFocus();this.doClose=function(){b.close(),c&&setTimeout(function(){return a.pm.focus()},50)};var d=function(){var b=a.values();b&&(a.close(),a.command.exec(a.pm,b))};this.form.addEventListener("submit",function(a){a.preventDefault(),d()}),this.form.addEventListener("keydown",function(a){27==a.keyCode?b.close():13!=a.keyCode||a.ctrlKey||a.metaKey||a.shiftKey||d()});var e=this.form.querySelector("input, textarea");e&&e.focus()}},{key:"values",value:function(){for(var a=[],b=0;b<this.command.params.length;b++){var c=this.command.params[b],d=this.fields[b],e=this.paramTypes[c.type],f=e.read.call(this.pm,d),g=void 0;if(c.validate?g=c.validate(f):f||null!=c.default||(g="No default value available"),g)return e.reportInvalid?e.reportInvalid.call(this.pm,d,g):this.reportInvalid(d,g),null;a.push(f)}return a}},{key:"defaultValue",value:function(a){if(a.prefill){var b=a.prefill.call(this.command.self,this.pm);if(null!=b)return b}return a.default}},{key:"prompt",value:function(){var a=this;return e(this.pm,this.form,{onClose:function(){return a.close()}})}},{key:"reportInvalid",value:function(a,b){var c=a.parentNode,d="left: "+(a.offsetLeft+a.offsetWidth+2)+"px; top: "+(a.offsetTop-5)+"px",e=c.appendChild((0,h.elt)("div",{class:"ProseMirror-invalid",style:d},b));setTimeout(function(){return c.removeChild(e)},1500)}}]),a}();i.prototype.paramTypes=Object.create(null),i.prototype.paramTypes.text={render:function(a,b){return(0,h.elt)("input",{type:"text",placeholder:a.label,value:b,autocomplete:"off"})},read:function(a){return a.value}},i.prototype.paramTypes.select={render:function(a,b){var c=a.options.call?a.options(this):a.options;return(0,h.elt)("select",null,c.map(function(a){return(0,h.elt)("option",{value:a.value,selected:a.value==b?"true":null},a.label)}))},read:function(a){return a.value}},(0,h.insertCSS)('\n.ProseMirror-prompt {\n  background: white;\n  padding: 2px 6px 2px 15px;\n  border: 1px solid silver;\n  position: absolute;\n  border-radius: 3px;\n  z-index: 11;\n}\n\n.ProseMirror-prompt input[type="text"],\n.ProseMirror-prompt textarea {\n  background: #eee;\n  border: none;\n  outline: none;\n}\n\n.ProseMirror-prompt input[type="text"] {\n  padding: 0 4px;\n}\n\n.ProseMirror-prompt-close {\n  position: absolute;\n  left: 2px; top: 1px;\n  color: #666;\n  border: none; background: transparent; padding: 0;\n}\n\n.ProseMirror-prompt-close:after {\n  content: "";\n  font-size: 12px;\n}\n\n.ProseMirror-invalid {\n  background: #ffc;\n  border: 1px solid #cc7;\n  border-radius: 4px;\n  padding: 5px 10px;\n  position: absolute;\n  min-width: 10em;\n}\n')},{"../dom":62,"../util/error":114}],112:[function(a,b,c){function d(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}var e=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}();Object.defineProperty(c,"__esModule",{value:!0}),c.Tooltip=void 0;var f=a("../dom"),g="ProseMirror-tooltip";c.Tooltip=function(){function a(b,c){var e=this;d(this,a),this.wrapper=b,this.dir=c||"above",this.pointer=b.appendChild((0,f.elt)("div",{class:g+"-pointer-"+this.dir+" "+g+"-pointer"})),this.pointerWidth=this.pointerHeight=null,this.dom=b.appendChild((0,f.elt)("div",{class:g})),this.dom.addEventListener("transitionend",function(){"0"==e.dom.style.opacity&&(e.dom.style.display=e.pointer.style.display="")}),this.isOpen=!1,this.lastLeft=this.lastTop=null}return e(a,[{key:"detach",value:function(){this.dom.parentNode.removeChild(this.dom),this.pointer.parentNode.removeChild(this.pointer)}},{key:"getSize",value:function(a){var b=this.wrapper.appendChild((0,f.elt)("div",{class:g,style:"display: block; position: absolute"},a)),c={width:b.offsetWidth+1,height:b.offsetHeight};return b.parentNode.removeChild(b),c}},{key:"open",value:function(a,b){for(var c,d=this.lastLeft=b?b.left:this.lastLeft,e=this.lastTop=b?b.top:this.lastTop,f=this.getSize(a),g=this.wrapper.getBoundingClientRect(),h=this.dom.firstChild;h;h=c)c=h.nextSibling,h!=this.pointer&&this.dom.removeChild(h);this.dom.appendChild(a),this.dom.style.display=this.pointer.style.display="block",null==this.pointerWidth&&(this.pointerWidth=this.pointer.offsetWidth-1,this.pointerHeight=this.pointer.offsetHeight-1),this.dom.style.width=f.width+"px",this.dom.style.height=f.height+"px";var i=5;if("above"==this.dir||"below"==this.dir){var j=Math.max(0,Math.min(d-f.width/2,window.innerWidth-f.width));if(this.dom.style.left=j-g.left+"px",this.pointer.style.left=d-g.left-this.pointerWidth/2+"px","above"==this.dir){var k=e-g.top-i-this.pointerHeight-f.height;this.dom.style.top=k+"px",this.pointer.style.top=k+f.height+"px"}else{var k=e-g.top+i;this.pointer.style.top=k+"px",this.dom.style.top=k+this.pointerHeight+"px"}}else if("left"==this.dir||"right"==this.dir)if(this.dom.style.top=e-g.top-f.height/2+"px",this.pointer.style.top=e-this.pointerHeight/2-g.top+"px","left"==this.dir){var l=d-g.left-i-this.pointerWidth;this.dom.style.left=l-f.width+"px",this.pointer.style.left=l+"px"}else{var l=d-g.left+i;this.dom.style.left=l+this.pointerWidth+"px",this.pointer.style.left=l+"px"}else if("center"==this.dir){var m=Math.max(g.top,0),n=Math.min(g.bottom,window.innerHeight),o=(n-m-f.height)/2;this.dom.style.left=(g.width-f.width)/2+"px",this.dom.style.top=m-g.top+o+"px"}getComputedStyle(this.dom).opacity,getComputedStyle(this.pointer).opacity,this.dom.style.opacity=this.pointer.style.opacity=1,this.isOpen=!0}},{key:"close",value:function(){this.isOpen&&(this.isOpen=!1,this.dom.style.opacity=this.pointer.style.opacity=0)}}]),a}();(0,f.insertCSS)("\n\n."+g+" {\n  position: absolute;\n  display: none;\n  box-sizing: border-box;\n  -moz-box-sizing: border- box;\n  overflow: hidden;\n\n  -webkit-transition: width 0.4s ease-out, height 0.4s ease-out, left 0.4s ease-out, top 0.4s ease-out, opacity 0.2s;\n  -moz-transition: width 0.4s ease-out, height 0.4s ease-out, left 0.4s ease-out, top 0.4s ease-out, opacity 0.2s;\n  transition: width 0.4s ease-out, height 0.4s ease-out, left 0.4s ease-out, top 0.4s ease-out, opacity 0.2s;\n  opacity: 0;\n\n  border-radius: 5px;\n  padding: 3px 7px;\n  margin: 0;\n  background: white;\n  border: 1px solid #777;\n  color: #555;\n\n  z-index: 11;\n}\n\n."+g+"-pointer {\n  position: absolute;\n  display: none;\n  width: 0; height: 0;\n\n  -webkit-transition: left 0.4s ease-out, top 0.4s ease-out, opacity 0.2s;\n  -moz-transition: left 0.4s ease-out, top 0.4s ease-out, opacity 0.2s;\n  transition: left 0.4s ease-out, top 0.4s ease-out, opacity 0.2s;\n  opacity: 0;\n\n  z-index: 12;\n}\n\n."+g+'-pointer:after {\n  content: "";\n  position: absolute;\n  display: block;\n}\n\n.'+g+"-pointer-above {\n  border-left: 6px solid transparent;\n  border-right: 6px solid transparent;\n  border-top: 6px solid #777;\n}\n\n."+g+"-pointer-above:after {\n  border-left: 6px solid transparent;\n  border-right: 6px solid transparent;\n  border-top: 6px solid white;\n  left: -6px; top: -7px;\n}\n\n."+g+"-pointer-below {\n  border-left: 6px solid transparent;\n  border-right: 6px solid transparent;\n  border-bottom: 6px solid #777;\n}\n\n."+g+"-pointer-below:after {\n  border-left: 6px solid transparent;\n  border-right: 6px solid transparent;\n  border-bottom: 6px solid white;\n  left: -6px; top: 1px;\n}\n\n."+g+"-pointer-right {\n  border-top: 6px solid transparent;\n  border-bottom: 6px solid transparent;\n  border-right: 6px solid #777;\n}\n\n."+g+"-pointer-right:after {\n  border-top: 6px solid transparent;\n  border-bottom: 6px solid transparent;\n  border-right: 6px solid white;\n  left: 1px; top: -6px;\n}\n\n."+g+"-pointer-left {\n  border-top: 6px solid transparent;\n  border-bottom: 6px solid transparent;\n  border-left: 6px solid #777;\n}\n\n."+g+"-pointer-left:after {\n  border-top: 6px solid transparent;\n  border-bottom: 6px solid transparent;\n  border-left: 6px solid white;\n  left: -7px; top: -6px;\n}\n\n."+g+' input[type="text"],\n.'+g+" textarea {\n  background: #eee;\n  border: none;\n  outline: none;\n}\n\n."+g+' input[type="text"] {\n  padding: 0 4px;\n}\n\n')},{"../dom":62}],113:[function(a,b,c){function d(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function e(a,b){j.get(a).set(b)}function f(a,b){j.get(a).unset(b)}var g=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}();Object.defineProperty(c,"__esModule",{value:!0}),c.scheduleDOMUpdate=e,c.unscheduleDOMUpdate=f;var h=50,i=100,j=function(){function a(b){d(this,a),this.waiting=[],this.timeout=null,this.lastForce=0,this.pm=b,this.force=this.force.bind(this),b.on("flush",this.onFlush.bind(this))}return g(a,[{key:"set",value:function(a){0==this.waiting.length&&(this.timeout=setTimeout(this.force,h)),-1==this.waiting.indexOf(a)&&this.waiting.push(a)}},{key:"unset",value:function(a){var b=this.waiting.indexOf(a);b>-1&&this.waiting.splice(b,1)}},{key:"force",value:function(){for(clearTimeout(this.timeout),this.lastForce=Date.now();this.waiting.length;)for(var a=0;a<this.waiting.length;a++){var b=this.waiting[a]();b?this.waiting[a]=b:this.waiting.splice(a--,1)}}},{key:"onFlush",value:function(){this.waiting.length&&Date.now()-this.lastForce>i&&this.force()}}],[{key:"get",value:function(a){return a.mod.centralScheduler||(a.mod.centralScheduler=new this(a))}}]),a}();c.UpdateScheduler=function(){function a(b,c,e){var f=this;d(this,a),this.pm=b,this.start=e,this.events=c.split(" "),this.onEvent=this.onEvent.bind(this),this.events.forEach(function(a){return b.on(a,f.onEvent)})}return g(a,[{key:"detach",value:function(){var a=this;f(this.pm,this.start),this.events.forEach(function(b){return a.pm.off(b,a.onEvent)})}},{key:"onEvent",value:function(){e(this.pm,this.start)}},{key:"force",value:function(){if(this.pm.operation)this.onEvent();else{f(this.pm,this.start);for(var a=this.start;a;a=a());}}}]),a}()},{}],114:[function(a,b,c){function d(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function e(a,b){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!b||"object"!==(void 0===b?"undefined":h(b))&&"function"!=typeof b?a:b}function f(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+(void 0===b?"undefined":h(b)));a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}function g(a){var b=/^function (\w+)/.exec(a.toString());return b&&b[1]}var h="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(a){return typeof a}:function(a){return a&&"function"==typeof Symbol&&a.constructor===Symbol?"symbol":typeof a},i=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}();Object.defineProperty(c,"__esModule",{value:!0});var j=c.ProseMirrorError=function(a){function b(a){d(this,b);var c=e(this,Object.getPrototypeOf(b).call(this,a));return c.message!=a&&(c.message=a,Error.captureStackTrace?Error.captureStackTrace(c,c.name):c.stack=new Error(a).stack),c}return f(b,a),i(b,[{key:"name",get:function(){return this.constructor.name||g(this.constructor)||"ProseMirrorError"}}],[{key:"raise",value:function(a){throw new this(a)}}]),b}(Error);c.AssertionError=function(a){function b(){return d(this,b),e(this,Object.getPrototypeOf(b).apply(this,arguments))}return f(b,a),b}(j),c.NamespaceError=function(a){function b(){return d(this,b),e(this,Object.getPrototypeOf(b).apply(this,arguments))}return f(b,a),b}(j)},{}],115:[function(a,b,c){function d(a){var b=a.prototype;for(var c in e)e.hasOwnProperty(c)&&(b[c]=e[c])}Object.defineProperty(c,"__esModule",{value:!0}),c.eventMixin=d;var e={on:function(a,b){var c=this._handlers||(this._handlers={});(c[a]||(c[a]=[])).push(b)},off:function(a,b){var c=this._handlers&&this._handlers[a];if(c)for(var d=0;d<c.length;++d)if(c[d]==b){c.splice(d,1);break}},signal:function(a){for(var b=this._handlers&&this._handlers[a],c=arguments.length,d=Array(c>1?c-1:0),e=1;e<c;e++)d[e-1]=arguments[e];if(b)for(var f=0;f<b.length;++f)b[f].apply(b,d)},signalHandleable:function(a){var b=this._handlers&&this._handlers[a];if(b){for(var c=arguments.length,d=Array(c>1?c-1:0),e=1;e<c;e++)d[e-1]=arguments[e];for(var f=0;f<b.length;++f){var g=b[f].apply(b,d);if(!1!==g)return g}}return!1},signalPipelined:function(a,b){var c=this._handlers&&this._handlers[a];if(c)for(var d=0;d<c.length;++d)b=c[d](b);return b},hasHandler:function(a){var b=this._handlers&&this._handlers[a];return b&&b.length>0}}},{}],116:[function(a,b,c){function d(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}var e=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}();Object.defineProperty(c,"__esModule",{value:!0});c.Map=window.Map||function(){function a(){d(this,a),this.content=[]}return e(a,[{key:"set",value:function(a,b){var c=this.find(a);c>-1?this.content[c+1]=b:this.content.push(a,b)}},{key:"get",value:function(a){var b=this.find(a);return-1==b?void 0:this.content[b+1]}},{key:"has",value:function(a){return this.find(a)>-1}},{key:"find",value:function(a){for(var b=0;b<this.content.length;b+=2)if(this.content[b]===a)return b}},{key:"clear",value:function(){this.content.length=0}},{key:"size",get:function(){return this.content.length/2}}]),a}()},{}],117:[function(a,b,c){function d(a,b){var c=b||Object.create(null);for(var d in a)c[d]=a[d];return c}Object.defineProperty(c,"__esModule",{value:!0}),c.copyObj=d},{}],118:[function(a,b,c){function d(a,b,c){for(var d=0;d<a.length&&!(c(a[d],b)>0);d++);a.splice(d,0,b)}Object.defineProperty(c,"__esModule",{value:!0}),c.default=d},{}],119:[function(a,b,c){(function(a){!function(d){function e(a){throw new RangeError(H[a])}function f(a,b){for(var c=a.length,d=[];c--;)d[c]=b(a[c]);return d}function g(a,b){var c=a.split("@"),d="";return c.length>1&&(d=c[0]+"@",a=c[1]),a=a.replace(G,"."),d+f(a.split("."),b).join(".")}function h(a){for(var b,c,d=[],e=0,f=a.length;e<f;)b=a.charCodeAt(e++),b>=55296&&b<=56319&&e<f?(c=a.charCodeAt(e++),56320==(64512&c)?d.push(((1023&b)<<10)+(1023&c)+65536):(d.push(b),e--)):d.push(b);return d}function i(a){return f(a,function(a){var b="";return a>65535&&(a-=65536,b+=K(a>>>10&1023|55296),a=56320|1023&a),b+=K(a)}).join("")}function j(a){return a-48<10?a-22:a-65<26?a-65:a-97<26?a-97:w}function k(a,b){return a+22+75*(a<26)-((0!=b)<<5)}function l(a,b,c){var d=0;for(a=c?J(a/A):a>>1,a+=J(a/b);a>I*y>>1;d+=w)a=J(a/I);return J(d+(I+1)*a/(a+z))}function m(a){var b,c,d,f,g,h,k,m,n,o,p=[],q=a.length,r=0,s=C,t=B;for(c=a.lastIndexOf(D),c<0&&(c=0),d=0;d<c;++d)a.charCodeAt(d)>=128&&e("not-basic"),p.push(a.charCodeAt(d));for(f=c>0?c+1:0;f<q;){for(g=r,h=1,k=w;f>=q&&e("invalid-input"),m=j(a.charCodeAt(f++)),(m>=w||m>J((v-r)/h))&&e("overflow"),r+=m*h,n=k<=t?x:k>=t+y?y:k-t,!(m<n);k+=w)o=w-n,h>J(v/o)&&e("overflow"),h*=o;b=p.length+1,t=l(r-g,b,0==g),J(r/b)>v-s&&e("overflow"),s+=J(r/b),r%=b,p.splice(r++,0,s)}return i(p)}function n(a){var b,c,d,f,g,i,j,m,n,o,p,q,r,s,t,u=[];for(a=h(a),q=a.length,b=C,c=0,g=B,i=0;i<q;++i)(p=a[i])<128&&u.push(K(p));for(d=f=u.length,f&&u.push(D);d<q;){for(j=v,i=0;i<q;++i)(p=a[i])>=b&&p<j&&(j=p);for(r=d+1,j-b>J((v-c)/r)&&e("overflow"),c+=(j-b)*r,b=j,i=0;i<q;++i)if(p=a[i],p<b&&++c>v&&e("overflow"),p==b){for(m=c,n=w;o=n<=g?x:n>=g+y?y:n-g,!(m<o);n+=w)t=m-o,s=w-o,u.push(K(k(o+t%s,0))),m=J(t/s);u.push(K(k(m,0))),g=l(c,r,d==f),c=0,++d}++c,++b}return u.join("")}function o(a){return g(a,function(a){return E.test(a)?m(a.slice(4).toLowerCase()):a})}function p(a){return g(a,function(a){return F.test(a)?"xn--"+n(a):a})}var q="object"==typeof c&&c&&!c.nodeType&&c,r="object"==typeof b&&b&&!b.nodeType&&b,s="object"==typeof a&&a;s.global!==s&&s.window!==s&&s.self!==s||(d=s);var t,u,v=2147483647,w=36,x=1,y=26,z=38,A=700,B=72,C=128,D="-",E=/^xn--/,F=/[^\x20-\x7E]/,G=/[\x2E\u3002\uFF0E\uFF61]/g,H={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},I=w-x,J=Math.floor,K=String.fromCharCode;if(t={version:"1.3.2",ucs2:{decode:h,encode:i},decode:m,encode:n,toASCII:p,toUnicode:o},"function"==typeof define&&"object"==typeof define.amd&&define.amd)define("punycode",function(){return t});else if(q&&r)if(b.exports==q)r.exports=t;else for(u in t)t.hasOwnProperty(u)&&(q[u]=t[u]);else d.punycode=t}(this)}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],120:[function(a,b,c){b.exports=/[\0-\x1F\x7F-\x9F]/},{}],121:[function(a,b,c){b.exports=/[\xAD\u0600-\u0605\u061C\u06DD\u070F\u180E\u200B-\u200F\u202A-\u202E\u2060-\u2064\u2066-\u206F\uFEFF\uFFF9-\uFFFB]|\uD804\uDCBD|\uD82F[\uDCA0-\uDCA3]|\uD834[\uDD73-\uDD7A]|\uDB40[\uDC01\uDC20-\uDC7F]/},{}],122:[function(a,b,c){b.exports=/[!-#%-\*,-/:;\?@\[-\]_\{\}\xA1\xA7\xAB\xB6\xB7\xBB\xBF\u037E\u0387\u055A-\u055F\u0589\u058A\u05BE\u05C0\u05C3\u05C6\u05F3\u05F4\u0609\u060A\u060C\u060D\u061B\u061E\u061F\u066A-\u066D\u06D4\u0700-\u070D\u07F7-\u07F9\u0830-\u083E\u085E\u0964\u0965\u0970\u0AF0\u0DF4\u0E4F\u0E5A\u0E5B\u0F04-\u0F12\u0F14\u0F3A-\u0F3D\u0F85\u0FD0-\u0FD4\u0FD9\u0FDA\u104A-\u104F\u10FB\u1360-\u1368\u1400\u166D\u166E\u169B\u169C\u16EB-\u16ED\u1735\u1736\u17D4-\u17D6\u17D8-\u17DA\u1800-\u180A\u1944\u1945\u1A1E\u1A1F\u1AA0-\u1AA6\u1AA8-\u1AAD\u1B5A-\u1B60\u1BFC-\u1BFF\u1C3B-\u1C3F\u1C7E\u1C7F\u1CC0-\u1CC7\u1CD3\u2010-\u2027\u2030-\u2043\u2045-\u2051\u2053-\u205E\u207D\u207E\u208D\u208E\u2308-\u230B\u2329\u232A\u2768-\u2775\u27C5\u27C6\u27E6-\u27EF\u2983-\u2998\u29D8-\u29DB\u29FC\u29FD\u2CF9-\u2CFC\u2CFE\u2CFF\u2D70\u2E00-\u2E2E\u2E30-\u2E42\u3001-\u3003\u3008-\u3011\u3014-\u301F\u3030\u303D\u30A0\u30FB\uA4FE\uA4FF\uA60D-\uA60F\uA673\uA67E\uA6F2-\uA6F7\uA874-\uA877\uA8CE\uA8CF\uA8F8-\uA8FA\uA92E\uA92F\uA95F\uA9C1-\uA9CD\uA9DE\uA9DF\uAA5C-\uAA5F\uAADE\uAADF\uAAF0\uAAF1\uABEB\uFD3E\uFD3F\uFE10-\uFE19\uFE30-\uFE52\uFE54-\uFE61\uFE63\uFE68\uFE6A\uFE6B\uFF01-\uFF03\uFF05-\uFF0A\uFF0C-\uFF0F\uFF1A\uFF1B\uFF1F\uFF20\uFF3B-\uFF3D\uFF3F\uFF5B\uFF5D\uFF5F-\uFF65]|\uD800[\uDD00-\uDD02\uDF9F\uDFD0]|\uD801\uDD6F|\uD802[\uDC57\uDD1F\uDD3F\uDE50-\uDE58\uDE7F\uDEF0-\uDEF6\uDF39-\uDF3F\uDF99-\uDF9C]|\uD804[\uDC47-\uDC4D\uDCBB\uDCBC\uDCBE-\uDCC1\uDD40-\uDD43\uDD74\uDD75\uDDC5-\uDDC8\uDDCD\uDE38-\uDE3D]|\uD805[\uDCC6\uDDC1-\uDDC9\uDE41-\uDE43]|\uD809[\uDC70-\uDC74]|\uD81A[\uDE6E\uDE6F\uDEF5\uDF37-\uDF3B\uDF44]|\uD82F\uDC9F/},{}],123:[function(a,b,c){b.exports=/[ \xA0\u1680\u2000-\u200A\u2028\u2029\u202F\u205F\u3000]/},{}],124:[function(a,b,c){b.exports.Any=a("./properties/Any/regex"),b.exports.Cc=a("./categories/Cc/regex"),b.exports.Cf=a("./categories/Cf/regex"),b.exports.P=a("./categories/P/regex"),b.exports.Z=a("./categories/Z/regex")},{"./categories/Cc/regex":120,"./categories/Cf/regex":121,"./categories/P/regex":122,"./categories/Z/regex":123,"./properties/Any/regex":125}],125:[function(a,b,c){b.exports=/[\0-\uD7FF\uDC00-\uFFFF]|[\uD800-\uDBFF][\uDC00-\uDFFF]|[\uD800-\uDBFF]/},{}],126:[function(a,b,c){(function(b){var c="undefined"!=typeof window?window.angular:void 0!==b?b.angular:null;a("angular-elastic"),c.module("markdownProsemirror",["monospaced.elastic"]),a("./prosemirror.js"),a("./markdownProsemirror.js")}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./markdownProsemirror.js":127,"./prosemirror.js":128,"angular-elastic":1}],127:[function(a,b,c){!function(){function a(){b||(b=document.createElement("style"),b.textContent="/* Markdown Prosemirror CSS */\n      markdown-prosemirror {\n        display: flex;\n        flex-direction: column;\n      }\n\n      markdown-prosemirror prosemirror {\n        flex-grow: 1;\n      }\n\n      markdown-prosemirror .MarkDown {\n        flex-grow: 1;\n      }\n\n      markdown-prosemirror .markdown-prosemirror-toolbar {\n        display: flex;\n      }\n      .markdown-prosemirror-toolbar .filler {\n        flex-grow: 1;\n      }\n      ",document.head.insertBefore(b,document.head.firstChild))}var b=null;angular.module("markdownProsemirror").directive("markdownProsemirror",["$timeout",function(b){return{restrict:"E",require:"?ngModel",scope:{ngChange:"&",showMarkdown:"=?"},bindToController:{model:"=?ngModel",modelOptions:"=?ngModelOptions",prosemirrorOptions:"=?"},controller:["$scope",function(c){a(),this.change=function(){b(c.ngChange,0)}}],link:function(a,b,c,d){b[0].addEventListener("keydown",function(b){b=b||window.event,b.ctrlKey&&77===(b.which||b.keyCode)&&(a.showMarkdown=!a.showMarkdown,d.$commitViewValue(),a.$apply())})},controllerAs:"ctrl",template:'\n          <prosemirror ng-model="ctrl.model"\n            ng-model-options="ctrl.modelOptions"\n            prosemirror-options="ctrl.prosemirrorOptions"\n            ng-if="!showMarkdown"\n            ng-change="ctrl.change()"></prosemirror>\n          <textarea class="MarkDown"\n            msd-elastic ng-model="ctrl.model"\n            ng-model-options="ctrl.modelOptions"\n            ng-if="showMarkdown"\n            ng-change="ctrl.change()"></textarea>\n          '}}])}()},{}],128:[function(a,b,c){var d=a("../node_modules/prosemirror/dist/edit/main").ProseMirror;a("../node_modules/prosemirror/dist/menu/tooltipmenu"),a("../node_modules/prosemirror/dist/menu/menubar"),a("../node_modules/prosemirror/dist/markdown"),function(){angular.module("markdownProsemirror").directive("prosemirror",["$parse",function(a){return{restrict:"E",require:"?ngModel",link:function(b,c,e,f){if(f){var g=c[0],h={place:g,doc:"",docFormat:"markdown"},i=a(e.prosemirrorOptions)(b)||{};h=angular.merge(h,i);var j=new d(h);j.on("change",function(){f.$setViewValue(j.getContent("markdown"),"change")}),j.on("blur",function(){f.$setViewValue(j.getContent("markdown"),"blur")}),f.$render=function(){j.setContent(f.$viewValue||"","markdown")}}}}}])}()},{"../node_modules/prosemirror/dist/edit/main":74,"../node_modules/prosemirror/dist/markdown":86,"../node_modules/prosemirror/dist/menu/menubar":90,"../node_modules/prosemirror/dist/menu/tooltipmenu":91}]},{},[126]),angular.module("ytApp").service("asyncScriptService",["$window","$q","$timeout",function(a,b,c){return{load:function(b,d,e){var f="asyncScriptCallback"+(new Date).getTime(),g=document.createElement("script");g.type="text/javascript",g.src=b+"&callback="+f,g.id=d;var h=c(function(){e.$broadcast(d,!1)},4e3);document.getElementById(d)?(console.log("Already got script by id "+d+". Skipping appending altogether."),c.cancel(h)):document.body.appendChild(g),a[f]=function(){e.$broadcast(d,!0),c.cancel(h)}}}}]),angular.module("ytApp").service("AuthService",["$http","messageBusService","User",function(a,b,c){function d(a){g().success(function(b){null===j&&(j=new c),h(b),a&&a(j)})}function e(c,d,e){return a({method:"POST",url:"/yritykset/api/authenticate/login",data:{username:c,password:d,remember:e}}).success(function(){b.emit("login:success")}).error(function(a,c){403==c?b.emit("login:failed-unconfirmed"):b.emit("login:failed")})}function f(){return a({method:"POST",url:"/yritykset/api/authenticate/logout"}).success(function(a){j=null,b.emit("logout:success",a)})}function g(){return a({method:"POST",url:"/yritykset/api/authenticate/check"})}function h(a){j.setUserData(a)}function i(a){j?a(j):d(a)}var j=null;return{login:e,logout:f,getUser:i,setAuthenticationResult:h,refreshAuthenticationData:d}}]),angular.module("ytApp").service("chartDataService",function(){function a(a){for(var b=0;b<a.length;b++)a[b]&&(a[b]=Math.round(100*a[b]));return a}function b(a){for(var b=0;b<a.length;b++)a[b]&&(a[b]=parseInt(a[b],10));return a}function c(){return{credits:{enabled:!1},exporting:{buttons:{contextButton:{enabled:!1}}},lang:{thousandsSep:" "},plotOptions:{column:{borderWidth:0,color:"#00a2c0",dataLabels:{backgroundColor:"#fff",color:"#333",crop:!1,enabled:!0,inside:!1,overflow:"none",padding:1}},line:{color:"#00a2c0",lineWidth:4,marker:{fillColor:"#fff",lineColor:"#00a2c0",lineWidth:4,radius:6,symbol:"circle"},shadow:!0}},title:"",yAxis:{title:""}}}function d(c,d){var e,f,g,h,i,j,k,l;return e="{y}",g=d.graphData,i=d.type||"line",j="",k=d.name||"",l="",h=c.dates,"equityRatios"===g?(e="{y} %",f=a(c[g]),j="{value} %",l=" %"):f=b(c[g]),{chart:{type:i},plotOptions:{column:{dataLabels:{format:e}}},series:[{data:f,name:k,showInLegend:!1}],title:"",tooltip:{valueSuffix:l,pointFormat:"{series.name}: <b>{point.y}</b>"},xAxis:{categories:h},yAxis:{labels:{format:j}}}}return{getChartDefaults:c,getChartObject:d}}),angular.module("ytApp").service("mbrainChartDataService",function(){function a(){return{title:"",credits:{enabled:!1},exporting:{buttons:{contextButton:{enabled:!1}}},chart:{type:"pie",plotBackgroundColor:null,plotBorderWidth:0,
plotShadow:!1},tooltip:{pointFormat:"{series.name}: <b>{point.percentage:.1f}%</b>"},plotOptions:{pie:{size:"95%",dataLabels:{enabled:!0,distance:-40,style:{color:"white"},format:"{point.percentage:.1f}%"},showInLegend:!0,startAngle:0,endAngle:360,center:["50%","50%"]}},series:[{type:"pie",name:"Sentimentti",innerSize:"55%"}]}}function b(a,b){var c,d=b.graphData,e=b.name;return c="sentiment"===d?a.sentimentData.data:a.sourcesData.data,{title:"",credits:{enabled:!1},exporting:{buttons:{contextButton:{enabled:!1}}},chart:{type:"pie",plotBackgroundColor:null,plotBorderWidth:0,plotShadow:!1,width:424,height:424},tooltip:{pointFormat:"{series.name}: <b>{point.percentage:.1f}%</b>"},legend:{itemStyle:{fontWeight:"normal"}},plotOptions:{pie:{size:"95%",dataLabels:{enabled:!0,distance:-40,style:{color:"white"},format:"{point.percentage:.1f}%"},showInLegend:!0,startAngle:0,endAngle:360,center:["50%","50%"]}},series:[{type:"pie",name:e,innerSize:"55%",data:c}]}}return{getChartDefaults:a,getChartObject:b}}),angular.module("ytApp").service("emailService",["$http",function(a){function b(b,c,d){return a({method:"GET",url:"/yritykset/api/mail/add",params:{email:b,index:c,receiveMarketingEmails:d}})}function c(b){return a({method:"GET",url:"/yritykset/api/mail/remove",params:{index:b}})}function d(){return a({method:"GET",url:"/yritykset/api/mail/send"})}return{set:b,remove:c,send:d}}]),angular.module("ytApp").service("followCompanyService",["$http",function(a){function b(b){return a({method:"GET",url:"/yritykset/api/follows/"+b})}function c(b){return a({method:"POST",url:"/yritykset/api/follows",data:b})}function d(b){return a({method:"DELETE",url:"/yritykset/api/follows",data:b})}return{getFollowStatus:b,addFollow:c,removeFollow:d}}]),angular.module("ytApp").service("forestValueService",["$http","$q",function(a,b){function c(a){if(void 0!==a){var c=[];c.push(d(a)),b.all(c).then(function(a){a[0].data})}}function d(b){return a({method:"GET",url:"/yritykset/api/checkforestvalue/"+b})}function e(b){return a({method:"POST",url:"/yritykset/api/checkforestvalue",data:b})}function f(b){return a({method:"POST",url:"/yritykset/api/getforestvaluereporturl",data:b})}return{getForestValue:c,checkForestValue:e,getForestValueReportUrl:f}}]),angular.module("ytApp").service("globalsService",["$window",function(a){var b=a.yt||{};return b.companies=b.companies||{},b.languages=b.languages||{},b.countryCode=b.countryCode||{},b.page=b.page||"",{languages:b.languages,searchCountry:b.searchCountry,page:b.page,getLanguageById:function(a){if(!b.languages)return{};var c;return b.languages.forEach(function(b){b.id===parseInt(a)&&(c=b)}),c||{}},businessId:function(){var a=[];return angular.forEach(b.companies,function(b){-1===a.indexOf(b.businessId)&&a.push(b.businessId)}),a},countryCode:function(){var a=[];return angular.forEach(b.companies,function(b){-1===a.indexOf(b.countryCode)&&a.push(b.countryCode)}),a}}}]),angular.module("ytApp").service("highchartsService",["$window",function(a){return{get:function(){return a.Highcharts}}}]),angular.module("ytApp").service("iScrollService",["$window",function(a){return{get:function(){return a.IScroll}}}]),angular.module("ytApp").service("keyboardService",["$window",function(a){return a.Mousetrap}]),angular.module("ytApp").factory("messageBusService",["$rootScope",function(a){var b={};return b.emit=function(b,c){c=c||{},a.$emit(b,c)},b.on=function(b,c,d){var e=a.$on(b,c);d&&d.$on("$destroy",e)},b}]),angular.module("ytApp").service("modernizrService",["$window",function(a){return{get:function(){return a.Modernizr}}}]),angular.module("ytApp").service("reportAvailabilityService",["$http","messageBusService","$q","shoppingCartService",function(a,b,c,d){function e(b,c){var d=a({method:"GET",url:"/yritykset/api/reports/availability",params:{businessId:b,countryCode:c}});return console.log("AVAILABILITY JSON:",d),d}function f(a){return!("JULKISUUSRAPORTTI"===a.reportName&&!a.statistics)&&(null!==a.available&&a.available&&a.reportId>-1)}function g(a){void 0===a.$available&&(a.$available=!1)}function h(a,b){a.$loadingAvailability=b}function i(a,b){a.forEach(function(a){h(a,b)})}function j(a,b){console.log("METS assignAvailabilityInfo",a,b),a.$available=!0,console.log("METS assignAvailabilityInfo model.$available",a.$available),a.$availableTo=b.availableTo,a.$showAvailableTo=b.showAvailableTo,a.$showNoCreditInformation=b.showNoCreditInformation,a.$statistics=b.statistics}function k(a,b){if(void 0!==a){a.bignetLoading=!0;var d=[];d.push(l(a.companyName,a.countryCode)),c.all(d).then(function(b){a.companyList=b[0].data,a.companyListSize=b[0].data.length,a.bignetLoading=!1})}}function l(b,c){return a({method:"GET",url:"/yritykset/api/reports/bignetcompanieswithsimilarname",params:{companyName:b,countryCode:c}})}return{assignProductAvailabilities:function(a,h,l){function m(a){a.forEach(n),i(h,!1),b.emit("availabilities:loaded")}function n(a){a.data.forEach(o),h.forEach(g)}function o(a){if(console.log("report_availability_service processCompanyReportAvailability availability: ",a),f(a)){var b=d.getProductByBusinessIdAndReportId(a.businessId,a.reportId,l);void 0!==b&&j(b,a)}else if(30==a.reportId){var b=d.getProductByBusinessIdAndReportId(a.businessId,a.reportId,l);k(b,a)}}if(console.log("getCompanies() assignProductAvailabilities products",h),a.length>0&&void 0!==a[0]){console.log("METS processCompanyReportAvailability countryCode: ",l),void 0===l&&(l="FI");var p=[];a.forEach(function(a){p.push(e(a,l))}),i(h,!0),c.all(p).then(m)}}}}]),angular.module("ytApp").service("tabService",function(){var a=1;return{getTab:function(){return a},setTab:function(b){a=b}}}),angular.module("ytApp").service("generateReportService",["$http",function(a){function b(b){if(!b.isBusinessIdNotRequired())return a({method:"GET",url:"/yritykset/api/reports/generate",params:{businessId:b.businessId,reportId:b.reportId,creditAmount:b.creditAmount,language:b.lang,countryCode:b.countryCode}}).success(function(a){a&&(b.$valueReportData=a),b.$generationDone=!0,b.$available=!0}).error(function(){b.$available=!1,b.$generationDone=!0});b.$generationDone=!0,b.$available=!0}return{generate:b}}]),angular.module("ytApp").service("purchaseInitService",["$http",function(a){function b(b,c){return"save"===b?a({method:"GET",url:"/yritykset/api/purchase/save-card",params:{method:b}}).success(function(a){}):a({method:"GET",url:"/yritykset/api/purchase/init",params:{method:b,product:c}}).success(function(a){})}return{initPurchase:b}}]),angular.module("ytApp").service("shoppingCartService",["ShoppingCart","globalsService",function(a,b){return{shoppingCart:a.newInstance(),products:[],getBusinessIdsCSV:function(c){var d=a.getUniqueBusinessIdsFromCookieData(c);return b.businessId().forEach(function(a){a&&-1===d.indexOf(a)&&d.push(a)}),d.join(",")},getCountryCodesCSV:function(c){var d=a.getUniqueCountryCodesFromCookieData(c);return b.countryCode().forEach(function(a){a&&-1===d.indexOf(a)&&d.push(a)}),d.join(",")},getProductByBusinessIdAndReportId:function(a,b,c){for(var d=0;d<this.products.length;d++){var e=this.products[d],f=void 0;if(Array.isArray(c)?f=c[0].toUpperCase():null!=c&&(f=c.toUpperCase()),e.businessId==a&&e.reportId===b&&e.countryCode==f)return e;if(a.indexOf("-")>-1&&e.businessId.indexOf("-")<0){var g=a.replace("-","");if(e.businessId===g&&e.reportId===b)return e}}},getProductByBusinessIdAndReportIdAndLang:function(a,b,c){for(var d=0;d<this.products.length;d++){var e=this.products[d];if(e.businessId==a&&e.reportId===b&&e.lang===c)return e}},getProductByReportIdWhenBusinessIdNotRequired:function(a){for(var b=0;b<this.products.length;b++){var c=this.products[b];if(c.reportId===a)return c}},containsInfoWatcherProduct:function(){for(var a=0;a<this.shoppingCart.products.length;a++){var b=this.shoppingCart.products[a];if(22===b.reportId||24===b.reportId||25===b.reportId||26===b.reportId)return!0}return!1},containsValueReport:function(){for(var a=0;a<this.shoppingCart.products.length;a++)if(23===this.shoppingCart.products[a].reportId)return!0;return!1}}}]),angular.module("ytApp").service("redirectionService",["messageBusService","$window",function(a,b){a.on("logout:success",function(a,c){var d="string"==typeof c,e=void 0!==c&&null!==c&&""!==c;d&&e&&c.match(/http.*/)&&(b.location.href=c)})}]).run(["redirectionService",function(a){}]),angular.module("ytApp").service("closeService",function(){var a=[],b=null,c=function(a,b){return{ctrl:a,group:b}};return{registerClosable:function(b,d){a.push(new c(b,d))},setClickedGroup:function(a){b=a},clearClickedGroup:function(){b=null},closeAllNonClicked:function(){for(var c=0;c<a.length;c++){var d=a[c];d.group!==b&&(d.ctrl.closable.close(),d.ctrl.$apply())}this.clearClickedGroup()},processGroup:function(c){for(var d=0;d<a.length;d++){var e=a[d];e.group===b&&(e.ctrl.closable=c,e.ctrl.$apply())}}}}),angular.module("ytApp").service("userUpdateService",["$http","messageBusService",function(a,b){function c(c,d,e,f){return a({method:"POST",url:"/yritykset/api/user/update",data:{businessId:c,userTitleId:d,otherUserTitle:e,userType:f}}).success(function(){b.emit("userUpdate:success")}).error(function(){b.emit("userUpdate:failed")})}return{updateUser:c}}]),angular.module("ytApp").service("infoWatcherReportService",["$http",function(a){return{getBasicInfo:function(b){return a({method:"GET",url:"/yritykset/api/report/tietovahti/perustiedot",params:{businessId:b}})},getResponsiblePersons:function(b){return a({method:"GET",url:"/yritykset/api/report/tietovahti/vastuuhenkilot",params:{businessId:b}})},getOwners:function(b){return a({method:"GET",url:"/yritykset/api/report/tietovahti/osakkaat",params:{businessId:b}})},getRatingClass:function(b){return a({method:"GET",url:"/yritykset/api/report/tietovahti/ratingluokka",params:{businessId:b}})},getCreditQueries:function(b){return a({method:"GET",url:"/yritykset/api/report/tietovahti/luottokyselyt",params:{businessId:b}})},getMbrainGraphData:function(b){return a({method:"GET",url:"/yritykset/api/report/tietovahti/imagomielikuva",params:{businessId:b}})},getMbrainGraphDataType:function(b){return a({method:"GET",url:"/yritykset/api/report/tietovahti/imagomielikuvatyyppi",params:{businessId:b}})},getMbrainGraphDataStatus:function(b){return a({method:"GET",url:"/yritykset/api/report/tietovahti/imagomielikuvastatus",params:{businessId:b}})},getMergers:function(b){return a({method:"GET",url:"/yritykset/api/report/tietovahti/fuusiot",params:{businessId:b}})}}}]),angular.module("ytApp").service("employmentService",["$http",function(a){return{getCompanyJobAdvertisements:function(b){return a({method:"GET",url:"/yritykset/api/companysJobAdvertisements",params:{businessId:b}})}}}]),angular.module("ytApp").service("datalayerService",["$http",function(a){return{getPurchaseDataLayer:function(){return a({method:"GET",url:"/yritykset/api/shopping-cart/datalayer"})}}}]),angular.module("ytApp").controller("AddRemoveCtrl",["$scope",function(a){a.elements=[],a.email=[],a.addElement=function(b){a.elements.push(b)},a.removeElement=function(b){a.elements.splice(b,1),a.email.splice(b,1)}}]),angular.module("ytApp").controller("AutocompleteCtrl",["$scope","keyboardService","messageBusService","$window",function(a,b,c,d){function e(){s>0&&(s-=1)}function f(){s<r.length&&(s+=1)}function g(){0!==s&&(h().$selected=!0)}function h(){return r[s-1]}function i(){angular.forEach(r,function(a){delete a.$selected})}function j(){s=0}function k(){i(),e(),g(),a.$apply()}function l(){i(),f(),g(),a.$apply()}function m(){return t&&"function"==typeof t.setSelectedResult}function n(b){return 0===s||(0!==s&&(o(b,h()),a.$apply()),!1)}function o(a,b){m()&&(t.setSelectedResult(a,b),t.closable.close()),a.$preventNavigation||(void 0!==b.overviewUri?d.location=b.overviewUri:void 0!==b.decisionMakersUrl&&(d.location=b.decisionMakersUrl))}function p(){b.bind("up",k),b.bind("down",l),b.bind("enter",n)}function q(){b.unbind("up"),b.unbind("down"),b.unbind("enter")}var r=[],s=0,t=null;a.processClick=function(a){var b=angular.element(a.currentTarget).attr("href");angular.forEach(r,function(c){b!==c.overviewUri&&b!==c.decisionMakersUrl||o(a,c)}),a.preventDefault()},c.on("searchQuery:changed",function(){i(),j(),q()}),c.on("searchResults:queried",function(a,b){r=b,p()}),c.on("searchResults:cleared",function(){q()}),c.on("searchResults:current",function(a,b){i(),j(),q(),r=b.results,t=b.scope,p()})}]),angular.module("ytApp").controller("AutocompleteBusinessIdCtrl",["$scope","keyboardService","messageBusService","$window",function(a,b,c,d){function e(){s>0&&(s-=1)}function f(){s<r.length&&(s+=1)}function g(){0!==s&&(h().$selected=!0)}function h(){return console.log("VALITTU FIRMA: "+r[s-1]),r[s-1]}function i(){angular.forEach(r,function(a){delete a.$selected})}function j(){s=0}function k(){i(),e(),g(),a.$apply()}function l(){i(),f(),g(),a.$apply()}function m(){return t&&"function"==typeof t.setSelectedResult}function n(b){return 0===s||(0!==s&&(o(b,h()),a.$apply()),!1)}function o(a,b){m()&&(t.setSelectedResult(a,b),t.closable.close()),a.$preventNavigation||(void 0!==b.overviewUri?d.location=b.overviewUri:void 0!==b.decisionMakersUrl&&(d.location=b.decisionMakersUrl))}function p(){b.bind("up",k),b.bind("down",l),b.bind("enter",n)}function q(){b.unbind("up"),b.unbind("down"),b.unbind("enter")}var r=[],s=0,t=null;a.processClick=function(a){var b=angular.element(a.currentTarget).attr("href");angular.forEach(r,function(c){b!==c.overviewUri&&b!==c.decisionMakersUrl||o(a,c)}),a.preventDefault()},c.on("searchQuery:changed",function(){i(),j(),q()}),c.on("searchResults:queried",function(a,b){r=b,p()}),c.on("searchResults:cleared",function(){q()}),c.on("searchResults:current",function(a,b){i(),j(),q(),r=b.results,t=b.scope,p()})}]),angular.module("ytApp").controller("BusinessIdModalCtrl",["$scope","$cookies","userUpdateService","AuthService",function(a,b,c,d){function e(){return a.selected&&999===a.selected.id}function f(){$("#userTitleId").find("> option").each(function(){$(this).removeAttr("selected")}),a.showOtherUserTitle=!1,g=!1}d.getUser(function(c){a.user=c,a.businessId="",a.showModal=!1,a.showModalWithOnlyTitle=!1,a.showError=!1,a.user&&"1"!==a.user.userType&&"2"!==a.user.userType&&!b.get("hideBusinessIdModal")&&(a.showModal=!0),a.user&&"1"==a.user.userType&&null==a.user.userTitleId&&!b.get("hideBusinessIdModal")&&(a.showModal=!0,a.showModalWithOnlyTitle=!0)}),a.closeModal=function(){b.put("hideBusinessIdModal",!0),a.showModal=!1,a.showModalWithOnlyTitle=!1},a.processSuccess=function(){a.closeModal()},a.processFailure=function(){a.closeModal()},a.userIsPrivate=function(){c.updateUser("",null,null,"2").success(a.processSuccess).error(a.processFailure)},a.showOtherUserTitle=!1;var g=!1;a.initOptions=function(b,c){a.userTitles=b.userTitles,a.setSelected(c),a.showOtherUserTitle=e()},a.userTitleChanged=function(){a.showOtherUserTitle=e(),g=!0},a.setSelected=function(b){g&&f(),b&&angular.forEach(a.userTitles,function(c){c.id===b&&(a.selected=c,a.showOtherUserTitle=e())})},a.updateBusinessID=function(){a.businessId=a.updateBusinessIDForm.searchForm.businessId.$modelValue,a.userTitleId=a.selected.id,a.otherUserTitle=a.user.otherUserTitle,a.businessId&&a.userTitleId||a.userTitleId?a.businessId&&"999"==a.userTitleId&&!a.otherUserTitle?a.showError=!0:a.businessId||"999"!=a.userTitleId||a.otherUserTitle?c.updateUser(a.businessId,a.userTitleId,a.otherUserTitle,"1").success(a.processSuccess).error(a.processFailure):a.showError=!0:a.showError=!0}}]),angular.module("ytApp").controller("CarouselCtrl",["$scope",function(a){a.myInterval=7e3,a.noWrapSlides=!1,a.active=0}]),angular.module("ytApp").run(["$templateCache",function(a){a.put("carousel-yt.html",'<div ng-mouseenter="pause()" ng-mouseleave="play()" class="carousel" ng-swipe-right="prev()" ng-swipe-left="next()">\n\t<div class="carousel-inner" ng-transclude></div>\n\t<ol class="carousel-indicators" ng-show="slides.length > 1">\n\t\t<li ng-repeat="slide in slides | orderBy:indexOfSlide track by $index" ng-class="{ \'carousel__indicator--active\': isActive(slide) }" ng-click="select(slide)" class="carousel__indicator">\n\t\t\t<span class="carousel__indicator__item"></span>\n\t\t</li>\n\t</ol>\n</div>\n')}]),angular.module("ytApp").controller("CloseCtrl",["$scope","$cookies",function(a,b){function c(a){if(a&&!a.id)throw new Error('Id attribute has to be defined when init() is used (e.g: init({ id: "exampleCookieId" }))')}function d(){var c=b.get(e());c&&"true"===c&&(a.closed=!0)}function e(){return a.attrs?a.attrs.id+"Closed":void 0}a.attrs=null,a.closed=!1,a.init=function(b){c(b),a.attrs=b,d()},a.close=function(){if(c(a.attrs),a.attrs)if(a.attrs.persistent){console.log("persistent");var d=new Date,f=new Date(d.getFullYear()+1,d.getMonth(),d.getDate());b.put(e(),!0,{expires:f,path:"/"})}else b.put(e(),!0);a.closed=!0},a.reset=function(){c(a.attrs),a.attrs&&b.remove(e()),a.closed=!1}}]),angular.module("ytApp").controller("CompanyController",["$window","$scope",function(a,b){b.yt=a.yt,b.company=b.yt.company,b.returnCompanyFeed=function(){"Twitter"===b.company.feed?b.company.twitterUrl&&""!==b.company.twitterUrl?b.feed="Twitter":b.company.facebookUrl&&""!==b.company.facebookUrl?b.feed="Facebook":b.company.linkedinUrl&&""!==b.company.linkedinUrl?b.feed="LinkedIn":b.feed="Company data":"Facebook"===b.company.feed?b.company.facebookUrl&&""!==b.company.facebookUrl?b.feed="Facebook":b.company.twitterUrl&&""!==b.company.twitterUrl?b.feed="Twitter":b.company.linkedinUrl&&""!==b.company.linkedinUrl?b.feed="LinkedIn":b.feed="Company data":"Linkedin"===b.company.feed?b.company.linkedinUrl&&""!==b.company.linkedinUrl?b.feed="LinkedIn":b.company.twitterUrl&&""!==b.company.twitterUrl?b.feed="Twitter":b.company.facebookUrl&&""!==b.company.facebookUrl?b.feed="Facebook":b.feed="Company data":void 0===b.company.feed?b.company.twitterUrl&&""!==b.company.twitterUrl?b.feed="Twitter":b.company.facebookUrl&&""!==b.company.facebookUrl?b.feed="Facebook":b.company.linkedinUrl&&""!==b.company.linkedinUrl?b.feed="LinkedIn":b.feed="Company data":b.feed="Company data"},b.returnCompanyFeed()}]),angular.module("ytApp").controller("CompanyInfoCtrl",["$window","$scope","messageBusService",function(a,b,c){b.aliasNames=[],b.displayNum=3,b.showAll=!1,b.yearOfDate=(new Date).getFullYear(),b.init=function(a){b.showAll=!1,null!==a&&(b.aliasNames=a.names)},b.toggle=function(){b.showAll?(b.displayNum=3,b.showAll=!1,c.emit("resetHeight")):(b.displayNum=b.aliasNames.length,b.showAll=!0)}}]),angular.module("ytApp").controller("CreateCompanyController",["$window","$scope","$q","Upload","$http","shoppingCartService",function(a,b,c,d,e,f){function g(a){b.isSubmittingPage=a}function h(a){b.submittingFailed=a}function i(a){g(!1),h(!0),a.errorType?b.submittingError=a.errorType:a.error?b.submittingError="Unauthorized":b.submittingError=""}function j(a){g(!1),a&&"OK"===a.status?b.tabCtrl.setTab(3):i(a)}function k(b){g(!1),b&&"OK"===b.status?a.location.href="/yritykset/ostoskori":i(b)}function l(){return!!b.companyForm&&!b.companyForm.$invalid}b.yt=a.yt,b.currentCompanyData=b.yt.company,b.companyPlaceholder="## Yrityksen esittely \n Kerro lyhyesti yrityksen vahvoista puolista. \n## Yrityksen toimialakokemus \n Mill toimialalla yritys toimii? Mink toimialojen asiakkuuksista yrityksell on vahvaa kokemusta? Kerro yrityksesi toimialaosaamisesta, mys oman toimialan ulkopuolisesta sellaisesta. \n## Yrityksen trkeimmt arvot \n * Trkein arvo \n * Toinen trke arvo",b.company={},b.company.name=b.yt.companies[0].name,b.company.businessId=b.yt.companies[0].businessId,b.company.logo=b.currentCompanyData.logoId||"",b.logoUrl=b.currentCompanyData.logoUrl||"",b.company.cover=b.currentCompanyData.coverImageId||"",b.backgroundUrl=b.currentCompanyData.coverImageUrl||"",b.company.bodyText=b.currentCompanyData.bodyTextMarkdown||b.companyPlaceholder,b.company.twitterUrl=b.currentCompanyData.twitterUrl||"",b.company.facebookUrl=b.currentCompanyData.facebookUrl||"",b.company.linkedInUrl=b.currentCompanyData.linkedInUrl||"",b.company.synopsis=b.currentCompanyData.synopsisMarkdown||"",b.company.email=b.currentCompanyData.email||"",b.company.phoneNumber=b.currentCompanyData.phoneNumber||"",b.company.feed=b.currentCompanyData.feed||"",b.valid=!0,b.cart=f.shoppingCart,b.prosemirrorOptions={menuBar:{float:!0}},b.getTwitterId=function(a){return a.replace("www.","").replace("http://twitter.com/","").replace("https://twitter.com/","")},b.getLinkedinId=function(a){return a.replace("www.","").replace("http://linkedin.com/company/","").replace("https://linkedin.com/company/","")},b.upload=function(a,c){b.imageError="",d.upload({url:"/yritykset/api/upload",data:{file:a,companyName:b.company.name,imageType:c}}).then(function(a){if("OK"===a.data.status)"background"===c?(b.backgroundUrl=a.data.url,b.company.cover=a.data.id):"logo"===c&&(b.logoUrl=a.data.url,b.company.logo=a.data.id);else{var d="";d=a.data.error?a.data.error:"Kuvan tiedostotyypin tytyy olla joko JPEG tai PNG.",b.imageError="Kuvan lataaminen ei onnistunut. "+d}},function(a){var c="";c=a.status?a.status:"Kuvan tiedostotyypin tytyy olla joko JPEG tai PNG.",b.imageError="Kuvan lataaminen ei onnistunut. "+c},function(a){b.progressPercentage=parseInt(100*a.loaded/a.total)})},g(!1),h(!1),b.validateForm=function(){l()?(b.valid=!0,b.tabCtrl.setTab(2)):b.valid=!1},b.submitCompanyPageForm=function(){g(!0),h(!1),e.post("/yritykset/api/company/create",JSON.stringify(b.company)).success(j).error(i)},b.setRatingAlfaReportLanguageToEnglish=function(){console.log("setRatingAlfaReportLanguageToEnglish metodissa"),b.product=f.getProductByBusinessIdAndReportId(b.company.businessId,25,"en"),b.cart.addProduct(b.product),g(!0),h(!1),e.post("/yritykset/api/company/storedata",JSON.stringify(b.company)).success(k).error(i)},b.storeCompanyPageForm=function(){b.product=f.getProductByBusinessIdAndReportId(b.company.businessId,25);var a=b.cart;b.ShowSpinner=!0,a.addProduct(b.product),g(!0),h(!1),e.post("/yritykset/api/company/storedata",JSON.stringify(b.company)).success(k).error(i)}}]),angular.module("ytApp").controller("ExpiredPaymentMethodsModalCtrl",["$scope","$http","AuthService",function(a,b,c){c.getUser(function(b){a.user=b,a.showModal=!1,a.user&&a.user.expiredPaymentMethods&&(a.showModal=!0)}),a.closeModal=function(){return b({method:"GET",url:"/yritykset/api/user/expiredPaymentMethod"}).success(function(){a.showModal=!1}).error(function(){a.showModal=!1})}}]),angular.module("ytApp").controller("FallbackCtrl",["$scope","modernizrService",function(a,b){a.browser={input:{placeholder:b.get().input.placeholder}}}]),angular.module("ytApp").controller("FollowCtrl",["$attrs","$scope","$window","globalsService","AuthService","followCompanyService","messageBusService",function(a,b,c,d,e,f,g){function h(a){b.isAuthorized=a.isAuthenticated()}function i(){function a(a){!0===a.data?b.isFollowed=!0:b.isFollowed=!1}f.getFollowStatus(l).then(a)}function j(){b.isChangingFollowStatus=!1,b.changedFollowStatus=!1,b.isFollowed=!1}var k=d.businessId(),l=a.businessId||k[0];e.getUser(function(a){b.user=a}),b.isFollowed=!1,b.isChangingFollowStatus=!1,b.changedFollowStatus=!1,b.couldNotFollow=!1,b.couldNotUnfollow=!1,b.addFollow=function(){function a(a){"OK"===a.data.status?(b.couldNotFollow=!1,b.isChangingFollowStatus=!1,b.changedFollowStatus=!0,b.isFollowed=!0):(b.isChangingFollowStatus=!1,b.couldNotFollow=!0)}function c(){b.couldNotFollow=!0}f.addFollow(l).then(a,c)},b.removeFollow=function(){function a(a){"OK"===a.data.status?(b.couldNotUnfollow=!1,b.isChangingFollowStatus=!1,b.changedFollowStatus=!0,b.isFollowed=!1):(b.isChangingFollowStatus=!1,b.couldNotUnfollow=!0)}function c(){b.couldNotUnfollow=!0}f.removeFollow(l).then(a,c)},b.tryToFollow=function(){b.isChangingFollowStatus=!0,e.getUser(function(a){h(a),b.isAuthorized&&b.addFollow()})},b.tryToUnfollow=function(){b.isChangingFollowStatus=!0,e.getUser(function(a){h(a),b.isAuthorized&&b.removeFollow()})},b.newCompanyFollow=function(){function a(a){"OK"===a.data.status?c.location.reload(!0):(b.isChangingFollowStatus=!1,b.couldNotFollow=!0)}function d(){b.couldNotFollow=!0}if(null!=(l=b.updateBusinessIdFollowForm.searchForm.businessId.$modelValue)&&""!==l){b.isChangingFollowStatus=!0;f.addFollow(l).then(a,d)}},g.on("user:updated",function(c,d){h(d),b.isAuthorized&&(void 0!==a.initiallyFollowed?b.isFollowed=a.initiallyFollowed:i())}),i(),g.on("login:success",function(){j(),i()}),g.on("login:changePassword",function(){j(),i()}),g.on("logout:success",j)}]),angular.module("ytApp").controller("ForestValueCtrl",["$attrs","$scope","$window","globalsService","AuthService","forestValueService","messageBusService",function(a,b,c,d,e,f,g){function h(){if(null!=(k=b.searchForestValueForm.searchForm.forestValue.$modelValue)&&""!==k){f.getForestValueReportUrl(k).then(function(a){b.url=a.data,b.forestValueReady=!0,b.isSearching=!1})}}function i(a,c,d,e){var f,g,h=!1,i=11;if(void 0!=c&&(i=c,h=!0),void 0!=d&&(f=d),void 0!=e&&(g=e),!h){document.getElementById("map").innerHTML=""}b.data&&b.data.longitude&&b.data.latitude&&(f=b.data.longitude,g=b.data.latitude),b.isMapReady=!0,Proj4js.defs["EPSG:3067"]="+proj=utm +zone=35 +ellps=GRS80 +units=m +no_defs",a=new OpenLayers.Map({units:"m",allOverlays:!0,projection:new OpenLayers.Projection("EPSG:3067"),resolutions:[8192,4096,2048,1024,512,256,128,64,32,16,8,4,2,1,.5],maxExtent:new OpenLayers.Bounds(-548576,6291456,1548576,8388608)});var j=new OpenLayers.Layer.WMTS({name:"Taustakartta",url:"/yritykset/karttakuvapalvelut/maasto/wmts",requestEncoding:"REST",layer:"taustakartta",matrixSet:"ETRS-TM35FIN",format:"image/png",style:"default",gutter:0,buffer:0,transitionEffect:"resize",resolutions:[8192,4096,2048,1024,512,256,128,64,32,16,8,4,2,1,.5],units:"m",opacity:1,isBaseLayer:!0,maxExtent:new OpenLayers.Bounds(-548576,6291456,1548576,8388608),projection:new OpenLayers.Projection("EPSG:3067".toUpperCase()),sphericalMercator:!1}),k=new OpenLayers.Layer.WMTS({name:"Ortokuva",url:"/yritykset/karttakuvapalvelut/maasto/wmts",requestEncoding:"REST",layer:"ortokuva",matrixSet:"ETRS-TM35FIN",format:"image/jpeg",style:"default",gutter:0,buffer:0,transitionEffect:"resize",resolutions:[16,8,4,2,1,.5],units:"m",opacity:1,isBaseLayer:!0,maxExtent:new OpenLayers.Bounds(-548576,6291456,1548576,8388608),projection:new OpenLayers.Projection("EPSG:3067".toUpperCase()),sphericalMercator:!1}),l=new OpenLayers.Layer.WMTS({name:"Maastokartta",url:"/yritykset/karttakuvapalvelut/maasto/wmts",requestEncoding:"REST",layer:"maastokartta",matrixSet:"ETRS-TM35FIN",format:"image/png",style:"default",resolutions:[8192,4096,2048,1024,512,256,128,64,32,16,8,4,2,1,.5],units:"m",opacity:1,gutter:0,buffer:0,transitionEffect:"resize",isBaseLayer:!0,maxExtent:new OpenLayers.Bounds(-548576,6291456,1548576,8388608),projection:new OpenLayers.Projection("EPSG:3067".toUpperCase()),sphericalMercator:!1}),m=new OpenLayers.Layer.WMTS({name:"Kiinteistrajat",url:"/yritykset/karttakuvapalvelut/kiinteisto/wmts",requestEncoding:"REST",layer:"kiinteistojaotus",matrixSet:"ETRS-TM35FIN",format:"image/png",style:"default",resolutions:[4,2,1,.5],units:"m",opacity:1,isBaseLayer:!1,maxExtent:new OpenLayers.Bounds(-548576,6291456,1548576,8388608),projection:new OpenLayers.Projection("EPSG:3067".toUpperCase()),sphericalMercator:!1}),n=new OpenLayers.Layer.WMTS({name:"Kiinteisttunnukset",url:"/yritykset/karttakuvapalvelut/kiinteisto/wmts",requestEncoding:"REST",layer:"kiinteistotunnukset",matrixSet:"ETRS-TM35FIN",format:"image/png",style:"default",resolutions:[4,2,1,.5],units:"m",opacity:1,isBaseLayer:!1,maxExtent:new OpenLayers.Bounds(-548576,6291456,1548576,8388608),projection:new OpenLayers.Projection("EPSG:3067".toUpperCase()),sphericalMercator:!1});if(l.setVisibility(!1),k.setVisibility(!1),n.setVisibility(!0),m.setVisibility(!0),a.addLayers([j,k,l,m,n]),!h){var o=new OpenLayers.Layer.Markers("Markers");a.addLayer(o);var p=new OpenLayers.Size(21,25),q=new OpenLayers.Pixel(-p.w/2,-p.h),r=new OpenLayers.Icon("/resources/yritykset/assets/images/marker-blue.png",p,q);o.addMarker(new OpenLayers.Marker(new OpenLayers.LonLat(f,g),r))}a.addControl(new OpenLayers.Control.MousePosition),a.addControl(new OpenLayers.Control.LayerSwitcher),a.addControl(new OpenLayers.Control.ScaleLine),a.addControl(new OpenLayers.Control.OverviewMap),a.zoomToMaxExtent(),a.setCenter([f,g],i,!1,!1),a.render("map")}var j,k=a.forestValue;a.forestValueReportUrl;e.getUser(function(a){b.user=a}),b.init=function(){b.isStarting=!0,i(j,2,455739.1875,7050000.625)},b.forestValueReportUrl=function(){if(console.log("ForestValueReportUrl metodin alku. $scope",b),console.log("ForestValueReportUrl. forestValue: ",k),k=b.searchForestValueForm.searchForm.forestValue.$modelValue,console.log("newForestValue metodin alku. Hakukentst lhetetty arvo: ",k),null!=k&&""!==k){console.log("ForestValueReportUrl iffiss. forestValue: ",k),console.log("ForestValueReportUrl ennen promisen kutsua. forestValue: ",k);var a=f.getForestValueReportUrl(k);console.log("ForestValueReportUrl promisen kutsun jlkeen. promise",a),a.then(function(a){b.url=a.data})}},b.newForestValue=function(){if(b.isStarting=!1,k=b.searchForestValueForm.searchForm.forestValue.$modelValue,b.forestValueReady=!1,null!=k&&""!==k){b.isSearching=!0;f.checkForestValue(k).then(function(a){a?(b.data=a.data,i(j)):console.log("Error: Unable to find forestValue or interface is down")}),h()}}}]),angular.module("ytApp").controller("FilterCtrl",["$window","$scope","SearchResult","$timeout","messageBusService","AuthService",function(a,b,c,d,e,f){var g=a._;b.yt=a.yt,b.filterMobile=!1,b.isSearching=!1,b.isSearchComplete=!1,b.loadingFilters=!0,b.searchQuery=b.yt.query,b.results=b.yt.searchResults,b.searchResultCount=b.yt.searchResults.length,b.searchLength=100,b.order="-turnover",b.orderRules=["!turnover","-turnover"],b.searchType="BUSINESS",b.maxResults=2e3;var h=null;b.orderResultsBy=function(a){if(b.isSearchComplete){var c="";"-"===a.substr(0,1)&&(c="-",a=a.substr(1)),b.order===c+a?"-"===c?(b.order=a,b.orderRules=["!"+a,a]):(b.order="-"+a,b.orderRules=["!"+a,"-"+a]):(b.order=c+a,b.orderRules=["!"+a,c+a])}},b.regionResults=function(a,c){var d=c||b.results;return g.filter(d,{county:a})||[]},b.cityResults=function(a,c){var d=c||b.results;return g.filter(d,{city:a})||[]},b.turnoverResults=function(a,c){var d=g.find(b.filters.turnover.filterClasses,{code:a});if(d){var e=c||b.results;return(d.upperLimit&&"null"!==d.upperLimit?d.lowerLimit&&"null"!==d.lowerLimit?g.filter(e,function(a){return a.turnover>=d.lowerLimit&&a.turnover<=d.upperLimit}):g.filter(e,function(a){return a.turnover<=d.upperLimit}):g.filter(e,function(a){return a.turnover>=d.lowerLimit}))||[]}return[]},b.personnelResults=function(a,c){var d=g.find(b.filters.personnel.filterClasses,{code:a});if(d){var e=c||b.results;return(d.upperLimit&&"null"!==d.upperLimit?d.lowerLimit&&"null"!==d.lowerLimit?g.filter(e,function(a){return a.personnel>=d.lowerLimit&&a.personnel<=d.upperLimit}):g.filter(e,function(a){return a.personnel<=d.upperLimit}):g.filter(e,function(a){return a.personnel>=d.lowerLimit}))||[]}return[]},b.countryResults=function(a,c){var d=c||b.results;return g.filter(d,{country:a})||[]},b.branchResults=function(a,c){var d=c||b.results;if(a){var e=a.substr(0,2)+""+a.substr(2).replace(/0+$/,"");if(e){return g.filter(d,function(a){return!!a.primaryBusinessAreaCode&&(0===a.primaryBusinessAreaCode.indexOf(e)&&e.length<=a.primaryBusinessAreaCode.length)})||[]}return[]}return[]},b.filters={branch:{filterFunction:b.branchResults,results:{}},country:{filterFunction:b.countryResults,results:{}},region:{filterFunction:b.regionResults,results:{}},city:{filterFunction:b.cityResults,results:{}},turnover:{filterFunction:b.turnoverResults,results:{}},personnel:{filterFunction:b.personnelResults,results:{}}},b.filters.branch.filterClasses=b.yt.branches,b.filters.country.filterClasses=b.yt.countries,b.filters.personnel.filterClasses=b.yt.personnelClasses,
b.filters.turnover.filterClasses=b.yt.turnoverClasses,b.filters.region.filterClasses=g.chain(b.results).filter({country:"FI"}).map(function(a){return{name:a.county,code:a.county}}).uniqBy("name").value(),b.filters.city.filterClasses=g.chain(b.results).map(function(a){return{name:a.city,code:a.city}}).uniqBy("name").value(),b.filteredResults=b.results,b.filterResults=function(a,c){b.loadingFilters=!0;var d=b.results,e=b.filters;angular.forEach(e,function(a,e){if(e!==c){var f=d,h=[];a.resultsBeforeFiltering=d,a.filterOn=!1,angular.forEach(a.results,function(b,c){!0===b?h.push(a.filterFunction(c,f)):delete a.results[c]}),h.length?(d=g.chain(h).flatten().uniq().value(),a.filterOn=!0,a.resultsAfterFiltering=g.chain(h).flatten().uniq().value()):(a.results={},a.resultsAfterFiltering=b.results)}}),b.filteredResults=d,b.countResults(d,c)},b.countResults=function(){var a=b.filters;angular.forEach(a,function(b,c){var d=b.resultsBeforeFiltering;angular.forEach(a,function(a,b){b!==c&&a.filterOn&&(d=g.intersection(d,a.resultsAfterFiltering))});var e=!1;angular.forEach(b.filterClasses,function(a){var c=b.filterFunction(a.code,d)||[];c.length>0?(a.count=c.length,a.show=!0,e=!0):(a.count=0,g.has(b.results,a.code)&&(a.show=!0,e=!0))}),b.showFilterBox=e}),b.loadingFilters=!1},b.executeAsyncSearch=function(){b.searchResultCount>b.searchLength?(b.isSearching=!0,e.emit("searchResults:executeAsyncSearch"),h=c.query({q:b.searchQuery,type:b.searchType,c:b.country,results:b.maxResults}),h.$promise.then(function(a){b.results=a,b.filteredResults=b.results,b.isSearching=!1,b.isSearchComplete=!0,e.emit("searchResults:queried",a),h=null,b.filters.region.filterClasses=g.chain(b.results).filter({country:"FI"}).map(function(a){return{name:a.county,code:a.county}}).uniqBy("name").value(),b.filters.city.filterClasses=g.chain(b.results).map(function(a){return{name:a.city,code:a.city}}).uniqBy("name").value(),b.countResults()})):(b.isSearchComplete=!0,b.countResults())},e.on("user:updated",function(){f.getUser(function(a){a.isAuthenticated()&&b.executeAsyncSearch()})}),e.on("login:success",function(){b.executeAsyncSearch()})}]),angular.module("ytApp").controller("LoginCtrl",["$scope","AuthService","messageBusService","$http",function(a,b,c,d){function e(){a.user="",a.password="",a.remember=!1}a.loginInProgress=!1,e(),c.on("login:success",function(){a.loginForm.$setPristine(!0)}),c.on("login:changePassword",function(){a.loginForm.$setPristine(!0)}),c.on("login:failed",function(){a.loginInProgress=!1}),c.on("login:failed-unconfirmed",function(){a.loginInProgress=!1}),a.login=function(){a.loginInProgress=!0,b.login(a.user,a.password,a.remember)}}]),angular.module("ytApp").controller("LogoutCtrl",["$scope","AuthService",function(a,b){a.logout=function(){b.logout()}}]),angular.module("ytApp").controller("MobileNavCtrl",["$scope","$window",function(a,b){function c(a){return a.includes("&")?a.substring(0,a.indexOf("&"))+" - UUTTA":a}a.navigate=function(a){var c="";void 0!==a&&(c=b.location.protocol+"//"+b.location.host+a),b.location.href!==c&&""!==c&&(b.location.href=c)},a.nav=[],a.init=function(){var b=angular.element.find(".nav-company a"),d=null;angular.forEach(b,function(b){var e=angular.element(b),f={name:c(e.html()),isNext:e.parent().hasClass("next"),isPrev:e.parent().hasClass("prev"),isSelected:e.parent().hasClass("active"),url:e.attr("href")};a.nav.push(f),f.isSelected&&(d=e.parent()[0])});for(var e=angular.element.find(".nav-scroll-wrapper")[0],f=0,g=d;g!==e;g=g.offsetParent)f+=g.offsetLeft;var h=f-(e.offsetWidth-d.offsetWidth)/2;e.scrollTo({top:0,left:h,behavior:"instant"})},a.$watch("newLocation",function(b){a.navigate(b)})}]),angular.module("ytApp").controller("OneClickPayCtrl",["$window","$scope",function(a,b){b.processingPayment=!1,b.processPayment=function(){b.processingPayment||(a.location.href="/yritykset/api/purchase/click",b.processingPayment=!0)}}]),angular.module("ytApp").controller("PopupCtrl",function(){this.style={top:0},this.visible=!1,this.show=function(){this.visible=!0},this.hide=function(){this.visible=!1},this.getScrollPosition=function(){return void 0!==window.pageYOffset?window.pageYOffset:(document.documentElement||document.body.parentNode||document.body).scrollTop},this.setTopValue=function(){this.style.top=this.getScrollPosition()},this.showAndPosition=function(){this.setTopValue(),this.show()}}),angular.module("ytApp").controller("ReportAvailabilityCtrl",["globalsService","messageBusService","shoppingCartService","reportAvailabilityService","$scope",function(a,b,c,d,e){b.on("shoppingCart:loaded",function(){d.assignProductAvailabilities(a.businessId(),c.products,a.countryCode())})}]),angular.module("ytApp").controller("SearchCtrl",["$window","$scope","SearchResult","$timeout","messageBusService",function(a,b,c,d,e){function f(){return!!b.searchForm&&!b.searchForm.$invalid}function g(){b.isSearching=!1,k&&(k.$cancelRequest(),k=null),l&&d.cancel(l)}function h(){k&&(k.$cancelRequest(),k=null),b.searchResultCount=0,e.emit("searchResults:cancelled")}function i(){b.searchResults=[],b.searchResultCount=0,e.emit("searchResults:cleared"),b.closable.close()}function j(a,f,i){g(),!0===b.isSearchSubmitted?(h(),g()):l=d(function(){h(),b.isSearching=!0,c.resultCount({q:a,type:f,c:i}).$promise.then(function(a){b.searchResultCount=a.resultCount,e.emit("searchResultCount:queried",a)}),k=c.query({q:a,type:f,c:i}),k.$promise.then(function(a){b.isSearching=!1,b.closable.open(),b.searchResults=a,e.emit("searchResults:queried",a),k=null})},500)}b.yt=a.yt,b.searchQuery=a.yt.query||"",b.searchMode=b.searchMode||"BUSINESS",b.searchCountry=b.searchCountry||"UNKNOWN",b.searchResults=[],b.searchResultCount=0,b.isSearching=!1,b.isSearchSubmitted=!1;var k=null,l=null;b.searchFieldFocused=function(){e.emit("searchResults:current",{scope:b,results:b.searchResults}),b.closable.open()},b.submitSearchQuery=function(a){f()?(b.isSearchSubmitted=!0,g()):a.preventDefault()},b.shouldShowSearchResults=function(){return f()&&b.closable.opened},b.setSearchCountry=function(a){b.searchCountry=a},b.$watch("searchQuery",function(a,c){a!==c&&(f()?j(a,b.searchMode,b.searchCountry):(h(),i(),g()),e.emit("searchQuery:changed",c,a)),e.emit("searchQuery:notChanged",c,a)}),b.$watch("searchMode",function(c,d){if(c!==d){if("FORESTVALUE"===c)return document.getElementById("header-bar__search-select").innerHTML="",void(a.location.href="/yritykset/tuotteet-ja-palvelut/metsan-hinta-arvio");f()?j(b.searchQuery,c,b.searchCountry):(h(),i(),g()),e.emit("searchMode:changed",d,c)}e.emit("searchMode:notChanged",d,c)})}]),angular.module("ytApp").controller("TabCtrl",["tabService",function(a){this.setTab=function(b){if(a.setTab(b),2===b){var c=document.getElementById("purchaseDataLayer"),d="";if(c&&(d=c.text),""!=d){var e=d.replace('{"step":1}','{"step":2}');document.getElementById("purchaseDataLayer").innerHTML=e}}},this.isActiveTab=function(b){return a.getTab()===b},this.getTab=function(){return a.getTab()},this.isPastTab=function(b){return a.getTab()>b}}]),angular.module("ytApp").controller("ToggleCtrl",function(){this.visible=!1,this.hide=function(){this.visible=!1},this.toggle=function(a){a&&a.stopPropagation(),this.visible=!this.visible}}),angular.module("ytApp").controller("ToggleCtrlDefaultOpen",function(){this.visible=!0,this.hide=function(){this.visible=!1},this.toggle=function(a){a&&a.stopPropagation(),this.visible=!this.visible}}),angular.module("ytApp").controller("TopListsCtrl",["$window","$scope",function(a,b){b.url=a.location.pathname}]),angular.module("ytApp").controller("ViewInfoCtrl",["$scope","$window",function(a,b){a.list=[{name:"screen.width",value:screen.width},{name:"$(window).width()",value:b.$(window).width()},{name:"window.innerWidth",value:window.innerWidth},{name:"$(document).width()",value:b.$(document).width()},{name:"screen.height",value:screen.height},{name:"$(window).height()",value:b.$(window).height()},{name:"window.innerHeight",value:window.innerHeight},{name:"$(document).height()",value:b.$(document).height()},{name:"window.devicePixelRatio",value:window.devicePixelRatio},{name:"window.orientation",value:window.orientation}]}]),angular.module("ytApp").controller("EmailCtrl",["$scope","AuthService","emailService","messageBusService",function(a,b,c,d){function e(){return i}function f(a){j=!1,i=a}function g(){return j}function h(a){return!a||0===a.length}var i=null,j=!1;d.on("login:success",function(){b.getUser(function(b){!a.text&&a.purchaseEmailCtrl&&setTimeout(function(){a.text=b.username,a.$apply()},500)})}),this.setEmail=function(a,b,d){h(a)||c.set(a,b,d)},this.removeEmail=function(a){c.remove(a)},this.sendEmail=function(){j=!0,c.send().success(function(){f(!0)}).error(function(){f(!1)})},this.getSendStatus=function(){return e()},this.isSendingEmail=function(){return g()},this.isSendingEmailFailed=function(){return!g()&&!1===e()},this.isSendingEmailSuccess=function(){return!g()&&e()}}]),angular.module("ytApp").controller("PurchaseInitCtrl",["$scope","purchaseInitService","shoppingCartService","$window","messageBusService",function(a,b,c,d,e){a.phonePaymentSuccessUrl="",a.phonePaymentNumber="",a.phonePaymentInitialized=!1,a.phonePaymentSelected=!1,a.processingPayment=!1,e.on("email:valid",function(){a.emailValid=!0}),e.on("email:invalid",function(){a.emailValid=!1}),this.cartContainstooManyProducts=function(){return c.shoppingCart.products.length>1},this.cartContainsInfoWatcherProduct=function(){return c.containsInfoWatcherProduct()},this.cartContainsValueReport=function(){return c.containsValueReport()},this.getPaymentProductName=function(){return c.shoppingCart.products[0].paymentProductName},this.showBankPayment=function(){a.phonePaymentSelected=!1},this.showPhonePayment=function(){a.phonePaymentSelected=!0},this.initPhonePayment=function(b){this.cartContainstooManyProducts()||this.cartContainsInfoWatcherProduct()||this.cartContainsValueReport()||a.emailValid&&(this.showPhonePayment(),a.phonePaymentInitialized||this.initPayment(b,this.getPaymentProductName()))},this.initCreditCardPayment=function(a,b){this.initPayment(a,b)},this.initBankPayment=function(a,b){this.cartContainsInfoWatcherProduct()||this.initPayment(a,b)},this.initPayment=function(c,e){function f(a){"GET"===a.type&&d.location.replace(a.action)}function g(a){if("POST"===a.type){var b=d.$("<form>").attr("action",a.action).attr("method",a.type).hide();if(a.parameters){var c=d.$("<input>").attr("type","submit").attr("name","s-t-1-40_submit").val("submit").hide().appendTo(b);for(var e in a.parameters)d.$("<input>").attr("type","text").attr("name",e).val(a.parameters[e]).prop("readonly",!0).hide().appendTo(b);b.appendTo("body"),c.click(function(a){a.stopPropagation()}),c.click()}b.remove()}}function h(b){"INLINE"===b.type&&(a.phonePaymentNumber=b.action,a.phonePaymentSuccessUrl="/yritykset/maksu/verifioi?DTSPAYId=D"+b.id,a.phonePaymentInitialized=!0)}a.emailValid&&(a.processingPayment=!0,b.initPurchase(c,e).success(function(a){f(a),g(a),h(a)}).error(function(a){f(a)}))}}]),angular.module("ytApp").controller("PurchaseStepsCtrl",["$scope","messageBusService","shoppingCartService","reportAvailabilityService","generateReportService","AuthService",function(a,b,c,d,e,f){var g=a.cart=c.shoppingCart,h=!1;b.on("shoppingCart:loaded",function(b){void 0===a.countryCode&&(a.countryCode=g.getUniqueCountryCodes()),d.assignProductAvailabilities(g.getUniqueBusinessIds(),c.products,a.countryCode),h=!0}),b.on("availabilities:loaded",function(){g.getAvailableProducts().forEach(function(a){"30"==a.reportId||"33"==a.reportId?(a.$generationDone=!0,a.$available=!0):e.generate(a)})}),this.cleanUnavailableProducts=function(){return g.products.forEach(function(a){a.isUnavailable()&&g.removeProduct(a,!1)}),!0},this.canContinueRegardingInfoWatcherReports=function(){var a=!1;return f.getUser(function(b){a=!!(b.username&&b.username.length>0)}),!c.containsInfoWatcherProduct()||a},a.isEmptyCart=function(){return h&&0===g.products.length}}]),angular.module("ytApp").controller("EligibilityCheckCtrl",["$scope","FinlandsStrongestEligibility","messageBusService",function(a,b,c){a.isLoadingEligibility=!1,a.eligibility=null,a.setSelectedResult=function(d,e){a.selectedResult=e,d.$preventNavigation=!0,a.isLoadingEligibility=!0,b.get({businessId:e.numericalBusinessId}).$promise.then(function(b){a.eligibility=b,a.isLoadingEligibility=!1,c.emit("fs:company:selected",{eligibility:b,company:e})})},a.clearSelectedResult=function(){a.selectedResult=null,a.eligibility=null,a.isLoadingEligibility=!1},a.isEligible=function(){return a.eligibility&&a.eligibility.isEligible},a.isNotEligible=function(){return a.eligibility&&!a.eligibility.isEligible}}]),angular.module("ytApp").controller("FinlandsStrongestOrderCtrl",["$scope","messageBusService","FinlandsStrongestSubscription","TrustedPartnerSubscription",function(a,b,c,d){a.order={subscription:1,language:1,address:{},billingAddress:{},subscriptions:[],additionalProduct:null,luotettavakumppanioptiot:[],certificateLevel:null,certificateUrl:null},c.query().$promise.then(function(b){a.order.subscriptions=b}),d.query().$promise.then(function(b){a.order.luotettavakumppanioptiot=b.map(function(a){return Object.assign(a,{checked:!1})})}),b.on("fs:company:selected",function(b,c){a.eligibility=c.eligibility,a.order.address=a.eligibility.address,a.order.companyName=c.company.name,a.order.businessId=c.company.businessId,a.order.certificateLevel=c.eligibility.level,a.order.certificateUrl=c.eligibility.certificateUrl,a.order.certificateImageAltText=c.eligibility.certificateImageAltText}),a.processOrderForm=function(){a.orderForm.$invalid||0!==a.order.subscriptions.length&&(b.emit("fs:order:validated",a.order),a.tabCtrl.setTab(3))},a.removeLuotettavakumppaniSelection=function(a){angular.forEach(a,function(a){a.checked=!1})},a.updateSelection=function(b,c){angular.forEach(c,function(a,c){b!=c&&(a.checked=!1)});var d=a.order.luotettavakumppanioptiot.find(function(a){return a.checked});a.order.additionalProduct=d?d.id:null}}]),angular.module("ytApp").controller("FinlandsStrongestSubmitCtrl",["$scope","messageBusService","$http","globalsService",function(a,b,c,d){function e(b){a.isSubmittingOrder=b}function f(b){a.submittingFailed=b}function g(b){e(!1),b&&"SUCCESS"===b.response&&a.tabCtrl.setTab(4)}function h(){e(!1),f(!0)}e(!1),f(!1),a.order={subscriptions:[],language:1,luotettavakumppanioptiot:[]},b.on("fs:order:validated",function(b,c){a.order=c}),a.submitOrderForm=function(){e(!0),f(!1),c.post("/yritykset/api/certificate/finlands-strongest/submit",a.order).success(g).error(h)},a.goBack=function(){e(!1),f(!1),a.tabCtrl.setTab(2)},a.getSelectedSubscription=function(){var b;return a.order.subscriptions.forEach(function(c){c.order===a.order.subscription&&(b=c)}),b||{}},a.getTotalPrice=function(){var b=a.getSelectedSubscription(),c=a.getAdditionalProduct(),d=b.amount;return c&&(d+=c.amount),String(d)},a.getSelectedLanguage=function(){return d.getLanguageById(a.order.language)},a.shouldShowBillingAddress=function(){var b=a.order;return b&&b.billingAddress&&b.billingAddress.streetAddress&&b.billingAddress.streetAddress.length>0},a.shouldShowAdditionalBillingInformation=function(){var b=a.order;return b&&b.additionalBillingInfo&&b.additionalBillingInfo.length>0},a.shouldShowAdditionalProduct=function(){var b=a.order;return b&&b.additionalProduct},a.getAdditionalProduct=function(){var b=a.order;return b.luotettavakumppanioptiot.find(function(a){return a.id===b.additionalProduct})}}]),angular.module("ytApp").controller("AddToShoppingCartButtonCtrl",["$scope","shoppingCartService","globalsService","datalayerService","messageBusService",function(a,b,c,d,e){a.cart=b.shoppingCart,a.businessId=null,a.reportId=null,a.countryCode=null,a.product=null,a.isProductInShoppingCart=!1,a.addToShoppingCartButtonClicked=!1,a.init=function(c){a.reportId=c.reportId,a.businessId=c.businessId,a.countryCode=c.countryCode,e.on("shoppingCart:loaded",function(){a.product=b.getProductByBusinessIdAndReportId(a.businessId,a.reportId,a.countryCode)})},a.addIntoCartIfPossible=function(){if(25==a.reportId&&null==a.product&&(a.product=b.getProductByBusinessIdAndReportId(a.businessId,a.reportId,a.countryCode)),26==a.reportId&&null==a.product&&(a.product=b.getProductByBusinessIdAndReportId(a.businessId,a.reportId,a.countryCode)),console.log("NYT TUOTE 2: ",a.reportId),25==a.reportId||26==a.reportId||33==a.reportId)var c=!0;else var c=!a.product.isLoadingAvailability()&&!a.product.isUnavailable();return c&&a.cart.addProduct(a.product),!1},a.addSolvencyMeterIntoCartIfPossible=function(){return a.addToShoppingCartButtonClicked=!0,!a.product.isLoadingAvailability()&&!a.product.isUnavailable()&&a.reportWithInputForm.inputAmount.$valid&&a.cart.addProduct(a.product),!1},a.addIntoCartIfPossibleEnglish=function(){return!a.product.isLoadingAvailability()&&!a.product.isUnavailable()&&a.cart.addProduct(a.product,!1,"EN"),!1},a.addIntoCartIfPossibleSvenska=function(){return!a.product.isLoadingAvailability()&&!a.product.isUnavailable()&&a.cart.addProduct(a.product,!1,"SV"),!1}}]),angular.module("ytApp").controller("AddToShoppingCartAndOpenOrderButtonCtrl",["$scope","$window","$http","shoppingCartService","globalsService","datalayerService","messageBusService",function(a,b,c,d,e,f,g){function h(a){a&&"OK"===a.status?b.location.href="/yritykset/ostoskori":i(a)}function i(a){a.errorType?alert("Error"):a.error&&alert("Error")}a.cart=d.shoppingCart,a.businessId=null,a.reportId=null,a.product=null,a.isProductInShoppingCart=!1,a.addToShoppingCartButtonClicked=!1,a.init=function(b){a.reportId=b.reportId,a.businessId=b.businessId,g.on("shoppingCart:loaded",function(){a.product=d.getProductByBusinessIdAndReportId(a.businessId,a.$parent.company.id,a.reportId)})},a.storeBignetPageForm=function(b,e){console.log("storeBignetPageForm businessId: "+b+", countryCode: "+a.countryCode),a.product=d.getProductByBusinessIdAndReportId(b,30,e);var f=a.cart;a.ShowSpinner=!0,f.products.forEach(function(a){f.removeProduct(a,!1)}),f.addProduct(a.product),c.post("/yritykset/api/storebignetdata",JSON.stringify(a.company)).success(h).error(i)},a.addIntoCartIfPossible=function(){if(console.log("SMEC-226 DDYS... !!!",a),25==a.reportId&&null==a.product&&(a.product=d.getProductByBusinessIdAndReportId(a.businessId,a.reportId,a.countryCode)),30==a.reportId&&null==a.product&&(console.log("haetaan tuote 30 !!! 28.1.2022"),a.product=d.getProductByBusinessIdAndReportId(a.businessId,a.reportId,a.countryCode)),console.log("NYT TUOTE 1: ",a.reportId),25==a.reportId||26==a.reportId||30==a.reportId||33==a.reportId)var c=!0;else var c=!a.product.isLoadingAvailability()&&!a.product.isUnavailable();if(c){var e=a.cart;a.ShowSpinner=!0,e.addProduct(a.product),e.hasProduct(a.product)&&!a.product.isUnavailable()&&(a.IsVisible=!1,a.IsVisible=!a.IsVisible,b.location.href="/yritykset/ostoskori")}return!1}}]),angular.module("ytApp").controller("ShoppingCartCtrl",["$scope","shoppingCartService","ShoppingCart","Product","messageBusService",function(a,b,c,d,e){a.cart=b.shoppingCart,c.query().$promise.then(function(c){d.query({businessIds:b.getBusinessIdsCSV(c),countryCode:b.getCountryCodesCSV(c)}).$promise.then(function(d){a.cart.initProducts(d,c),b.products=d,e.emit("shoppingCart:loaded")})})}]),angular.module("ytApp").controller("ShoppingCartItemsCtrl",["$scope","shoppingCartService",function(a,b){a.cart=b.shoppingCart}]),angular.module("ytApp").controller("SocialShareCtrl",["$scope","$window","ezfb",function(a,b,c){a.getUrl=function(){return b.location.href.split("yleiskuva")[0]+"taloustiedot"},a.shareFacebook=function(b){var d=a.getUrl();c.ui({method:"share_open_graph",action_type:"og.shares",action_properties:JSON.stringify({object:{"og:url":d,"og:title":b+" taloustiedot","og:description":"Suomen Asiakastieto Oy - Kaikki yritystiedot www.asiakastieto.fi/yritykset palvelusta","og:image":"https://www.asiakastieto.fi/resources/yritykset/assets/images/facebook_share.jpg"}})},function(a){})},a.shareWhatsApp=function(){var c=a.getUrl(),d=b.encodeURIComponent(c);b.location.href="whatsapp://send?text="+d},a.shareMessenger=function(){var c=a.getUrl(),d=b.encodeURIComponent(c),e=b.encodeURIComponent("1154070341396655");b.location.href="fb-messenger://share?link="+d+"&app_id="+e}}]),angular.module("ytApp").controller("EmptyCtrl",function(){}),angular.module("ytApp").controller("SelectBusinessIdCtrl",["$scope","SearchResult","messageBusService",function(a,b,c){function d(){a.errors={showSelectResultError:!1}}function e(){a.status={isLoadingProduct:!1}}function f(){a.selectedResult=null}var g=null;a.init=function(){f(),d(),e()},a.clearSelectedResult=function(){f(),d()},a.setSelectedResult=function(b,c){a.selectedResult=c,angular.element(document.querySelector("#businessId")).val(c.businessId),d(),b.$preventNavigation=!0},a.setPreviouslySelectedCompany=function(e){e&&(a.isSearching=!0,b.resultCount({q:e,type:"BUSINESS",c:"fi"}).$promise.then(function(b){a.searchResultCount=b.resultCount,c.emit("searchResultCount:queried",b)}),g=b.query({q:e,type:"BUSINESS",c:"fi",results:10}),g.$promise.then(function(b){a.isSearching=!1,c.emit("searchResults:queried",b),g=null,a.selectedResult=b[0],angular.element(document.querySelector("#businessId")).val(b[0].businessId),d(),event.$preventNavigation=!0}))}}]),angular.module("ytApp").controller("SearchBusinessIdCtrl",["$window","$scope","SearchResult","$timeout","messageBusService",function(a,b,c,d,e){function f(){return!!b.searchForm&&!b.searchForm.$invalid}function g(){b.isSearching=!1,k&&(k.$cancelRequest(),k=null),l&&d.cancel(l)}function h(){k&&(k.$cancelRequest(),k=null),b.searchResultCount=0,e.emit("searchResults:cancelled")}function i(){b.searchResults=[],b.searchResultCount=0,e.emit("searchResults:cleared"),b.closable.close()}function j(a,f,i){g(),!0===b.isSearchSubmitted?(h(),g()):l=d(function(){h(),b.isSearching=!0,c.resultCount({q:a,type:f,c:i}).$promise.then(function(a){b.searchResultCount=a.resultCount,e.emit("searchResultCount:queried",a)}),k=c.query({q:a,type:f,c:i,results:10}),k.$promise.then(function(a){b.isSearching=!1,b.closable.open(),b.searchResults=a,e.emit("searchResults:queried",a),k=null})},500)}b.yt=a.yt,b.searchQuery="",b.searchMode=b.searchMode||"BUSINESS",b.searchCountry=b.searchCountry||"UNKNOWN",b.searchResults=[],b.searchResultCount=0,b.isSearching=!1,b.isSearchSubmitted=!1;var k=null,l=null;b.searchFieldFocused=function(){e.emit("searchResults:current",{scope:b,results:b.searchResults}),b.closable.open()},b.submitSearchQuery=function(a){f()?(b.isSearchSubmitted=!0,g()):a.preventDefault()},b.shouldShowSearchResults=function(){return f()&&b.closable.opened},b.setSearchCountry=function(a){b.searchCountry=a},b.$watch("searchQuery",function(a,c){a!==c&&(f()&&""!==a?j(a,b.searchMode,b.searchCountry):(h(),i(),g()),e.emit("searchQuery:changed",c,a)),e.emit("searchQuery:notChanged",c,a)}),b.$watch("searchMode",function(a,c){a!==c&&(f()?j(b.searchQuery,a,b.searchCountry):(h(),i(),g()),e.emit("searchMode:changed",c,a)),e.emit("searchMode:notChanged",c,a)})}]),angular.module("ytApp").controller("SelectResultCtrl",["$scope","Product","shoppingCartService","reportAvailabilityService","messageBusService",function(a,b,c,d,e){function f(b){a.reportId=b.reportId,a.countryCode=b.countryCode,a.solvencyMeterAmountRequired=b.solvencyMeterAmountRequired||!1,a.solvencyMeterCreditAmount=null,a.businessIdNotRequired=b.businessIdNotRequired||!1}function g(){a.errors={showSelectResultError:!1,showDuplicateProductError:!1,showSolvencyMeterError:!1}}function h(){a.status={showAddedToCartMessage:!1,isLoadingProduct:!1}}function i(){a.solvencyMeterAmountRequired&&(a.solvencyMeterCreditAmount=null,a.solvencyMeterForm.$setPristine())}function j(){a.selectedResult=a.selectedProduct=null}function k(e){var f=e.numericalBusinessId,g=[f];b.query({businessIds:g}).$promise.then(function(b){c.products=c.products.concat(b),d.assignProductAvailabilities(g,b),void 0===a.countryCode&&(a.countryCode="FI"),a.selectedProduct=c.getProductByBusinessIdAndReportId(f,a.reportId,a.countryCode),a.status.isLoadingProduct=!1})}function l(b){if(!m())return!1;a.solvencyMeterAmountRequired&&(a.selectedProduct.creditAmount=a.solvencyMeterCreditAmount),a.businessIdNotRequired&&(a.selectedProduct=c.getProductByReportIdWhenBusinessIdNotRequired(a.reportId)),n.hasProduct(a.selectedProduct)?a.errors.showDuplicateProductError=!0:(b?n.addProduct(a.selectedProduct,!1,b):n.addProduct(a.selectedProduct),a.clearSelectedResult(),a.status.showAddedToCartMessage=!0)}function m(){return!a.isAddToCartButtonDisabled()&&(!!a.businessIdNotRequired||(a.selectedResult&&a.selectedProduct?!a.solvencyMeterAmountRequired||!a.solvencyMeterForm.$invalid||(a.errors.showSolvencyMeterError=!0,!1):(a.errors.showSelectResultError=!0,!1)))}var n=c.shoppingCart;a.init=function(a){f(a),j(),g(),h()},a.clearSelectedResult=function(){i(),j(),g(),a.status.isLoadingProduct=!1},a.setSelectedResult=function(b,c){a.selectedResult=c,g(),a.status.isLoadingProduct=!0,k(c),b.$preventNavigation=!0},a.addToShoppingCart=function(a){a.preventDefault(),l()},a.addToShoppingCartEnglish=function(a){a.preventDefault(),l("EN")},a.addToShoppingCartSwedish=function(a){a.preventDefault(),l("SV")},a.isAddToCartButtonDisabled=function(){return a.isLoadingAvailability()||a.isNotAvailable()},a.isNotAvailable=function(){return a.selectedProduct&&!1===a.selectedProduct.$available},a.isForestValueReady=function(){return a.forestValueReady},a.isLoadingAvailability=function(){return a.status.isLoadingProduct||a.selectedProduct&&!0===a.selectedProduct.$loadingAvailability},e.on("searchResults:current",function(){a.status.showAddedToCartMessage=!1})}]),angular.module("ytApp").controller("DecisionMakerSearchCtrl",["$window","$scope","SearchResult","messageBusService",function(a,b,c,d){b.yt=a.yt,b.results=b.yt.searchResults,b.searchResultCount=b.yt.searchResults.length,b.searchQuery=b.yt.query,b.searchType="PERSON",b.maxResults=2e3,b.searchLength=99,b.searchShowMore=100,b.order="-turnover",b.orderRules=["-turnover","-turnover"],b.isSearchFull=!1,b.isSearchComplete=!0;var e=null;b.orderResultsBy=function(a){b.isSearchFull||(b.isSearchComplete=!1,b.executeAsyncSearch());var c="";"-"===a.substr(0,1)&&(c="-",a=a.substr(1)),b.order===c+a?"-"===c?(b.order=a,b.orderRules=["!"+a,a]):(b.order="-"+a,b.orderRules=["!"+a,"-"+a]):(b.order=c+a,b.orderRules=["!"+a,c+a])},b.showMore=function(){b.isSearchFull?b.searchLength=b.searchLength+b.searchShowMore:(b.isSearchComplete=!1,b.executeAsyncSearch(),b.searchLength=b.searchLength+b.searchShowMore)},b.executeAsyncSearch=function(){b.searchResultCount>b.searchLength?(b.isSearching=!0,d.emit("searchResults:executeAsyncSearch"),e=c.query({q:b.searchQuery,type:b.searchType,c:b.country,results:b.maxResults}),e.$promise.then(function(a){b.results=a,b.filteredResults=b.results,b.isSearching=!1,b.isSearchComplete=!0,b.isSearchFull=!0,d.emit("searchResults:queried"),e=null})):b.isSearchComplete=!0}}]),angular.module("ytApp").controller("UserProfileCtrl",["$window","$scope","$http","purchaseInitService","messageBusService",function(a,b,c,d,e){b.editMode=!1,b.oneClickActive=!1,b.successMessage=!1,b.processingActivation=!1,b.processingChangePassword=!1,b.message="",b.showMessage=!1,b.showError=!1,b.toggleEdit=function(){b.editMode?b.editMode=!1:b.editMode=!0},b.isSuccess=function(){return b.successMessage=!0,b.successMessage},b.activateOneClick=function(){return b.processingActivation=!0,c({method:"GET",url:"/yritykset/kayttaja/profiili/one-click"}).success(function(){a.location.reload(!0),b.processingActivation=!1}).error(function(){b.processingActivation=!1,b.oneClickActive=!1})},this.changePassword=function(){return b.processingChangePassword=!0,c({method:"GET",url:"/yritykset/kayttaja/profiili/vaihda-salasana"}).success(function(a){b.message=JSON.parse(a),null!==b.message&&b.message.length>0&&(b.showMessage=!0),b.processingChangePassword=!1}).error(function(a,c){b.message=JSON.parse(a),null!==b.message&&b.message.length>0&&(b.showError=!0),b.processingChangePassword=!1})},this.removeCard=function(){return c({method:"GET",url:"/yritykset/kayttaja/profiili/poista-kortti"}).success(function(){}).error(function(){})},this.saveCard=function(){function b(b){"GET"===b.type&&a.location.replace(b.action)}function c(b){if("POST"===b.type){var c=a.$("<form>").attr("action",b.action).attr("method",b.type).hide();if(b.parameters){var d=a.$("<input>").attr("type","submit").attr("name","s-t-1-40_submit").val("submit").hide().appendTo(c);for(var e in b.parameters)a.$("<input>").attr("type","text").attr("name",e).val(b.parameters[e]).prop("readonly",!0).hide().appendTo(c);c.appendTo("body"),d.click(function(a){a.stopPropagation()}),d.click()}c.remove()}}d.initPurchase("save",null).success(function(a){b(a),c(a)}).error(function(a){b(a)})}}]),angular.module("ytApp").controller("InfoWatcherReportCtrl",["$scope","infoWatcherReportService",function(a,b){a.basicInfo=function(c){b.getBasicInfo(c).then(function(b){a.data=b.data})},a.responsiblePersons=function(c){b.getResponsiblePersons(c).then(function(b){a.data=b.data})},a.owners=function(c){b.getOwners(c).then(function(b){a.data=b.data})},a.mergers=function(c){b.getMergers(c).then(function(b){a.data=b.data})},a.ratingClass=function(c){b.getRatingClass(c).then(function(b){a.data=b.data})},a.creditQueries=function(c){b.getCreditQueries(c).then(function(b){a.data=b.data})},a.mbrainGraphDataType=function(c){b.getMbrainGraphDataType(c).then(function(b){a.data=b.data})},a.mbrainGraphDataStatus=function(c){b.getMbrainGraphDataStatus(c).then(function(b){a.data=b.data})}}]),angular.module("ytApp").controller("OrderedServicesCtrl",["$scope",function(a){a.showConfirmModal=function(b,c){""!==b?a.showInfoWatcherConfirmModal=!0:a.showOrderedServiceConfirmModal=!0,a.companyId=b,a.orderId=c},a.showConfirmModal=function(b,c,d){""!==b&&"25"!==d?a.showInfoWatcherConfirmModal=!0:a.showOrderedServiceConfirmModal=!0,a.companyId=b,a.orderId=c},a.closeConfirmModal=function(){a.showInfoWatcherConfirmModal=!1,a.showOrderedServiceConfirmModal=!1,a.companyId="",a.orderId=""}}]),angular.module("ytApp").controller("UserTitleCtrl",["$scope",function(a){function b(){return a.selected&&999===a.selected.id}function c(){$("#userTitleId").find("> option").each(function(){$(this).removeAttr("selected")}),a.showOtherUserTitle=!1,d=!1}a.showOtherUserTitle=!1;var d=!1;a.initOptions=function(c,d){a.userTitles=c.userTitles,a.setSelected(d),a.showOtherUserTitle=b()},a.userTitleChanged=function(){a.showOtherUserTitle=b(),d=!0},a.setPreviouslySelectedTitle=function(c){c&&(a.setSelected(c),a.showOtherUserTitle=b())},a.setSelected=function(e){d&&c(),e&&angular.forEach(a.userTitles,function(c){c.id===e&&(a.selected=c,a.showOtherUserTitle=b())})}}]),angular.module("ytApp").controller("EmploymentCtrl",["$scope","employmentService",function(a,b){console.log(a),a.maxDisplayNum=3,a.displayNum=a.maxDisplayNum,a.showAll=!1,a.showAllLink=!1,a.noAdvertisementsFound=!1,a.onlyOneAdvertisement=!1,a.jobAdvertisements=function(c,d){d&&(a.maxDisplayNum=d,a.displayNum=a.maxDisplayNum),b.getCompanyJobAdvertisements(c).then(function(b){a.data=b.data,a.jobAdvertisementList=b.data.advertisements,a.jobAdvertisementList.length>a.maxDisplayNum?a.showAllLink=!0:a.showAllLink=!1,a.jobAdvertisementList.length>0?(a.noAdvertisementsFound=!1,1===a.jobAdvertisementList.length&&(a.onlyOneAdvertisement=!0)):a.noAdvertisementsFound=!0})},a.toggle=function(){a.showAll?(a.displayNum=a.maxDisplayNum,a.showAll=!1):(a.displayNum=a.jobAdvertisementList.length,a.showAll=!0)}}]),angular.module("ytApp").controller("RegisterNowModalCtrl",["$window","$scope","$cookies","$interval",function(a,b,c,d){function e(){var a=new Date;a.setDate(a.getDate()+60),void 0===c.get("registrationModalSeen")&&c.put("registrationModalSeen",!0,{expires:a,path:"/"})}function f(){a.location.href="/yritykset/rekisteroidy"}b.init=function(){if(b.showRegisterNowModal=!1,!c.get("registrationModalSeen")){
new Promise(function(c,e){function f(){(new Date).getTime()-a.localStorage.getItem("timer")>4e4&&(b.showRegisterNowModal=!0,d.cancel(g))}(a.localStorage.getItem("timer")<1||(new Date).getTime()-a.localStorage.getItem("timer")>12e4)&&a.localStorage.setItem("timer",(new Date).getTime());const g=d(f,2e3)})}},b.closeRegisterNowModal=function(){b.showRegisterNowModal=!1,e()},b.goToRegistrationPage=function(){b.showRegisterNowModal=!1,e(),f()}}]),angular.module("ytApp").directive("afterLoginSuccessRedirect",["$window","$timeout","messageBusService",function(a,b,c){return{restrict:"A",link:function(b,d,e){d.on("click",function(){c.on("login:success",function(){a.location.assign(e.to)})})}}}]),angular.module("ytApp").directive("authenticationCheck",["AuthService","messageBusService",function(a,b){var c=function(a,b){b.isAuthorized=a.isAuthenticated(),b.username=a.getName(),b.isDisabled=a.isDisabled(),b.userType=a.getUserType()};return{restrict:"A",link:function(d){a.getUser(function(a){c(a,d)}),b.on("user:updated",function(a,b){c(b,d)}),b.on("login:failed",function(){d.loginFailed=!0,d.loginUnconfirmedUser=!1}),b.on("login:failed-unconfirmed",function(){d.loginFailed=!0,d.loginUnconfirmedUser=!0}),b.on("login:success",function(){d.loginFailed=!1,d.loginUnconfirmedUser=!1})}}}]),angular.module("ytApp").directive("blurred",function(){var a=function(a){for(var b="abcdefghijklmnopqrstuvwxyz ",c="",d=0;d<a;d++)c+=b.charAt(Math.floor(Math.random()*b.length));return c};return{restrict:"AC",scope:{length:"@"},link:function(b){b.text=a(b.length)},template:'<span class="blurred-text">{{text}}</span>'}}),angular.module("ytApp").directive("centerAbsoluteElement",["$window",function(a){return function(b,c){var d=function(a){var b=a.width()/-2;a.css({"margin-left":b})};angular.element(a).bind("resize",function(){d(c)}),d(c)}}]),angular.module("ytApp").directive("colouredPercentage",function(){function a(a){return a=parseInt(a,10),a<0?"negative":a>0?"positive":"none"}return{restrict:"AC",scope:{showIcon:"@"},link:function(b,c){var d=c.text().replace(/[^\d.-]/g,"");if(""!==d){var e=a(d);if(c.addClass("number-highlights__change--"+e),"true"===b.showIcon){var f='<i class="icon icon--inline-left icon--change-'+e+'"></i>';c.prepend(f)}}}}}),angular.module("ytApp").directive("disableAfterSubmit",["$timeout",function(a){function b(a,b){a?b.attr("disabled","disabled"):b.removeAttr("disabled")}return{restrict:"AC",link:function(c,d,e){var f=c.$eval(e.formName);c.$watch(function(){return f.$valid},function(a){a&&d.removeAttr("disabled")}),d.bind("click",function(){a(function(){b(f.$valid,d)},0)})}}}]),angular.module("ytApp").directive("emailValidator",["messageBusService",function(a){return{restrict:"A",require:"ngModel",link:function(b,c,d,e){var f=/^[_A-Za-z0-9-]+(\.[_A-Za-z0-9-]+)*@[A-Za-z0-9-]+(\.[A-Za-z0-9-]+)*(\.[A-Za-z]{2,4})$/,g=function(b){return f.test(b)?(e.$setValidity("valid",!0),"email"===e.$name&&a.emit("email:valid"),b):(e.$setValidity("valid",!1),void("email"===e.$name&&a.emit("email:invalid")))};e.$parsers.push(g),e.$formatters.push(g)}}}]),angular.module("ytApp").directive("equalHeightBoxes",["$window","$timeout","messageBusService",function(a,b,c){return function(d,e){var f=function(a){var b=a.find(".box"),c=0;b.css({"min-height":0,height:"auto"}),angular.forEach(b,function(a){var b=angular.element(a);b.height()>c&&(c=b.height())}),b.css({"min-height":c})};angular.element(a).bind("resize",function(){f(e)}),d.$on("lastElement",function(a){f(e)}),c.on("resetHeight",function(){b(function(){f(e)})}),f(e)}}]),angular.module("ytApp").directive("gmap",["asyncScriptService","$window",function(a,b){var c=function(a,c){var g=d(a),h=e(g);f(h,c),b.google.maps.event.addDomListener(window,"resize",function(){var a=h.getCenter();b.google.maps.event.trigger(h,"resize"),h.setCenter(a)})},d=function(a){var b=document.createElement("div");return a.addClass("map"),a.prepend(b),b},e=function(a){var c={disableDefaultUI:!0,disableDoubleClickZoom:!0,draggable:!1,scrollwheel:!1,zoom:17};return new b.google.maps.Map(a,c)},f=function(a,c){var d=c.lat,e=c.lng,f=c.address;if(void 0===d||void 0===e){(new b.google.maps.Geocoder).geocode({address:f},function(c,d){if(d===b.google.maps.GeocoderStatus.OK){var e=c[0].geometry.location;g(a,e)}})}else{var h=new b.google.maps.LatLng(d,e);g(a,h)}},g=function(a,c){a.setCenter(c),new b.google.maps.Marker({position:c,map:a})};return{link:function(d,e,f){if(b.google&&b.google.maps)c(e,f);else{var g="mapsApi",h=f.key;a.load("//maps.googleapis.com/maps/api/js?key="+h+"&v=3.exp&sensor=false",g,d),d.$on(g,function(a,b){b?c(e,f):console.log("Map script loading timeouted.")})}}}}]),angular.module("ytApp").directive("graph",["highchartsService","chartDataService","$http",function(a,b,c){var d=function(a,c){a.highcharts(b.getChartObject(JSON.parse(atob(_fgd)),c))},e=function(){return new(a.get().setOptions)(b.getChartDefaults())};return{restrict:"AC",scope:{businessId:"@"},link:function(a,b,c){if(a.Highcharts||(a.Highcharts=e()),!c.businessId)throw new Error('The business id for the company needs to be specified, e.g. business-id="00000000".');if(!c.graphData)throw new Error('The desired data for the graph needs to be specified, e.g. graph-data="revenues".');if(!c.country)throw new Error('The country of the company has to be specified, e.g. country="fi"');d(b,c)}}}]),angular.module("ytApp").directive("graphinfowatcher",["highchartsService","chartDataService","infoWatcherReportService","$http",function(a,b,c,d){var e=function(a,c,d){a.highcharts(b.getChartObject(JSON.parse(atob(d)),c))},f=function(){return new(a.get().setOptions)(b.getChartDefaults())};return{restrict:"AC",scope:{businessId:"@"},link:function(a,b,d){if(a.Highcharts||(a.Highcharts=f()),!d.businessId)throw new Error('The business id for the company needs to be specified, e.g. business-id="00000000".');c.getCreditQueries(d.businessId).then(function(a){e(b,d,a.data.graphData)})}}}]),angular.module("ytApp").directive("graphinfowatchermbrain",["highchartsService","mbrainChartDataService","infoWatcherReportService","$http",function(a,b,c,d){var e=function(a,c,d){a.highcharts(b.getChartObject(JSON.parse(atob(d)),c))},f=function(){return new(a.get().setOptions)(b.getChartDefaults())};return{restrict:"AC",scope:{businessId:"@"},link:function(a,b,d){if(a.Highcharts||(a.Highcharts=f()),!d.businessId)throw new Error('The business id for the company needs to be specified, e.g. business-id="00000000".');if(!d.graphData)throw new Error('The graph data parameter is mandatory, should be either "sentiment" or "sources".');if(!d.name)throw new Error("The name parameter is mandatory. It is used in the tooltip texts.");c.getMbrainGraphData(d.businessId).then(function(a){e(b,d,a.data.graphData)})}}}]),angular.module("ytApp").directive("pageRefreshOnLoginLogout",["$window","messageBusService",function(a,b){return{restrict:"A",link:function(){function c(){a.location.reload()}b.on("login:success",function(){-1!==window.location.href.indexOf("/rekisteroidy/vahvista")||-1!==window.location.href.indexOf("/vaihda-salasana")?window.location.href="/yritykset":null!=window.location.href&&-1===window.location.href.indexOf("/ostoskori")&&-1===window.location.href.indexOf("/yritys/muokkaa")&&-1!=window.location.href.indexOf("/yritykset/fi")?a.location.href="/yritykset/kayttaja/tilatut-palvelut":c()}),b.on("logout:success",function(){c()})}}}]),angular.module("ytApp").directive("mustMatch",function(){return{require:"ngModel",link:function(a,b,c,d){var e="#"+c.mustMatch;b.add(e).on("keyup",function(){a.$apply(function(){var a=b.val()===angular.element(e).val();d.$setValidity("match",a)})})}}}),angular.module("ytApp").directive("outsideClick",["$window","$document",function(a,b){return{link:function(c,d,e){b.bind("click",function(b){var f=b.target,g=d[0];a.$(f).closest(g).length>0||c.$apply(e.outsideClick)})}}}]),angular.module("ytApp").directive("preventInvalidFormSubmit",function(){return{restrict:"AC",link:function(a,b,c){b.bind("submit",function(d){var e=a.$eval(c.name);if(e.$invalid)return d.preventDefault(),angular.forEach(e,function(a,b){"$"!==b[0]&&"searchForm"!==a.$name&&(a.$setViewValue(a.$viewValue),a.$pristine=!1,a.$dirty=!0)}),b.find(".ng-invalid").first().focus(),void a.$apply();c.customSubmit&&a.$eval(c.customSubmit)})}}}),angular.module("ytApp").directive("scalingImg",["$window",function(a){var b=function(a,b){var c=b.outerHeight();a.css({"min-height":c+"px"})},c=function(a,b){var c=b.outerHeight();a.css({"min-height":c+"px"})},d=function(a){var b={w:a.naturalWidth,h:a.naturalHeight};if(0===b.w&&0===b.h||void 0===b.w&&void 0===b.h){var c=new Image;c.src=a.src,0===c.width&&(c.width=a.width),0===c.height&&(c.height=a.height),b.w=c.width,b.h=c.height}return b},e=function(a){var b=d(a[0]);a.css({"margin-top":b.h/-2+"px"}),a.css({"margin-left":b.w/-2+"px"})};return{link:function(f,g){var h=g.find(".box--photo__image img"),i=g.find(".box--photo__image"),j=g.find(".box--photo__text"),k=300;b(h,j),angular.element(a).bind("resize",function(){b(h,j)}),h.bind("load",function(){var a=d(h[0]);a.w<a.h&&i.addClass("box--photo__image--portrait")}),h.bind("load",function(){var a=d(h[0]);a.w<=k&&a.h<=k&&(i.addClass("box--photo__image--logo"),c(i,j),e(h))})}}}]),angular.module("ytApp").directive("scrollableTable",["iScrollService","$window",function(a,b){var c=function(a){d(a)?a.addClass("table--scrollable"):a.removeClass("table--scrollable")},d=function(a){var b=a[0],c=b.style.overflow;c&&"visible"!==c||(b.style.overflow="hidden");var d=b.clientWidth<b.scrollWidth||b.clientHeight<b.scrollHeight;return b.style.overflow=c,d},e=function(b){return new(a.get())(b[0],{interactiveScrollbars:!0,fadeScrollbars:!1,scrollbars:!0,scrollX:!0,scrollY:!1})};return{restrict:"A",link:function(a,d){a.iScroll||(a.iScroll=e(d)),angular.element(b).bind("resize",function(){c(d)}),c(d)}}}]),angular.module("ytApp").directive("showValidationError",function(){function a(a,c,d){if(!a[c].$dirty)return!1;for(var e=b(d),f=0;f<e.length;f++){var g=e[f];if(a[c].$error[g])return!0}return!1}function b(a){return a.split(",")}function c(b,c,d){a(b.$eval(d.formName),d.target,d.validationKeys)?c.show():c.hide()}return{restrict:"AC",scope:!1,link:function(a,b,d){var e=d.formName+"."+d.target;a.$watch(e+".$dirty",function(){c(a,b,d)}),a.$watch(e+".$valid",function(){c(a,b,d)}),a.$watch(e+".$viewValue",function(){c(a,b,d)})}}}),angular.module("ytApp").directive("scrollToElement",["$window",function(a){return{scope:{scrollTo:"@"},link:function(b,c){c.on("click",function(){a.$("html, body").animate({scrollTop:a.$(b.scrollTo).offset().top},"fast")})}}}]),angular.module("ytApp").directive("bodyClick",["closeService",function(a){return{link:function(b,c,d){c.bind("click",function(){a.closeAllNonClicked(),a.clearClickedGroup()})}}}]),angular.module("ytApp").directive("closable",["closeService",function(a){return{link:function(b,c,d){b.closable={closed:!0,opened:!1,close:function(){this.opened=!(this.closed=!0)},open:function(){this.opened=!(this.closed=!1)},toggle:function(){this.opened=!(this.closed=!this.closed)}},a.registerClosable(b,d.closable),c.bind("click",function(){a.setClickedGroup(d.closable),a.processGroup(b.closable)})}}}]),angular.module("ytApp").directive("formCommit",["$document","$timeout",function(a,b){function c(a,b){var c,d={onsubmit:1};document.createEvent?(c=document.createEvent("HTMLEvents"),c.initEvent(b,!0,!0)):document.createEventObject&&(c=document.createEventObject(),c.eventType=b),c.eventName=b,a.dispatchEvent?a.dispatchEvent(c):a.fireEvent&&d["on"+b]?a.fireEvent("on"+c.eventType,c):a[b]?a[b]():a["on"+b]&&a["on"+b]()}return{require:"form",link:function(a,d,e,f){f.$commit=function(){b(function(){c(d[0],"submit")})}}}}]),angular.module("ytApp").directive("windowWidth",["$window",function(a){function b(b){function c(){b.width!==a.innerWidth&&(b.width=a.innerWidth,b.$digest())}function d(){angular.element(a).off("resize",c)}b.width=a.innerWidth,angular.element(a).on("resize",c),b.$on("$destroy",d)}return{link:b,restrict:"A"}}]),angular.module("ytApp").directive("validPhoneNumber",function(){return{require:"ngModel",link:function(a,b,c,d){var e=/(^$|^\+?(?:[0-9] ?){6,14}[0-9]$)/;d.$validators.validphone=function(a,b){return!!d.$isEmpty(a)||e.test(b)}}}}),angular.module("ytApp").directive("validPassword",function(){function a(a){return void 0===a||null===a||0===a.length||!(a.length<8)}return{require:"ngModel",link:function(b,c,d,e){e.$validators.strongpassword=function(b,c){return!!e.$isEmpty(b)||a(c)}}}}),angular.module("ytApp").directive("lastElementNotifier",["$timeout",function(a){return{restrict:"A",link:function(b,c,d){!0===b.$last&&a(function(){b.$emit(d.lastElementNotifier)})}}}]),angular.module("ytApp").factory("Product",["$resource",function(a){var b=a("/yritykset/api/products",{},{query:{method:"GET",isArray:!0}});return b.prototype.isAvailable=function(){return!1===this.$loadingAvailability&&!0===this.$available},b.prototype.isUnavailable=function(){return!1===this.$loadingAvailability&&!1===this.$available},b.prototype.isLoadingAvailability=function(){return!0===this.$loadingAvailability},b.prototype.isValueReportDataAvailable=function(){return!!this.$valueReportData},b.prototype.getValueReportData=function(){return this.$valueReportData},b.prototype.generationIsDone=function(){return!0===this.$generationDone},b.prototype.generationIsNotDone=function(){return!this.generationIsDone()},b.prototype.alreadyOrderedInfoWatcher=function(a){return 22===this.reportId&&a.indexOf(this.businessId)>-1},b.prototype.alreadyOrderedOrderedService=function(a){return 22!=this.reportId&&a.indexOf("productId="+this.reportId+",")>-1},b.prototype.isMonthlyCharged=function(){return 22===this.reportId||24===this.reportId},b.prototype.isYearlyCharged=function(){return 25===this.reportId||26===this.reportId},b.prototype.isValueReport=function(){return 23===this.reportId},b.prototype.isBusinessIdNotRequired=function(){return 24===this.reportId||26===this.reportId||33===this.reportId},b}]),angular.module("ytApp").factory("SearchResult",["$resource",function(a){return a("/yritykset/api/search",{},{query:{method:"GET",isArray:!0,cancellable:!0},resultCount:{method:"GET",url:"/yritykset/api/search/result-count",isArray:!1,cancellable:!0}})}]),angular.module("ytApp").factory("FinlandsStrongestEligibility",["$resource",function(a){return a("/yritykset/api/certificate/finlands-strongest/eligibility",{})}]),angular.module("ytApp").factory("FinlandsStrongestSubscription",["$resource",function(a){return a("/yritykset/api/certificate/finlands-strongest/subscriptions",{},{query:{method:"GET",isArray:!0}})}]),angular.module("ytApp").factory("TrustedPartnerSubscription",["$resource",function(a){return a("/yritykset/api/certificate/finlands-strongest/trustedpartner",{},{query:{method:"GET",isArray:!0}})}]),angular.module("ytApp").factory("ShoppingCart",["$resource","$http","$q",function(a,b,c){function d(){var a=[];a.push(e()),c.all(a).then(function(a){console.log("Bignet shopping cart product data removed from session")})}function e(){return b({method:"GET",url:"/yritykset/api/removebignetdata"})}function f(a,b){var c=!1;return angular.forEach(b.products,function(b){b.businessId===a.businessId&&b.reportId===a.reportId&&(c=!0)}),c}function g(){return{products:[]}}function h(a,b){var c=i.getProductFromCookieData(a.businessId,a.reportId,b);return angular.extend(a,c),a}var i=a("/yritykset/api/shopping-cart",{},{query:{method:"GET",isArray:!1,transformResponse:function(a,b){return angular.fromJson(decodeURI(a.replace(/%3A/g,":").replace(/%2C/g,",")))}},save:{method:"POST",transformRequest:function(a){return encodeURI(angular.toJson(a.getCookieData()))}}});return i.newInstance=function(){return new i(g())},i.prototype.addProduct=function(a,b,c,d){a.lang=c,this.products.push(a),b||this.$save()},i.prototype.removeProduct=function(a,b){console.log("OSTOSKORISTA POISTAMINEN: ",a.reportId),30==a.reportId&&d();var c=this.products.indexOf(a);this.products.splice(c,1),b||this.$save()},i.prototype.hasProduct=function(a){return-1!==this.products.indexOf(a)},i.prototype.getProduct=function(a){return this.products[a]},i.prototype.initProducts=function(a,b){var c=this;angular.forEach(a,function(a){f(a,b)&&c.products.push(h(a,b))})},i.getProductFromCookieData=function(a,b,c){var d=null;return angular.forEach(c.products,function(c){c.businessId===a&&c.reportId===b&&(d=c)}),d},i.prototype.getCookieData=function(){var a=g();return angular.forEach(this.products,function(b){a.products.push({businessId:b.businessId,reportId:b.reportId,creditAmount:b.creditAmount,lang:b.lang,countryCode:b.countryCode})}),a},i.prototype.getSum=function(a){var b=0;return(a||this.products).forEach(function(a){b+=a.price}),b.toFixed(2)},i.prototype.getAvailableProductsSum=function(){return this.getSum(this.getAvailableProducts())},i.prototype.getAvailableProducts=function(){var a=[];return this.products.forEach(function(b){b.isAvailable()&&a.push(b)}),a},i.prototype.getUniqueBusinessIds=function(){var a=[];return angular.forEach(this.products,function(b){-1===a.indexOf(b.businessId)&&a.push(b.businessId)}),a},i.prototype.getUniqueCountryCodes=function(){var a=[];return angular.forEach(this.products,function(b){-1===a.indexOf(b.countryCode)&&a.push(b.countryCode)}),a},i.prototype.isLoadingAvailability=function(){var a=!1;return angular.forEach(this.products,function(b){!0===b.$loadingAvailability&&(a=!0)}),a},i.prototype.isGeneratingReports=function(){var a=!1;return angular.forEach(this.products,function(b){b.generationIsNotDone()&&(a=!0)}),a},i.prototype.hasAvailableProducts=function(){if(console.log("hasAvailableProducts step begin..."),console.log("hasAvailableProducts step begin... this.isLoadingAvailability: ",this.isLoadingAvailability()),console.log("hasAvailableProducts step begin... this.isGeneratingReports: ",this.isGeneratingReports()),this.isLoadingAvailability()||this.isGeneratingReports())return console.log("hasAvailableProducts step return false!"),!1;var a=!1;return angular.forEach(this.products,function(b){b.isAvailable()&&(a=!0)}),a},i.prototype.userMustBeLoggedIn=function(){var a=!1;return angular.forEach(this.products,function(b){22!==b.reportId&&24!==b.reportId&&25!==b.reportId&&26!==b.reportId&&30!==b.reportId||(a=!0)}),a},i.prototype.cartContainsMobileApp=function(){var a=!1;return angular.forEach(this.products,function(b){26===b.reportId&&(a=!0)}),a},i.prototype.cartContainsMobileAppInProductList=function(a){var b=!1;return 26===a.reportId&&angular.forEach(this.products,function(a){26===a.reportId&&(b=!0)}),b},i.prototype.cartContainsForestValueReportInProductList=function(a){var b=!1;return 33===a.reportId&&angular.forEach(this.products,function(a){33===a.reportId&&(console.log("TRKE (jos tm tyhj niin estettv osto): ",a),b=!0)}),b},i.prototype.containsAlreadyOrderedInfoWatcherProduct=function(a){var b=!1;return angular.forEach(this.products,function(c){1==c.alreadyOrderedInfoWatcher(a)&&(b=!0)}),b},i.prototype.containsAlreadyOrderedOrderedServiceProduct=function(a){var b=!1;return angular.forEach(this.products,function(c){1==c.alreadyOrderedOrderedService(a)&&(b=!0)}),b},i.getUniqueBusinessIdsFromCookieData=function(a){var b=[];return angular.forEach(a.products,function(a){-1===b.indexOf(a.businessId)&&b.push(a.businessId)}),b},i.getUniqueCountryCodesFromCookieData=function(a){var b=[];return angular.forEach(a.products,function(a){-1===b.indexOf(a.countryCode)&&b.push(a.countryCode)}),b},i}]),angular.module("ytApp").service("User",["messageBusService",function(a){var b=function(){this.authenticated=!1,this.enabled=!0,this.username="",this.myBusinessId="",this.userType="",this.expiredPaymentMethods=!1,this.userTitleId=""};return b.prototype.isDisabled=function(){return!1===this.enabled},b.prototype.getName=function(){return this.username},b.prototype.getUserType=function(){return this.userType},b.prototype.getBusinessId=function(){return this.myBusinessId},b.prototype.isAuthenticated=function(){return!0===this.authenticated&&!1!==this.enabled},b.prototype.isExpiredPaymentMethods=function(){return this.expiredPaymentMethods},b.prototype.getUserTitleId=function(){return this.userTitleId},b.prototype.setUserData=function(b){this.authenticated=b.authenticated,this.enabled=b.enabled,this.username=b.name,this.userType=b.userType,this.expiredPaymentMethods=b.expiredPaymentMethods,this.userTitleId=b.userTitleId,a.emit("user:updated",this)},b}]),angular.module("ytApp").filter("price",function(){return function(a){return a?a.toString().trim().replace(".",",")+" ":""}}),angular.module("ytApp").filter("format",function(){return function(a){var b=arguments;return a.replace(/\{(\d+)\}/g,function(a,c){return b[1*c+1]})}}),angular.module("ytApp").filter("unsafe",["$sce",function(a){return a.trustAsHtml}]);SY8=      fxc	fxc
Gfy       O^partitionKey=%28https%2Casiakastieto.fi%29,:https://www.asiakastieto.fi/resources/yritykset/assets/scripts/cd904d39.scripts.js strongly-framed 1 security-info FnhllAKWRHGAlo+ESXykKAAAAAAAAAAAwAAAAAAAAEaphjojH6pBabDSgSnsfLHeAAAAAgAAAAAAAAAAAAAAAAAAAAEAOQFmCjImkVxP+7sgiYWmMt8FvcOXmlQiTNWFiWlrbpbqgwAAAAAAAAeSMIIHjjCCBnagAwIBAgIQFhdMQJG6r86BRl0LqehBFzANBgkqhkiG9w0BAQsFADCBujELMAkGA1UEBhMCVVMxFjAUBgNVBAoTDUVudHJ1c3QsIEluYy4xKDAmBgNVBAsTH1NlZSB3d3cuZW50cnVzdC5uZXQvbGVnYWwtdGVybXMxOTA3BgNVBAsTMChjKSAyMDEyIEVudHJ1c3QsIEluYy4gLSBmb3IgYXV0aG9yaXplZCB1c2Ugb25seTEuMCwGA1UEAxMlRW50cnVzdCBDZXJ0aWZpY2F0aW9uIEF1dGhvcml0eSAtIEwxSzAeFw0yNDA0MjMxMDQ2NDJaFw0yNTA1MTMxMDQ2NDFaMF8xCzAJBgNVBAYTAkZJMREwDwYDVQQHEwhIZWxzaW5raTEfMB0GA1UEChMWU3VvbWVuIEFzaWFrYXN0aWV0byBPeTEcMBoGA1UEAxMTd3d3LmFzaWFrYXN0aWV0by5maTCCAiIwDQYJKoZIhvcNAQEBBQADggIPADCCAgoCggIBAMMqCaMSiUDVT3ZyQ3L0+ivYC7uiNZUw6WVUrdAkcbvYzwh7kgPspSP5i50OkxLyEGUd4IJybSjIMIrn0jtoi0ENpIe+itXhAFh0EEs0EB9himAt6MQ1f9IOyLnajCLuRnZhMTGoPPB5hvnQoYw2uegoqlYljcw6zRx5UBr3z6IQ+Ee5KLYPmF6jBeZzWQytJaxUeSt+8Baj4JFspHIuQyWoIU+CsJn6KoPdJ83HCay04Ex8E6SLaQCf2Zd6fFBtAkZK4HSYALwl1yFgwCu8+SL62WEw6xKVeBn2r5nj3uWm4sAvETkyLQSTapP1IRgo4+P2PIcO3t57RD4ZFyOK8zT7lgJt3/0dayeT+5P2oTbS+LPfpREMNjci4ymlgZbWv0YMI3okeY03sFK7ynDJUEtP3iMdPcMO9Pg4jW7rfyPuOkfrLUmWpq7tXnVAEg6gEU4aJTCCAdHovJ7G/75UJOZLUKONzT7N+vQPBa9MiwlgGXKx1aO3YVe8/8+G/5JzwCjwbEqueAS+Z5aekPJNkvUtIpDv/Oeu2u9bHZSwT7vtMt1eTo9IPHKmimDzJmuHkbPVzt2AyUfKqWv6A6xJO4N2m9cK1Xcj4yNGxeoRqF5yttRCUWivLPV6ch5YdG1JbxLS4F8lzTzD48gPkGX1jbDj864/yuTPaNJkouLq7ELvAgMBAAGjggLoMIIC5DAMBgNVHRMBAf8EAjAAMB0GA1UdDgQWBBSHQdsyFzz7eUxDIKY7fOiEPOfWvzAfBgNVHSMEGDAWgBSConB03bxTP8971PfNf6dgxgpMvzBoBggrBgEFBQcBAQRcMFowIwYIKwYBBQUHMAGGF2h0dHA6Ly9vY3NwLmVudHJ1c3QubmV0MDMGCCsGAQUFBzAChidodHRwOi8vYWlhLmVudHJ1c3QubmV0L2wxay1jaGFpbjI1Ni5jZXIwMwYDVR0fBCwwKjAooCagJIYiaHR0cDovL2NybC5lbnRydXN0Lm5ldC9sZXZlbDFrLmNybDAvBgNVHREEKDAmghN3d3cuYXNpYWthc3RpZXRvLmZpgg9hc2lha2FzdGlldG8uZmkwDgYDVR0PAQH/BAQDAgWgMB0GA1UdJQQWMBQGCCsGAQUFBwMBBggrBgEFBQcDAjATBgNVHSAEDDAKMAgGBmeBDAECAjCCAX4GCisGAQQB1nkCBAIEggFuBIIBagFoAHcATnWjJ1yaEMM4W2zU3z9S6x3w4I4bjWnAsfpksWKaOd8AAAGPCpCk5gAABAMASDBGAiEAnO5kurdDpPmp4yBROLKArflbLzyDK6NJbtsek7WMIeUCIQCSIYk91NAeIIH+sO0n+FBSM8/8VKGFYwoTfge5lSZpOwB1AKLjCuRF772tm3447Udnd1PXgluElNcrXhssxLlQpEfnAAABjwqQpPEAAAQDAEYwRAIgWhEh//E8Z1th3E6GZ73cVVPbmFkT9hbAxYFDBN+4hp4CIA3trB2Rw+2RHbnv23JSt+lCKEvXKI1/h+gG8TpBUPqVAHYA5tIxY0B3jMEQQQbXcbnOwdJA9paEhvu6hzId/R43jlAAAAGPCpCk/gAABAMARzBFAiBW0b3vgL7iKcnh75Dzr6YKzI3WjEb/f3aQeDNWSobwtwIhAJDJ+YZGxOwzBEn9R3jjbRsnb5Wb6khV97+Ren+aGyLSMA0GCSqGSIb3DQEBCwUAA4IBAQBMVICh7tYc4TQ/7BTiyW3uetIrFh+Snr5zPJ1B2uvmGmHjckDAlVxVWScGaYYrEyIOQq/6E+UQcWv9V/6MO30U0AvGLJBxP/0/36/7qSsGGG+NZCotdu1firWMvRRvwiKdxes+Hg62cGAEnbnUmyn086kzFf6A3HSZL9jpY3J2yRVhQpN4S8cQ4YWSskiHnNdeBG9KcI9XDnitWbHUs6sKcfNbqYjkPi7l6pvA9TsTwBx93Ssxm0Ka3odf5KS9R87eBbY9J/xx1eIzF7W6Hmk1QCW1GhHTrImjPWw7X+pslOZFFBUi1vIrG0I9EuccOuW+V+cX6BuRDtr1829ZBKrHwDAAAwAAAAAAAQEAAAAAAAAEUDI1NgAAABBSU0EtUEtDUzEtU0hBNTEyAANmCjImkVxP+7sgiYWmMt8FvcOXmlQiTNWFiWlrbpbqgwAAAAAAAAeSMIIHjjCCBnagAwIBAgIQFhdMQJG6r86BRl0LqehBFzANBgkqhkiG9w0BAQsFADCBujELMAkGA1UEBhMCVVMxFjAUBgNVBAoTDUVudHJ1c3QsIEluYy4xKDAmBgNVBAsTH1NlZSB3d3cuZW50cnVzdC5uZXQvbGVnYWwtdGVybXMxOTA3BgNVBAsTMChjKSAyMDEyIEVudHJ1c3QsIEluYy4gLSBmb3IgYXV0aG9yaXplZCB1c2Ugb25seTEuMCwGA1UEAxMlRW50cnVzdCBDZXJ0aWZpY2F0aW9uIEF1dGhvcml0eSAtIEwxSzAeFw0yNDA0MjMxMDQ2NDJaFw0yNTA1MTMxMDQ2NDFaMF8xCzAJBgNVBAYTAkZJMREwDwYDVQQHEwhIZWxzaW5raTEfMB0GA1UEChMWU3VvbWVuIEFzaWFrYXN0aWV0byBPeTEcMBoGA1UEAxMTd3d3LmFzaWFrYXN0aWV0by5maTCCAiIwDQYJKoZIhvcNAQEBBQADggIPADCCAgoCggIBAMMqCaMSiUDVT3ZyQ3L0+ivYC7uiNZUw6WVUrdAkcbvYzwh7kgPspSP5i50OkxLyEGUd4IJybSjIMIrn0jtoi0ENpIe+itXhAFh0EEs0EB9himAt6MQ1f9IOyLnajCLuRnZhMTGoPPB5hvnQoYw2uegoqlYljcw6zRx5UBr3z6IQ+Ee5KLYPmF6jBeZzWQytJaxUeSt+8Baj4JFspHIuQyWoIU+CsJn6KoPdJ83HCay04Ex8E6SLaQCf2Zd6fFBtAkZK4HSYALwl1yFgwCu8+SL62WEw6xKVeBn2r5nj3uWm4sAvETkyLQSTapP1IRgo4+P2PIcO3t57RD4ZFyOK8zT7lgJt3/0dayeT+5P2oTbS+LPfpREMNjci4ymlgZbWv0YMI3okeY03sFK7ynDJUEtP3iMdPcMO9Pg4jW7rfyPuOkfrLUmWpq7tXnVAEg6gEU4aJTCCAdHovJ7G/75UJOZLUKONzT7N+vQPBa9MiwlgGXKx1aO3YVe8/8+G/5JzwCjwbEqueAS+Z5aekPJNkvUtIpDv/Oeu2u9bHZSwT7vtMt1eTo9IPHKmimDzJmuHkbPVzt2AyUfKqWv6A6xJO4N2m9cK1Xcj4yNGxeoRqF5yttRCUWivLPV6ch5YdG1JbxLS4F8lzTzD48gPkGX1jbDj864/yuTPaNJkouLq7ELvAgMBAAGjggLoMIIC5DAMBgNVHRMBAf8EAjAAMB0GA1UdDgQWBBSHQdsyFzz7eUxDIKY7fOiEPOfWvzAfBgNVHSMEGDAWgBSConB03bxTP8971PfNf6dgxgpMvzBoBggrBgEFBQcBAQRcMFowIwYIKwYBBQUHMAGGF2h0dHA6Ly9vY3NwLmVudHJ1c3QubmV0MDMGCCsGAQUFBzAChidodHRwOi8vYWlhLmVudHJ1c3QubmV0L2wxay1jaGFpbjI1Ni5jZXIwMwYDVR0fBCwwKjAooCagJIYiaHR0cDovL2NybC5lbnRydXN0Lm5ldC9sZXZlbDFrLmNybDAvBgNVHREEKDAmghN3d3cuYXNpYWthc3RpZXRvLmZpgg9hc2lha2FzdGlldG8uZmkwDgYDVR0PAQH/BAQDAgWgMB0GA1UdJQQWMBQGCCsGAQUFBwMBBggrBgEFBQcDAjATBgNVHSAEDDAKMAgGBmeBDAECAjCCAX4GCisGAQQB1nkCBAIEggFuBIIBagFoAHcATnWjJ1yaEMM4W2zU3z9S6x3w4I4bjWnAsfpksWKaOd8AAAGPCpCk5gAABAMASDBGAiEAnO5kurdDpPmp4yBROLKArflbLzyDK6NJbtsek7WMIeUCIQCSIYk91NAeIIH+sO0n+FBSM8/8VKGFYwoTfge5lSZpOwB1AKLjCuRF772tm3447Udnd1PXgluElNcrXhssxLlQpEfnAAABjwqQpPEAAAQDAEYwRAIgWhEh//E8Z1th3E6GZ73cVVPbmFkT9hbAxYFDBN+4hp4CIA3trB2Rw+2RHbnv23JSt+lCKEvXKI1/h+gG8TpBUPqVAHYA5tIxY0B3jMEQQQbXcbnOwdJA9paEhvu6hzId/R43jlAAAAGPCpCk/gAABAMARzBFAiBW0b3vgL7iKcnh75Dzr6YKzI3WjEb/f3aQeDNWSobwtwIhAJDJ+YZGxOwzBEn9R3jjbRsnb5Wb6khV97+Ren+aGyLSMA0GCSqGSIb3DQEBCwUAA4IBAQBMVICh7tYc4TQ/7BTiyW3uetIrFh+Snr5zPJ1B2uvmGmHjckDAlVxVWScGaYYrEyIOQq/6E+UQcWv9V/6MO30U0AvGLJBxP/0/36/7qSsGGG+NZCotdu1firWMvRRvwiKdxes+Hg62cGAEnbnUmyn086kzFf6A3HSZL9jpY3J2yRVhQpN4S8cQ4YWSskiHnNdeBG9KcI9XDnitWbHUs6sKcfNbqYjkPi7l6pvA9TsTwBx93Ssxm0Ka3odf5KS9R87eBbY9J/xx1eIzF7W6Hmk1QCW1GhHTrImjPWw7X+pslOZFFBUi1vIrG0I9EuccOuW+V+cX6BuRDtr1829ZBKrHZgoyJpFcT/u7IImFpjLfBb3Dl5pUIkzVhYlpa26W6oMAAAAAAAAFEjCCBQ4wggP2oAMCAQICDA7pTMMAAAAAUdN3hTANBgkqhkiG9w0BAQsFADCBvjELMAkGA1UEBhMCVVMxFjAUBgNVBAoTDUVudHJ1c3QsIEluYy4xKDAmBgNVBAsTH1NlZSB3d3cuZW50cnVzdC5uZXQvbGVnYWwtdGVybXMxOTA3BgNVBAsTMChjKSAyMDA5IEVudHJ1c3QsIEluYy4gLSBmb3IgYXV0aG9yaXplZCB1c2Ugb25seTEyMDAGA1UEAxMpRW50cnVzdCBSb290IENlcnRpZmljYXRpb24gQXV0aG9yaXR5IC0gRzIwHhcNMTUxMDA1MTkxMzU2WhcNMzAxMjA1MTk0MzU2WjCBujELMAkGA1UEBhMCVVMxFjAUBgNVBAoTDUVudHJ1c3QsIEluYy4xKDAmBgNVBAsTH1NlZSB3d3cuZW50cnVzdC5uZXQvbGVnYWwtdGVybXMxOTA3BgNVBAsTMChjKSAyMDEyIEVudHJ1c3QsIEluYy4gLSBmb3IgYXV0aG9yaXplZCB1c2Ugb25seTEuMCwGA1UEAxMlRW50cnVzdCBDZXJ0aWZpY2F0aW9uIEF1dGhvcml0eSAtIEwxSzCCASIwDQYJKoZIhvcNAQEBBQADggEPADCCAQoCggEBANo/ltBNuS9E59s5XptQ7lylYdpBZ1MJqgCajld/KWvbx+EhJKo60I1HI9LtchbwkSHSXbe4S6iDj7eRMmjPziWTLLJ9l8j+wbQXugmeA5CTe3xJgyJoipveR8MxmHoufUAL0u8+07KMqo9Iqf8A6ClYBve2k1qUcyYmrVgO5UK41epzeWRoUyW4hM+Ueq4GRQyja03Qxr7qGKQ28JKyuhyIjzpSf/debYMcnfAf5cPW3aV4kj2wbSzqyc+UQRlxRGi6RzwE6V26PvA19xW2nvIuFR4/R8jIOKdzRV1NsDuxjhcpN+rdBQEiu5Q2Ko1bNf5TGS8IRsEqsxpiHU4r2RsCAwEAAaOCAQwwggEIMA4GA1UdDwEB/wQEAwIBBjASBgNVHRMBAf8ECDAGAQH/AgEAMDMGCCsGAQUFBwEBBCcwJTAjBggrBgEFBQcwAYYXaHR0cDovL29jc3AuZW50cnVzdC5uZXQwMAYDVR0fBCkwJzAloCOgIYYfaHR0cDovL2NybC5lbnRydXN0Lm5ldC9nMmNhLmNybDA7BgNVHSAENDAyMDAGBFUdIAAwKDAmBggrBgEFBQcCARYaaHR0cDovL3d3dy5lbnRydXN0Lm5ldC9ycGEwHQYDVR0OBBYEFIKicHTdvFM/z3vU981/p2DGCky/MB8GA1UdIwQYMBaAFGpyJnrQHu995ztpUdRsjZ+QEmarMA0GCSqGSIb3DQEBCwUAA4IBAQA51Y6Yg2HILGPTcB0ZMMv2CazMadXJ3DdB8jIP73TDWPZ4Jwk0CJWSL9ffuKP9DoHppJzTP01oKxUxChXMUgST6JNQw9mx4uFotzoJdPE0WAo/d5hAuOZo/13kyEbF7IHXyYIYXIPOcdi8v6yZApPblJiE0pymtf5cu/BKryGswj9JJGfWLo7PrMxkFRhy5Wx301Koud2NrABKNRnUb3Ojde9rZMPgjYMSoYrnDoZN2LQgG75qpYxLaGbjK8dYC/tWENSR+x3TMVgQjETjdXsQnbU4sfaqyoFkbOjy4oFVl1F/4cInUKLJPFsAQ/ZbudWl/P8HUEBnB7BV8Ld+bi3MZgoyJpFcT/u7IImFpjLfBb3Dl5pUIkzVhYlpa26W6oMAAAAAAAAEQjCCBD4wggMmoAMCAQICBEpTjCgwDQYJKoZIhvcNAQELBQAwgb4xCzAJBgNVBAYTAlVTMRYwFAYDVQQKEw1FbnRydXN0LCBJbmMuMSgwJgYDVQQLEx9TZWUgd3d3LmVudHJ1c3QubmV0L2xlZ2FsLXRlcm1zMTkwNwYDVQQLEzAoYykgMjAwOSBFbnRydXN0LCBJbmMuIC0gZm9yIGF1dGhvcml6ZWQgdXNlIG9ubHkxMjAwBgNVBAMTKUVudHJ1c3QgUm9vdCBDZXJ0aWZpY2F0aW9uIEF1dGhvcml0eSAtIEcyMB4XDTA5MDcwNzE3MjU1NFoXDTMwMTIwNzE3NTU1NFowgb4xCzAJBgNVBAYTAlVTMRYwFAYDVQQKEw1FbnRydXN0LCBJbmMuMSgwJgYDVQQLEx9TZWUgd3d3LmVudHJ1c3QubmV0L2xlZ2FsLXRlcm1zMTkwNwYDVQQLEzAoYykgMjAwOSBFbnRydXN0LCBJbmMuIC0gZm9yIGF1dGhvcml6ZWQgdXNlIG9ubHkxMjAwBgNVBAMTKUVudHJ1c3QgUm9vdCBDZXJ0aWZpY2F0aW9uIEF1dGhvcml0eSAtIEcyMIIBIjANBgkqhkiG9w0BAQEFAAOCAQ8AMIIBCgKCAQEAuoS2ctueDGvimekwAad26jK4lUEaydphTlhyz/72gnm/c2EGCqUn2LNf00VOHHLWTjLycooP94MZ0GqAgABFHrDH55q/ElcnHKNoLwqHvWprDl5l8xx31dSFjXAhtLMy54ui1YY5ArG40kfO5MlJxDun3vtUfVe+8OhuwnmyOgtV4lCYFjITXC94VsHClLPyWuQnmp8k18bs0JslguPMwsRFxYyXegZrKhGfqQpuSDtv29QRGUL3jwe/9VNfnD70FyzmaaxOMkxid+q36OW7NLwZi66cUee3frVTsTMi5W3PcDwa+uKbZ7aD9I2lr2JMTeBYrGQ0EgP4to2UYySkcQIDAQABo0IwQDAOBgNVHQ8BAf8EBAMCAQYwDwYDVR0TAQH/BAUwAwEB/zAdBgNVHQ4EFgQUanImetAe733nO2lR1GyNn5ASZqswDQYJKoZIhvcNAQELBQADggEBAHmfHZbGtnk/Io2H04cDBGBqa5ouWYlzEaxD0fUT/405K8DyvU9wjKkv6hfEC1Se1BuWmDM8qK1iogB2q1lpbgYdfsS5RI2YrxLUYdsKGUZH8+v3Y8FABUCl0rf0tZo2v6mIdogEVQQrnId/Gjc8fi2lGtjUiV7Kvaw9bNhtr9Xzdg/NO4g4Ip1sk5rEPb+CG2U/pg9dqvzlshXKta3GvD3QhOjqBnKwTTkyeL8+EZwLpJ2aIfPwmwsweNvB3IdD/rxjmsrFwhzJx43/OxJYCOa2Pex6LE77g5bODDxph1RzpHPCk/9REKwVVAHY/AWxiaF/dIOaSdfcTnuKSG+LRfYAAAABAAAACGh0dHAvMS4xAAEAAAAAVXRsc2ZsYWdzMHgwMDAwMDAwMDp3d3cuYXNpYWthc3RpZXRvLmZpOjQ0M15wYXJ0aXRpb25LZXk9JTI4aHR0cHMlMkNhc2lha2FzdGlldG8uZmklMjkAAA== request-method GET response-head HTTP/1.1 200 OK
content-encoding: identity
cache-control: max-age=86400, public
server-timing: intid;desc=1bd2240c8f220887
accept-ranges: bytes
date: Sun, 23 Jun 2024 18:01:42 GMT
last-modified: Thu, 30 May 2024 06:45:26 GMT
content-type: application/javascript
content-length: 504278
 original-response-headers content-encoding: identity
cache-control: max-age=86400, public
server-timing: intid;desc=1bd2240c8f220887
accept-ranges: bytes
date: Sun, 23 Jun 2024 18:01:42 GMT
last-modified: Thu, 30 May 2024 06:45:26 GMT
content-type: application/javascript
content-length: 504278
 ctid 2 net-response-time-onstart 118 net-response-time-onstop 303  